const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/vendor_qrcode-DMpc0nVC.js","assets/vendor-CaKJR5nu.js"])))=>i.map(i=>d[i]);
import{u as ee,a as i,j as e,b as Se,M as Ce,L as Fe,C as $e,c as Le,E as Re,d as Oe,P as je,A as rs,m as Z,e as ue,f as be,X as ls,h as _e,S as is,i as ie,I as qe,k as Ge,l as ms,U as fe,B as xe,F as Me,n as Je,o as xs,p as Ee,H as ve,q as Ae,K as hs,s as Qe,t as us,v as gs,w as Ye,x as fs,y as Ne,z as Ie,D as ze,G as ye,J as bs,R as ns,N as We,T as ps,O as Xe,Q as Pe,V as js,W as Ns,Y as vs,Z as ys,_ as ws,$ as ks,a0 as Ss,a1 as os,a2 as Cs,a3 as Ls,a4 as Y,a5 as Ms,a6 as As}from"./vendor-CaKJR5nu.js";import{Q as Ue,a as Ke}from"./vendor_qrcode-DMpc0nVC.js";(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))l(t);new MutationObserver(t=>{for(const c of t)if(c.type==="childList")for(const u of c.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&l(u)}).observe(document,{childList:!0,subtree:!0});function r(t){const c={};return t.integrity&&(c.integrity=t.integrity),t.referrerPolicy&&(c.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?c.credentials="include":t.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function l(t){if(t.ep)return;t.ep=!0;const c=r(t);fetch(t.href,c)}})();const zs="https://medi-trap-backend-2.onrender.com",re=zs,X=s=>{const a=s.startsWith("/")?s:`/${s}`;return`${re}${a}`};function we(s,a){if(!s||!a)return!1;try{const r=String(a);if(Array.isArray(s.stockists))for(const t of s.stockists){const c=t&&(t.stockist||t._id||t.id||t);if(c&&String(c).includes(r))return!0}const l=[s.stockist,s.stockistId,s.seller,s.sellerId,s.vendor,s.vendorId,s.supplier,s.supplierId];for(const t of l){if(!t)continue;const c=t&&(t._id||t.id||t);if(String(c).includes(r))return!0}for(const t of Object.keys(s))if(/stock|seller|vendor|supplier/i.test(t)){const c=s[t];if(!c)continue;const u=c&&(c._id||c.id||c);if(String(u).includes(r))return!0}}catch{}return!1}function ae(s){return s&&(s.name||s.brandName||s.title||s.medicineName||s.displayName)||""}function ke(s,a){if(!s||!a)return!1;try{const r=p=>String(p||"").toLowerCase().replace(/[^a-z0-9\s]/g," ").replace(/\s+/g," ").trim(),l=r(s);if(!l)return!1;const t=new Set,c=[a.Medicines,a.medicines,a.items,a.itemsList,a.companies];for(const p of c)if(Array.isArray(p))for(const d of p)t.add(r(d));a.title&&t.add(r(a.title));const u=l.split(" ").filter(p=>p.length>2);if(u.length===0)return!1;for(const p of t){if(!p)continue;if(p.includes(l)||l.includes(p))return!0;const d=p.split(" ").filter(o=>o.length>2);for(const o of u)if(d.includes(o))return!0}}catch{}return!1}function ds(s,a){if(!s||!a)return 0;try{const r=d=>String(d||"").toLowerCase().replace(/[^a-z0-9\s]/g," ").replace(/\s+/g," ").trim(),l=r(s);if(!l)return 0;const t=new Set(l.split(" ").filter(d=>d.length>2));if(t.size===0)return 0;const c=new Set,u=[a.Medicines,a.medicines,a.items,a.itemsList,a.companies];for(const d of u)if(Array.isArray(d))for(const o of d)c.add(r(o));a.title&&c.add(r(a.title));let p=0;for(const d of c){if(!d)continue;const o=new Set(d.split(" ").filter(N=>N.length>2));let h=0;for(const N of t)o.has(N)&&h++;h>p&&(p=h)}return p}catch{return 0}}const he=({children:s})=>e.jsx("span",{className:"text-lg",children:s});function Ps({navigation:s}){var U,R;const a=(()=>{try{return ee()}catch{return null}})(),r=s||{navigate:g=>{a?a(g):window.location.href=g},goBack:()=>window.history.back()},[l,t]=i.useState(""),[c,u]=i.useState([]),[p,d]=i.useState(!1),[o,h]=i.useState("company"),[N,j]=i.useState(!1),[C,n]=i.useState([]),[b,f]=i.useState(!1),[I,v]=i.useState(!1),[m,A]=i.useState(!1),[k,B]=i.useState(null),[x,y]=i.useState([]);i.useEffect(()=>{let g=!0;return(async()=>{try{const[P,L,S]=await Promise.all([fetch(`${re}/api/stockist`),fetch(`${re}/api/medicine`),fetch(`${re}/api/company`)]),[M,F,W]=await Promise.all([P.json(),L.json(),S.json()]),V=F&&F.data||[],w=W&&W.data||[];if(g&&M&&M.data){const H=M.data.map(T=>{let J=V.filter(z=>we(z,T._id)).map(z=>ae(z)).filter(Boolean);if((!J||J.length===0)&&V.length>0){const z=new Set((T.Medicines||T.medicines||T.items||[]).map(se=>String(se).toLowerCase())),G=V.filter(se=>{const me=ae(se)||"";if(!me)return!1;if(ke(me,T))return!0;const pe=me.toLowerCase();for(const te of z)if(te&&(te.includes(pe)||pe.includes(te)))return!0;return!1}).map(se=>ae(se)).filter(Boolean);G.length>0&&(J=G)}const de=new Set(V.filter(z=>Array.isArray(z.stockists)?z.stockists.some(G=>String(G.stockist||G).includes(String(T._id))):!1).map(z=>z.company&&(z.company._id||z.company)?String(z.company._id||z.company):null).filter(Boolean)),K=new Set((T.companies||T.items||[]).map(z=>z?typeof z=="string"?String(z):z._id?String(z._id):z.id?String(z.id):null:null).filter(Boolean));if((!J||J.length===0)&&K.size>0){const z=V.filter(G=>{const se=G.company&&(G.company._id||G.company);return se&&K.has(String(se))}).map(G=>ae(G)).filter(Boolean);z.length>0&&(J=[...new Set([...J||[],...z])])}let ge=w.filter(z=>de.has(String(z._id))).map(z=>z.name?z.name:z.shortName||"").filter(Boolean);const Be=(Array.isArray(T.companies)?T.companies:[]).map(z=>{if(typeof z=="string"){const G=w.find(se=>String(se._id)===z||se.id===z);return G&&(G.name||G.shortName)||z}return z&&(z.name||z.shortName)?z.name||z.shortName:""}).filter(Boolean),De=Array.from(new Set([...Be||[],...ge||[]]));let Q=[];Array.isArray(T.medicines)&&T.medicines.length>0?Q=T.medicines.map(z=>{if(typeof z=="string")return z;if(z&&(z.name||z.brandName))return z.name||z.brandName;try{const G=z&&(z._id||z.id||z);if(G&&V&&V.length>0){const se=V.find(me=>String(me._id)===String(G)||String(me._id)===String(G&&(G._id||G.id)||G));if(se)return ae(se)}}catch{}return""}).filter(Boolean):Q=(J||[]).slice();const He=(z,G)=>{if(!z)return!1;const se=String(G),me=new Set,pe=te=>{if(te==null||me.has(te))return!1;if(typeof te=="string"||typeof te=="number")return String(te)===se;if(Array.isArray(te)){for(const Te of te)if(pe(Te))return!0;return!1}if(typeof te=="object"){if(me.has(te))return!1;me.add(te);for(const Te of Object.keys(te))if(pe(te[Te]))return!0;return!1}return!1};return pe(z)},ce=w.filter(z=>He(z,T._id)).map(z=>z.name?z.name:z.shortName||"").filter(Boolean);return{_id:T._id,title:T.name,phone:T.phone,address:T.address?`${T.address.street||""}, ${T.address.city||""}`:"",items:De,Medicines:Q}});y(H),console.warn("Nav: loaded stockists ->",H.length)}}catch(P){console.warn("Nav: failed to load stockists",P)}})(),()=>g=!1},[]),i.useEffect(()=>{const g=localStorage.getItem("token");B(g)},[]);const _=g=>{if(g==="company"){const P=new Set,L=S=>String(S||"").toLowerCase().trim();return x.forEach(S=>{var M;return(M=S.items)==null?void 0:M.forEach(F=>P.add(L(F)))}),Array.from(P)}else{if(g==="stockist")return x.map(P=>P.title);if(g==="medicine"){const P=new Set;return x.forEach(L=>{var S;return(S=L.Medicines)==null?void 0:S.forEach(M=>P.add(M))}),Array.from(P)}}return[]},E=g=>{h(g),t(""),n([]),f(!0),A(!1);const P=_(g);if(g==="stockist")n(x);else if(g==="company"){const L=[],S=M=>String(M||"").toLowerCase().trim();P.forEach(M=>{const F=x.filter(W=>(W.items||[]).some(V=>S(V)===M));L.push(...F)}),n([...new Set(L)])}else if(g==="medicine"){const L=[];P.forEach(S=>{const M=x.filter(F=>F.Medicines&&F.Medicines.includes(S));L.push(...M)}),n([...new Set(L)])}};i.useEffect(()=>{const g=l.trim().toLowerCase(),P=new Set;if(!g){u([]),d(!1);return}if(o==="company"){const S=M=>String(M||"").toLowerCase().trim();x.forEach(M=>{var F;return(F=M.items)==null?void 0:F.forEach(W=>{S(W).includes(g)&&P.add(S(W))})})}else o==="stockist"?x.forEach(S=>{S.title.toLowerCase().includes(g)&&P.add(S.title)}):o==="medicine"&&x.forEach(S=>{var M;return(M=S.Medicines)==null?void 0:M.forEach(F=>{F.toLowerCase().includes(g)&&P.add(F)})});const L=[...P];if(u(L),d(L.length>0),o==="company"){const S=M=>String(M||"").toLowerCase().trim();if(g){const M=x.filter(F=>(F.items||[]).some(W=>S(W).includes(g)));n(M),f(!1),d(L.length>0),v(!1)}}},[l,o,x]);const $=g=>{v(!0),t(g),d(!1),setTimeout(()=>{let P=[];if(o==="stockist")P=x.filter(L=>L.title===g);else if(o==="company"){const L=S=>String(S||"").toLowerCase().trim();P=x.filter(S=>(S.items||[]).some(M=>L(M)===g))}else o==="medicine"&&(P=x.filter(L=>L.Medicines&&L.Medicines.includes(g)));n(P),f(!1),v(!1)},300)},D=g=>{if(t(g),g===""){f(!0);const P=_(o);if(o==="stockist")n(x);else if(o==="company"){const L=[],S=M=>String(M||"").toLowerCase().trim();P.forEach(M=>{const F=x.filter(W=>(W.items||[]).some(V=>S(V)===M));L.push(...F)}),n([...new Set(L)])}else if(o==="medicine"){const L=[];P.forEach(S=>{const M=x.filter(F=>F.Medicines&&F.Medicines.includes(S));L.push(...M)}),n([...new Set(L)])}}},O=()=>{t(""),n([]),d(!1),f(!1)},q=[{value:"medicine",label:"Medicine",icon:"ðŸ’Š"},{value:"company",label:"Company",icon:"ðŸ¢"},{value:"stockist",label:"Stockist",icon:"ðŸª"}],oe=[{label:"Home",icon:"ðŸ "},{label:"About",icon:"â„¹ï¸"},{label:"Contact",icon:"ðŸ“ž"}];i.useEffect(()=>E("company"),[]),i.useEffect(()=>{if(!x||x.length===0||C&&C.length>0)return;const g=_(o);if(o==="stockist")n(x);else if(o==="company"){const P=[],L=S=>String(S||"").toLowerCase().trim();g.forEach(S=>{const M=x.filter(F=>(F.items||[]).some(W=>L(W)===S));P.push(...M)}),n([...new Set(P)])}else if(o==="medicine"){const P=[];g.forEach(L=>{const S=x.filter(M=>M.Medicines&&M.Medicines.includes(L));P.push(...S)}),n([...new Set(P)])}f(!0)},[x]);const ne=(g,P)=>e.jsxs("div",{className:"bg-white rounded-xl p-5 mb-4 shadow-md border border-sky-100",children:[e.jsx("h3",{className:"text-lg font-bold text-sky-700 mb-2",children:g.title}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(he,{children:"ðŸ“ž"}),e.jsx("span",{className:"font-semibold text-slate-700 mr-1",children:"Phone:"}),e.jsx("span",{className:"text-sky-600",children:g.phone})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-base",children:"ðŸ“"}),e.jsx("span",{className:"font-semibold text-slate-700 mr-1",children:"Address:"}),e.jsx("span",{className:"text-slate-600",children:g.address})]})]}),o==="company"&&g.items&&e.jsxs("div",{className:"mb-3",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx("span",{className:"mr-2",children:"ðŸ¢"}),e.jsx("span",{className:"font-semibold text-slate-700",children:"Companies:"})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:g.items.map((L,S)=>{const M=l&&L.toLowerCase().includes(l.toLowerCase());return e.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${M?"bg-sky-200 border-2 border-sky-500 text-sky-800":"bg-sky-50 text-sky-700"}`,children:L},S)})})]}),o==="medicine"&&g.Medicines&&e.jsxs("div",{className:"mb-3",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx("span",{className:"mr-2",children:"ðŸ’Š"}),e.jsx("span",{className:"font-semibold text-slate-700",children:"Medicines:"})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:g.Medicines.map((L,S)=>{const M=l&&L.toLowerCase().includes(l.toLowerCase());return e.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${M?"bg-green-200 border-2 border-green-500 text-green-800":"bg-green-50 text-green-700"}`,children:L},S)})})]}),o==="stockist"&&e.jsxs("div",{className:"mt-2",children:[g.items&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx("span",{className:"mr-2",children:"ðŸ¢"}),e.jsx("span",{className:"font-semibold text-slate-700",children:"Companies:"})]}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:g.items.map((L,S)=>e.jsx("span",{className:"px-3 py-1 rounded-full text-sm font-medium bg-sky-50 text-sky-700",children:L},S))})]}),g.Medicines&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx("span",{className:"mr-2",children:"ðŸ’Š"}),e.jsx("span",{className:"font-semibold text-slate-700",children:"Medicines:"})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:g.Medicines.map((L,S)=>e.jsx("span",{className:"px-3 py-1 rounded-full text-sm font-medium bg-green-50 text-green-700",children:L},S))})]})]})]},g._id||P);return e.jsx("div",{className:"bg-sky-50 min-h-screen",children:e.jsxs("div",{className:"max-w-6xl mx-auto px-4",children:[e.jsxs("div",{className:"flex items-center justify-between py-6",children:[e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-sky-100 flex items-center justify-center shadow",children:e.jsx("div",{className:"w-12 h-12 bg-white rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-xl",children:"ðŸ¥"})})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-sky-700",children:"MedTrap"}),e.jsx("p",{className:"text-sm text-slate-500 -mt-1",children:"Medical Solutions"})]})]})}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>j(!0),className:"w-12 h-12 bg-white rounded-full shadow flex items-center justify-center","aria-label":"open menu",children:e.jsx(he,{children:"â˜°"})}),e.jsx("button",{onClick:()=>r.navigate("/demand"),className:"ml-2 px-3 py-2 bg-emerald-500 text-white rounded-md","aria-label":"demand",children:"Demand"})]})]}),N&&e.jsx("div",{className:"fixed inset-0 z-40 flex items-center justify-center bg-black/50",children:e.jsxs("div",{className:"bg-white rounded-2xl p-6 w-full max-w-md mx-4 max-h-[80vh] overflow-auto",children:[e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:()=>j(!1),className:"p-2 rounded-md","aria-label":"close menu",children:e.jsx(he,{children:"âœ–"})})}),e.jsx("nav",{className:"mt-2 space-y-2",children:oe.map((g,P)=>e.jsxs("button",{onClick:()=>j(!1),className:"w-full text-left flex items-center gap-3 px-3 py-2 rounded-lg bg-slate-50",children:[e.jsx("span",{children:g.icon}),e.jsx("span",{className:"font-medium text-slate-700",children:g.label})]},P))}),e.jsx("div",{className:"mt-4 pt-4 border-t border-slate-100",children:k?e.jsxs("button",{onClick:()=>{j(!1),r.navigate("profile")},className:"w-full flex items-center gap-3 justify-center px-4 py-2 rounded-lg bg-violet-600 text-white",children:[e.jsx(he,{children:"ðŸ‘¤"}),e.jsx("span",{children:"Profile"})]}):e.jsxs("div",{className:"space-y-2",children:[e.jsxs("button",{onClick:()=>{j(!1),r.navigate("login")},className:"w-full flex items-center gap-3 justify-center px-4 py-2 rounded-lg bg-sky-500 text-white",children:[e.jsx(he,{children:"ðŸ”"}),e.jsx("span",{children:"Login"})]}),e.jsxs("button",{onClick:()=>{j(!1),r.navigate("signup")},className:"w-full flex items-center gap-3 justify-center px-4 py-2 rounded-lg bg-emerald-500 text-white",children:[e.jsx(he,{children:"ðŸ‘¤âž•"}),e.jsx("span",{children:"Sign Up"})]})]})})]})}),e.jsxs("div",{className:"mt-4 bg-white rounded-2xl p-5 shadow-sm border border-sky-100",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"flex items-center gap-3 bg-sky-100 rounded-lg px-4 py-3 border border-sky-200",children:[e.jsx(he,{children:"ðŸ”"}),e.jsx("input",{value:l,onChange:g=>D(g.target.value),onFocus:()=>d(!0),className:"flex-1 bg-transparent outline-none text-slate-800",placeholder:`Search for ${o}...`}),l&&e.jsx("button",{onClick:O,className:"p-1 rounded",children:e.jsx(he,{children:"âœ–"})})]})}),e.jsx("div",{children:e.jsxs("button",{onClick:()=>A(!0),className:"flex items-center gap-2 bg-sky-50 px-4 py-3 rounded-lg border border-sky-200",children:[e.jsx("span",{children:(U=q.find(g=>g.value===o))==null?void 0:U.icon}),e.jsx("span",{className:"font-medium",children:(R=q.find(g=>g.value===o))==null?void 0:R.label}),e.jsx("span",{className:"text-sm",children:"â–¼"})]})})]}),m&&e.jsx("div",{className:"fixed inset-0 z-40 flex items-center justify-center bg-black/40",children:e.jsxs("div",{className:"bg-white rounded-lg p-5 w-full max-w-md mx-4",onClick:g=>g.stopPropagation(),children:[e.jsx("h3",{className:"text-lg font-bold text-center mb-3",children:"Select Filter Type"}),e.jsx("div",{className:"space-y-2",children:q.map(g=>e.jsx("button",{onClick:()=>E(g.value),className:`w-full text-left px-4 py-3 rounded-lg ${o===g.value?"bg-sky-100 border border-sky-300":"bg-slate-50"}`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{children:g.icon}),e.jsx("span",{className:`${o===g.value?"font-semibold text-sky-700":"text-slate-700"}`,children:g.label})]})},g.value))}),e.jsx("div",{className:"mt-4 text-center",children:e.jsx("button",{onClick:()=>A(!1),className:"px-4 py-2 rounded-md bg-slate-200",children:"Close"})})]})}),p&&c.length>0&&e.jsxs("div",{className:"mt-3 bg-white border border-slate-100 rounded-lg shadow max-h-72 overflow-auto",children:[e.jsx("div",{className:"px-4 py-2 text-sm text-slate-500 border-b border-slate-100",children:"Click on any suggestion to see detailed results"}),e.jsx("div",{className:"divide-y",children:c.map((g,P)=>{var M,F;let L=null,S="";if(o==="stockist"){const W=x.find(V=>V.title===g);L=W?W.phone:null,S=W?`${((M=W.items)==null?void 0:M.length)||0} companies, ${((F=W.Medicines)==null?void 0:F.length)||0} medicines`:""}else if(o==="company"){const W=x.filter(V=>V.items&&V.items.includes(g));S=`Available at ${W.length} stockist${W.length>1?"s":""}`}else if(o==="medicine"){const W=x.filter(V=>V.Medicines&&V.Medicines.includes(g));S=`Available at ${W.length} stockist${W.length>1?"s":""}`}return e.jsxs("button",{onClick:()=>$(g),className:"w-full text-left px-4 py-3 flex items-center gap-3 hover:bg-slate-50",children:[e.jsx("div",{className:"text-xl",children:o==="medicine"?"ðŸ’Š":o==="company"?"ðŸ¢":"ðŸª"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-slate-700",children:g}),S&&e.jsx("div",{className:"text-sm text-slate-500",children:S})]}),L&&e.jsx("div",{className:"text-sm text-slate-600 font-semibold",children:L}),e.jsx("div",{className:"text-sky-500 ml-2",children:"â†’"})]},P)})})]})]}),e.jsxs("div",{className:"px-4 pt-4 text-sm text-slate-500",children:["Debug: sectionData = ",x.length," stockists"]}),C.length>0&&e.jsxs("div",{className:"px-4 mt-4",children:[I&&e.jsxs("div",{className:"flex items-center gap-3 bg-sky-100 p-3 rounded-lg mb-4",children:[e.jsx("div",{className:"animate-spin border-2 border-sky-400 rounded-full w-4 h-4"}),e.jsx("div",{className:"text-sky-700 font-medium",children:"Loading results..."})]}),l&&e.jsxs("div",{className:"bg-sky-100 rounded-lg p-4 mb-4 flex items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"text-2xl",children:"ðŸ”"}),e.jsxs("div",{children:[e.jsxs("div",{className:"font-semibold text-sky-700",children:['Search Results for "',l,'"']}),e.jsxs("div",{className:"text-sm text-slate-600",children:[C.length," result",C.length>1?"s":""," found"]})]})]}),e.jsx("div",{children:e.jsxs("button",{onClick:()=>{t(""),E(o)},className:"px-3 py-2 bg-sky-600 text-white rounded-md",children:["Show All"," ",o==="stockist"?"Stockists":o==="company"?"Companies":"Medicines"]})})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-800",children:l?`Search Results for "${l}"`:o==="stockist"?"All Stockists":o==="company"?"All Companies":"All Medicines"}),e.jsx("div",{className:"text-sm text-slate-500 mt-1",children:l?`Found ${C.length} result${C.length>1?"s":""}`:`Showing ${C.length} stockists`})]}),e.jsx("div",{className:"flex justify-end mt-3",children:e.jsx("button",{onClick:O,className:"px-3 py-2 bg-slate-600 text-white rounded-md",children:"Clear Results"})})]}),e.jsx("div",{children:C.map((g,P)=>ne(g,P))})]}),e.jsx("div",{className:"px-4 mt-6 pb-10",children:e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"flex items-center gap-4 bg-white rounded-xl p-5 shadow",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-white flex items-center justify-center",children:"ðŸ¥"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-slate-800",children:"Stockists"}),e.jsx("div",{className:"text-sm text-slate-500",children:"Find verified stockists"})]})]}),e.jsxs("div",{className:"flex items-center gap-4 bg-white rounded-xl p-5 shadow",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-white flex items-center justify-center",children:"ðŸ’Š"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-slate-800",children:"Medicines"}),e.jsx("div",{className:"text-sm text-slate-500",children:"Search all medicines"})]})]}),e.jsxs("div",{className:"flex items-center gap-4 bg-white rounded-xl p-5 shadow",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-white flex items-center justify-center",children:"ðŸ¢"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-slate-800",children:"Companies"}),e.jsx("div",{className:"text-sm text-slate-500",children:"Browse pharma companies"})]})]})]})})]})})}const $s=({navigation:s})=>{const a=(()=>{try{return ee()}catch{return null}})(),r=(()=>{try{return Se()}catch{return{key:null}}})(),l=s||{navigate:x=>{a?a(x):window.location.href=x},goBack:()=>window.history.back()},[t,c]=i.useState(null),[u,p]=i.useState(!1),[d,o]=i.useState([]),[h,N]=i.useState({medicines:null,stockists:null,companies:null}),[j,C]=i.useState(!1),[n,b]=i.useState([]);i.useEffect(()=>{let x=!0;return(async()=>{try{const[y,_,E]=await Promise.all([fetch(`${re}/api/stockist`),fetch(`${re}/api/medicine`),fetch(`${re}/api/company`)]),[$,D,O]=await Promise.all([y.json(),_.json(),E.json()]),q=D&&D.data||[],oe=O&&O.data||[];if(N({medicines:D||null,stockists:$||null,companies:O||null}),console.warn("Screen DEBUG: medicines sample ->",q.slice(0,5)),x&&$&&$.data){const ne=$.data.map(U=>{let R=q.filter(w=>we(w,U._id)).map(w=>ae(w)).filter(Boolean);if((!R||R.length===0)&&q.length>0){const w=new Set((U.Medicines||U.medicines||U.items||[]).map(T=>String(T).toLowerCase())),H=q.filter(T=>{const J=ae(T)||"";if(!J)return!1;if(ke(J,U))return!0;const de=J.toLowerCase();for(const K of w)if(K&&(K.includes(de)||de.includes(K)))return!0;return!1}).map(T=>ae(T)).filter(Boolean);H.length>0&&(R=H)}const g=new Set(q.filter(w=>Array.isArray(w.stockists)?w.stockists.some(H=>String(H.stockist||H).includes(String(U._id))):!1).map(w=>w.company&&(w.company._id||w.company)?String(w.company._id||w.company):null).filter(Boolean));let P=oe.filter(w=>g.has(String(w._id))).map(w=>w.name?w.name:w.shortName||"").filter(Boolean);const L=(w,H)=>{if(!w)return!1;const T=String(H),J=new Set,de=K=>{if(K==null||J.has(K))return!1;if(typeof K=="string"||typeof K=="number")return String(K)===T;if(Array.isArray(K)){for(const ge of K)if(de(ge))return!0;return!1}if(typeof K=="object"){if(J.has(K))return!1;J.add(K);for(const ge of Object.keys(K))if(de(K[ge]))return!0;return!1}return!1};return de(w)},S=oe.filter(w=>L(w,U._id)).map(w=>w.name?w.name:w.shortName||"").filter(Boolean);P=Array.from(new Set([...P,...S]));const M=new Set((U.companies||U.items||[]).map(w=>w?typeof w=="string"?String(w):w._id?String(w._id):w.id?String(w.id):null:null).filter(Boolean));if((!R||R.length===0)&&M.size>0){const w=q.filter(H=>{const T=H.company&&(H.company._id||H.company);return T&&M.has(String(T))}).map(H=>ae(H)).filter(Boolean);w.length>0&&(R=[...new Set([...R||[],...w])])}const F=(Array.isArray(U.companies)?U.companies:[]).map(w=>{if(typeof w=="string"){const H=oe.find(T=>String(T._id)===w||T.id===w);return H&&(H.name||H.shortName)||w}return w&&(w.name||w.shortName)?w.name||w.shortName:""}).filter(Boolean),W=Array.from(new Set([...F||[],...P||[]]));let V=[];return Array.isArray(U.medicines)&&U.medicines.length>0?V=U.medicines.map(w=>{if(typeof w=="string")return w;if(w&&(w.name||w.brandName))return w.name||w.brandName;try{const H=w&&(w._id||w.id||w);if(H&&q&&q.length>0){const T=q.find(J=>String(J._id)===String(H)||String(J._id)===String(H._id||H.id||H));if(T)return ae(T)}}catch{}return""}).filter(Boolean):V=(R||[]).slice(),{_id:U._id,title:U.name,phone:U.phone,address:U.address?`${U.address.street||""}${U.address.city?", "+U.address.city:""}`:"",image:U.logo&&U.logo.url||null,items:W,Medicines:V}});console.warn("Screen: loaded stockists ->",ne.length),o(ne);try{const U=(S,M)=>{const F=ae(S)||"";if(we(S,M._id)||ke(F,M))return!0;const W=new Set((M.Medicines||M.medicines||M.items||[]).map(w=>String(w).toLowerCase())),V=F.toLowerCase();for(const w of W)if(w&&(w.includes(V)||V.includes(w)))return!0;return!1},R=(q||[]).filter(S=>{for(const M of $.data)if(U(S,M))return!1;return!0}),g=[],P=[],L=1;for(const S of R){let M=0,F=-1;$.data.forEach((W,V)=>{const w=ds(ae(S)||"",W);w>M&&(M=w,F=V)}),M>=L&&F>=0?g.push({medicine:ae(S),stockistIndex:F,score:M}):P.push(S)}for(const S of g){const M=S.stockistIndex;ne[M]&&(ne[M].Medicines=ne[M].Medicines||[],ne[M].Medicines.includes(S.medicine)||ne[M].Medicines.push(S.medicine))}b(P.slice(0,50)),console.warn("Screen DEBUG: autoAssigned ->",g.slice(0,10))}catch(U){console.warn("Screen: error computing unmatched medicines",U)}}}catch(y){console.warn("Screen: failed to load stockists",y)}})(),()=>{x=!1}},[r&&r.key]),i.useEffect(()=>{try{const x=localStorage.getItem("user");if(!x)return;const y=JSON.parse(x);p(y&&y.role==="admin")}catch(x){console.warn("Screen: error reading user from storage",x)}},[]);const f=x=>{const y=[["#3B82F6","#2563EB"],["#8B5CF6","#7C3AED"],["#6366F1","#4F46E5"],["#EC4899","#DB2777"],["#10B981","#059669"],["#F59E0B","#D97706"],["#EF4444","#DC2626"]];return y[x%y.length]},I=x=>{x&&(window.location.href=`tel:${x}`)},v=()=>e.jsxs("div",{className:"px-4 pt-6",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("h1",{className:"text-3xl font-bold text-slate-900",children:"Marketing Directory"}),e.jsx("p",{className:"text-sm text-slate-500 mt-1",children:"Find the best marketing partners for your business"}),u&&e.jsx("button",{onClick:()=>l.navigate("/adminpanel"),className:"mt-3 inline-block bg-violet-600 text-white text-sm font-semibold px-4 py-2 rounded-lg",children:"Admin Panel"})]}),e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsxs("div",{children:[e.jsxs("div",{className:"text-sm text-slate-500",children:[d.length," stockist",d.length!==1?"s":""]}),e.jsxs("div",{className:"text-xs text-slate-400 mt-1",children:["Debug: loaded stockists = ",d.length]})]})})]}),m=(x,y)=>{var E;const[_]=f(y);return e.jsxs("article",{className:"bg-white rounded-xl shadow-sm border border-sky-100 overflow-hidden mb-6",onClick:()=>c(y),role:"button",children:[x.image?e.jsxs("div",{className:"relative h-44 w-full",children:[e.jsx("img",{src:x.image,alt:x.title,className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute inset-0 bg-black/20"})]}):e.jsxs("div",{className:"relative h-44 w-full flex items-center justify-center",style:{backgroundColor:_},children:[e.jsx("div",{className:"text-4xl font-extrabold text-white/90",children:(E=x.title)==null?void 0:E.charAt(0)}),e.jsx("div",{className:"absolute inset-0 bg-black/10"})]}),e.jsxs("div",{className:"p-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-sky-800 mb-2",children:x.title}),e.jsxs("div",{className:"flex items-start gap-3 text-sm text-slate-600 mb-2",children:[e.jsx("div",{className:"text-lg",children:"ðŸ“ž"}),e.jsx("div",{className:"flex-1",children:x.phone||"-"})]}),e.jsxs("div",{className:"flex items-start gap-3 text-sm text-slate-600 mb-3",children:[e.jsx("div",{className:"text-lg",children:"ðŸ“"}),e.jsx("div",{className:"flex-1",children:x.address||"-"})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[x.items.slice(0,2).map(($,D)=>e.jsx("span",{className:"px-3 py-1 rounded-full bg-slate-50 text-slate-700 text-sm",children:$},D)),x.items.length>2&&e.jsxs("span",{className:"px-3 py-1 rounded-full bg-slate-50 text-slate-600 text-sm",children:["+",x.items.length-2," more"]})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("div",{className:"text-sm text-emerald-600 font-medium",children:x.Medicines?`${x.Medicines.length} medicines`:""}),e.jsxs("div",{className:"flex items-center gap-2 text-sky-600",children:[e.jsx("span",{className:"text-sm font-medium",children:"View details"}),e.jsx("span",{children:"ðŸ”"})]})]})]})]},x._id||y)},A=()=>e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsx(v,{}),e.jsx("div",{className:"px-4 mb-4",children:e.jsxs("button",{onClick:()=>C(x=>!x),className:"px-3 py-2 bg-slate-100 rounded-md text-sm",children:[j?"Hide":"Show"," debug responses"]})}),j&&e.jsx("div",{className:"px-4 mb-6",children:e.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm text-sm text-slate-700",children:[e.jsx("div",{className:"mb-2 font-semibold",children:"Raw API Responses (trimmed)"}),e.jsxs("div",{className:"mb-2",children:[e.jsx("div",{className:"font-medium",children:"Stockists:"}),e.jsx("pre",{className:"whitespace-pre-wrap max-h-40 overflow-auto text-xs",children:JSON.stringify(h.stockists&&h.stockists.data?h.stockists.data.slice(0,5):h.stockists,null,2)})]}),e.jsxs("div",{className:"mb-2",children:[e.jsx("div",{className:"font-medium",children:"Medicines:"}),e.jsx("pre",{className:"whitespace-pre-wrap max-h-40 overflow-auto text-xs",children:JSON.stringify(h.medicines&&h.medicines.data?h.medicines.data.slice(0,5):h.medicines,null,2)})]}),e.jsxs("div",{className:"mb-2",children:[e.jsx("div",{className:"font-medium",children:"Unmatched medicines (first 50):"}),e.jsx("pre",{className:"whitespace-pre-wrap max-h-40 overflow-auto text-xs",children:JSON.stringify(n,null,2)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:"Companies:"}),e.jsx("pre",{className:"whitespace-pre-wrap max-h-40 overflow-auto text-xs",children:JSON.stringify(h.companies&&h.companies.data?h.companies.data.slice(0,5):h.companies,null,2)})]})]})}),e.jsx("div",{className:"px-4 pb-10",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:d.map((x,y)=>m(x,y))})})]}),k=()=>{var _;const x=d[t];if(!x)return null;const[y]=f(t||0);return e.jsxs("div",{className:"max-w-4xl mx-auto px-4 pb-10",children:[e.jsx("div",{className:"rounded-xl overflow-hidden mb-6",children:x.image?e.jsxs("div",{className:"relative h-64",children:[e.jsx("img",{src:x.image,alt:x.title,className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute inset-0 bg-black/40"}),e.jsxs("div",{className:"absolute bottom-4 left-4 text-white",children:[e.jsx("h2",{className:"text-3xl font-bold",children:x.title}),e.jsx("p",{className:"text-sm opacity-90",children:x.address})]})]}):e.jsxs("div",{className:"relative h-64",style:{backgroundColor:y},children:[e.jsx("div",{className:"absolute inset-0 bg-black/20"}),e.jsxs("div",{className:"absolute bottom-4 left-4 text-white",children:[e.jsx("h2",{className:"text-3xl font-bold",children:x.title}),e.jsx("p",{className:"text-sm opacity-90",children:x.address})]}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx("div",{className:"text-6xl font-extrabold text-white/40",children:(_=x.title)==null?void 0:_.charAt(0)})})]})}),e.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 sm:items-center sm:justify-between mb-6",children:[e.jsxs("button",{onClick:()=>c(null),className:"inline-flex items-center gap-2 px-3 py-2 bg-slate-100 rounded-lg text-sm",children:[e.jsx("span",{children:"ðŸ”™"}),e.jsx("span",{className:"text-sm font-medium",children:"Back"})]}),e.jsxs("button",{onClick:()=>I(x.phone),className:"inline-flex items-center gap-3 px-4 py-2 bg-sky-600 text-white rounded-lg",children:[e.jsx("span",{className:"text-lg",children:"ðŸ“ž"}),e.jsxs("span",{children:["Call ",x.title]})]})]}),e.jsxs("section",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-800 mb-3",children:"Contact Information"}),x.phone&&e.jsxs("div",{className:"flex items-start gap-4 mb-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-sky-100 flex items-center justify-center",children:"ðŸ“ž"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-slate-500",children:"Phone"}),e.jsx("div",{className:"text-base font-medium text-slate-800",children:x.phone})]})]}),x.address&&e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-sky-100 flex items-center justify-center",children:"ðŸ“"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-slate-500",children:"Address"}),e.jsx("div",{className:"text-base font-medium text-slate-800",children:x.address})]})]})]}),e.jsxs("section",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-800 mb-3",children:"Company"}),e.jsx("div",{className:"bg-slate-50 rounded-lg p-4 space-y-3",children:x.items.map((E,$)=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-sky-600 text-white flex items-center justify-center text-sm font-bold",children:$+1}),e.jsx("div",{className:"text-base text-slate-800",children:E})]},$))}),x.Medicines&&x.Medicines.length>0&&e.jsxs("div",{className:"mt-6",children:[e.jsx("h4",{className:"text-md font-semibold text-slate-800 mb-3",children:"Medicines"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:x.Medicines.map((E,$)=>e.jsx("span",{className:"px-3 py-1 rounded-full bg-emerald-50 text-emerald-700 text-sm",children:E},$))})]})]})]})]})},B=()=>e.jsx("div",{className:"fixed bottom-4 left-0 right-0 max-w-3xl mx-auto px-4",children:e.jsxs("div",{className:"bg-white rounded-full shadow-lg flex justify-around py-2",children:[e.jsxs("button",{className:"flex flex-col items-center text-sky-600",children:[e.jsx("div",{className:"text-xl",children:"ðŸ "}),e.jsx("div",{className:"text-xs",children:"Home"})]}),e.jsxs("button",{className:"flex flex-col items-center text-slate-500",children:[e.jsx("div",{className:"text-xl",children:"ðŸ“‹"}),e.jsx("div",{className:"text-xs",children:"Categories"})]}),e.jsxs("button",{className:"flex flex-col items-center text-slate-500",children:[e.jsx("div",{className:"text-xl",children:"ðŸ’¾"}),e.jsx("div",{className:"text-xs",children:"Saved"})]}),e.jsxs("button",{className:"flex flex-col items-center text-slate-500",onClick:()=>l.navigate("/profile"),children:[e.jsx("div",{className:"text-xl",children:"ðŸ‘¤"}),e.jsx("div",{className:"text-xs",children:"Profile"})]})]})});return e.jsxs("div",{className:"min-h-screen bg-sky-50",children:[e.jsx("div",{className:"pt-6 pb-24",children:t===null?A():k()}),t===null&&B()]})};function Es(){let s;try{const r=ee();s=l=>r(l)}catch{s=l=>{typeof l=="string"?window.location.href=l:l&&l.name&&(window.location.href=l.name)}}const a={navigate:s,goBack:()=>window.history.back()};return e.jsxs("div",{className:"min-h-screen bg-white overflow-y-auto",children:[e.jsx(Ps,{navigation:a}),e.jsx($s,{navigation:a})]})}const Is=({className:s})=>e.jsx("div",{className:`${s}  rounded-lg flex items-center justify-center`,children:e.jsxs("span",{className:"text-white font-bold text-xl",children:[e.jsx("img",{src:"/final-logo.png",alt:""}),e.jsx("img",{src:"/logo.png",alt:""})]})});function Bs(){const s=ee(),[a,r]=i.useState("Purchaser"),[l,t]=i.useState(null),c=[{id:"Stockist",name:"Stockist",icon:"/stockist.png",gradient:"from-emerald-400 to-teal-500",bgGlow:"bg-emerald-500/10",description:"Manage inventory",color:"emerald"},{id:"Purchaser",name:"Purchaser",icon:"/purchaser-removebg-preview.png",gradient:"from-blue-400 to-indigo-500",bgGlow:"bg-blue-500/10",description:"Handle procurement",color:"blue"},{id:"Medical Owner",name:"Medical Owner",icon:"/medical-shop.png",gradient:"from-orange-400 to-red-500",bgGlow:"bg-orange-500/10",description:"Clinic management",color:"orange"}],u=d=>{if(r(d),localStorage.setItem("selectedRole",d),d==="Staff"){s("/staffs");return}},p=()=>{if(localStorage.setItem("confirmedRole",a),a==="Purchaser"){s("/purchaser");return}if(a==="Stockist"){s("/adminCreateStockist");return}if(a==="Medical Owner"){s("/signup");return}s("/dashboard")};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-100 flex items-center justify-center p-4 relative overflow-hidden",children:[e.jsxs("div",{className:"absolute inset-0",children:[e.jsx("div",{className:"absolute top-20 left-20 w-72 h-72 bg-gradient-to-r from-blue-400/15 to-purple-400/15 rounded-full blur-3xl animate-pulse"}),e.jsx("div",{className:"absolute bottom-20 right-20 w-80 h-80 bg-gradient-to-r from-emerald-400/10 to-teal-400/10 rounded-full blur-3xl animate-pulse delay-1000"}),e.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-96 h-96 bg-gradient-to-r from-indigo-400/8 to-purple-400/8 rounded-full blur-3xl animate-pulse delay-2000"}),e.jsx("div",{className:"absolute top-1/4 left-1/4 w-2 h-2 bg-blue-400/30 rounded-full animate-bounce delay-300"}),e.jsx("div",{className:"absolute top-3/4 right-1/4 w-3 h-3 bg-emerald-400/30 rounded-full animate-bounce delay-700"}),e.jsx("div",{className:"absolute bottom-1/4 left-1/3 w-1.5 h-1.5 bg-purple-400/30 rounded-full animate-bounce delay-1100"})]}),e.jsxs("div",{className:"relative bg-white/80 backdrop-blur-2xl rounded-3xl shadow-2xl border border-white/60 p-10 w-full max-w-2xl",children:[e.jsxs("div",{className:"text-center mb-14",children:[e.jsx("div",{className:"mt-8 mb-6 transform hover:scale-105 transition-transform duration-300",children:e.jsx(Is,{className:"h-25 w-32 mx-auto"})}),e.jsxs("div",{className:"relative",children:[e.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-gray-800 via-blue-600 to-indigo-600 bg-clip-text text-transparent mb-3 tracking-tight",children:"Select Your Role"}),e.jsx("div",{className:"absolute -bottom-1 left-1/2 transform -translate-x-1/2 w-24 h-1 bg-gradient-to-r from-blue-500 to-indigo-500 rounded-full"})]}),e.jsx("p",{className:"text-gray-600 text-base mt-4 font-medium",children:"Choose your primary function to get started"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-14",children:c.map((d,o)=>{const h=d.icon,N=a===d.id,j=l===d.id;return e.jsxs("div",{onClick:()=>u(d.id),onMouseEnter:()=>t(d.id),onMouseLeave:()=>t(null),className:`
                  group relative flex flex-col items-center p-8 rounded-3xl cursor-pointer transition-all duration-500 transform hover:scale-110 hover:-translate-y-2
                  ${N?"bg-gradient-to-br from-white/90 to-white/70 border-2 border-blue-400/60 shadow-2xl shadow-blue-500/30":"bg-white/70 border-2 border-gray-200/40 hover:bg-white/90 hover:border-gray-300/60 hover:shadow-xl"}
                `,style:{animationDelay:`${o*150}ms`},children:[N&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-500/15 to-indigo-600/15 rounded-3xl blur-xl animate-pulse"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-400/10 to-indigo-500/10 rounded-3xl"})]}),j&&!N&&e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-400/10 to-gray-500/10 rounded-3xl blur-lg"}),e.jsxs("div",{className:`
                  relative p-6 rounded-2xl mb-6 transition-all duration-500 transform group-hover:scale-110 group-hover:rotate-3
                  ${N?`bg-gradient-to-r ${d.gradient} shadow-2xl`:"bg-gradient-to-r from-gray-100/90 to-gray-200/90 group-hover:from-gray-200/90 group-hover:to-gray-300/90"}
                `,children:[typeof h=="string"?e.jsx("img",{src:h,alt:d.name+" icon",className:`w-28 h-28 object-contain transition-all duration-500 ${N?"":"group-hover:opacity-90"}`}):e.jsx(h,{size:32,className:`
                        transition-all duration-500
                        ${N?"text-white drop-shadow-lg":"text-gray-600 group-hover:text-gray-700"}
                      `}),N&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"absolute -top-2 -right-2 w-3 h-3 bg-white/70 rounded-full animate-ping"}),e.jsx("div",{className:"absolute -bottom-2 -left-2 w-2 h-2 bg-white/50 rounded-full animate-ping delay-500"}),e.jsx("div",{className:"absolute top-1 right-1 w-1.5 h-1.5 bg-white/60 rounded-full animate-pulse"})]}),N&&e.jsx("div",{className:"absolute inset-0 rounded-2xl border-2 border-white/30",style:{animation:"spin 8s linear infinite"}})]}),e.jsx("h3",{className:`
                  text-xl font-bold mb-3 transition-all duration-500 text-center tracking-wide
                  ${N?"text-gray-800 drop-shadow-sm":"text-gray-700 group-hover:text-gray-800"}
                `,children:d.name}),e.jsx("p",{className:`
                  text-sm transition-all duration-500 text-center font-medium
                  ${N?"text-gray-600":"text-gray-500 group-hover:text-gray-600"}
                `,children:d.description}),e.jsx("div",{className:`
                  absolute -top-3 -right-3 w-8 h-8 rounded-full border-3 border-white transition-all duration-500 flex items-center justify-center
                  ${N?"bg-gradient-to-r from-blue-500 to-indigo-600 scale-100 shadow-lg":"bg-gray-400/60 scale-0 group-hover:scale-75 group-hover:bg-gray-500/60"}
                `,children:N&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-3 h-3 bg-white rounded-full animate-pulse"}),e.jsx("div",{className:"absolute inset-0 bg-white/20 rounded-full animate-ping"})]})}),e.jsx("div",{className:`
                  absolute bottom-0 left-1/2 transform -translate-x-1/2 h-1 rounded-t-full transition-all duration-500
                  ${N?"w-full bg-gradient-to-r from-blue-500 to-indigo-600":"w-0 bg-gray-400"}
                `})]},d.id)})}),e.jsx("div",{className:"text-center mb-8",children:e.jsxs("button",{onClick:p,className:"group relative bg-gradient-to-r from-blue-600 via-indigo-600 to-purple-700 hover:from-blue-700 hover:via-indigo-700 hover:to-purple-800 text-white font-bold py-5 px-16 rounded-full transition-all duration-500 transform hover:scale-110 hover:shadow-2xl hover:shadow-blue-500/40 min-w-[220px] overflow-hidden text-lg tracking-wide",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/30 to-transparent -skew-x-12 translate-x-[-200%] group-hover:translate-x-[200%] transition-transform duration-1000"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-600/50 to-purple-600/50 rounded-full animate-pulse"}),e.jsxs("span",{className:"relative flex items-center justify-center gap-3",children:[e.jsx("span",{children:"CONFIRM ROLE"}),e.jsx("div",{className:"w-2 h-2 bg-white rounded-full animate-bounce group-hover:animate-pulse"})]}),e.jsx("div",{className:"absolute inset-0 rounded-full border-2 border-white/20 group-hover:border-white/40 transition-colors duration-300"})]})}),e.jsxs("div",{className:"flex justify-center space-x-2",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse"}),e.jsx("div",{className:"w-2 h-2 bg-blue-400/60 rounded-full animate-pulse delay-200"}),e.jsx("div",{className:"w-2 h-2 bg-blue-300/40 rounded-full animate-pulse delay-400"})]})]})]})}function Ve({className:s="w-20 h-20",alt:a="MedTrap Logo"}){return e.jsx("img",{src:"/Gemini_Generated_Image_hnxythhnxythhnxy-removebg-preview.png",alt:a,className:`mx-auto ${s} mb-4 relative z-10`})}const Ze=({icon:s,label:a,name:r,type:l="text",placeholder:t,required:c=!1,showPasswordToggle:u=!1,form:p,handleChange:d,focusedField:o,setFocusedField:h,showPassword:N,setShowPassword:j})=>e.jsxs("div",{className:"relative group",children:[e.jsx("label",{className:`block text-sm font-medium transition-all duration-300 mb-2 ${o===r?"text-blue-600":"text-gray-700"}`,children:a}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:`absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none transition-all duration-300 ${o===r?"text-blue-500":"text-gray-400"}`,children:e.jsx(s,{className:"h-5 w-5"})}),e.jsx("input",{name:r,type:u?N?"text":"password":l,placeholder:t,value:p[r],onChange:d,onFocus:()=>h(r),onBlur:()=>h(null),required:c,className:`block w-full pl-10 pr-12 py-3 border rounded-lg shadow-sm placeholder-gray-500 transition-all duration-300 transform hover:scale-[1.01] focus:scale-[1.01] ${o===r?"border-blue-500 ring-2 ring-blue-200 bg-blue-50/50":"border-gray-300 hover:border-gray-400 bg-white"}`}),u&&e.jsx("button",{type:"button",onClick:()=>j(!N),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600 transition-all duration-200 hover:scale-110",children:N?e.jsx(Re,{className:"h-5 w-5"}):e.jsx(Oe,{className:"h-5 w-5"})})]})]}),Ds=()=>{const s=ee(),[a,r]=i.useState({email:"",password:""}),[l,t]=i.useState(""),[c,u]=i.useState(!1),[p,d]=i.useState(!1),[o,h]=i.useState(!1),[N,j]=i.useState(null);i.useEffect(()=>{h(!0)},[]);const C=b=>{r({...a,[b.target.name]:b.target.value})},n=async b=>{b&&b.preventDefault&&b.preventDefault(),u(!0),t("");try{const f=await fetch(X("/api/auth/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:a.email,password:a.password})}),I=await f.json();if(!f.ok)throw new Error(I.message||"Login failed");if(I.success&&I.token&&I.user)localStorage.setItem("token",I.token),localStorage.setItem("user",JSON.stringify(I.user)),t("Login successful!"),setTimeout(()=>s("/dashboard"),700);else throw new Error("Invalid response format from server")}catch(f){t(f.message||"Login failed. Please check your credentials.")}finally{u(!1)}};return e.jsxs(e.Fragment,{children:[e.jsx("style",{children:`
        @import url("https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Poppins:wght@300;400;500;600;700;800&display=swap");

        * { font-family: "Inter", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif; }
        .brand-font { font-family: "Poppins", sans-serif; }
        .fade-in { opacity: ${o?1:0}; transform: translateY(${o?"0":"30px"}); transition: all 0.8s cubic-bezier(0.4, 0, 0.2, 1); }
        .slide-in-left { opacity: ${o?1:0}; transform: translateX(${o?"0":"-50px"}); transition: all 0.6s cubic-bezier(0.4, 0, 0.2, 1) 0.2s; }
        .slide-in-right { opacity: ${o?1:0}; transform: translateX(${o?"0":"50px"}); transition: all 0.6s cubic-bezier(0.4, 0, 0.2, 1) 0.4s; }
        .scale-in { opacity: ${o?1:0}; transform: scale(${o?1:.8}); transition: all 0.6s cubic-bezier(0.4, 0, 0.2, 1) 0.6s; }
        .floating { animation: floating 6s ease-in-out infinite; }
        .pulse-ring { animation: pulse-ring 2s cubic-bezier(0.4, 0, 0.6, 1) infinite; }
        @keyframes floating { 0%, 100% { transform: translateY(0px); } 50% { transform: translateY(-10px); } }
        @keyframes pulse-ring { 0% { transform: scale(1); opacity: 1; } 100% { transform: scale(1.2); opacity: 0; } }
        .gradient-text { background: linear-gradient(135deg, #3b82f6, #10b981); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; }
        .glass-effect { background: rgba(255, 255, 255, 0.95); backdrop-filter: blur(10px); border: 1px solid rgba(255, 255, 255, 0.2); }
        .hover-lift:hover { transform: translateY(-2px); box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04); }
        .button-gradient { background: linear-gradient(135deg, #3b82f6, #10b981); background-size: 200% 200%; animation: gradient-shift 3s ease infinite; }
        .button-gradient:hover { animation: gradient-shift 0.5s ease infinite; }
        @keyframes gradient-shift { 0% { background-position: 0% 50%; } 50% { background-position: 100% 50%; } 100% { background-position: 0% 50%; } }
        @media (max-width: 640px) { .mobile-padding { padding: 1rem; } .mobile-text { font-size: 2rem; } .mobile-card { margin: 1rem; padding: 1.5rem; } }
      `}),e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-green-50 flex items-center justify-center py-4 sm:py-12 px-4 sm:px-6 lg:px-8 relative overflow-hidden",children:[e.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[e.jsx("div",{className:"absolute -top-40 -right-40 w-80 h-80 bg-blue-400 rounded-full mix-blend-multiply filter blur-xl opacity-20 animate-pulse"}),e.jsx("div",{className:"absolute -bottom-40 -left-40 w-80 h-80 bg-green-400 rounded-full mix-blend-multiply filter blur-xl opacity-20 animate-pulse",style:{animationDelay:"2s"}}),e.jsx("div",{className:"absolute top-40 left-40 w-60 h-60 bg-purple-400 rounded-full mix-blend-multiply filter blur-xl opacity-20 animate-pulse",style:{animationDelay:"4s"}})]}),e.jsxs("div",{className:"max-w-md w-full relative z-10",children:[e.jsx("div",{className:"relative flex justify-center items-center mb-4",style:{height:"80px"},children:e.jsx(Ve,{className:"h-25 w-32"})}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-6 sm:p-8 border border-gray-100 glass-effect hover-lift transition-all duration-500 scale-in mobile-card",children:[e.jsxs("div",{className:"mb-6 slide-in-left",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-900 mb-2 brand-font",children:"Welcome Back"}),e.jsx("p",{className:"text-gray-600 text-sm sm:text-base",children:"Sign in to your MedTrap account"})]}),e.jsxs("div",{className:"space-y-6 slide-in-right",children:[e.jsx(Ze,{icon:Ce,label:"Email Address",name:"email",type:"email",placeholder:"Enter your email address",required:!0,form:a,handleChange:C,focusedField:N,setFocusedField:j}),e.jsx(Ze,{icon:Fe,label:"Password",name:"password",type:"password",placeholder:"Enter your password",required:!0,showPasswordToggle:!0,form:a,handleChange:C,focusedField:N,setFocusedField:j,showPassword:p,setShowPassword:d}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{id:"remember-me",name:"remember-me",type:"checkbox",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded transition-all duration-200 hover:scale-110"}),e.jsx("label",{htmlFor:"remember-me",className:"ml-2 block text-gray-700 font-medium",children:"Remember me"})]}),e.jsx("button",{type:"button",onClick:()=>s("/forgot-password"),className:"text-blue-600 hover:text-blue-500 transition-all duration-200 hover:underline font-medium",children:"Forgot password?"})]}),e.jsx("button",{type:"button",onClick:n,disabled:c,className:"w-full flex justify-center py-3 px-4 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white button-gradient hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-300 transform hover:scale-[1.02] active:scale-[0.98]",children:c?e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2"}),e.jsx("span",{className:"font-semibold",children:"Signing in..."})]}):e.jsx("span",{className:"font-semibold",children:"Sign In"})}),l&&e.jsxs("div",{className:`flex items-center p-4 rounded-lg transition-all duration-500 transform ${l.includes("successful")?"bg-green-50 border border-green-200 scale-100 opacity-100":"bg-red-50 border border-red-200 scale-100 opacity-100"}`,children:[l.includes("successful")?e.jsx($e,{className:"h-5 w-5 text-green-600 mr-3 animate-bounce"}):e.jsx(Le,{className:"h-5 w-5 text-red-600 mr-3 animate-pulse"}),e.jsx("span",{className:`text-sm font-medium ${l.includes("successful")?"text-green-700":"text-red-700"}`,children:l})]})]}),e.jsxs("div",{className:"mt-6 fade-in",style:{animationDelay:"1s"},children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:"w-full border-t border-gray-300"})}),e.jsx("div",{className:"relative flex justify-center text-sm",children:e.jsx("span",{className:"px-2 bg-white text-gray-500 font-medium",children:"New to MedTrap?"})})]}),e.jsx("div",{className:"mt-4 text-center",children:e.jsx("button",{onClick:()=>{s("/signup")},className:"font-semibold text-blue-600 hover:text-blue-500 transition-all duration-200 hover:underline transform hover:scale-105 inline-block",children:"Create your account"})})]})]}),e.jsx("div",{className:"mt-6 sm:mt-8 text-center fade-in",style:{animationDelay:"1.2s"},children:e.jsx("p",{className:"text-xs text-gray-500 font-medium",children:"ðŸ”’ Protected by industry-standard security measures"})})]})]})]})},Ts=()=>{const s=ee(),[a,r]=i.useState({medicalName:"",ownerName:"",address:"",email:"",contactNo:"",drugLicenseNo:"",password:"",drugLicenseImage:null}),[l,t]=i.useState(""),[c,u]=i.useState(!1),[p,d]=i.useState(!1),o=y=>{const{name:_,value:E,files:$}=y.target;r(_==="drugLicenseImage"?D=>({...D,drugLicenseImage:$[0]}):D=>({...D,[_]:E}))},h=y=>{y.preventDefault(),y.stopPropagation(),y.type==="dragenter"||y.type==="dragover"?d(!0):y.type==="dragleave"&&d(!1)},N=y=>{y.preventDefault(),y.stopPropagation(),d(!1),y.dataTransfer.files&&y.dataTransfer.files[0]&&r(_=>({..._,drugLicenseImage:y.dataTransfer.files[0]}))},j=async y=>{y&&y.preventDefault&&y.preventDefault(),u(!0),t("");const _=new FormData;Object.entries(a).forEach(([E,$])=>{$!=null&&_.append(E,$)});try{const E=await fetch(X("/api/auth/signup"),{method:"POST",body:_}),$=await E.json();if(!E.ok)throw new Error($.message||"Registration failed");if($.success)t("Registration successful! You can now log in."),setTimeout(()=>s("/login"),2e3);else throw new Error("Invalid response format from server")}catch(E){t(E.message||"Registration failed. Please try again.")}finally{u(!1)}},C=({icon:y,label:_,name:E,type:$="text",placeholder:D,required:O=!1,accept:q})=>e.jsxs("div",{className:"relative",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:_}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(y,{className:"h-5 w-5 text-gray-400"})}),$==="file"?e.jsx("input",{name:E,type:$,placeholder:D,onChange:o,required:O,accept:q,className:"block w-full pl-10 pr-3 py-3 border border-gray-200 rounded-xl shadow-sm placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200"}):e.jsx("input",{name:E,type:$,placeholder:D,value:a[E]||"",onChange:o,required:O,autoComplete:E==="password"?"new-password":"on",className:"block w-full pl-10 pr-3 py-3 border border-gray-200 rounded-xl shadow-sm placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200"})]})]}),n=y=>e.jsx("svg",{...y,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-4m-5 0H9m11 0v-4a2 2 0 00-2-2h-2a2 2 0 00-2 2v4m6 0V9a2 2 0 00-2-2H9a2 2 0 00-2 2v12"})}),b=y=>e.jsx("svg",{...y,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),f=y=>e.jsxs("svg",{...y,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),I=y=>e.jsx("svg",{...y,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),v=y=>e.jsx("svg",{...y,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})}),m=y=>e.jsx("svg",{...y,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),A=y=>e.jsx("svg",{...y,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),k=y=>e.jsx("svg",{...y,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),B=y=>e.jsx("svg",{...y,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),x=y=>e.jsx("svg",{...y,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})});return e.jsx("div",{className:"min-h-screen py-12 px-4 sm:px-6 lg:px-8 flex items-center justify-center",style:{backgroundColor:"#f8fafc"},children:e.jsxs("div",{className:"max-w-md w-full mx-auto",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx(Ve,{className:"w-20 h-20",alt:"MedTrap Logo"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"MedTrap"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Medical Store Management"})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-8 border border-gray-100",children:[e.jsxs("div",{className:"mb-8 text-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Create Your Account"}),e.jsx("p",{className:"text-gray-600",children:"Register your medical store with MedTrap"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx(C,{icon:n,label:"Medical Store Name",name:"medicalName",placeholder:"Enter your medical store name",required:!0}),e.jsx(C,{icon:b,label:"Owner Name",name:"ownerName",placeholder:"Enter owner's full name",required:!0}),e.jsx(C,{icon:f,label:"Address",name:"address",placeholder:"Enter complete address",required:!0}),e.jsx(C,{icon:I,label:"Email Address",name:"email",type:"email",placeholder:"Enter your email",required:!0}),e.jsx(C,{icon:v,label:"Contact Number",name:"contactNo",type:"tel",placeholder:"Enter contact number",required:!0}),e.jsx(C,{icon:m,label:"Drug License Number",name:"drugLicenseNo",placeholder:"Enter drug license number",required:!0}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Drug License Image"}),e.jsxs("div",{className:`relative border-2 border-dashed rounded-xl p-6 text-center transition-all duration-200 ${p?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-blue-300"}`,onDragEnter:h,onDragLeave:h,onDragOver:h,onDrop:N,children:[e.jsx("input",{name:"drugLicenseImage",type:"file",accept:"image/*",onChange:o,required:!0,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer"}),e.jsx(k,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsxs("div",{className:"mt-3",children:[e.jsx("p",{className:"text-sm text-gray-600",children:a.drugLicenseImage?e.jsx("span",{className:"text-blue-600 font-medium",children:a.drugLicenseImage.name}):e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"font-medium text-blue-600",children:"Click to upload"})," ","or drag and drop"]})}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"PNG, JPG, GIF up to 10MB"})]})]})]}),e.jsx(C,{icon:A,label:"Password",name:"password",type:"password",placeholder:"Create a strong password",required:!0}),e.jsx("button",{onClick:j,disabled:c,className:"w-full flex justify-center py-4 px-6 border border-transparent rounded-xl shadow-md text-white bg-blue-500 hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 font-semibold",children:c?e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2"}),"Creating Account..."]}):"Create Account"}),l&&e.jsxs("div",{className:`flex items-center p-4 rounded-xl ${l.includes("successful")?"bg-green-50 border border-green-200":"bg-red-50 border border-red-200"}`,children:[l.includes("successful")?e.jsx(B,{className:"h-5 w-5 text-green-600 mr-3"}):e.jsx(x,{className:"h-5 w-5 text-red-600 mr-3"}),e.jsx("span",{className:`text-sm font-medium ${l.includes("successful")?"text-green-700":"text-red-700"}`,children:l})]})]}),e.jsx("div",{className:"mt-8 text-center",children:e.jsxs("p",{className:"text-sm text-gray-600",children:["Already have an account?"," ",e.jsx("button",{type:"button",onClick:()=>s("/login"),className:"font-semibold text-blue-600 hover:text-blue-500 transition-colors",children:"Sign in"})]})})]}),e.jsx("div",{className:"mt-8 text-center",children:e.jsxs("p",{className:"text-xs text-gray-500",children:["By registering, you agree to our"," ",e.jsx("a",{href:"#",className:"text-blue-600 hover:text-blue-500 font-medium",children:"Terms of Service"})," ","and"," ",e.jsx("a",{href:"#",className:"text-blue-600 hover:text-blue-500 font-medium",children:"Privacy Policy"})]})})]})})};function _s(s){const a=Se(),r=ee(),{company:l,stockists:t}=s,c=a.state||{},u=l||c.company,p=t||c.stockists||[],[d,o]=i.useState(null),h={hidden:{opacity:0,y:8,scale:.995},show:n=>({opacity:1,y:0,scale:1,transition:{delay:n*.05}}),exit:{opacity:0,y:-8,transition:{duration:.18}}},N={hidden:{y:20,opacity:0},show:{y:0,opacity:1,transition:{duration:.28}},exit:{y:20,opacity:0,transition:{duration:.2}}};if(!u||!p||p.length===0)return e.jsx("div",{className:"min-h-screen bg-blue-50 flex items-center justify-center p-6",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg max-w-lg w-full p-8 text-center",children:[e.jsx("div",{className:"mx-auto w-20 h-20 rounded-full bg-blue-100 flex items-center justify-center mb-6",children:e.jsx(je,{size:36,color:"#3B82F6"})}),e.jsx("h2",{className:"text-3xl font-bold text-gray-800 mb-2",children:"No Results Found"}),e.jsx("p",{className:"text-lg text-gray-600 mb-6",children:"Please try searching for a different company."}),e.jsx("button",{onClick:()=>r?r(-1):window.history.back(),className:"mt-2 inline-block bg-blue-600 hover:bg-blue-700 text-white font-medium px-6 py-3 rounded-lg",children:"Go Back"})]})});const j=({stockist:n,index:b})=>e.jsxs(Z.div,{custom:b,initial:"hidden",animate:"show",exit:"exit",variants:h,className:"bg-white rounded-2xl shadow-md overflow-hidden m-2 w-72 cursor-pointer hover:shadow-lg",onClick:()=>o(b),children:[n.image?e.jsxs("div",{className:"relative h-44 w-full",children:[e.jsx("img",{src:n.image,alt:n.title,className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute inset-0 bg-black/30"})]}):e.jsxs("div",{className:"relative h-44 w-full flex items-center justify-center",style:{background:"#DBEAFE"},children:[e.jsx("div",{className:"text-4xl font-extrabold text-white/90",children:(n.title||"").charAt(0)}),e.jsx("div",{className:"absolute inset-0 bg-black/10"})]}),e.jsxs("div",{className:"p-5",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-2",children:n.title}),n.address&&e.jsxs("div",{className:"flex items-start gap-3 mt-2",children:[e.jsx(ue,{size:16,color:"#4B5563"}),e.jsx("p",{className:"text-sm text-gray-600 flex-1",children:n.address})]}),n.phone&&e.jsxs("div",{className:"flex items-center gap-3 mt-3",children:[e.jsx(be,{size:16,color:"#4B5563"}),e.jsx("p",{className:"text-sm text-gray-600",children:n.phone})]}),e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-100",children:e.jsx("button",{className:"w-full text-blue-600 font-medium",children:"View Details"})})]})]},n._id||b),C=({stockist:n})=>e.jsxs(Z.div,{initial:"hidden",animate:"show",exit:"exit",variants:N,className:"bg-white rounded-2xl shadow-xl overflow-hidden max-w-3xl mx-auto",children:[e.jsxs("div",{className:"relative",children:[n.image?e.jsx("img",{src:n.image,alt:n.title,className:"w-full h-64 object-cover"}):e.jsx("div",{className:"h-64 bg-blue-600 flex items-center p-6",children:e.jsx("h2",{className:"text-3xl font-bold text-white",children:n.title})}),e.jsx("button",{onClick:()=>o(null),className:"absolute top-4 right-4 bg-white p-2 rounded-full shadow","aria-label":"close details",children:e.jsx(ls,{size:18,color:"#1F2937"})})]}),e.jsxs("div",{className:"p-6",children:[n.address&&e.jsxs("div",{className:"flex items-start gap-4 mb-4",children:[e.jsx(ue,{size:20,color:"#2563EB"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-gray-700",children:"Address"}),e.jsx("div",{className:"text-gray-600",children:n.address})]})]}),n.phone&&e.jsxs("div",{className:"flex items-start gap-4 mb-4",children:[e.jsx(be,{size:20,color:"#2563EB"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-gray-700",children:"Phone"}),e.jsx("div",{className:"text-gray-600",children:n.phone})]})]}),n.medicines&&n.medicines.length>0&&e.jsxs("div",{className:"mt-6",children:[e.jsx("h4",{className:"text-xl font-bold mb-4 text-gray-800",children:"Available Medicines"}),e.jsx("div",{className:"space-y-2",children:n.medicines.map((b,f)=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-blue-100 flex items-center justify-center text-blue-800 font-medium",children:f+1}),e.jsx("div",{className:"text-gray-700",children:b})]},f))})]}),e.jsx("div",{className:"mt-8",children:e.jsxs("button",{onClick:()=>o(null),className:"inline-flex items-center gap-2 bg-blue-600 text-white px-5 py-3 rounded-lg",children:[e.jsx(_e,{size:18}),e.jsx("span",{className:"font-medium",children:"Back to All Stockists"})]})})]})]},n._id||"detail");return e.jsxs("div",{className:"min-h-screen bg-blue-50 p-6",children:[e.jsxs("div",{className:"bg-white rounded-2xl shadow-md p-6 mb-8 max-w-6xl mx-auto",children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-800",children:[e.jsx("span",{className:"text-blue-600",children:u})," Stockists"]}),e.jsxs("p",{className:"mt-2 text-gray-600",children:[p.length," locations found"]})]}),e.jsx("div",{className:"max-w-6xl mx-auto",children:e.jsx(rs,{children:d===null?e.jsx(Z.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"flex flex-wrap gap-4",children:p.map((n,b)=>e.jsx(j,{stockist:n,index:b},n._id||b))},"list"):e.jsx(C,{stockist:p[d]})})})]})}function Fs(){const s=Se(),{medicine:a,stockists:r}=s.state||{},[l,t]=i.useState(null),[c,u]=i.useState(a||""),[p,d]=i.useState(!0);if(i.useEffect(()=>{const j=setTimeout(()=>{d(!1)},600);return()=>clearTimeout(j)},[]),!a||!r||r.length===0)return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100",children:e.jsxs(Z.div,{className:"text-center bg-white p-8 rounded-2xl shadow-xl max-w-md mx-4",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.5},children:[e.jsx("div",{className:"w-24 h-24 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-6",children:e.jsx(ls,{size:40,className:"text-red-500"})}),e.jsx("h1",{className:"text-3xl font-bold mb-4 text-gray-800",children:"No Results Found"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"We couldn't find any stockists for your search. Please try searching for a different medicine."}),e.jsx("button",{className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg shadow-lg transform transition-all hover:scale-105",onClick:()=>window.history.back(),children:"Go Back"})]})});const o=r.filter(j=>{var C;return(C=j.Medicines)==null?void 0:C.some(n=>n.toLowerCase().includes(c.toLowerCase()))}),h=({stockist:j,index:C})=>{var n;return e.jsxs(Z.div,{className:"bg-white rounded-xl overflow-hidden shadow-lg hover:shadow-2xl transition-all duration-300",onClick:()=>t(j),initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,scale:.95},transition:{duration:.3,delay:C*.05},whileHover:{y:-5},whileTap:{scale:.98},children:[e.jsxs("div",{className:"relative",children:[j.image?e.jsx("img",{src:j.image,alt:j.title,className:"w-full h-48 object-cover"}):e.jsx("div",{className:"w-full h-32 bg-gradient-to-r from-blue-400 to-indigo-500 flex items-center justify-center",children:e.jsx(Ge,{size:40,className:"text-white"})}),e.jsx("div",{className:"absolute top-3 right-3 bg-blue-600 text-white text-xs font-bold py-1 px-2 rounded-full",children:"Stockist"})]}),e.jsxs("div",{className:"p-5",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-2 line-clamp-1",children:j.title}),e.jsxs("div",{className:"space-y-2 mb-4",children:[j.phone&&e.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[e.jsx(be,{size:16,className:"mr-2 text-blue-500"}),e.jsx("span",{children:j.phone})]}),j.address&&e.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[e.jsx(ue,{size:16,className:"mr-2 text-blue-500"}),e.jsx("span",{className:"line-clamp-1",children:j.address})]})]}),e.jsxs("div",{className:"flex items-center mt-auto pt-2 border-t border-gray-100",children:[e.jsx(ie,{size:16,className:"mr-2 text-blue-500"}),e.jsxs("span",{className:"text-sm font-medium text-blue-600",children:[((n=j.Medicines)==null?void 0:n.length)||0," medicine(s) available"]})]})]})]})},N=()=>l?e.jsx(Z.div,{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>t(null),children:e.jsxs(Z.div,{className:"bg-white rounded-2xl shadow-2xl max-w-3xl w-full max-h-[90vh] overflow-y-auto",initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9},transition:{type:"spring",damping:25},onClick:j=>j.stopPropagation(),children:[l.image?e.jsxs("div",{className:"relative h-56 md:h-64",children:[e.jsx("img",{src:l.image,alt:l.title,className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 to-transparent"}),e.jsx("button",{className:"absolute top-4 left-4 bg-white p-2 rounded-full text-gray-800 hover:bg-gray-100",onClick:()=>t(null),children:e.jsx(_e,{size:24})})]}):e.jsxs("div",{className:"relative h-40 bg-gradient-to-r from-blue-500 to-indigo-600 flex items-center justify-center",children:[e.jsx(Ge,{size:60,className:"text-white"}),e.jsx("button",{className:"absolute top-4 left-4 bg-white p-2 rounded-full text-gray-800 hover:bg-gray-100",onClick:()=>t(null),children:e.jsx(_e,{size:24})})]}),e.jsxs("div",{className:"p-6 md:p-8",children:[e.jsx("h2",{className:"text-3xl font-bold mb-2 text-gray-800",children:l.title}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mt-6",children:[e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"bg-blue-50 p-4 rounded-xl",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-3 flex items-center",children:[e.jsx(qe,{size:20,className:"mr-2 text-blue-600"}),"Contact Information"]}),e.jsxs("div",{className:"space-y-3",children:[l.phone&&e.jsxs("div",{className:"flex items-center",children:[e.jsx(be,{size:18,className:"mr-3 text-blue-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-500",children:"Phone"}),e.jsx("div",{className:"font-medium",children:l.phone})]})]}),l.address&&e.jsxs("div",{className:"flex items-start",children:[e.jsx(ue,{size:18,className:"mr-3 mt-1 text-blue-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-500",children:"Address"}),e.jsx("div",{className:"font-medium",children:l.address})]})]}),e.jsxs("div",{className:"flex items-start",children:[e.jsx(ms,{size:18,className:"mr-3 mt-1 text-blue-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-500",children:"Business Hours"}),e.jsx("div",{className:"font-medium",children:"Mon-Sat: 9am - 8pm"}),e.jsx("div",{className:"text-sm text-gray-500",children:"Sunday: Closed"})]})]})]})]})}),e.jsx("div",{children:e.jsxs("div",{className:"bg-green-50 p-4 rounded-xl",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-3 flex items-center",children:[e.jsx(ie,{size:20,className:"mr-2 text-green-600"}),"Available Medicines"]}),l.Medicines&&l.Medicines.length>0?e.jsx("ul",{className:"space-y-2",children:l.Medicines.map((j,C)=>e.jsxs("li",{className:"flex items-center bg-white p-3 rounded-lg shadow-sm",children:[e.jsx("span",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center mr-3",children:e.jsx(ie,{size:16,className:"text-green-600"})}),e.jsx("span",{className:"font-medium",children:j})]},C))}):e.jsx("p",{className:"text-gray-600",children:"No medicines listed"})]})})]}),e.jsxs("div",{className:"mt-8 pt-4 border-t border-gray-200 flex justify-between items-center",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Last updated: April 28, 2025"}),e.jsx("button",{className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg shadow transition-all hover:shadow-lg",onClick:()=>t(null),children:"Close Details"})]})]})]})}):null;return p?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100",children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:"w-16 h-16 border-4 border-blue-400 border-t-blue-600 rounded-full animate-spin"}),e.jsx("p",{className:"mt-4 text-lg text-gray-700",children:"Loading stockists..."})]})}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100",children:e.jsxs("div",{className:"max-w-6xl mx-auto p-4 md:p-6",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs(Z.div,{className:"flex flex-col md:flex-row md:items-center md:justify-between",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.4},children:[e.jsxs("div",{className:"mb-4 md:mb-0",children:[e.jsxs("h1",{className:"text-3xl md:text-4xl font-extrabold text-gray-800",children:[e.jsx("span",{className:"text-blue-700",children:"Medicine"})," Stockists"]}),e.jsxs("p",{className:"text-gray-600 mt-2",children:["Showing stockists with"," ",e.jsx("span",{className:"font-semibold text-blue-600",children:a})]})]}),e.jsxs("div",{className:"relative w-full md:w-64",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(is,{size:18,className:"text-gray-400"})}),e.jsx("input",{type:"text",className:"bg-white border border-gray-200 text-gray-700 rounded-lg pl-10 pr-4 py-2 w-full shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-300",placeholder:"Search medicines...",value:c,onChange:j=>u(j.target.value)})]})]}),e.jsx(Z.div,{className:"mt-4 bg-blue-600 text-white p-4 rounded-lg shadow-md",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,delay:.2},children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(ie,{size:24,className:"mr-3 mt-1"}),e.jsxs("div",{children:[e.jsx("h2",{className:"font-bold text-lg",children:"Why Choose Local Stockists?"}),e.jsx("p",{className:"mt-1 text-blue-100",children:"Supporting local stockists ensures you get authentic medicines and personalized service. Click on any stockist to see more details."})]})]})})]}),e.jsx(rs,{mode:"wait",children:l?e.jsx(N,{}):e.jsx(Z.div,{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},children:o.length>0?o.map((j,C)=>e.jsx(h,{stockist:j,index:C},C)):e.jsx("div",{className:"col-span-full flex justify-center py-16",children:e.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-lg text-center max-w-md",children:[e.jsx("div",{className:"w-20 h-20 bg-amber-100 rounded-full flex items-center justify-center mx-auto mb-6",children:e.jsx(qe,{size:32,className:"text-amber-500"})}),e.jsx("h3",{className:"text-2xl font-bold text-gray-800 mb-2",children:"No Results"}),e.jsxs("p",{className:"text-gray-600",children:['No stockists found with medicine "',e.jsx("strong",{children:c}),'". Try searching for a different medicine or checking your spelling.']})]})})})}),e.jsx(Z.div,{className:"mt-12 text-center text-gray-500 text-sm",initial:{opacity:0},animate:{opacity:1},transition:{delay:.5,duration:.4},children:e.jsx("p",{children:"Â© 2025 DK Pharma. All stockist information is updated regularly."})})]})})}const Rs=()=>{const s=ee(),[a,r]=i.useState(()=>{try{const d=localStorage.getItem("user");return d?JSON.parse(d):null}catch{return null}}),[l,t]=i.useState(""),[c,u]=i.useState(!1);i.useEffect(()=>{a||(async()=>{const o=localStorage.getItem("token");if(o){u(!0);try{const h=await fetch(`${re}/api/auth/me`,{headers:{Authorization:`Bearer ${o}`}}),N=await h.json();if(!h.ok)throw new Error(N.message||"Failed to load profile");if(N.success&&N.user)r(N.user),localStorage.setItem("user",JSON.stringify(N.user));else throw new Error("Invalid response format")}catch(h){t(h.message)}finally{u(!1)}}})()},[]);const p=()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),s("/")};return localStorage.getItem("token")?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-green-50 py-8 px-4",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"w-24 h-24 bg-gradient-to-br from-blue-100 to-purple-100 rounded-full flex items-center justify-center mx-auto mb-4 shadow-lg",children:e.jsx(fe,{size:48,className:"text-blue-600"})}),e.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent mb-2",children:"Your Profile"}),e.jsx("p",{className:"text-gray-600",children:"Manage your medical store information"})]}),c&&e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl shadow-xl p-8 text-center border border-gray-100 mb-6",children:[e.jsx("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"})}),e.jsx("p",{className:"text-gray-600 text-lg",children:"Loading your profile..."})]}),l&&e.jsx("div",{className:"bg-red-50/80 backdrop-blur-sm text-red-700 px-6 py-4 rounded-2xl border border-red-200 mb-6 shadow-lg",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-red-100 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-red-600 text-lg",children:"âš ï¸"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:"Error Loading Profile"}),e.jsx("p",{children:l})]})]})}),a&&e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl shadow-xl p-6 border border-white/20",children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx(xe,{size:24,className:"text-blue-600"}),"Store Information"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 p-4 rounded-xl border border-blue-100",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(xe,{size:20,className:"text-blue-600"}),e.jsx("span",{className:"text-gray-500 text-sm font-medium",children:"Medical Store Name"})]}),e.jsx("p",{className:"text-gray-900 font-semibold text-lg",children:a.medicalName})]}),e.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 p-4 rounded-xl border border-green-100",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(fe,{size:20,className:"text-green-600"}),e.jsx("span",{className:"text-gray-500 text-sm font-medium",children:"Owner Name"})]}),e.jsx("p",{className:"text-gray-900 font-semibold text-lg",children:a.ownerName})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 p-4 rounded-xl border border-purple-100",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(Ce,{size:20,className:"text-purple-600"}),e.jsx("span",{className:"text-gray-500 text-sm font-medium",children:"Email Address"})]}),e.jsx("p",{className:"text-gray-900 font-semibold break-all",children:a.email})]}),e.jsxs("div",{className:"bg-gradient-to-r from-orange-50 to-amber-50 p-4 rounded-xl border border-orange-100",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(be,{size:20,className:"text-orange-600"}),e.jsx("span",{className:"text-gray-500 text-sm font-medium",children:"Contact Number"})]}),e.jsx("p",{className:"text-gray-900 font-semibold",children:a.contactNo})]})]})]})]}),e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl shadow-xl p-6 border border-white/20",children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx(ue,{size:24,className:"text-green-600"}),"Location & License"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 p-4 rounded-xl border border-green-100",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(ue,{size:20,className:"text-green-600"}),e.jsx("span",{className:"text-gray-500 text-sm font-medium",children:"Store Address"})]}),e.jsx("p",{className:"text-gray-900 font-semibold",children:a.address})]}),e.jsxs("div",{className:"bg-gradient-to-r from-indigo-50 to-blue-50 p-4 rounded-xl border border-indigo-100",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(Me,{size:20,className:"text-indigo-600"}),e.jsx("span",{className:"text-gray-500 text-sm font-medium",children:"Drug License Number"})]}),e.jsx("p",{className:"text-gray-900 font-semibold text-lg font-mono",children:a.drugLicenseNo})]})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl shadow-xl p-6 border border-white/20",children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx(Je,{size:24,className:"text-purple-600"}),"Drug License Image"]}),e.jsx("div",{className:"border-2 border-dashed border-purple-200 rounded-xl overflow-hidden bg-gradient-to-br from-purple-50 to-pink-50",children:a.drugLicenseImage?e.jsx("img",{src:a.drugLicenseImage.startsWith("http")?a.drugLicenseImage:`${re}${a.drugLicenseImage}`,alt:"Drug License",className:"w-full h-80 object-contain bg-white"}):e.jsxs("div",{className:"h-80 flex flex-col items-center justify-center text-gray-400",children:[e.jsx(Je,{size:48,className:"mb-2 text-gray-300"}),e.jsx("p",{className:"text-center",children:"No image uploaded"}),e.jsx("p",{className:"text-sm text-gray-300",children:"Upload your drug license"})]})})]}),e.jsx("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl shadow-xl p-6 border border-white/20",children:e.jsxs("button",{onClick:p,className:"w-full flex items-center justify-center gap-2 bg-gradient-to-r from-red-600 to-red-700 text-white px-6 py-3 rounded-xl font-medium shadow-lg hover:shadow-xl transition-all duration-200 transform hover:scale-105 active:scale-95",children:[e.jsx(xs,{size:20}),e.jsx("span",{children:"Logout"})]})})]})]})]})}):e.jsx("div",{className:"min-h-screen flex items-center justify-center p-6 bg-gradient-to-br from-blue-50 via-white to-green-50",children:e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm text-yellow-800 px-8 py-6 rounded-2xl border border-yellow-200 shadow-xl max-w-md text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-yellow-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(fe,{size:32,className:"text-yellow-600"})}),e.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Authentication Required"}),e.jsx("p",{className:"text-yellow-700 mb-4",children:"Please log in to view your profile."}),e.jsx("button",{onClick:()=>s("/login"),className:"bg-gradient-to-r from-blue-600 to-blue-700 text-white px-6 py-2 rounded-xl font-medium hover:shadow-lg transition-all duration-200 transform hover:scale-105",children:"Go to Login"})]})})};function Os(){const[s,a]=i.useState(!1),r=(()=>{try{return ee()}catch{return null}})();if(i.useEffect(()=>{try{const t=localStorage.getItem("user");if(!t)return;const c=JSON.parse(t);a(c&&c.role==="admin")}catch(t){console.warn("AdminPanel: could not read user from storage",t)}},[]),!s)return e.jsxs("div",{className:"min-h-screen bg-slate-50 flex flex-col items-start p-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-800 mb-4",children:"Admin Panel"}),e.jsx("p",{className:"text-slate-500",children:"You must be an admin to access this page."})]});const l=t=>{r?r(t):window.location.href=t};return e.jsxs("div",{className:"min-h-screen bg-slate-50 flex flex-col items-start p-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-800 mb-6",children:"Admin Panel"}),e.jsx("button",{onClick:()=>l("/adminCreateStockist"),className:"w-full sm:w-auto bg-blue-500 hover:bg-blue-600 text-white font-semibold px-6 py-3 rounded-lg mb-3",children:"Create Stockist"}),e.jsx("button",{onClick:()=>l("/adminCreateCompany"),className:"w-full sm:w-auto bg-blue-500 hover:bg-blue-600 text-white font-semibold px-6 py-3 rounded-lg mb-3",children:"Create Company"}),e.jsx("button",{onClick:()=>l("/adminCreateMedicine"),className:"w-full sm:w-auto bg-blue-500 hover:bg-blue-600 text-white font-semibold px-6 py-3 rounded-lg",children:"Create Medicine"})]})}const le=i.memo(({icon:s,label:a,type:r="text",placeholder:l,value:t,onChange:c,required:u=!1,path:p,...d})=>{const o=h=>c(p,h.target.value);return e.jsxs("div",{className:"bg-white rounded-2xl p-4 shadow-sm border border-gray-100",children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-3 flex items-center gap-2",children:[s&&e.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-r from-cyan-400 to-blue-500 flex items-center justify-center",children:e.jsx(s,{size:16,className:"text-white"})}),a,u&&e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:r,placeholder:l,className:"w-full rounded-xl border-2 border-gray-100 px-4 py-3 bg-gray-50 focus:bg-white focus:border-cyan-400 transition-all duration-200 text-gray-800",value:t,onChange:o,required:u,...d})]})}),es=({label:s,icon:a,onChange:r,hasFile:l,fileName:t})=>e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-gray-100",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-r from-orange-400 to-pink-500 flex items-center justify-center",children:e.jsx(a,{size:20,className:"text-white"})}),e.jsx("span",{className:"font-semibold text-gray-700",children:s})]}),l&&e.jsx($e,{className:"text-green-500",size:20})]}),e.jsxs("label",{className:"block",children:[e.jsx("input",{type:"file",accept:"image/*",onChange:r,className:"hidden"}),e.jsxs("div",{className:"border-2 border-dashed border-gray-200 rounded-xl p-4 text-center hover:border-cyan-400 transition-colors cursor-pointer",children:[e.jsx(gs,{className:"mx-auto text-gray-400 mb-2",size:24}),e.jsx("p",{className:"text-sm text-gray-500",children:l?`Selected: ${t}`:"Tap to upload image"})]})]})]}),ss=({label:s,value:a,onChange:r,options:l,icon:t})=>e.jsxs("div",{className:"bg-white rounded-2xl p-4 shadow-sm border border-gray-100",children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-3 flex items-center gap-2",children:[t&&e.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-r from-purple-400 to-indigo-500 flex items-center justify-center",children:e.jsx(t,{size:16,className:"text-white"})}),s]}),e.jsxs("select",{value:a,onChange:c=>r(c.target.value),className:"w-full rounded-xl border-2 border-gray-100 px-4 py-3 bg-gray-50 focus:bg-white focus:border-cyan-400 transition-all duration-200 text-gray-800",children:[e.jsxs("option",{value:"",children:["Select ",s]}),l.map(c=>e.jsx("option",{value:c,children:c},c))]})]});function Ws(){const[s,a]=i.useState({name:"",contactPerson:"",phone:"",email:"",password:"",address:{street:"",city:"",state:"",pincode:""},licenseNumber:"",licenseExpiry:"",licenseImageUrl:"",dob:"",bloodGroup:"",profileImageUrl:"",roleType:"",cntxNumber:""}),[r,l]=i.useState(!1),[t,c]=i.useState(null),[u,p]=i.useState(null),[d,o]=i.useState(1),h=i.useCallback((f,I)=>{if(f&&f.startsWith("address.")){const v=f.split(".")[1];a(m=>({...m,address:{...m.address,[v]:I}}))}else a(v=>({...v,[f]:I}))},[]),N=f=>{var v,m;const I=((m=(v=f==null?void 0:f.target)==null?void 0:v.files)==null?void 0:m[0])||null;c(I)},j=f=>{var v,m;const I=((m=(v=f==null?void 0:f.target)==null?void 0:v.files)==null?void 0:m[0])||null;p(I)},C=async f=>{f&&f.preventDefault(),l(!0),await new Promise(I=>setTimeout(I,2e3)),console.log("Form submitted:",s),l(!1),alert("Stockist created successfully!")},n=["A+","A-","B+","B-","AB+","AB-","O+","O-"],b=["Proprietor","Pharmacist"];return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50",children:[e.jsx("div",{className:"bg-white shadow-sm border-b border-gray-100",children:e.jsxs("div",{className:"max-w-md mx-auto px-4 py-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{className:"w-10 h-10 rounded-full bg-gray-100 flex items-center justify-center",children:e.jsx(Ee,{size:20,className:"text-gray-600"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"font-bold text-gray-800",children:"Create Stockist"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Register new stockist"})]})]}),e.jsx(ve,{className:"text-red-400",size:24})]})}),e.jsxs("div",{className:"max-w-md mx-auto p-4 space-y-4",children:[e.jsxs("div",{className:"bg-gradient-to-r from-cyan-400 to-blue-500 rounded-3xl p-6 text-white shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold",children:"Registration Form"}),e.jsx("p",{className:"text-blue-100",children:"Fill in stockist details"})]}),e.jsx("div",{className:"w-16 h-16 rounded-2xl bg-white/20 flex items-center justify-center",children:e.jsx(Ae,{size:28,className:"text-white"})})]}),e.jsx("div",{className:"flex gap-2",children:[1,2,3].map(f=>e.jsx("div",{className:`h-2 flex-1 rounded-full ${f<=d?"bg-white":"bg-white/30"}`},f))})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-white rounded-3xl p-6 shadow-sm border border-gray-100",children:[e.jsxs("h3",{className:"font-bold text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-r from-green-400 to-blue-500 flex items-center justify-center",children:e.jsx(fe,{size:16,className:"text-white"})}),"Basic Information"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(le,{icon:Ae,label:"Firm Name",placeholder:"Enter firm name",value:s.name,path:"name",onChange:h,required:!0}),e.jsx(le,{icon:fe,label:"Contact Person",placeholder:"Contact person name",value:s.contactPerson,path:"contactPerson",onChange:h})]})]}),e.jsxs("div",{className:"bg-white rounded-3xl p-6 shadow-sm border border-gray-100",children:[e.jsxs("h3",{className:"font-bold text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-r from-purple-400 to-pink-500 flex items-center justify-center",children:e.jsx(be,{size:16,className:"text-white"})}),"Contact Details"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(le,{icon:be,label:"Phone",placeholder:"Phone number",value:s.phone,path:"phone",onChange:h}),e.jsx(le,{icon:Ce,label:"Email",type:"email",placeholder:"Email address",value:s.email,path:"email",onChange:h}),e.jsx(le,{icon:hs,label:"Password",type:"password",placeholder:"Set password",value:s.password,path:"password",onChange:h,required:!0})]})]}),e.jsxs("div",{className:"bg-white rounded-3xl p-6 shadow-sm border border-gray-100",children:[e.jsxs("h3",{className:"font-bold text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-r from-orange-400 to-red-500 flex items-center justify-center",children:e.jsx(ue,{size:16,className:"text-white"})}),"Address Details"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(le,{icon:ue,label:"Street Address",placeholder:"Street address",value:s.address.street,path:"address.street",onChange:h}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx(le,{label:"City",placeholder:"City",value:s.address.city,path:"address.city",onChange:h}),e.jsx(le,{label:"State",placeholder:"State",value:s.address.state,path:"address.state",onChange:h})]}),e.jsx(le,{label:"Pincode",placeholder:"Pincode",value:s.address.pincode,path:"address.pincode",onChange:h})]})]}),e.jsxs("div",{className:"bg-white rounded-3xl p-6 shadow-sm border border-gray-100",children:[e.jsxs("h3",{className:"font-bold text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-r from-indigo-400 to-purple-500 flex items-center justify-center",children:e.jsx(Me,{size:16,className:"text-white"})}),"License Details"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(le,{icon:Me,label:"License Number",placeholder:"License number",value:s.licenseNumber,path:"licenseNumber",onChange:h}),e.jsx(le,{icon:Qe,label:"License Expiry",type:"date",value:s.licenseExpiry,path:"licenseExpiry",onChange:h})]})]}),e.jsxs("div",{className:"bg-white rounded-3xl p-6 shadow-sm border border-gray-100",children:[e.jsxs("h3",{className:"font-bold text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-r from-teal-400 to-cyan-500 flex items-center justify-center",children:e.jsx(fe,{size:16,className:"text-white"})}),"Personal Details"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(le,{icon:Qe,label:"Date of Birth",type:"date",value:s.dob,path:"dob",onChange:h}),e.jsx(ss,{icon:ve,label:"Blood Group",value:s.bloodGroup,onChange:f=>h("bloodGroup",f),options:n}),e.jsx(ss,{icon:Ae,label:"Role Type",value:s.roleType,onChange:f=>h("roleType",f),options:b}),e.jsx(le,{icon:fe,label:"CNTX Number",placeholder:"CNTX number",value:s.cntxNumber,path:"cntxNumber",onChange:h})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(es,{label:"Profile Image",icon:us,onChange:j,hasFile:!!u,fileName:u==null?void 0:u.name}),e.jsx(es,{label:"License Image",icon:Me,onChange:N,hasFile:!!t,fileName:t==null?void 0:t.name})]}),e.jsx("div",{className:"pt-4",children:e.jsx("button",{onClick:C,disabled:r,className:`w-full py-4 rounded-2xl font-bold text-lg shadow-lg transition-all duration-300 ${r?"bg-gray-400 cursor-not-allowed text-gray-600":"bg-gradient-to-r from-cyan-500 to-blue-600 hover:from-cyan-600 hover:to-blue-700 text-white transform hover:scale-[1.02] active:scale-[0.98]"}`,children:r?e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("div",{className:"w-5 h-5 border-2 border-gray-300 border-t-transparent rounded-full animate-spin"}),"Creating Stockist..."]}):"Create Stockist"})}),e.jsx("div",{className:"text-center pt-4",children:e.jsx("button",{type:"button",className:"px-8 py-3 rounded-xl bg-white border-2 border-gray-200 text-gray-600 font-semibold shadow-sm hover:border-cyan-400 hover:text-cyan-600 transition-colors duration-200",children:"Login as Stockist"})})]}),e.jsx("div",{className:"h-8"})]})]})}function Us(){const[s,a]=i.useState({name:"",stockists:[]}),[r,l]=i.useState(!1),[t,c]=i.useState([]),[u,p]=i.useState(!0),[d,o]=i.useState(null);i.useEffect(()=>{let n=!0;return(async()=>{var f,I;p(!0),o(null);try{const v=await ze.get(X("/api/stockist"));n&&c(v.data.data||[])}catch(v){n&&o(((I=(f=v.response)==null?void 0:f.data)==null?void 0:I.message)||v.message||"Failed to load stockists")}finally{n&&p(!1)}})(),()=>{n=!1}},[]);const h=(n,b)=>{a(f=>({...f,[n]:b}))},N=n=>{a(b=>({...b,stockists:b.stockists.includes(n)?b.stockists.filter(f=>f!==n):[...b.stockists,n]}))},j=async n=>{n&&n.preventDefault(),l(!0),setTimeout(()=>{alert("Success â€” company created"),l(!1)},2e3)},C=({stockist:n,isSelected:b,onToggle:f})=>e.jsx("div",{onClick:f,className:"group relative cursor-pointer transition-all duration-200 transform hover:scale-[1.02]",children:e.jsx("div",{className:`
        relative bg-white rounded-2xl border-2 transition-all duration-200 p-4 shadow-sm
        ${b?"border-teal-400 shadow-lg shadow-teal-500/20 bg-teal-50/30":"border-gray-200 hover:border-teal-300 hover:shadow-md"}
      `,children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:`
            p-3 rounded-xl transition-all duration-200 flex-shrink-0
            ${b?"bg-gradient-to-br from-teal-400 to-teal-500 shadow-lg":"bg-gray-100 group-hover:bg-teal-100"}
          `,children:e.jsx(je,{size:20,className:`transition-colors duration-200 ${b?"text-white":"text-gray-600 group-hover:text-teal-600"}`})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:`font-semibold text-sm transition-colors duration-200 truncate ${b?"text-teal-700":"text-gray-800 group-hover:text-gray-900"}`,children:n.name}),e.jsx("p",{className:`text-xs transition-colors duration-200 truncate ${b?"text-teal-600":"text-gray-500"}`,children:n.email}),e.jsxs("p",{className:`text-xs transition-colors duration-200 ${b?"text-teal-500":"text-gray-400"}`,children:["ðŸ“ ",n.location]})]}),e.jsx("div",{className:`
            w-6 h-6 rounded-full border-2 transition-all duration-200 flex items-center justify-center flex-shrink-0
            ${b?"border-teal-500 bg-teal-500 shadow-lg":"border-gray-300 group-hover:border-teal-400"}
          `,children:b&&e.jsx(ye,{size:14,className:"text-white"})})]})})});return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-blue-50/30 to-teal-50/50",children:[e.jsx("div",{className:"bg-white shadow-sm border-b border-gray-100",children:e.jsx("div",{className:"max-w-md mx-auto px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("button",{className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:e.jsx(Ee,{size:20,className:"text-gray-600"})}),e.jsx("h1",{className:"text-lg font-semibold text-gray-800",children:"Create Company"}),e.jsx("div",{className:"w-8"})," "]})})}),e.jsxs("div",{className:"max-w-md mx-auto px-6 py-6 space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-r from-teal-400 to-teal-500 rounded-3xl p-6 text-white shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold mb-1",children:"Your Health Hub"}),e.jsx("p",{className:"text-teal-100 text-sm",children:"Register New Company"})]}),e.jsx("div",{className:"bg-white/20 p-3 rounded-2xl backdrop-blur-sm",children:e.jsx(xe,{size:24,className:"text-white"})})]}),e.jsxs("div",{className:"flex items-center gap-2 text-teal-100 text-sm",children:[e.jsx(Ye,{size:16}),e.jsx("span",{children:"Secure & Verified Platform"})]})]}),e.jsx("div",{className:"bg-white rounded-3xl shadow-sm border border-gray-100 overflow-hidden",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"p-2 bg-orange-100 rounded-xl",children:e.jsx(xe,{size:20,className:"text-orange-600"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Company Details"})]}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Company Name *"}),e.jsx("input",{type:"text",placeholder:"Enter company name",className:"w-full bg-gray-50 border border-gray-200 rounded-xl px-4 py-3 text-gray-800 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-teal-400 focus:border-transparent transition-all duration-200",value:s.name,onChange:n=>h("name",n.target.value),required:!0})]})})]})}),e.jsxs("div",{className:"bg-white rounded-3xl shadow-sm border border-gray-100 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Quick Actions"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"bg-teal-400 rounded-2xl p-4 text-white",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(fs,{size:20}),e.jsx("span",{className:"text-xs bg-white/20 px-2 py-1 rounded-full",children:"Active"})]}),e.jsx("p",{className:"text-sm font-medium",children:"Assign Stockists"}),e.jsx("p",{className:"text-xs text-teal-100",children:"Manage distribution"})]}),e.jsxs("div",{className:"bg-orange-400 rounded-2xl p-4 text-white",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(ie,{size:20}),e.jsx("span",{className:"text-xs bg-white/20 px-2 py-1 rounded-full",children:"Setup"})]}),e.jsx("p",{className:"text-sm font-medium",children:"Product Catalog"}),e.jsx("p",{className:"text-xs text-orange-100",children:"Add medicines"})]})]})]}),e.jsx("div",{className:"bg-white rounded-3xl shadow-sm border border-gray-100 overflow-hidden",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-teal-100 rounded-xl",children:e.jsx(Ne,{size:20,className:"text-teal-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Assign Stockists"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Optional - Select partners"})]})]}),e.jsx("div",{className:"bg-teal-50 px-3 py-1 rounded-full",children:e.jsxs("span",{className:"text-xs font-medium text-teal-600",children:[s.stockists.length," selected"]})})]}),e.jsx("div",{className:"space-y-3 max-h-80 overflow-y-auto",children:t.length===0?e.jsx("div",{className:"p-4 bg-yellow-50 border border-yellow-200 rounded-2xl text-center",children:e.jsx("p",{className:"text-yellow-700 text-sm font-medium",children:"No stockists found."})}):t.map(n=>e.jsx(C,{stockist:n,isSelected:s.stockists.includes(n._id),onToggle:()=>N(n._id)},n._id))})]})}),e.jsxs("div",{className:"bg-white rounded-3xl shadow-sm border border-gray-100 p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx(ve,{size:18,className:"text-red-500"}),"Health Tips"]}),e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"bg-blue-100 p-3 rounded-xl mb-2 mx-auto w-fit",children:e.jsx(ie,{size:16,className:"text-blue-600"})}),e.jsx("p",{className:"text-xs font-medium text-gray-700",children:"Stay Hydrated"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Drink Water"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"bg-orange-100 p-3 rounded-xl mb-2 mx-auto w-fit",children:e.jsx(ve,{size:16,className:"text-orange-600"})}),e.jsx("p",{className:"text-xs font-medium text-gray-700",children:"New Moms"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Care Guide"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"bg-green-100 p-3 rounded-xl mb-2 mx-auto w-fit",children:e.jsx(Ye,{size:16,className:"text-green-600"})}),e.jsx("p",{className:"text-xs font-medium text-gray-700",children:"Check Labels"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Read carefully"})]})]})]}),e.jsx("div",{className:"pb-6",children:e.jsx("button",{type:"submit",onClick:j,className:`w-full font-semibold py-4 px-6 rounded-2xl transition-all duration-300 shadow-lg ${r?"bg-gray-400 cursor-not-allowed":"bg-gradient-to-r from-teal-400 to-teal-500 hover:from-teal-500 hover:to-teal-600 active:scale-95 shadow-teal-500/25"} text-white`,disabled:r,children:r?e.jsxs("div",{className:"flex items-center justify-center gap-3",children:[e.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}),e.jsx("span",{children:"Creating Company..."})]}):e.jsxs("div",{className:"flex items-center justify-center gap-3",children:[e.jsx(Ie,{size:20}),e.jsx("span",{children:"CREATE COMPANY"})]})})})]}),e.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 shadow-lg",children:e.jsx("div",{className:"max-w-md mx-auto px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-around",children:[e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:"p-2 bg-teal-100 rounded-xl",children:e.jsx(xe,{size:16,className:"text-teal-600"})}),e.jsx("span",{className:"text-xs text-teal-600 font-medium mt-1",children:"Companies"})]}),e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx(je,{size:16,className:"text-gray-400"}),e.jsx("span",{className:"text-xs text-gray-400 mt-1",children:"Products"})]}),e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx(Ne,{size:16,className:"text-gray-400"}),e.jsx("span",{className:"text-xs text-gray-400 mt-1",children:"Stockists"})]}),e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx(ve,{size:16,className:"text-gray-400"}),e.jsx("span",{className:"text-xs text-gray-400 mt-1",children:"Health"})]})]})})})]})}function Vs(){const[s,a]=i.useState({name:"",company:"",stockists:[]}),[r,l]=i.useState(!1),[t,c]=i.useState([]),[u,p]=i.useState([]),[d,o]=i.useState({x:0,y:0}),[h,N]=i.useState([]),j=ee();i.useEffect(()=>{const v=m=>{o({x:m.clientX,y:m.clientY})};return window.addEventListener("mousemove",v),()=>window.removeEventListener("mousemove",v)},[]),i.useEffect(()=>{(()=>{const m=[];for(let A=0;A<12;A++)m.push({id:A,x:Math.random()*100,y:Math.random()*100,size:Math.random()*3+1,opacity:Math.random()*.3+.1,duration:Math.random()*4+3});N(m)})()},[]);const C=(v,m)=>{a(A=>({...A,[v]:m}))},n=v=>{a(m=>({...m,stockists:m.stockists.includes(v)?m.stockists.filter(A=>A!==v):[...m.stockists,v]}))},b=async v=>{v&&v.preventDefault(),l(!0);try{const m=localStorage.getItem("token"),A=await fetch(X("/api/medicine/quick"),{method:"POST",headers:{"Content-Type":"application/json",...m?{Authorization:`Bearer ${m}`}:{}},body:JSON.stringify(s)}),k=await A.json().catch(()=>({}));if(A.ok)window.alert("Success â€” medicine created"),j?j(-1):window.history.back();else{const B=k&&k.message||JSON.stringify(k)||A.statusText;window.alert(`Error: ${B}`)}}catch(m){window.alert(`Error: ${String(m)}`)}finally{l(!1)}};i.useEffect(()=>{(async()=>{try{const v=await fetch(X("/api/company")),m=await v.json().catch(()=>({})),A=m&&m.data||[];v.ok&&Array.isArray(A)&&c(A);const k=await fetch(X("/api/stockist")),B=await k.json().catch(()=>({})),x=B&&B.data||[];k.ok&&Array.isArray(x)&&p(x)}catch(v){console.error("Failed to load companies/stockists",v)}})()},[]);const f=({company:v,isSelected:m,onClick:A})=>e.jsx("div",{onClick:A,className:`group relative cursor-pointer transition-all duration-300 transform hover:scale-105 hover:-translate-y-1 ${m?"z-10":""}`,children:e.jsx("div",{className:`
        relative bg-white/80 backdrop-blur-xl rounded-2xl border transition-all duration-300 p-6
        ${m?"border-blue-400/50 shadow-xl shadow-blue-500/20 bg-blue-50/50":"border-white/40 hover:border-blue-300/30 hover:shadow-lg hover:shadow-blue-500/10"}
      `,children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:`
            p-3 rounded-2xl transition-all duration-300
            ${m?"bg-gradient-to-r from-blue-500 to-indigo-600 shadow-lg":"bg-slate-100 group-hover:bg-blue-100"}
          `,children:e.jsx(xe,{size:20,className:`transition-colors duration-300 ${m?"text-white":"text-slate-600 group-hover:text-blue-600"}`})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:`font-semibold transition-colors duration-300 ${m?"text-blue-700":"text-slate-700 group-hover:text-slate-800"}`,children:v.name}),e.jsx("p",{className:`text-sm transition-colors duration-300 ${m?"text-blue-600":"text-slate-500"}`,children:v.email})]}),e.jsx("div",{className:`
            w-6 h-6 rounded-full border-2 transition-all duration-300 flex items-center justify-center
            ${m?"border-blue-500 bg-blue-500":"border-slate-300 group-hover:border-blue-400"}
          `,children:m&&e.jsx(ye,{size:14,className:"text-white"})})]})})}),I=({stockist:v,isSelected:m,onToggle:A})=>e.jsx("div",{onClick:A,className:"group relative cursor-pointer transition-all duration-300 transform hover:scale-105 hover:-translate-y-1",children:e.jsx("div",{className:`
        relative bg-white/80 backdrop-blur-xl rounded-2xl border transition-all duration-300 p-6
        ${m?"border-emerald-400/50 shadow-xl shadow-emerald-500/20 bg-emerald-50/50":"border-white/40 hover:border-emerald-300/30 hover:shadow-lg hover:shadow-emerald-500/10"}
      `,children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:`
            p-3 rounded-2xl transition-all duration-300
            ${m?"bg-gradient-to-r from-emerald-500 to-teal-600 shadow-lg":"bg-slate-100 group-hover:bg-emerald-100"}
          `,children:e.jsx(je,{size:20,className:`transition-colors duration-300 ${m?"text-white":"text-slate-600 group-hover:text-emerald-600"}`})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:`font-semibold transition-colors duration-300 ${m?"text-emerald-700":"text-slate-700 group-hover:text-slate-800"}`,children:v.name}),e.jsx("p",{className:`text-sm transition-colors duration-300 ${m?"text-emerald-600":"text-slate-500"}`,children:v.email})]}),e.jsx("div",{className:`
            w-6 h-6 rounded-lg border-2 transition-all duration-300 flex items-center justify-center
            ${m?"border-emerald-500 bg-emerald-500":"border-slate-300 group-hover:border-emerald-400"}
          `,children:m&&e.jsx(ye,{size:14,className:"text-white"})})]})})});return e.jsxs("div",{className:"min-h-screen relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 transition-all duration-1000",style:{background:`radial-gradient(600px circle at ${d.x}px ${d.y}px, 
            rgba(99, 102, 241, 0.08), 
            rgba(139, 92, 246, 0.05), 
            rgba(168, 85, 247, 0.03), 
            transparent 50%),
            linear-gradient(135deg, 
            #f8fafc 0%, 
            #f1f5f9 25%, 
            #e2e8f0 50%, 
            #cbd5e1 75%, 
            #94a3b8 100%)`}}),h.map(v=>e.jsx("div",{className:"absolute w-1 h-1 bg-blue-400/40 rounded-full animate-ping",style:{left:`${v.x}%`,top:`${v.y}%`,opacity:v.opacity,animationDuration:`${v.duration}s`,animationDelay:`${v.id*.2}s`}},v.id)),e.jsxs("div",{className:"absolute inset-0",children:[e.jsx("div",{className:"absolute top-1/4 left-1/4 w-96 h-96 bg-gradient-to-r from-blue-500/5 to-indigo-500/5 rounded-full blur-3xl animate-pulse"}),e.jsx("div",{className:"absolute bottom-1/4 right-1/4 w-80 h-80 bg-gradient-to-r from-indigo-500/5 to-purple-500/5 rounded-full blur-3xl animate-pulse delay-1000"})]}),e.jsx("div",{className:"relative flex items-start justify-center min-h-screen py-8 px-4",children:e.jsx("div",{className:"w-full max-w-4xl",children:e.jsxs("div",{className:"relative bg-white/80 backdrop-blur-2xl rounded-3xl border border-white/60 shadow-2xl shadow-slate-200/50 p-8 sm:p-12",children:[e.jsx("div",{className:"absolute inset-0 rounded-3xl bg-gradient-to-r from-blue-500/10 via-indigo-500/10 to-purple-500/10 blur-sm animate-pulse"}),e.jsx("div",{className:"absolute inset-[1px] rounded-3xl bg-white/90 backdrop-blur-xl"}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"text-center mb-12 relative",children:[e.jsx("div",{className:"absolute -top-6 left-1/2 transform -translate-x-1/2",children:e.jsx(bs,{className:"text-blue-400 animate-pulse",size:24})}),e.jsx("div",{className:"absolute -top-3 left-1/3 transform -translate-x-1/2",children:e.jsx(ie,{className:"text-indigo-400 animate-bounce delay-300",size:16})}),e.jsx("div",{className:"absolute -top-3 right-1/3 transform translate-x-1/2",children:e.jsx(Ie,{className:"text-purple-400 animate-bounce delay-700",size:16})}),e.jsx("div",{className:"inline-flex items-center justify-center p-4 bg-gradient-to-r from-blue-500/10 to-indigo-500/10 rounded-3xl backdrop-blur-xl border border-white/30 mb-6",children:e.jsx(ie,{className:"w-8 h-8 text-blue-500 animate-pulse"})}),e.jsxs("h1",{className:"text-4xl sm:text-5xl font-black mb-4 relative",children:[e.jsx("span",{className:"bg-gradient-to-r from-slate-700 via-slate-600 to-slate-500 bg-clip-text text-transparent",children:"Create Medicine"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-500/20 via-indigo-500/20 to-purple-500/20 bg-clip-text text-transparent blur-sm animate-pulse delay-500"})]}),e.jsx("p",{className:"text-slate-500 text-lg font-light",children:"Add new medicine with company and stockist assignments"})]}),e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-500/3 to-indigo-500/3 rounded-3xl blur-xl"}),e.jsxs("div",{className:"relative bg-white/60 backdrop-blur-xl rounded-3xl border border-white/40 p-8 shadow-lg shadow-slate-200/20",children:[e.jsxs("h2",{className:"text-xl font-bold text-slate-600 mb-6 flex items-center gap-3",children:[e.jsx(ie,{className:"text-blue-500",size:20}),"Medicine Details"]}),e.jsxs("div",{className:"group relative",children:[e.jsxs("label",{className:"block text-sm font-semibold text-slate-600 mb-3 flex items-center gap-2",children:[e.jsx(ie,{size:16,className:"text-blue-500"}),"Medicine Name"]}),e.jsx("input",{type:"text",placeholder:"Enter medicine name",className:"w-full bg-white/90 backdrop-blur-xl border border-slate-200/50 rounded-2xl px-5 py-4 text-slate-700 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-400/50 focus:border-blue-400/50 transition-all duration-300 hover:border-slate-300/50 hover:bg-white group-hover:shadow-lg group-hover:shadow-blue-500/10",value:s.name,onChange:v=>C("name",v.target.value),required:!0})]})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-indigo-500/3 to-purple-500/3 rounded-3xl blur-xl"}),e.jsxs("div",{className:"relative bg-white/60 backdrop-blur-xl rounded-3xl border border-white/40 p-8 shadow-lg shadow-slate-200/20",children:[e.jsxs("h2",{className:"text-xl font-bold text-slate-600 mb-6 flex items-center gap-3",children:[e.jsx(xe,{className:"text-indigo-500",size:20}),"Select Company"]}),e.jsx("div",{className:"space-y-4",children:t.length===0?e.jsx("div",{className:"p-6 bg-yellow-50/80 border border-yellow-200/50 rounded-2xl backdrop-blur-xl",children:e.jsx("p",{className:"text-yellow-700 font-medium",children:"No companies found."})}):t.map(v=>e.jsx(f,{company:v,isSelected:s.company===v._id,onClick:()=>C("company",v._id)},v._id))})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-emerald-500/3 to-teal-500/3 rounded-3xl blur-xl"}),e.jsxs("div",{className:"relative bg-white/60 backdrop-blur-xl rounded-3xl border border-white/40 p-8 shadow-lg shadow-slate-200/20",children:[e.jsxs("h2",{className:"text-xl font-bold text-slate-600 mb-6 flex items-center gap-3",children:[e.jsx(Ne,{className:"text-emerald-500",size:20}),"Assign to Stockists",e.jsx("span",{className:"text-sm font-normal text-slate-500",children:"(Optional)"})]}),e.jsx("div",{className:"space-y-4",children:u.length===0?e.jsx("div",{className:"p-6 bg-yellow-50/80 border border-yellow-200/50 rounded-2xl backdrop-blur-xl",children:e.jsx("p",{className:"text-yellow-700 font-medium",children:"No stockists found."})}):u.map(v=>e.jsx(I,{stockist:v,isSelected:s.stockists.includes(v._id),onToggle:()=>n(v._id)},v._id))}),s.stockists.length>0&&e.jsx("div",{className:"mt-6 p-4 bg-emerald-50/80 border border-emerald-200/50 rounded-2xl backdrop-blur-xl",children:e.jsxs("p",{className:"text-emerald-700 font-medium",children:["Selected ",s.stockists.length," stockist",s.stockists.length===1?"":"s"]})})]})]}),e.jsx("div",{className:"pt-8",children:e.jsxs("button",{type:"submit",onClick:b,className:`group relative w-full text-white font-bold py-5 px-8 rounded-2xl transition-all duration-500 transform hover:scale-105 overflow-hidden border border-white/30 ${r?"bg-gradient-to-r from-blue-400/70 to-indigo-500/70 cursor-not-allowed":"bg-gradient-to-r from-blue-500 via-indigo-600 to-blue-700 hover:shadow-2xl hover:shadow-blue-500/25"}`,disabled:r,children:[!r&&e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent -skew-x-12 translate-x-[-200%] group-hover:translate-x-[200%] transition-transform duration-1000"}),e.jsx("div",{className:"relative flex items-center justify-center gap-3",children:r?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}),e.jsx("span",{className:"text-lg tracking-wider",children:"Creating Medicine..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(ie,{size:20}),e.jsx("span",{className:"text-lg tracking-wider",children:"CREATE MEDICINE"})]})}),!r&&e.jsx("div",{className:"absolute inset-0 rounded-2xl bg-gradient-to-r from-blue-500/30 via-indigo-500/30 to-blue-500/30 blur-md -z-10 animate-pulse"})]})})]})]})]})})})]})}const Hs=({srcCandidates:s=[],alt:a="",className:r=""})=>{const[l,t]=ns.useState(0),c=s&&s.length?s[l]:null;return e.jsx("img",{src:c,alt:a,className:r,onError:u=>{l+1<s.length?t(l+1):(u.currentTarget.onerror=null,u.currentTarget.src="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='120' height='120'><rect width='100%' height='100%' fill='%23e6eefc'/><text x='50%' y='50%' dominant-baseline='middle' text-anchor='middle' fill='%236b8bd7' font-size='20'>Photo</text></svg>")}})},qs=()=>{const[s,a]=i.useState([]);i.useEffect(()=>{(async()=>{l(!0),c(null);try{const y=await ze.get(X("/api/purchaser"));a(y.data.data||[])}catch{c("Failed to fetch purchasers")}l(!1)})()},[]);const[r,l]=i.useState(!1),[t,c]=i.useState(null),[u,p]=i.useState({fullName:"",address:"",contactNo:"",aadharImage:null,photo:null}),[d,o]=i.useState(null),[h,N]=i.useState(null),[j,C]=i.useState(!1),[n,b]=i.useState(!0),[f,I]=i.useState(""),v=x=>{const{name:y,value:_,files:E}=x.target;y==="aadharImage"&&E&&E[0]?(p({...u,aadharImage:E[0]}),o(URL.createObjectURL(E[0]))):y==="photo"&&E&&E[0]?(p({...u,photo:E[0]}),N(URL.createObjectURL(E[0]))):p({...u,[y]:_})},m=()=>{p({fullName:"",address:"",contactNo:"",aadharImage:null,photo:null}),o(null),N(null)},A=async x=>{var y,_;x.preventDefault(),C(!0),c(null);try{if(!u.aadharImage||!u.photo){c("Aadhar image and photo are required"),C(!1);return}const E=new FormData;E.append("fullName",u.fullName),E.append("address",u.address),E.append("contactNo",u.contactNo),E.append("aadharImage",u.aadharImage),E.append("photo",u.photo);const $=await ze.post(X("/api/purchaser"),E,{headers:{"Content-Type":"multipart/form-data"}});if($.data&&$.data.success)a([$.data.data,...s]),m(),b(!1),I("Purchaser added successfully!"),C(!1),setTimeout(()=>{I("")},3e3);else throw new Error($.data.message||"Failed to add purchaser")}catch(E){c(((_=(y=E.response)==null?void 0:y.data)==null?void 0:_.message)||E.message||"Failed to add purchaser"),C(!1)}},k=()=>{b(!0),I(""),c(null)},B=({value:x,size:y=120})=>e.jsx("div",{className:"flex flex-col items-center",children:e.jsx(Ue,{value:x,size:y})});return e.jsx("div",{className:"min-h-screen py-8",style:{backgroundColor:"#f8fafc"},children:e.jsxs("div",{className:"max-w-6xl mx-auto px-4",children:[f&&e.jsxs("div",{className:"mb-6 bg-green-50 border border-green-200 rounded-2xl p-6 flex items-center justify-between shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-green-500 rounded-xl flex items-center justify-center",children:e.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-green-800 font-semibold text-lg",children:f}),e.jsx("p",{className:"text-green-600 text-sm",children:"QR code has been generated for the new purchaser."})]})]}),e.jsx("button",{onClick:()=>I(""),className:"text-green-600 hover:text-green-800 p-2",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"w-16 h-16 bg-blue-500 rounded-2xl flex items-center justify-center mx-auto mb-4",children:e.jsx("svg",{className:"w-8 h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),e.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Purchaser Management"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Manage purchaser profiles and generate QR codes"})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-8 border border-gray-100 mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-800 flex items-center gap-3",children:[e.jsx("svg",{className:"w-7 h-7 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),"Purchasers"]}),e.jsx("div",{className:"bg-blue-50 px-4 py-2 rounded-xl",children:e.jsxs("span",{className:"text-blue-600 font-semibold",children:["Total: ",s.length]})})]}),r?e.jsxs("div",{className:"flex items-center justify-center py-16",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"}),e.jsx("span",{className:"ml-3 text-blue-600 font-medium",children:"Loading purchasers..."})]}):t?e.jsxs("div",{className:"text-red-600 py-8 text-center bg-red-50 rounded-xl border border-red-200",children:[e.jsx("svg",{className:"w-12 h-12 text-red-500 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})}),e.jsx("p",{className:"font-medium",children:t})]}):s.length===0?e.jsxs("div",{className:"text-center py-16",children:[e.jsx("div",{className:"w-20 h-20 bg-gray-100 rounded-2xl flex items-center justify-center mx-auto mb-4",children:e.jsx("svg",{className:"w-10 h-10 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})}),e.jsx("h3",{className:"text-lg font-medium text-gray-600 mb-2",children:"No purchasers found"}),e.jsx("p",{className:"text-gray-500",children:"Add your first purchaser using the form below!"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:s.map(x=>e.jsxs("div",{className:"flex flex-col items-center space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-white to-blue-50 border border-blue-100 rounded-2xl p-6 shadow-md hover:shadow-lg transition-all duration-300 w-full",children:[e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx("div",{className:"w-24 h-24 rounded-full overflow-hidden border-4 border-blue-200 bg-blue-50 flex items-center justify-center shadow-sm",children:(()=>{const y=x.photo;if(!y)return e.jsx("svg",{className:"w-12 h-12 text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})});const _=[];return y.startsWith("http")&&_.push(y),_.push(`${re}${y.startsWith("/")?y:`/${y}`}`),_.push(`${"/".replace(/\/$/,"")}/${y.replace(/^\//,"")}`),e.jsx(Hs,{srcCandidates:_,alt:"Photo",className:"object-cover w-full h-full"})})()}),e.jsxs("div",{className:"text-center w-full",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-2",children:x.fullName}),e.jsx("p",{className:"text-gray-600 text-sm leading-relaxed mb-3 px-2",children:x.address}),e.jsxs("div",{className:"inline-flex items-center gap-2 bg-blue-100 px-4 py-2 rounded-full",children:[e.jsx("svg",{className:"w-4 h-4 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})}),e.jsx("span",{className:"text-gray-700 font-medium text-sm",children:x.contactNo})]})]})]}),e.jsx("div",{className:"mt-4",children:e.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg px-3 py-2 text-center",children:[e.jsx("span",{className:"text-xs text-gray-400 block",children:"ID"}),e.jsx("span",{className:"text-xs font-mono text-gray-600 break-all",children:x._id})]})})]}),e.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-lg border border-blue-100 flex flex-col items-center space-y-3",children:[e.jsx("div",{className:"text-blue-600 font-semibold text-sm",children:"QR Code"}),e.jsx(B,{value:`${window.location.origin}/purchaser/${x._id}`,size:120}),e.jsx("div",{className:"text-xs text-gray-500 text-center",children:"Scan to view profile"})]})]},x._id))})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-8 border border-gray-100",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("h3",{className:"text-2xl font-bold text-gray-800 flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-500 rounded-lg flex items-center justify-center",children:e.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})}),"Add New Purchaser"]}),!n&&e.jsx("button",{onClick:k,className:"px-6 py-3 bg-blue-500 text-white rounded-xl hover:bg-blue-600 transition-colors duration-200 font-semibold shadow-md",children:"Add Another"})]}),n?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-gray-700 font-medium text-sm",children:"Full Name *"}),e.jsx("input",{type:"text",name:"fullName",placeholder:"Enter full name",value:u.fullName,onChange:v,required:!0,className:"w-full px-4 py-3 rounded-xl border border-gray-200 bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-gray-700 font-medium text-sm",children:"Contact Number *"}),e.jsx("input",{type:"tel",name:"contactNo",placeholder:"Enter contact number",value:u.contactNo,onChange:v,required:!0,className:"w-full px-4 py-3 rounded-xl border border-gray-200 bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-gray-700 font-medium text-sm",children:"Address *"}),e.jsx("textarea",{name:"address",placeholder:"Enter complete address",value:u.address,onChange:v,required:!0,rows:"3",className:"w-full px-4 py-3 rounded-xl border border-gray-200 bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 resize-vertical"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-gray-700 font-medium text-sm",children:"Purchaser Photo *"}),e.jsxs("div",{className:"border-2 border-dashed border-gray-200 rounded-xl p-6 text-center hover:border-blue-300 transition-colors",children:[e.jsx("svg",{className:"w-8 h-8 text-gray-400 mx-auto mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),e.jsx("input",{type:"file",name:"photo",accept:"image/*",onChange:v,required:!0,className:"w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Upload photo"})]}),h&&e.jsx("div",{className:"mt-3 flex justify-center",children:e.jsx("img",{src:h,alt:"Photo Preview",className:"w-20 h-20 object-cover rounded-full border-4 border-blue-200 shadow-sm"})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-gray-700 font-medium text-sm",children:"Aadhar Card Image *"}),e.jsxs("div",{className:"border-2 border-dashed border-gray-200 rounded-xl p-6 text-center hover:border-blue-300 transition-colors",children:[e.jsx("svg",{className:"w-8 h-8 text-gray-400 mx-auto mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),e.jsx("input",{type:"file",name:"aadharImage",accept:"image/*",onChange:v,required:!0,className:"w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Upload Aadhar card"})]}),d&&e.jsx("div",{className:"mt-3 flex justify-center",children:e.jsx("img",{src:d,alt:"Aadhar Preview",className:"w-32 h-20 object-cover rounded-lg border-2 border-blue-200 shadow-sm"})})]})]}),t&&e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-xl p-4 flex items-center gap-3",children:[e.jsx("svg",{className:"w-5 h-5 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})}),e.jsx("span",{className:"text-red-700 font-medium",children:t})]}),e.jsxs("div",{className:"flex gap-4 pt-4",children:[e.jsx("button",{onClick:A,disabled:j,className:`flex-1 px-6 py-4 rounded-xl font-semibold transition-all duration-200 shadow-md ${j?"bg-blue-400 text-white cursor-not-allowed":"bg-blue-500 text-white hover:bg-blue-600 hover:shadow-lg"}`,children:j?e.jsxs("span",{className:"flex items-center justify-center gap-2",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Adding Purchaser..."]}):"Add Purchaser"}),e.jsx("button",{onClick:m,className:"px-6 py-4 rounded-xl border-2 border-blue-200 text-blue-600 font-semibold hover:bg-blue-50 transition-all duration-200",children:"Reset"})]})]}):e.jsxs("div",{className:"text-center py-16",children:[e.jsx("div",{className:"w-20 h-20 bg-green-100 rounded-2xl flex items-center justify-center mx-auto mb-6",children:e.jsx("svg",{className:"w-10 h-10 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),e.jsx("h4",{className:"text-2xl font-bold text-green-700 mb-3",children:"Purchaser Added Successfully!"}),e.jsx("p",{className:"text-green-600 text-lg mb-6",children:"QR code has been generated and the purchaser is now listed above."})]})]})]})})},ts=s=>{if(!s)return[];const a=[];return s.startsWith("http")&&a.push(s),a.push(`${re}${s.startsWith("/")?s:`/${s}`}`),a.push(`${"/".replace(/\/$/,"")}/${s.replace(/^\//,"")}`),a},Gs=()=>{const{id:s}=We(),[a,r]=i.useState(null),[l,t]=i.useState(!0),[c,u]=i.useState(null);return i.useEffect(()=>{(async()=>{t(!0);try{const d=await ze.get(X(`/api/purchaser/${s}`));r(d.data.data),u(null)}catch{u("Failed to fetch purchaser details")}t(!1)})()},[s]),l?e.jsx("div",{className:"text-sky-600 py-4",children:"Loading..."}):c?e.jsx("div",{className:"text-red-600 py-4",children:c}):a?e.jsx("div",{className:"bg-sky-50 min-h-screen py-8",children:e.jsx("div",{className:"max-w-md mx-auto px-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow p-6 border border-sky-100 flex flex-col items-center gap-4",children:[e.jsx("div",{className:"w-24 h-24 rounded-full overflow-hidden border-2 border-sky-300 bg-sky-50 flex items-center justify-center",children:a.photo?(()=>{const p=ts(a.photo);return e.jsx("img",{src:p[0],alt:"Photo",className:"object-cover w-full h-full",onError:d=>{const o=p.find(h=>h!==d.currentTarget.src);o?d.currentTarget.src=o:(d.currentTarget.onerror=null,d.currentTarget.src="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='120' height='120'><rect width='100%' height='100%' fill='%23e6eefc'/><text x='50%' y='50%' dominant-baseline='middle' text-anchor='middle' fill='%236b8bd7' font-size='20'>Photo</text></svg>")}})})():e.jsx("span",{className:"text-5xl",children:"ðŸ§‘â€ðŸ’¼"})}),e.jsx("div",{className:"text-2xl font-bold text-sky-700",children:a.fullName}),e.jsx("div",{className:"text-slate-600 text-center",children:a.address}),e.jsx("div",{className:"text-slate-700 font-medium",children:a.contactNo}),e.jsxs("div",{className:"w-full flex flex-col items-center gap-2 mt-4",children:[e.jsx("div",{className:"font-semibold text-sky-600",children:"Aadhar Image"}),a.aadharImage?(()=>{const p=ts(a.aadharImage);return e.jsx("img",{src:p[0],alt:"Aadhar",className:"w-48 h-32 object-cover rounded border border-sky-200",onError:d=>{const o=p.find(h=>h!==d.currentTarget.src);o?d.currentTarget.src=o:(d.currentTarget.onerror=null,d.currentTarget.src="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='240' height='160'><rect width='100%' height='100%' fill='%23f8fafc'/><text x='50%' y='50%' dominant-baseline='middle' text-anchor='middle' fill='%2399a6b2' font-size='18'>No image</text></svg>")}})})():e.jsx("span",{className:"text-slate-400",children:"No Aadhar image"})]}),e.jsxs("div",{className:"mt-2 text-xs text-slate-400",children:["ID: ",a._id]})]})})}):e.jsx("div",{className:"text-slate-500 py-4",children:"No details found."})},Js=({staff:s,onOpen:a})=>{const r=()=>a(s),t=(c=>{if(!c)return null;try{if(c.startsWith("http"))return c}catch{}const u=c.startsWith("/")?c:`/${c}`;return`${re}${u}`})(s.image);return e.jsx("div",{onClick:r,className:"bg-white rounded-xl p-6 shadow-md hover:shadow-lg border border-gray-100 hover:border-blue-200 cursor-pointer transition-all duration-300 group",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"relative",children:[t?e.jsx("img",{src:t,alt:s.fullName,className:"w-14 h-14 rounded-xl object-cover"}):e.jsx("div",{className:"w-14 h-14 bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl flex items-center justify-center text-white font-semibold text-lg",children:s.fullName?s.fullName.charAt(0):"S"}),e.jsx("div",{className:"absolute -bottom-1 -right-1 w-4 h-4 bg-green-500 rounded-full border-2 border-white"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-gray-800 group-hover:text-blue-600 transition-colors duration-200",children:s.fullName}),e.jsx("p",{className:"text-sm text-gray-500",children:s.contact}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:s.email})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-xs text-gray-400",children:["ID: ",s._id.slice(-6)]}),e.jsx("div",{className:"text-xs text-green-600 font-medium",children:"Active"})]}),e.jsx("div",{className:"hidden sm:block",children:e.jsx("div",{className:"w-10 h-10 bg-white p-1 rounded-md shadow-sm",children:e.jsx(Ue,{value:`${window.location.origin}/staff/${s._id}`,size:36})})})]})]})})},Qs=({staff:s,onClose:a})=>e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-2xl p-8 max-w-md w-full shadow-2xl",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Staff Details"}),e.jsx("button",{onClick:a,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors duration-200",children:e.jsx("svg",{className:"w-5 h-5 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[(()=>{const r=s.image,l=r&&(r.startsWith("http")?r:`${re}${r.startsWith("/")?r:`/${r}`}`);return l?e.jsx("img",{src:l,alt:s.fullName,className:"w-16 h-16 rounded-xl object-cover"}):e.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl flex items-center justify-center text-white font-bold text-xl",children:s.fullName?s.fullName.charAt(0):"S"})})(),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-800",children:s.fullName}),e.jsx("p",{className:"text-sm text-gray-500",children:s.contact})]})]}),e.jsxs("div",{className:"space-y-3 pt-4 border-t border-gray-100",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-400 uppercase tracking-wide",children:"Email"}),e.jsx("p",{className:"text-sm text-gray-800",children:s.email})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-400 uppercase tracking-wide",children:"Address"}),e.jsx("p",{className:"text-sm text-gray-800",children:s.address})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-400 uppercase tracking-wide",children:"Status"}),e.jsx("p",{className:"text-sm text-green-600 font-medium",children:"Active"})]})]}),e.jsx("div",{className:"mt-6 flex items-center justify-center",children:e.jsx("div",{className:"bg-gray-50 p-4 rounded-xl",children:e.jsx(Ue,{value:`${window.location.origin}/staff/${s._id}`,size:128})})})]}),e.jsxs("div",{className:"flex gap-3 mt-8",children:[e.jsx("button",{onClick:a,className:"flex-1 px-4 py-2 border border-gray-200 text-gray-600 rounded-xl hover:bg-gray-50 transition-colors duration-200",children:"Close"}),window&&window.localStorage&&(()=>{try{const r=JSON.parse(window.localStorage.getItem("user"));return r&&(r.role==="admin"||String(r._id)===String(s.stockist))}catch{return!1}})()&&e.jsx("button",{className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-xl hover:bg-blue-700 transition-colors duration-200",children:"Edit Staff"})]})]})});function Ys(){const[s,a]=i.useState([]),[r,l]=i.useState(!0),[t,c]=i.useState(null),[u,p]=i.useState(""),[d,o]=i.useState(()=>{try{const n=localStorage.getItem("user");return n?JSON.parse(n):null}catch{return null}}),h=ee(),N=Se();i.useEffect(()=>{let n=!0;return(async()=>{try{const b=localStorage.getItem("token"),f=d&&d.role==="stockist",I=X(f?"/api/staff?stockist=me":"/api/staff"),v={};b&&(v.headers={Authorization:`Bearer ${b}`});const m=await fetch(I,v),A=await m.json().catch(()=>[]);if(!n)return;m.ok&&Array.isArray(A)?a(A):m.ok&&A&&Array.isArray(A.data)&&a(A.data)}catch(b){console.error("Failed to load staff list",b)}finally{n&&l(!1)}})(),()=>{n=!1}},[N.key,d]);const j=()=>h("/adminCreateStaff"),C=s.filter(n=>n.fullName.toLowerCase().includes(u.toLowerCase())||n.contact.includes(u)||n.email.toLowerCase().includes(u.toLowerCase()));return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50 p-6",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-4 mb-2",children:[e.jsx("div",{className:"w-4 h-4 bg-blue-500 rounded-full"}),e.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Staff Management"})]}),e.jsx("p",{className:"text-gray-600 ml-8",children:"Manage your team members and their information"})]}),d&&(d.role==="stockist"||d.role==="admin")&&e.jsxs("button",{onClick:j,className:"px-6 py-3 bg-blue-600 text-white rounded-xl hover:bg-blue-700 transition-all duration-200 flex items-center gap-2 shadow-lg hover:shadow-xl",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Add New Staff"]})]}),e.jsxs("div",{className:"flex flex-col lg:flex-row gap-6",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx("svg",{className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),e.jsx("input",{type:"text",placeholder:"Search staff by name, contact, or email...",value:u,onChange:n=>p(n.target.value),className:"w-full pl-12 pr-4 py-4 bg-white border border-gray-200 rounded-xl focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all duration-200 outline-none"})]})}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-md border border-gray-100 min-w-[120px]",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:s.length}),e.jsx("div",{className:"text-sm text-gray-500",children:"Total Staff"})]}),e.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-md border border-gray-100 min-w-[120px]",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:s.length}),e.jsx("div",{className:"text-sm text-gray-500",children:"Active"})]})]})]})]}),r&&e.jsx("div",{className:"flex items-center justify-center py-16",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("svg",{className:"animate-spin w-8 h-8 text-blue-600 mx-auto mb-4",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),e.jsx("p",{className:"text-gray-600",children:"Loading staff members..."})]})}),!r&&e.jsxs("div",{className:"space-y-4",children:[C.map(n=>e.jsx(Js,{staff:n,onOpen:b=>c(b)},n._id)),!r&&C.length===0&&s.length>0&&e.jsxs("div",{className:"text-center py-16",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("svg",{className:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"No staff found"}),e.jsx("p",{className:"text-gray-500",children:"Try adjusting your search criteria"})]}),!r&&s.length===0&&e.jsxs("div",{className:"text-center py-16",children:[e.jsx("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("svg",{className:"w-8 h-8 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"No staff members yet"}),e.jsx("p",{className:"text-gray-500 mb-6",children:"Get started by adding your first staff member"}),d&&(d.role==="stockist"||d.role==="admin")?e.jsxs("button",{onClick:j,className:"px-6 py-3 bg-blue-600 text-white rounded-xl hover:bg-blue-700 transition-colors duration-200 inline-flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Add First Staff Member"]}):e.jsx("div",{className:"text-sm text-gray-500",children:"Only stockists or admins can add staff."})]})]}),!r&&s.length>0&&e.jsx("div",{className:"mt-8",children:e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-lg border border-gray-100",children:[e.jsx("h3",{className:"font-semibold text-gray-800 mb-4",children:"Quick Actions"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("button",{className:"p-4 border border-gray-200 rounded-xl hover:bg-gray-50 transition-colors duration-200 text-left",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center mb-3",children:e.jsx("svg",{className:"w-4 h-4 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),e.jsx("h4",{className:"font-medium text-gray-800",children:"Export Staff List"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Download staff data as CSV"})]}),e.jsxs("button",{className:"p-4 border border-gray-200 rounded-xl hover:bg-gray-50 transition-colors duration-200 text-left",children:[e.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-lg flex items-center justify-center mb-3",children:e.jsx("svg",{className:"w-4 h-4 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})}),e.jsx("h4",{className:"font-medium text-gray-800",children:"Staff Analytics"}),e.jsx("p",{className:"text-sm text-gray-500",children:"View performance metrics"})]}),e.jsxs("button",{className:"p-4 border border-gray-200 rounded-xl hover:bg-gray-50 transition-colors duration-200 text-left",children:[e.jsx("div",{className:"w-8 h-8 bg-orange-100 rounded-lg flex items-center justify-center mb-3",children:e.jsx("svg",{className:"w-4 h-4 text-orange-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 100 4m0-4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 100 4m0-4v2m0-6V4"})})}),e.jsx("h4",{className:"font-medium text-gray-800",children:"Bulk Actions"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Manage multiple staff"})]})]})]})}),t&&e.jsx(Qs,{staff:t,onClose:()=>c(null)})]})})}function Xs(){const[s,a]=i.useState({fullName:"",contact:"",email:"",address:""}),[r]=i.useState(()=>{try{const b=localStorage.getItem("user");return b?JSON.parse(b):null}catch{return null}}),[l,t]=i.useState(null),[c,u]=i.useState(null),[p,d]=i.useState([]),[o,h]=i.useState(""),[N,j]=i.useState(!1),C=ee();ns.useEffect(()=>{(async()=>{try{if(r&&r.role==="admin"){const b=await fetch(X("/api/stockist")),f=await b.json().catch(()=>({})),I=f&&f.data||[];b.ok&&Array.isArray(I)&&d(I)}}catch(b){console.error("Failed to load stockists",b)}})()},[r]);const n=async b=>{if(b.preventDefault(),!l||!c)return alert("Please attach image and aadhar card.");j(!0);try{const f=localStorage==null?void 0:localStorage.getItem("token"),I=new FormData;I.append("fullName",s.fullName),I.append("contact",s.contact),I.append("email",s.email),I.append("address",s.address),r&&r.role==="admin"&&o&&I.append("stockist",o),I.append("image",l),I.append("aadharCard",c);const v=await fetch(X("/api/staff"),{method:"POST",body:I,headers:{...f?{Authorization:`Bearer ${f}`}:{}}}),m=await v.json().catch(()=>({}));if(!v.ok){const A=m&&m.message||JSON.stringify(m)||v.statusText;throw new Error(A)}alert("Staff created successfully!"),C(-1)}catch(f){alert(String(f))}finally{j(!1)}};return e.jsx("div",{className:"min-h-screen flex items-start justify-center p-6",style:{backgroundColor:"#f8fafc"},children:r&&(r.role==="stockist"||r.role==="admin")?e.jsxs("div",{className:"w-full max-w-2xl bg-white p-8 rounded-2xl shadow-lg border border-gray-100",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"w-16 h-16 bg-blue-500 rounded-2xl flex items-center justify-center mx-auto mb-4",children:e.jsx("svg",{className:"w-8 h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"})})}),e.jsx("h2",{className:"text-2xl font-semibold text-gray-800",children:"Create Staff"}),e.jsx("p",{className:"text-gray-500 mt-1",children:"Add new team member information"})]}),e.jsxs("div",{className:"space-y-6",children:[r&&r.role==="admin"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Assign to Stockist"}),e.jsxs("select",{className:"w-full px-4 py-3 border border-gray-200 rounded-xl",value:o,onChange:b=>h(b.target.value),children:[e.jsx("option",{value:"",children:"-- Select stockist (optional) --"}),p.map(b=>e.jsx("option",{value:b._id,children:b.name||b.title||b.companyName||b.email},b._id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Full Name"}),e.jsx("input",{className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",placeholder:"Enter full name",value:s.fullName,onChange:b=>a(f=>({...f,fullName:b.target.value})),required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Contact Number"}),e.jsx("input",{className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",placeholder:"Enter contact number",value:s.contact,onChange:b=>a(f=>({...f,contact:b.target.value})),required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),e.jsx("input",{className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",placeholder:"Enter email address",type:"email",value:s.email,onChange:b=>a(f=>({...f,email:b.target.value}))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Address"}),e.jsx("input",{className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",placeholder:"Enter address",value:s.address,onChange:b=>a(f=>({...f,address:b.target.value}))})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Profile Photo"}),e.jsxs("div",{className:"border-2 border-dashed border-gray-200 rounded-xl p-6 text-center hover:border-blue-300 transition-colors",children:[e.jsx("svg",{className:"w-8 h-8 text-gray-400 mx-auto mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),e.jsx("input",{type:"file",accept:"image/*",onChange:b=>t(b.target.files[0]),className:"w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100",required:!0}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Upload profile photo"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Aadhar Card"}),e.jsxs("div",{className:"border-2 border-dashed border-gray-200 rounded-xl p-6 text-center hover:border-blue-300 transition-colors",children:[e.jsx("svg",{className:"w-8 h-8 text-gray-400 mx-auto mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),e.jsx("input",{type:"file",accept:"image/*",onChange:b=>u(b.target.files[0]),className:"w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100",required:!0}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Upload Aadhar card image"})]})]})]}),e.jsx("div",{className:"pt-4",children:e.jsx("button",{onClick:n,disabled:N,className:"w-full bg-blue-500 hover:bg-blue-600 disabled:bg-blue-300 text-white font-semibold py-4 px-6 rounded-xl transition-colors duration-200 flex items-center justify-center",children:N?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Creating Staff..."]}):"Create Staff Member"})})]})]}):e.jsxs("div",{className:"w-full max-w-2xl bg-white p-8 rounded-2xl shadow-lg border border-gray-100 text-center",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Unauthorized"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Only stockists or admins can add staff members."}),e.jsx("button",{onClick:()=>window.history.back(),className:"px-4 py-2 bg-blue-600 text-white rounded-lg",children:"Go Back"})]})})}function Ks(){var h;const{id:s}=We(),a=ee(),[r,l]=i.useState(null),[t,c]=i.useState(!0),[u]=i.useState(()=>{try{const N=localStorage.getItem("user");return N?JSON.parse(N):null}catch{return null}});if(i.useEffect(()=>{(async()=>{try{const N=localStorage.getItem("token"),j=await fetch(X(`/api/staff/${s}`),{headers:N?{Authorization:`Bearer ${N}`}:{}});if(j.status===401){alert("Session expired or unauthorized â€” please sign in."),a("/login");return}const C=await j.json().catch(()=>({}));j.ok&&l(C.data)}catch(N){console.error(N)}finally{c(!1)}})()},[s,a]),t)return e.jsx("div",{className:"p-6",children:"Loading..."});if(!r)return e.jsx("div",{className:"p-6 text-red-600",children:"Staff not found"});const d=`${window.location.origin.replace(/\/+$/,"")}/staff/${r._id}`,o=(h=r.image)!=null&&h.startsWith("http")?r.image:`${window.location.origin.replace(/\/+$/,"")}${r.image}`;return e.jsx("div",{className:"min-h-screen flex items-start justify-center p-3 md:p-6 bg-slate-50",children:e.jsxs("div",{className:"w-full max-w-xl bg-white p-4 md:p-6 rounded shadow",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center gap-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-center sm:items-start gap-4 flex-1",children:[e.jsx("img",{src:o,alt:"photo",className:"w-24 h-24 sm:w-28 sm:h-28 object-cover rounded"}),e.jsxs("div",{className:"text-center sm:text-left",children:[e.jsx("h3",{className:"text-lg sm:text-xl font-semibold",children:r.fullName}),e.jsx("div",{className:"text-sm text-slate-600 mt-1",children:r.contact}),e.jsx("div",{className:"text-sm text-slate-600",children:r.email}),e.jsx("div",{className:"text-sm text-slate-600",children:r.address})]})]}),e.jsx("div",{className:"flex justify-center md:ml-auto",children:e.jsx(Ke,{value:d,size:120,className:"sm:w-[140px] sm:h-[140px]"})})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Identity Card"}),e.jsx("div",{className:"border p-3 md:p-4 rounded",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3 sm:gap-4",children:[e.jsx("img",{src:o,alt:"photo",className:"w-16 h-16 sm:w-20 sm:h-20 object-cover rounded mx-auto sm:mx-0"}),e.jsxs("div",{className:"text-center sm:text-left flex-1",children:[e.jsx("div",{className:"font-semibold text-sm sm:text-base",children:r.fullName}),e.jsx("div",{className:"text-xs sm:text-sm text-slate-600",children:r.contact}),e.jsx("div",{className:"text-xs sm:text-sm text-slate-600",children:r.email})]}),e.jsx("div",{className:"flex justify-center sm:ml-auto",children:e.jsx(Ke,{value:d,size:80,className:"sm:w-[90px] sm:h-[90px]"})})]})}),e.jsx("div",{className:"mt-4",children:u&&(u.role==="admin"||String(u._id)===String(r.stockist))?e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsx("button",{className:"px-4 py-2 bg-blue-600 text-white rounded text-sm sm:text-base",children:"Edit"}),e.jsx("button",{className:"px-4 py-2 bg-red-600 text-white rounded text-sm sm:text-base",children:"Delete"})]}):e.jsx("div",{className:"text-sm text-gray-500",children:"You do not have permissions to modify this staff."})})]})]})})}function Zs(){const[s,a]=i.useState([{id:Date.now(),name:"",qty:0}]),[r,l]=i.useState([]),[t,c]=i.useState([]),[u,p]=i.useState(null),[d,o]=i.useState([]),[h,N]=i.useState(!1),[j,C]=i.useState(null),n="savedDemand";i.useEffect(()=>{(async()=>{try{const[A,k]=await Promise.all([fetch(`${re}/api/medicine`),fetch(`${re}/api/stockist`)]);if(A&&A.ok){const B=await A.json();l(B.data||[])}if(k&&k.ok){const B=await k.json();c(B.data||[])}}catch(A){console.warn("Could not fetch medicines/stockists",A)}})();try{const A=localStorage.getItem(n);if(A){const k=JSON.parse(A);k&&k.groups&&p(k.groups)}}catch{}},[]);const b=(m,A)=>{a(k=>k.map(B=>B.id===m?{...B,...A}:B))},f=()=>a(m=>[...m,{id:Date.now()+Math.random(),name:"",qty:0}]),I=m=>a(A=>A.filter(k=>k.id!==m)),v=async()=>{N(!0),C(null);try{const m={},A=k=>(k||"").toString().trim();for(const k of s){const B={query:k.name,foundMeds:[],candidateStockists:[],assignedTo:null},x=A(k.name);if(!x){m.unmatched=m.unmatched||[],m.unmatched.push({line:k});continue}const y=x.toLowerCase();let _=[];if(Array.isArray(r)&&r.length>0){const $=r.filter(O=>(O.name||O.medicineName||O.title||"").toString().toLowerCase()===y),D=r.filter(O=>{const q=(O.name||O.medicineName||O.title||"").toString().toLowerCase();return q.includes(y)&&q!==y});_=$.length?$:D,B.foundMeds=_.map(O=>ae(O)||String(O._id))}let E=!1;for(const $ of _){let D=null;if(Array.isArray(t)&&t.length>0&&(D=t.find(O=>we($,O._id)),!D)){const O=ae($)||"";D=t.find(q=>ke(O,q))}if(D){B.candidateStockists.push(D.title||D.name||D._id);const O=D.title||D.name||D._id;m[O]=m[O]||[],m[O].push({line:k,medicine:$}),E=!0,B.assignedTo=O}}if(!E){if(Array.isArray(t)&&t.length>0){let $=t.find(D=>ke(x,D));if(!$){let D=0,O=null;for(const q of t){const oe=ds(x,q);oe>D&&(D=oe,O=q)}D>=1&&($=O)}if($){B.candidateStockists.push($.title||$.name||$._id);const D=$.title||$.name||$._id;m[D]=m[D]||[],m[D].push({line:k,medicine:null}),E=!0,B.assignedTo=D}}E||(m.unmatched=m.unmatched||[],m.unmatched.push({line:k}),B.assignedTo="unmatched"),o($=>[...$,B])}}p(m);try{localStorage.setItem(n,JSON.stringify({groups:m,createdAt:Date.now()}))}catch(k){console.warn("Could not save demand to localStorage",k)}}catch(m){console.error(m),C("Could not create demand. See console.")}finally{N(!1)}};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-100 via-white to-blue-50",children:e.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-4xl",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-blue-600 text-white rounded-full mb-4",children:e.jsx(je,{size:32})}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Create Today's Demand"}),e.jsx("p",{className:"text-gray-600",children:"Add medicine requirements and organize by stockists"})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Medicine Requirements"}),e.jsxs("div",{className:"text-sm text-gray-500",children:[s.length," item",s.length!==1?"s":""]})]}),e.jsx("div",{className:"space-y-4 mb-6",children:s.map((m,A)=>e.jsx("div",{className:"group",children:e.jsxs("div",{className:"flex items-center gap-4 p-4 border border-gray-200 rounded-lg hover:border-blue-300 transition-colors",children:[e.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-gray-100 rounded-full flex items-center justify-center text-sm font-medium text-gray-600",children:A+1}),e.jsx("div",{className:"flex-1",children:e.jsx("input",{value:m.name,onChange:k=>b(m.id,{name:k.target.value}),placeholder:"Enter medicine name...",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition-all"})}),e.jsx("div",{className:"flex-shrink-0",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Qty:"}),e.jsx("input",{type:"number",min:0,value:m.qty,onChange:k=>b(m.id,{qty:Number(k.target.value===""?0:k.target.value)}),className:"w-20 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition-all text-center"})]})}),s.length>1&&e.jsx("button",{onClick:()=>I(m.id),className:"flex-shrink-0 p-2 text-red-500 hover:bg-red-50 rounded-lg transition-colors opacity-0 group-hover:opacity-100",title:"Remove item",children:e.jsx(ps,{size:18})})]})},m.id))}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:f,className:"flex items-center gap-2 px-6 py-3 bg-green-600 hover:bg-green-700 text-white rounded-lg font-medium transition-colors",children:[e.jsx(Ie,{size:18}),"Add Item"]}),e.jsx("button",{onClick:v,className:"flex items-center gap-2 px-8 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed",disabled:h,children:h?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent"}),"Processing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ye,{size:18}),"Create Demand"]})})]})]}),j&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-8",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Xe,{className:"text-red-500",size:20}),e.jsx("div",{className:"text-red-700 font-medium",children:j})]})}),u&&e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[e.jsxs("h3",{className:"text-xl font-semibold text-gray-800 mb-6 flex items-center gap-2",children:[e.jsx(ye,{className:"text-green-500",size:24}),"Grouped Demand Results"]}),Object.keys(u).length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(je,{size:48,className:"mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No results to display"})]}):e.jsx("div",{className:"space-y-4",children:Object.entries(u).map(([m,A])=>e.jsxs("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:[e.jsxs("div",{className:`px-6 py-4 font-semibold text-white ${m==="unmatched"?"bg-amber-500":"bg-gradient-to-r from-blue-500 to-blue-600"}`,children:[m==="unmatched"?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Xe,{size:20}),"Unmatched / Not Found"]}):m,e.jsxs("div",{className:"text-sm opacity-90 mt-1",children:[A.length," item",A.length!==1?"s":""]})]}),e.jsx("div",{className:"divide-y divide-gray-100",children:A.map((k,B)=>e.jsx("div",{className:"px-6 py-4 hover:bg-gray-50 transition-colors",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-gray-900 mb-1",children:k.line.name}),k.medicine&&e.jsxs("div",{className:"text-sm text-green-600",children:["âœ“ Matches:"," ",k.medicine.name||k.medicine.title||k.medicine.medicineName||k.medicine._id]}),!k.medicine&&m!=="unmatched"&&e.jsx("div",{className:"text-sm text-gray-500",children:"No direct medicine match"})]}),e.jsx("div",{className:"flex-shrink-0",children:e.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-blue-100 text-blue-800",children:["Qty: ",k.line.qty]})})]})},B))})]},m))})]}),d&&d.length>0&&e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 mt-6",children:[e.jsx("h4",{className:"font-semibold mb-3",children:"Debug: matching details"}),e.jsx("div",{className:"space-y-3 text-sm text-gray-700",children:d.map((m,A)=>e.jsxs("div",{className:"p-3 border rounded",children:[e.jsxs("div",{className:"font-medium",children:["Query: ",m.query]}),e.jsxs("div",{children:["Found medicines: ",m.foundMeds.join(", ")||"none"]}),e.jsxs("div",{children:["Candidate stockists:"," ",m.candidateStockists.join(", ")||"none"]}),e.jsxs("div",{children:["Assigned to: ",m.assignedTo||"none"]})]},A))})]})]})})}function et(){const s=ee(),[a,r]=i.useState(""),[l,t]=i.useState(""),[c,u]=i.useState(!1),[p,d]=i.useState(""),[o,h]=i.useState(!1),[N,j]=i.useState(!1);async function C(n){n.preventDefault(),d(""),u(!0);try{const b=await fetch(X("/api/auth/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:a,password:l})}),f=await b.json().catch(()=>({}));if(!b.ok){d(f&&f.message||"Login failed"),u(!1);return}f.token&&localStorage.setItem("token",f.token),f.user&&localStorage.setItem("user",JSON.stringify(f.user)),s("/stockist-outcode")}catch{d("Network error")}finally{u(!1)}}return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-blue-50 to-indigo-100 flex items-center justify-center p-4",children:e.jsxs("div",{className:"w-full max-w-md",children:[e.jsx("div",{className:"text-center mb-8",children:e.jsxs("div",{className:"relative inline-block",children:[e.jsxs("div",{className:"w-20 h-20 bg-gradient-to-r from-teal-400 via-blue-500 to-purple-600 rounded-2xl flex items-center justify-center mb-4 mx-auto shadow-lg transform rotate-12",children:[e.jsx("img",{src:"/final-logo.png",alt:""}),e.jsx("div",{className:"bg-white rounded-lg p-2 transform -rotate-12",children:e.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-teal-500 to-blue-600 rounded-md flex items-center justify-center",children:e.jsx("div",{className:"w-4 h-4 bg-white rounded-sm flex items-center justify-center",children:e.jsx("div",{className:"w-2 h-2 bg-teal-500 rounded-full"})})})})]}),e.jsx("div",{className:"absolute -top-2 -right-2 w-6 h-6 bg-gradient-to-r from-orange-400 to-red-500 rounded-full flex items-center justify-center",children:e.jsx("div",{className:"w-3 h-3 bg-white rounded-full flex items-center justify-center",children:e.jsx("div",{className:"w-1.5 h-1.5 bg-green-500 rounded-full"})})})]})}),e.jsxs("div",{className:"bg-white rounded-3xl shadow-xl p-8 backdrop-blur-sm",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Welcome Back"}),e.jsx("p",{className:"text-gray-600",children:"Sign in to your MedTrap account"})]}),p&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg mb-6",children:p}),e.jsxs("form",{onSubmit:C,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),e.jsxs("div",{className:"relative",children:[e.jsx(Ce,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:"email",required:!0,value:a,onChange:n=>r(n.target.value),placeholder:"Enter your email address",className:"w-full pl-10 pr-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-teal-500 focus:border-transparent transition-all duration-200 bg-gray-50"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(Fe,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:N?"text":"password",required:!0,value:l,onChange:n=>t(n.target.value),placeholder:"Enter your password",className:"w-full pl-10 pr-12 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-teal-500 focus:border-transparent transition-all duration-200 bg-gray-50"}),e.jsx("button",{type:"button",onClick:()=>j(!N),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors",children:N?e.jsx(Re,{className:"w-5 h-5"}):e.jsx(Oe,{className:"w-5 h-5"})})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:o,onChange:n=>h(n.target.checked),className:"w-4 h-4 text-teal-600 bg-gray-100 border-gray-300 rounded focus:ring-teal-500 focus:ring-2"}),e.jsx("span",{className:"ml-2 text-sm text-gray-600",children:"Remember me"})]}),e.jsx("a",{href:"/forgot-password",className:"text-sm text-teal-600 hover:text-teal-500 font-medium transition-colors",children:"Forgot password?"})]}),e.jsx("button",{type:"submit",disabled:c,className:"w-full bg-gradient-to-r from-teal-500 to-blue-600 hover:from-teal-600 hover:to-blue-700 text-white font-semibold py-3 px-4 rounded-xl transition-all duration-200 transform hover:scale-[1.02] disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none shadow-lg",children:c?e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Signing in..."]}):"Sign In"})]}),e.jsxs("div",{className:"relative my-8",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:"w-full border-t border-gray-200"})}),e.jsx("div",{className:"relative flex justify-center text-sm",children:e.jsx("span",{className:"px-4 bg-white text-gray-500",children:"New to MedTrap?"})})]}),e.jsx("div",{className:"text-center",children:e.jsx("a",{href:"/adminCreateStockist",className:"text-teal-600 hover:text-teal-500 font-semibold transition-colors",children:"Create your account"})})]}),e.jsx("div",{className:"text-center mt-6",children:e.jsxs("div",{className:"flex items-center justify-center text-sm text-gray-500",children:[e.jsx(Pe,{className:"w-4 h-4 text-amber-500 mr-1"}),"Protected by industry-standard security measures"]})})]})})}const st="modulepreload",tt=function(s){return"/"+s},as={},at=function(a,r,l){let t=Promise.resolve();if(r&&r.length>0){let u=function(o){return Promise.all(o.map(h=>Promise.resolve(h).then(N=>({status:"fulfilled",value:N}),N=>({status:"rejected",reason:N}))))};document.getElementsByTagName("link");const p=document.querySelector("meta[property=csp-nonce]"),d=(p==null?void 0:p.nonce)||(p==null?void 0:p.getAttribute("nonce"));t=u(r.map(o=>{if(o=tt(o),o in as)return;as[o]=!0;const h=o.endsWith(".css"),N=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${o}"]${N}`))return;const j=document.createElement("link");if(j.rel=h?"stylesheet":st,h||(j.as="script"),j.crossOrigin="",j.href=o,d&&j.setAttribute("nonce",d),document.head.appendChild(j),h)return new Promise((C,n)=>{j.addEventListener("load",C),j.addEventListener("error",()=>n(new Error(`Unable to preload CSS for ${o}`)))})}))}function c(u){const p=new Event("vite:preloadError",{cancelable:!0});if(p.payload=u,window.dispatchEvent(p),!p.defaultPrevented)throw u}return t.then(u=>{for(const p of u||[])p.status==="rejected"&&c(p.reason);return a().catch(c)})};function rt({children:s,className:a="",variant:r="default",...l}){const t="inline-flex items-center justify-center gap-2 px-4 py-2.5 rounded-xl font-medium transition-all duration-300 focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 transform hover:scale-105 active:scale-95",c={default:"bg-white text-gray-700 border border-gray-200 hover:bg-gray-50 hover:border-gray-300 shadow-sm hover:shadow-md",primary:"bg-gradient-to-r from-blue-600 to-indigo-600 text-white hover:from-blue-700 hover:to-indigo-700 shadow-lg hover:shadow-xl",secondary:"bg-white/20 backdrop-blur-sm text-white hover:bg-white/30 border border-white/20",success:"bg-gradient-to-r from-emerald-500 to-green-500 text-white hover:from-emerald-600 hover:to-green-600 shadow-lg hover:shadow-xl",danger:"bg-gradient-to-r from-red-500 to-pink-500 text-white hover:from-red-600 hover:to-pink-600 shadow-lg hover:shadow-xl"};return e.jsx("button",{...l,className:`${t} ${c[r]} ${a}`,children:s})}function cs({name:s,size:a=64,online:r=!1}){const l=(s||"").split(" ").map(t=>t?t[0]:"").join("").slice(0,2).toUpperCase();return e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:`flex items-center justify-center rounded-full bg-gradient-to-br from-blue-600 via-purple-600 to-indigo-600 text-white font-bold shadow-2xl ring-4 ring-white/20 hover:ring-white/40 transition-all duration-300 hover:scale-110 ${r?"ring-green-400":""}`,style:{width:a,height:a,fontSize:a*.25},children:l||"S"}),r&&e.jsx("div",{className:"absolute -bottom-1 -right-1 w-4 h-4 bg-green-400 border-2 border-white rounded-full animate-pulse"})]})}function lt({stockist:s,qrDataUrl:a,onPrint:r}){const l=t=>t?new Date(t).toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric"}):"DD/MM/YYYY";return e.jsxs("div",{className:"w-96 h-60 bg-white rounded-xl shadow-2xl border border-gray-300 overflow-hidden mx-auto print:shadow-none print:border-0",children:[e.jsxs("div",{className:"flex items-center justify-between px-4 py-2 bg-blue-800 text-white h-12",children:[e.jsx(Ve,{className:"h-6 w-auto filter invert"})," ",e.jsx("div",{className:"text-right",children:e.jsx("h1",{className:"text-base font-extrabold tracking-widest leading-none uppercase",children:s.companyName||"GLOBAL CORP"})})]}),e.jsxs("div",{className:"flex p-4 h-[calc(100%-3rem)]",children:[e.jsxs("div",{className:"flex flex-col items-center w-1/3 pr-3 border-r border-gray-100",children:[e.jsx("div",{className:"flex-shrink-0 mb-2",children:s.profileImageUrl?e.jsx("img",{src:s.profileImageUrl,alt:`${s.name} profile`,className:"w-24 h-24 rounded-full object-cover border-4 border-gray-200 shadow-md"}):e.jsx("div",{className:"w-24 h-24 bg-gray-300 rounded-full flex items-center justify-center border-4 border-gray-200",children:e.jsx(cs,{name:s.name,size:60})})}),e.jsx("div",{className:"text-center w-full",children:e.jsx("p",{className:"text-xs font-semibold text-blue-800 uppercase leading-tight mt-1",children:s.roleType||s.designation||"DESIGNATION"})})]}),e.jsxs("div",{className:"flex flex-col w-2/3 pl-4",children:[e.jsx("h2",{className:"text-xl font-extrabold text-gray-900 truncate leading-tight",children:s.contactPerson||s.name||"Employee Name"}),e.jsxs("p",{className:"text-xs text-gray-500 mb-3",children:["ID: **",s._id?String(s._id).slice(-8):"00000000","**"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-x-4 gap-y-1 text-xs flex-grow",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-500",children:"Joined"}),e.jsx("div",{className:"font-semibold text-gray-900",children:l(s.createdAt||s.joinedDate)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-500",children:"D.O.B"}),e.jsx("div",{className:"font-semibold text-gray-900",children:l(s.dob)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-500",children:"Phone"}),e.jsx("div",{className:"font-semibold text-gray-900",children:s.phone||s.contactNo||"000-000-123456"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-500",children:"Blood Group"}),e.jsx("div",{className:"font-semibold text-gray-900",children:s.bloodGroup||"-"})]})]}),e.jsxs("div",{className:"flex justify-between items-end mt-2 pt-2 border-t border-gray-100",children:[e.jsx("div",{className:"w-14 h-14 border border-gray-300 rounded-sm p-0.5",children:a?e.jsx("img",{src:a,alt:"QR Code",className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full bg-gray-100 rounded-sm"})}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"h-6 w-24 border-b border-gray-400 mb-1"}),e.jsx("p",{className:"text-[10px] text-gray-600",children:"Authorized Signature"})]})]})]})]}),e.jsx("div",{className:"mt-4 print:hidden p-4",children:e.jsx("button",{onClick:r,className:"w-full px-4 py-2 bg-gradient-to-r from-blue-700 to-blue-800 text-white rounded-lg shadow hover:from-blue-800 hover:to-blue-900 transition-all duration-200 font-medium",children:"Print Card"})})]})}function it({stats:s}){return e.jsx("div",{className:"bg-gradient-to-r from-white via-gray-50 to-white px-8 py-8",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"relative group",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-500 to-indigo-500 rounded-2xl opacity-0 group-hover:opacity-10 transition-all duration-300"}),e.jsxs("div",{className:"relative text-center p-8 bg-gradient-to-br from-blue-50 to-indigo-50 rounded-2xl border-2 border-blue-100 hover:border-blue-200 transition-all duration-300 transform hover:scale-105 hover:-translate-y-1",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-gradient-to-br from-blue-500 to-indigo-500 rounded-2xl mb-6 shadow-xl group-hover:shadow-2xl transition-all duration-300",children:e.jsx(Ae,{className:"text-white",size:28})}),e.jsx("div",{className:"text-4xl font-black text-gray-900 mb-2 bg-gradient-to-r from-blue-600 to-indigo-600 bg-clip-text text-transparent",children:s.companies}),e.jsx("div",{className:"text-sm font-bold text-gray-600 uppercase tracking-wider",children:"Companies"}),e.jsx("div",{className:"absolute top-4 right-4",children:e.jsx(js,{size:16,className:"text-blue-400"})})]})]}),e.jsxs("div",{className:"relative group",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-emerald-500 to-green-500 rounded-2xl opacity-0 group-hover:opacity-10 transition-all duration-300"}),e.jsxs("div",{className:"relative text-center p-8 bg-gradient-to-br from-emerald-50 to-green-50 rounded-2xl border-2 border-emerald-100 hover:border-emerald-200 transition-all duration-300 transform hover:scale-105 hover:-translate-y-1",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-gradient-to-br from-emerald-500 to-green-500 rounded-2xl mb-6 shadow-xl group-hover:shadow-2xl transition-all duration-300",children:e.jsx(Ns,{className:"text-white",size:28})}),e.jsx("div",{className:"text-4xl font-black text-gray-900 mb-2 bg-gradient-to-r from-emerald-600 to-green-600 bg-clip-text text-transparent",children:s.medicines}),e.jsx("div",{className:"text-sm font-bold text-gray-600 uppercase tracking-wider",children:"Medicines"}),e.jsx("div",{className:"absolute top-4 right-4",children:e.jsx(vs,{size:16,className:"text-emerald-400"})})]})]}),e.jsxs("div",{className:"relative group",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-purple-500 to-violet-500 rounded-2xl opacity-0 group-hover:opacity-10 transition-all duration-300"}),e.jsxs("div",{className:"relative text-center p-8 bg-gradient-to-br from-purple-50 to-violet-50 rounded-2xl border-2 border-purple-100 hover:border-purple-200 transition-all duration-300 transform hover:scale-105 hover:-translate-y-1",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-gradient-to-br from-purple-500 to-violet-500 rounded-2xl mb-6 shadow-xl group-hover:shadow-2xl transition-all duration-300",children:e.jsx(Ne,{className:"text-white",size:28})}),e.jsx("div",{className:"text-4xl font-black text-gray-900 mb-2 bg-gradient-to-r from-purple-600 to-violet-600 bg-clip-text text-transparent",children:s.staff}),e.jsx("div",{className:"text-sm font-bold text-gray-600 uppercase tracking-wider",children:"Staff Members"}),e.jsx("div",{className:"absolute top-4 right-4",children:e.jsx(ys,{size:16,className:"text-purple-400"})})]})]})]})})}function nt({c:s,onView:a,onContact:r}){const l=s.name||s.title||s.companyName||"Untitled Company",t=s.email||s.phone||s.contact||"",c=s._id||s.id||l;return e.jsx("div",{className:"bg-white rounded-xl shadow-sm border hover:shadow-lg transition-all duration-300 hover:-translate-y-1 overflow-hidden group",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-lg bg-gradient-to-br from-blue-600 to-sky-500 flex items-center justify-center text-white font-bold text-lg shadow-sm",children:l.slice(0,2).toUpperCase()}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-1 truncate group-hover:text-sky-600 transition-colors",children:l}),t&&e.jsx("p",{className:"text-sm text-gray-500 truncate",children:t})]})]}),e.jsxs("div",{className:"mt-6 flex gap-2",children:[e.jsx("button",{onClick:()=>a&&a(s),className:"flex-1 px-3 py-2 text-sm font-medium text-gray-700 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:"View Details"}),e.jsx("button",{onClick:()=>r&&r(s),className:"flex-1 px-3 py-2 text-sm font-medium text-sky-700 bg-sky-50 rounded-lg hover:bg-sky-100 transition-colors",children:"Contact"})]})]})},c)}function ot({m:s,onView:a,onOrder:r}){const l=s.name||s.medicineName||s.title||"Untitled Medicine",t=s.company||s.manufacturer||"",c=s._id||s.id||l;return e.jsx("div",{className:"bg-white rounded-xl shadow-sm border hover:shock-lg transition-all duration-300 hover:-translate-y-1 overflow-hidden group",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-lg bg-gradient-to-br from-emerald-600 to-emerald-500 flex items-center justify-center text-white font-bold text-lg shadow-sm",children:l.slice(0,2).toUpperCase()}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-1 truncate group-hover:text-emerald-600 transition-colors",children:l}),t&&e.jsx("p",{className:"text-sm text-gray-500 truncate",children:t})]})]}),e.jsxs("div",{className:"mt-6 flex gap-2",children:[e.jsx("button",{onClick:()=>a&&a(s),className:"flex items-center justify-center gap-2 flex-1 px-3 py-2 text-sm font-medium text-gray-700 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:"Details"}),e.jsx("button",{onClick:()=>r&&r(s),className:"flex-1 px-3 py-2 text-sm font-medium text-emerald-700 bg-emerald-50 rounded-lg hover:bg-emerald-100 transition-colors",children:"Order"})]})]})},c)}function dt({st:s,onView:a,onDelete:r,isAdminOrOwner:l}){const t=s._id||s.id||`${s.firstName||""}-${s.lastName||""}`,c=s.fullName||s.name||`${s.firstName||""} ${s.lastName||""}`.trim()||"Unnamed Staff";return e.jsx("div",{className:"bg-white rounded-xl shadow-sm border hover:shadow-lg transition-all duration-300 hover:-translate-y-1 overflow-hidden",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-start gap-4 mb-6",children:[e.jsx("div",{className:"w-12 h-12 rounded-lg bg-gradient-to-br from-purple-600 to-violet-600 flex items-center justify-center text-white font-bold text-lg shadow-sm",children:(c.slice(0,2)||"S").toUpperCase()}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-1 truncate",children:c}),e.jsx("p",{className:"text-sm text-gray-500 truncate",children:s.contact||s.contactNo||s.phone||"No contact info"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>a&&a(s),className:"flex items-center justify-center gap-2 flex-1 px-3 py-2 text-sm font-medium text-gray-700 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:"View"}),l&&e.jsx("button",{onClick:()=>r&&r(s),className:"flex items-center justify-center px-3 py-2 text-sm font-medium text-red-600 bg-red-50 rounded-lg hover:bg-red-100 transition-colors",children:"Delete"})]})]})},t)}const ct=()=>e.jsxs("div",{className:"animate-pulse space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-300 rounded-full"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"h-6 bg-gray-300 rounded w-48"}),e.jsx("div",{className:"h-4 bg-gray-300 rounded w-32"})]})]}),e.jsx("div",{className:"h-48 bg-gray-300 rounded"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[...Array(3)].map((s,a)=>e.jsx("div",{className:"h-24 bg-gray-300 rounded"},a))})]}),mt=({error:s,onRetry:a})=>e.jsxs("div",{className:"flex flex-col items-center justify-center p-8 bg-white rounded-lg shadow-sm border border-red-200",children:[e.jsx(Le,{className:"w-12 h-12 text-red-500 mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Something went wrong"}),e.jsx("p",{className:"text-gray-600 text-center mb-4",children:s}),a&&e.jsx("button",{onClick:a,className:"px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors",children:"Try Again"})]}),xt=[{key:"companies",label:"Companies",icon:xe},{key:"medicines",label:"Medicines",icon:ie},{key:"staff",label:"Staff",icon:Ne}];function ht(){const s=ee(),a=We(),r=Se(),l=a.id||r.state&&r.state.stockistId||null,[t,c]=i.useState(null),[u,p]=i.useState([]),[d,o]=i.useState([]),[h,N]=i.useState([]),[j,C]=i.useState(!0),[n,b]=i.useState(""),[f,I]=i.useState("companies"),[v,m]=i.useState(""),[A,k]=i.useState(null),[B,x]=i.useState(!1),y=i.useMemo(()=>({companies:u.length,medicines:d.length,staff:h.length}),[u.length,d.length,h.length]),_=i.useCallback((R,g=["name"])=>{if(!v)return R||[];const P=v.trim().toLowerCase();return(R||[]).filter(L=>{try{return g.some(S=>(L==null?void 0:L[S])&&String(L[S]).toLowerCase().includes(P))||JSON.stringify(L).toLowerCase().includes(P)}catch{return!1}})},[v]),E=i.useMemo(()=>({companies:_(u,["name","companyName"]),medicines:_(d,["name","medicineName"]),staff:_(h,["fullName","name"])}),[u,d,h,_]),$=i.useCallback(async()=>{C(!0),b("");try{const g=await(await fetch(X("/api/stockist"))).json().catch(()=>({})),P=(g==null?void 0:g.data)||[];let L=null;if(l&&l!=="me"?L=P.find(Q=>String(Q._id)===String(l)):l==="me"&&(L=P.find(Q=>Q==null?void 0:Q._id)),!L&&P.length>0&&(L=P[0]),!L)throw new Error("Stockist not found");c(L);const S=typeof window<"u"?localStorage.getItem("token"):null,M=X(`/api/staff?stockist=${L._id}`),F=S?{headers:{Authorization:`Bearer ${S}`}}:{},[W,V,w]=await Promise.all([fetch(X("/api/company")),fetch(X("/api/medicine")),fetch(M,F)]),[H,T,J]=await Promise.all([W.json().catch(()=>({})),V.json().catch(()=>({})),w.json().catch(()=>({}))]),de=(H==null?void 0:H.data)||[],K=(T==null?void 0:T.data)||[],ge=(J==null?void 0:J.data)||[],Be=de.filter(Q=>{try{return Array.isArray(Q.stockists)&&Q.stockists.length?Q.stockists.some(ce=>String((ce==null?void 0:ce._id)||ce)===String(L._id)):[Q.stockist,Q.stockistId,Q.seller,Q.sellerId,Q.vendor,Q.vendorId,Q.supplier,Q.supplierId].some(ce=>ce&&String(ce._id||ce.id||ce)===String(L._id))}catch{return!1}}),De=K.filter(Q=>we(Q,L._id));p(Be),o(De),N(ge)}catch(R){console.error("Error loading stockist data:",R),b(R.message||"Failed to load data")}finally{C(!1)}},[l]);i.useEffect(()=>{const R=l||(t==null?void 0:t._id);if(!R)return k(null);(async()=>{try{const g=await at(()=>import("./vendor_qrcode-DMpc0nVC.js").then(S=>S.b),__vite__mapDeps([0,1])),L=await((g==null?void 0:g.default)||g).toDataURL(`${window.location.origin}/stockist-card?id=${R}`);k(L)}catch{k(null)}})()},[l,t]),i.useEffect(()=>{$()},[$]);const D=async()=>{x(!0),await $(),x(!1)},O=()=>s(-1),q=()=>{s("/adminCreateStaff",{state:{stockistId:t._id}})},oe=()=>{console.log("Export functionality to be implemented")},ne=()=>{navigator.share&&navigator.share({title:`${(t==null?void 0:t.name)||(t==null?void 0:t.companyName)} - Stockist Profile`,url:window.location.href})},U=()=>{const R=E[f];return R.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center p-12 bg-white rounded-lg shadow-sm border border-gray-200",children:[e.jsxs("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mb-4",children:[f==="companies"&&e.jsx(xe,{className:"w-8 h-8 text-gray-400"}),f==="medicines"&&e.jsx(ie,{className:"w-8 h-8 text-gray-400"}),f==="staff"&&e.jsx(Ne,{className:"w-8 h-8 text-gray-400"})]}),e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:["No ",f," found"]}),e.jsx("p",{className:"text-gray-500 text-center",children:v?`No ${f} match your search criteria.`:`This stockist has no ${f} yet.`})]}):e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4 lg:gap-6",children:[f==="companies"&&R.map(g=>e.jsx(Z.div,{initial:{opacity:0,y:6},animate:{opacity:1,y:0},whileHover:{scale:1.02},transition:{duration:.28},children:e.jsx(nt,{c:g,onView:()=>{},onContact:()=>{}})},g._id||g.id)),f==="medicines"&&R.map(g=>e.jsx(Z.div,{initial:{opacity:0,y:6},animate:{opacity:1,y:0},whileHover:{scale:1.02},transition:{duration:.28},children:e.jsx(ot,{m:g,onView:()=>{},onOrder:()=>{}})},g._id||g.id)),f==="staff"&&R.map(g=>e.jsx(Z.div,{initial:{opacity:0,y:6},animate:{opacity:1,y:0},whileHover:{scale:1.02},transition:{duration:.28},children:e.jsx(dt,{st:g,onView:()=>{},onDelete:()=>{},isAdminOrOwner:!1})},g._id||g.id))]})};return j?e.jsx("div",{className:"min-h-screen p-4 lg:p-6 bg-gray-50",children:e.jsx("div",{className:"max-w-7xl mx-auto",children:e.jsx(ct,{})})}):n?e.jsx("div",{className:"min-h-screen p-4 lg:p-6 bg-gray-50 flex items-center justify-center",children:e.jsx("div",{className:"max-w-md w-full",children:e.jsx(mt,{error:n,onRetry:D})})}):t?e.jsx("div",{className:"min-h-screen p-4 lg:p-6 bg-gray-50",children:e.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(cs,{name:t.name||t.companyName,size:64,className:"ring-4 ring-blue-50"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl lg:text-3xl font-bold text-gray-900",children:t.name||t.companyName}),e.jsx("p",{className:"text-gray-600 mt-1",children:t.email||t.phone}),t.location&&e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:t.location})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Z.button,{onClick:ne,whileHover:{scale:1.06},whileTap:{scale:.98},className:"p-2 text-gray-600 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Share",children:e.jsx(ws,{size:18})}),e.jsx(Z.button,{onClick:oe,whileHover:{scale:1.06},whileTap:{scale:.98},className:"p-2 text-gray-600 hover:text-green-600 hover:bg-green-50 rounded-lg transition-colors",title:"Export",children:e.jsx(ks,{size:18})}),e.jsx(Z.div,{whileHover:{scale:1.02},whileTap:{scale:.98},className:"rounded-md",children:e.jsxs(rt,{onClick:O,variant:"outline",className:"flex items-center gap-2",children:[e.jsx(Ee,{size:16}),e.jsx("span",{className:"hidden sm:inline",children:"Back"})]})})]})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:e.jsx(Z.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},transition:{duration:.45},className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:e.jsx(lt,{stockist:t,qrDataUrl:A,onPrint:()=>window.print()})})}),e.jsx(it,{stats:y}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[e.jsx("div",{className:"border-b border-gray-200 p-6",children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center justify-between gap-4",children:[e.jsx("div",{className:"flex flex-wrap gap-2",children:xt.map(({key:R,label:g,icon:P})=>e.jsxs(Z.button,{onClick:()=>I(R),whileHover:{scale:1.03},whileTap:{scale:.98},className:`flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition-all ${f===R?"bg-blue-600 text-white shadow-sm":"text-gray-600 hover:text-blue-600 hover:bg-blue-50"}`,children:[e.jsx(P,{size:16}),e.jsx("span",{className:"hidden sm:inline",children:g}),e.jsx("span",{className:"bg-white/20 text-xs px-2 py-0.5 rounded-full",children:E[R].length})]},R))}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"relative",children:[e.jsx(is,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:16}),e.jsx("input",{type:"text",placeholder:`Search ${f}...`,value:v,onChange:R=>m(R.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition-all w-full lg:w-64"})]}),f==="staff"&&e.jsxs("button",{onClick:q,className:"flex items-center gap-2 px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors whitespace-nowrap",children:[e.jsx(Ie,{size:16}),e.jsx("span",{className:"hidden sm:inline",children:"Add Staff"})]}),e.jsx("button",{onClick:D,disabled:B,className:"p-2 text-gray-600 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Refresh",children:e.jsx(Ss,{size:16,className:B?"animate-spin":""})})]})]})}),e.jsx("div",{className:"p-6",children:U()})]})]})}):e.jsx("div",{className:"min-h-screen p-4 lg:p-6 bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Le,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No stockist selected"}),e.jsx("p",{className:"text-gray-500",children:"Please select a stockist to view details."})]})})}function ut(){const[s]=os(),a=ee(),r=s.get("id"),[l,t]=i.useState(""),[c,u]=i.useState(!1),[p,d]=i.useState(""),[o,h]=i.useState(null),N=async j=>{j&&j.preventDefault(),u(!0),d("");try{const C=await fetch(X("/api/stockist/verify-password"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:r,password:l})}),n=await C.json().catch(()=>({}));if(!C.ok)throw new Error(n.message||"Invalid");h(n.data)}catch(C){d(String(C.message||C))}finally{u(!1)}};if(o){const j=o.address||{};return e.jsx("div",{className:"min-h-screen p-6 bg-slate-50 flex items-center justify-center",children:e.jsxs("div",{className:"bg-white rounded-xl shadow p-6 w-full max-w-md",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("img",{src:o.profileImageUrl||"/vite.svg",alt:"profile",className:"w-20 h-20 rounded-full object-cover"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold",children:o.name}),e.jsx("div",{className:"text-sm text-gray-600",children:o.roleType}),e.jsx("div",{className:"text-sm text-gray-600",children:o.firmName})]})]}),e.jsxs("div",{className:"mt-4 grid grid-cols-1 gap-2",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Address:"})," ",j.street||""," ",j.city||""," ",j.state||""," ",j.pincode||""]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Blood Group:"})," ",o.bloodGroup||"N/A"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"CNTX Number:"})," ",o.cntxNumber||"N/A"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Phone:"})," ",o.phone||"N/A"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Email:"})," ",o.email||"N/A"]})]}),e.jsx("div",{className:"mt-6 flex gap-2",children:e.jsx("button",{className:"px-4 py-2 bg-blue-600 text-white rounded",onClick:()=>a(-1),children:"Close"})})]})})}return e.jsx("div",{className:"min-h-screen p-6 bg-slate-50 flex items-center justify-center",children:e.jsxs("form",{onSubmit:N,className:"bg-white rounded-xl shadow p-6 w-full max-w-md",children:[e.jsx("h2",{className:"text-lg font-bold mb-2",children:"Verify to view details"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Enter stockist password to view full details."}),e.jsx("input",{type:"password",value:l,onChange:j=>t(j.target.value),placeholder:"Stockist password",className:"w-full rounded-xl border px-4 py-3 mb-3"}),p&&e.jsx("div",{className:"text-red-500 mb-2",children:p}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{type:"submit",disabled:c,className:"px-4 py-2 bg-blue-600 text-white rounded",children:c?"Verifying...":"Verify"}),e.jsx("button",{type:"button",onClick:()=>a(-1),className:"px-4 py-2 border rounded",children:"Cancel"})]})]})})}function gt(){const[s,a]=i.useState(""),[r,l]=i.useState(null),[t,c]=i.useState(!1),u=ee(),p=async d=>{if(d&&d.preventDefault(),!s)return l({ok:!1,msg:"Please enter a valid email."});c(!0),l(null);try{const o=await fetch(X("/api/auth/forgot-password"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:s})}),h=await o.json().catch(()=>({}));if(o.ok){const N=(h==null?void 0:h.message)||"If an account exists, a reset email has been sent.";l({ok:!0,msg:N})}else{const N=(h==null?void 0:h.message)||"Something went wrong. Please try again.";l({ok:!1,msg:N})}}catch{l({ok:!1,msg:"Network error. Please try again."})}finally{c(!1)}};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-teal-50 via-cyan-50 to-blue-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"w-full max-w-md",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-gradient-to-br from-teal-500 to-cyan-600 rounded-2xl mb-4 shadow-lg",children:e.jsx(Pe,{className:"w-8 h-8 text-white"})}),e.jsx("h1",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Forgot Password?"}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Don't worry â€” we'll help you reset it."})]}),e.jsxs("div",{className:"bg-white rounded-3xl shadow-xl p-8 backdrop-blur-sm border border-white/50",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-2",children:"Reset Your Password"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Enter your email address and we'll send you a secure link to reset your password."})]}),e.jsxs("form",{onSubmit:p,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Email Address"}),e.jsxs("div",{className:"relative",children:[e.jsx(Ce,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"email",value:s,onChange:d=>a(d.target.value),placeholder:"Enter your email address",className:"w-full pl-12 pr-4 py-4 border border-gray-200 rounded-2xl focus:ring-2 focus:ring-teal-500 focus:border-transparent transition-all duration-200 text-gray-800 placeholder-gray-400"})]})]}),e.jsx("button",{type:"submit",disabled:t||!s,className:"w-full bg-gradient-to-r from-teal-500 to-cyan-600 hover:from-teal-600 hover:to-cyan-700 disabled:from-gray-300 disabled:to-gray-400 text-white font-semibold py-4 rounded-2xl transition-all duration-200 transform hover:scale-[1.02] disabled:scale-100 shadow-lg disabled:shadow-none",children:t?e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),e.jsx("span",{children:"Sending Reset Link..."})]}):"Send Reset Link"}),r&&e.jsxs("div",{className:`flex items-start space-x-3 p-4 rounded-2xl ${r.ok?"bg-emerald-50 border border-emerald-200":"bg-red-50 border border-red-200"}`,children:[r.ok?e.jsx($e,{className:"w-5 h-5 text-emerald-600 mt-0.5 flex-shrink-0"}):e.jsx(Le,{className:"w-5 h-5 text-red-600 mt-0.5 flex-shrink-0"}),e.jsx("div",{children:e.jsx("p",{className:`text-sm ${r.ok?"text-emerald-800":"text-red-800"}`,children:r.msg})})]}),e.jsx("div",{className:"text-center pt-4 border-t border-gray-100",children:e.jsxs("button",{type:"button",onClick:()=>u("/login"),className:"inline-flex items-center space-x-2 text-sm text-gray-600 hover:text-teal-600 transition-colors duration-200",children:[e.jsx(Ee,{className:"w-4 h-4"}),e.jsx("span",{children:"Back to Login"})]})})]})]}),e.jsx("div",{className:"text-center mt-6",children:e.jsx("p",{className:"text-xs text-gray-500",children:"Need help? Contact our support team"})})]})})}function ft(){const[s]=os(),a=ee(),r=s.get("token")||"",l=s.get("email")||"",[t,c]=i.useState(""),[u,p]=i.useState(""),[d,o]=i.useState(!1),[h,N]=i.useState(null),[j,C]=i.useState(!1),[n,b]=i.useState(0),[f,I]=i.useState([]);i.useEffect(()=>{const k=[];let B=0;t.length>=8?B+=25:t.length>0&&k.push("At least 8 characters"),/[A-Z]/.test(t)?B+=25:t.length>0&&k.push("One uppercase letter"),/[a-z]/.test(t)?B+=25:t.length>0&&k.push("One lowercase letter"),/[0-9]/.test(t)?B+=25:t.length>0&&k.push("One number"),b(B),I(k)},[t]);const v=async()=>{if(n<100)return N({ok:!1,msg:"Please meet all password requirements"});if(!r||!l)return N({ok:!1,msg:"Missing reset token or email. Use the link from your email."});if(t!==u)return N({ok:!1,msg:"Passwords do not match."});C(!0),N(null);try{const k=await fetch(X("/api/auth/reset-password"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:r,email:l,newPassword:t})}),B=await k.json().catch(()=>({}));k.ok?(N({ok:!0,msg:(B==null?void 0:B.message)||"Password updated successfully. Redirecting to login..."}),setTimeout(()=>a("/login"),1500)):N({ok:!1,msg:(B==null?void 0:B.message)||"Failed to reset password"})}catch{N({ok:!1,msg:"Network error. Please try again."})}finally{C(!1)}},m=()=>n>=75?"bg-emerald-500":n>=50?"bg-yellow-500":n>=25?"bg-orange-500":"bg-red-500",A=()=>n>=75?"Strong":n>=50?"Good":n>=25?"Fair":"Weak";return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-teal-50 via-cyan-50 to-blue-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"w-full max-w-md",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-gradient-to-br from-teal-500 to-cyan-600 rounded-2xl mb-4 shadow-lg",children:e.jsx(Pe,{className:"w-8 h-8 text-white"})}),e.jsx("h1",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Reset Password"}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Create a new secure password"})]}),e.jsxs("div",{className:"bg-white rounded-3xl shadow-xl p-8 backdrop-blur-sm border border-white/50",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-2",children:"Set New Password"}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Creating a new password for ",e.jsx("span",{className:"font-medium text-teal-600",children:l})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"New Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(Fe,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:d?"text":"password",value:t,onChange:k=>c(k.target.value),placeholder:"Enter your new password",className:"w-full pl-12 pr-12 py-4 border border-gray-200 rounded-2xl focus:ring-2 focus:ring-teal-500 focus:border-transparent transition-all duration-200 text-gray-800 placeholder-gray-400"}),e.jsx("button",{type:"button",onClick:()=>o(!d),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:d?e.jsx(Re,{className:"w-5 h-5"}):e.jsx(Oe,{className:"w-5 h-5"})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Confirm Password"}),e.jsx("div",{className:"relative",children:e.jsx("input",{type:d?"text":"password",value:u,onChange:k=>p(k.target.value),placeholder:"Re-enter new password",className:"w-full pl-4 pr-12 py-4 border border-gray-200 rounded-2xl focus:ring-2 focus:ring-teal-500 focus:border-transparent transition-all duration-200 text-gray-800 placeholder-gray-400"})})]}),t&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Password Strength"}),e.jsx("span",{className:`text-sm font-medium ${n>=75?"text-emerald-600":n>=50?"text-yellow-600":n>=25?"text-orange-600":"text-red-600"}`,children:A()})]}),e.jsx("div",{className:"h-2 bg-gray-200 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full ${m()} transition-all duration-300`,style:{width:`${n}%`}})}),e.jsx("div",{className:"space-y-2",children:[{text:"At least 8 characters",met:t.length>=8},{text:"One uppercase letter",met:/[A-Z]/.test(t)},{text:"One lowercase letter",met:/[a-z]/.test(t)},{text:"One number",met:/[0-9]/.test(t)}].map((k,B)=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:`w-4 h-4 rounded-full flex items-center justify-center ${k.met?"bg-emerald-100":"bg-gray-100"}`,children:k.met&&e.jsx(Cs,{className:"w-3 h-3 text-emerald-600"})}),e.jsx("span",{className:`text-xs ${k.met?"text-emerald-600":"text-gray-500"}`,children:k.text})]},B))})]}),e.jsx("button",{onClick:v,disabled:j||n<100,className:"w-full bg-gradient-to-r from-teal-500 to-cyan-600 hover:from-teal-600 hover:to-cyan-700 disabled:from-gray-300 disabled:to-gray-400 text-white font-semibold py-4 rounded-2xl transition-all duration-200 transform hover:scale-[1.02] disabled:scale-100 shadow-lg disabled:shadow-none",children:j?e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),e.jsx("span",{children:"Resetting Password..."})]}):"Reset Password"}),h&&e.jsxs("div",{className:`flex items-start space-x-3 p-4 rounded-2xl ${h.ok?"bg-emerald-50 border border-emerald-200":"bg-red-50 border border-red-200"}`,children:[h.ok?e.jsx($e,{className:"w-5 h-5 text-emerald-600 mt-0.5 flex-shrink-0"}):e.jsx(Le,{className:"w-5 h-5 text-red-600 mt-0.5 flex-shrink-0"}),e.jsx("p",{className:`text-sm ${h.ok?"text-emerald-800":"text-red-800"}`,children:h.msg})]})]})]}),e.jsx("div",{className:"bg-white/50 backdrop-blur-sm rounded-2xl p-4 mt-6 border border-white/50",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(Pe,{className:"w-5 h-5 text-teal-600 mt-0.5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-800 mb-1",children:"Security Tip"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Use a unique password that you haven't used elsewhere. Consider using a password manager to generate and store secure passwords."})]})]})})]})})}const bt=()=>e.jsx("div",{className:"",children:e.jsxs(Ls,{children:[e.jsx(Y,{path:"/",element:e.jsx(Bs,{})}),e.jsx(Y,{path:"/dashboard",element:e.jsx(Es,{})}),e.jsx(Y,{path:"/login",element:e.jsx(Ds,{})}),e.jsx(Y,{path:"/forgot-password",element:e.jsx(gt,{})}),e.jsx(Y,{path:"/reset-password",element:e.jsx(ft,{})}),e.jsx(Y,{path:"/signup",element:e.jsx(Ts,{})}),e.jsx(Y,{path:"/CompanyResult",element:e.jsx(_s,{})}),e.jsx(Y,{path:"/MedicineRes",element:e.jsx(Fs,{})}),e.jsx(Y,{path:"/profile",element:e.jsx(Rs,{})}),e.jsx(Y,{path:"/adminpanel",element:e.jsx(Os,{})}),e.jsx(Y,{path:"/adminCreateStockist",element:e.jsx(Ws,{})}),e.jsx(Y,{path:"/stockist-login",element:e.jsx(et,{})}),e.jsx(Y,{path:"/stockist-outcode",element:e.jsx(ht,{})}),e.jsx(Y,{path:"/stockist-card",element:e.jsx(ut,{})}),e.jsx(Y,{path:"/adminCreateCompany",element:e.jsx(Us,{})}),e.jsx(Y,{path:"/adminCreateMedicine",element:e.jsx(Vs,{})}),e.jsx(Y,{path:"/adminCreateStaff",element:e.jsx(Xs,{})}),e.jsx(Y,{path:"/staffs",element:e.jsx(Ys,{})}),e.jsx(Y,{path:"/staff/:id",element:e.jsx(Ks,{})}),e.jsx(Y,{path:"/purchaser",element:e.jsx(qs,{})}),e.jsx(Y,{path:"/purchaser/:id",element:e.jsx(Gs,{})}),e.jsx(Y,{path:"/demand",element:e.jsx(Zs,{})})]})});Ms.createRoot(document.getElementById("root")).render(e.jsx(As,{children:e.jsx(bt,{})}));
