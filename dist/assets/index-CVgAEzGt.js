import{j as e,u as Z,r as l,a as $e,M as ze,L as Ve,C as Ie,b as ye,E as We,c as Je,P as pe,A as os,m as de,d as be,e as je,X as ds,f as qe,g as Ge,h as Pe,i as ne,S as cs,I as Xe,k as Ze,l as js,H as Se,B as Fe,U as fe,K as Ns,F as Oe,n as es,o as He,p as Ce,q as ms,s as ue,t as ss,v as vs,w as he,x as Ye,y as Le,z as ys,R as xs,D as ws,T as us,G as ts,J as Me,N as Qe,O as ks,Q as Ss,V as Cs,W as Ls,Y as X,Z as As,_ as Is,$ as Ps}from"./vendor-C0N7kbnH.js";import{Q as hs}from"./vendor_qrcode-CfvDoH1I.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const b of i.addedNodes)b.tagName==="LINK"&&b.rel==="modulepreload"&&r(b)}).observe(document,{childList:!0,subtree:!0});function a(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(n){if(n.ep)return;n.ep=!0;const i=a(n);fetch(n.href,i)}})();const Ms=s=>s.endsWith("/")?s.slice(0,-1):s,Es="https://api.medi-trap.com/",De=Ms(Es),q=(s="")=>{const t=s.startsWith("/")?s:`/${s}`;return`${De}${t}`},$s=async(s,t,a={})=>{var N;const r=q(s),n=new AbortController,i=a.timeout||6e4,b=setTimeout(()=>n.abort(),i);try{const o=await fetch(r,{method:"POST",body:t,mode:"cors",credentials:a.credentials||"include",headers:a.headers||{},signal:n.signal});clearTimeout(b);const m=await o.text(),w=(N=o.headers.get("content-type"))==null?void 0:N.includes("application/json"),c=m&&w?JSON.parse(m):m;if(!o.ok){const g=new Error((c==null?void 0:c.message)||`Request failed ${o.status}`);throw g.status=o.status,g.body=c,g}return c}catch(o){throw clearTimeout(b),o}},zs=async(s,t,a={})=>{var N;const r=q(s),n=new AbortController,i=a.timeout||6e4,b=setTimeout(()=>n.abort(),i);try{const o=await fetch(r,{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json",...a.headers||{}},mode:"cors",credentials:a.credentials||"include",signal:n.signal});clearTimeout(b);const m=await o.text(),w=(N=o.headers.get("content-type"))==null?void 0:N.includes("application/json"),c=m&&w?JSON.parse(m):m;if(!o.ok){const g=new Error((c==null?void 0:c.message)||`Request failed ${o.status}`);throw g.status=o.status,g.body=c,g}return c}catch(o){throw clearTimeout(b),o}};function gs(s,t,a=7,r="/"){if(typeof document>"u")return;const n=new Date(Date.now()+a*864e5).toUTCString();document.cookie=`${s}=${encodeURIComponent(t)}; expires=${n}; path=${r}`}function re(s){if(typeof document>"u")return null;const t=document.cookie.match(new RegExp("(?:^|; )"+s.replace(/([.$?*|{}()\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return t?decodeURIComponent(t[1]):null}function fs(s,t="/"){typeof document>"u"||(document.cookie=`${s}=; expires=${new Date(0).toUTCString()}; path=${t}`)}function Ee(s,t){if(!s||!t)return!1;try{const a=String(t);if(Array.isArray(s.stockists))for(const n of s.stockists){const i=n&&(n.stockist||n._id||n.id||n);if(i&&String(i).includes(a))return!0}const r=[s.stockist,s.stockistId,s.seller,s.sellerId,s.vendor,s.vendorId,s.supplier,s.supplierId];for(const n of r){if(!n)continue;const i=n&&(n._id||n.id||n);if(String(i).includes(a))return!0}for(const n of Object.keys(s))if(/stock|seller|vendor|supplier/i.test(n)){const i=s[n];if(!i)continue;const b=i&&(i._id||i.id||i);if(String(b).includes(a))return!0}}catch{}return!1}function ie(s){return s&&(s.name||s.brandName||s.title||s.medicineName||s.displayName)||""}function Ae(s,t){if(!s||!t)return!1;try{const a=N=>String(N||"").toLowerCase().replace(/[^a-z0-9\s]/g," ").replace(/\s+/g," ").trim(),r=a(s);if(!r)return!1;const n=new Set,i=[t.Medicines,t.medicines,t.items,t.itemsList,t.companies];for(const N of i)if(Array.isArray(N))for(const o of N)n.add(a(o));t.title&&n.add(a(t.title));const b=r.split(" ").filter(N=>N.length>2);if(b.length===0)return!1;for(const N of n){if(!N)continue;if(N.includes(r)||r.includes(N))return!0;const o=N.split(" ").filter(m=>m.length>2);for(const m of b)if(o.includes(m))return!0}}catch{}return!1}function ps(s,t){if(!s||!t)return 0;try{const a=o=>String(o||"").toLowerCase().replace(/[^a-z0-9\s]/g," ").replace(/\s+/g," ").trim(),r=a(s);if(!r)return 0;const n=new Set(r.split(" ").filter(o=>o.length>2));if(n.size===0)return 0;const i=new Set,b=[t.Medicines,t.medicines,t.items,t.itemsList,t.companies];for(const o of b)if(Array.isArray(o))for(const m of o)i.add(a(m));t.title&&i.add(a(t.title));let N=0;for(const o of i){if(!o)continue;const m=new Set(o.split(" ").filter(c=>c.length>2));let w=0;for(const c of n)m.has(c)&&w++;w>N&&(N=w)}return N}catch{return 0}}function _e({className:s="w-20 h-20",alt:t="MedTrap Logo"}){return e.jsx("img",{src:"/Gemini_Generated_Image_hnxythhnxythhnxy-removebg-preview.png",alt:t,className:`mx-auto ${s} mb-4 relative z-10`})}const Ne=({children:s})=>e.jsx("span",{className:"text-lg",children:s});function Ds({navigation:s}){var J,T;const t=(()=>{try{return Z()}catch{return null}})(),a=s||{navigate:k=>{t?t(k):window.location.href=k},goBack:()=>window.history.back()},[r,n]=l.useState(""),[i,b]=l.useState([]),[N,o]=l.useState(!1),[m,w]=l.useState("company"),[c,g]=l.useState(!1),[z,h]=l.useState([]),[I,C]=l.useState(!1),[d,u]=l.useState(!1),[x,S]=l.useState(!1),[f,v]=l.useState(null),[L,y]=l.useState([]);l.useEffect(()=>{let k=!0;return(async()=>{try{const[R,F,D]=await Promise.all([fetch(q("/api/stockist")),fetch(q("/api/medicine")),fetch(q("/api/company"))]),[j,B,H]=await Promise.all([R.json(),F.json(),D.json()]),W=B&&B.data||[],P=H&&H.data||[];if(k&&j&&j.data){const Q=j.data.map(Y=>{let ee=W.filter(O=>Ee(O,Y._id)).map(O=>ie(O)).filter(Boolean);if((!ee||ee.length===0)&&W.length>0){const O=new Set((Y.Medicines||Y.medicines||Y.items||[]).map(le=>String(le).toLowerCase())),U=W.filter(le=>{const te=ie(le)||"";if(!te)return!1;if(Ae(te,Y))return!0;const xe=te.toLowerCase();for(const ae of O)if(ae&&(ae.includes(xe)||xe.includes(ae)))return!0;return!1}).map(le=>ie(le)).filter(Boolean);U.length>0&&(ee=U)}const ce=new Set(W.filter(O=>Array.isArray(O.stockists)?O.stockists.some(U=>String(U.stockist||U).includes(String(Y._id))):!1).map(O=>O.company&&(O.company._id||O.company)?String(O.company._id||O.company):null).filter(Boolean)),se=new Set((Y.companies||Y.items||[]).map(O=>O?typeof O=="string"?String(O):O._id?String(O._id):O.id?String(O.id):null:null).filter(Boolean));if((!ee||ee.length===0)&&se.size>0){const O=W.filter(U=>{const le=U.company&&(U.company._id||U.company);return le&&se.has(String(le))}).map(U=>ie(U)).filter(Boolean);O.length>0&&(ee=[...new Set([...ee||[],...O])])}let me=P.filter(O=>ce.has(String(O._id))).map(O=>O.name?O.name:O.shortName||"").filter(Boolean);const we=(Array.isArray(Y.companies)?Y.companies:[]).map(O=>{if(typeof O=="string"){const U=P.find(le=>String(le._id)===O||le.id===O);return U&&(U.name||U.shortName)||O}return O&&(O.name||O.shortName)?O.name||O.shortName:""}).filter(Boolean),Te=Array.from(new Set([...we||[],...me||[]]));let ke=[];Array.isArray(Y.medicines)&&Y.medicines.length>0?ke=Y.medicines.map(O=>{if(typeof O=="string")return O;if(O&&(O.name||O.brandName))return O.name||O.brandName;try{const U=O&&(O._id||O.id||O);if(U&&W&&W.length>0){const le=W.find(te=>String(te._id)===String(U)||String(te._id)===String(U&&(U._id||U.id)||U));if(le)return ie(le)}}catch{}return""}).filter(Boolean):ke=(ee||[]).slice();const Be=(O,U)=>{if(!O)return!1;const le=String(U),te=new Set,xe=ae=>{if(ae==null||te.has(ae))return!1;if(typeof ae=="string"||typeof ae=="number")return String(ae)===le;if(Array.isArray(ae)){for(const Re of ae)if(xe(Re))return!0;return!1}if(typeof ae=="object"){if(te.has(ae))return!1;te.add(ae);for(const Re of Object.keys(ae))if(xe(ae[Re]))return!0;return!1}return!1};return xe(O)},Ke=P.filter(O=>Be(O,Y._id)).map(O=>O.name?O.name:O.shortName||"").filter(Boolean);return{_id:Y._id,title:Y.name,phone:Y.phone,address:Y.address?`${Y.address.street||""}, ${Y.address.city||""}`:"",items:Te,Medicines:ke}});y(Q),console.warn("Nav: loaded stockists ->",Q.length)}}catch(R){console.warn("Nav: failed to load stockists",R)}})(),()=>k=!1},[]),l.useEffect(()=>{const k=re("token");v(k)},[]);const _=k=>{if(k==="company"){const R=new Set,F=D=>String(D||"").toLowerCase().trim();return L.forEach(D=>{var j;return(j=D.items)==null?void 0:j.forEach(B=>R.add(F(B)))}),Array.from(R)}else{if(k==="stockist")return L.map(R=>R.title);if(k==="medicine"){const R=new Set;return L.forEach(F=>{var D;return(D=F.Medicines)==null?void 0:D.forEach(j=>R.add(j))}),Array.from(R)}}return[]},A=k=>{w(k),n(""),h([]),C(!0),S(!1);const R=_(k);if(k==="stockist")h(L);else if(k==="company"){const F=[],D=j=>String(j||"").toLowerCase().trim();R.forEach(j=>{const B=L.filter(H=>(H.items||[]).some(W=>D(W)===j));F.push(...B)}),h([...new Set(F)])}else if(k==="medicine"){const F=[];R.forEach(D=>{const j=L.filter(B=>B.Medicines&&B.Medicines.includes(D));F.push(...j)}),h([...new Set(F)])}};l.useEffect(()=>{const k=r.trim().toLowerCase(),R=new Set;if(!k){b([]),o(!1);return}if(m==="company"){const D=j=>String(j||"").toLowerCase().trim();L.forEach(j=>{var B;return(B=j.items)==null?void 0:B.forEach(H=>{D(H).includes(k)&&R.add(D(H))})})}else m==="stockist"?L.forEach(D=>{D.title.toLowerCase().includes(k)&&R.add(D.title)}):m==="medicine"&&L.forEach(D=>{var j;return(j=D.Medicines)==null?void 0:j.forEach(B=>{B.toLowerCase().includes(k)&&R.add(B)})});const F=[...R];if(b(F),o(F.length>0),m==="company"){const D=j=>String(j||"").toLowerCase().trim();if(k){const j=L.filter(B=>(B.items||[]).some(H=>D(H).includes(k)));h(j),C(!1),o(F.length>0),u(!1)}}},[r,m,L]);const E=k=>{u(!0),n(k),o(!1),setTimeout(()=>{let R=[];if(m==="stockist")R=L.filter(F=>F.title===k);else if(m==="company"){const F=D=>String(D||"").toLowerCase().trim();R=L.filter(D=>(D.items||[]).some(j=>F(j)===k))}else m==="medicine"&&(R=L.filter(F=>F.Medicines&&F.Medicines.includes(k)));h(R),C(!1),u(!1)},300)},p=k=>{if(n(k),k===""){C(!0);const R=_(m);if(m==="stockist")h(L);else if(m==="company"){const F=[],D=j=>String(j||"").toLowerCase().trim();R.forEach(j=>{const B=L.filter(H=>(H.items||[]).some(W=>D(W)===j));F.push(...B)}),h([...new Set(F)])}else if(m==="medicine"){const F=[];R.forEach(D=>{const j=L.filter(B=>B.Medicines&&B.Medicines.includes(D));F.push(...j)}),h([...new Set(F)])}}},M=()=>{n(""),h([]),o(!1),C(!1)},G=[{value:"medicine",label:"Medicine",icon:"üíä"},{value:"company",label:"Company",icon:"üè•"},{value:"stockist",label:"Supplier",icon:"‚öïÔ∏è"}],$=[{label:"Home",icon:"üè†"},{label:"Health Info",icon:"ü©∫"},{label:"Contact",icon:"üìû"}];l.useEffect(()=>A("company"),[]),l.useEffect(()=>{if(!L||L.length===0||z&&z.length>0)return;const k=_(m);if(m==="stockist")h(L);else if(m==="company"){const R=[],F=D=>String(D||"").toLowerCase().trim();k.forEach(D=>{const j=L.filter(B=>(B.items||[]).some(H=>F(H)===D));R.push(...j)}),h([...new Set(R)])}else if(m==="medicine"){const R=[];k.forEach(F=>{const D=L.filter(j=>j.Medicines&&j.Medicines.includes(F));R.push(...D)}),h([...new Set(R)])}C(!0)},[L]);const V=k=>{const R={cardiovascular:"‚ù§Ô∏è",diabetes:"ü©∫",pain:"üíä",mental:"üß†",pediatric:"üë∂",emergency:"üö®",chronic:"‚öïÔ∏è",preventive:"üõ°Ô∏è",oncology:"üéóÔ∏è",respiratory:"ü´Å",dermatology:"üß¥",orthopedic:"ü¶¥",pharmacy:"üíä",hospital:"üè•",clinic:"üè•",medical:"‚öïÔ∏è",health:"ü©∫",care:"üíä",medicine:"üíâ",drug:"üíä",pharma:"üíä",therapeutic:"ü©π",surgical:"üî¨",diagnostic:"üî¨",laboratory:"üß™",radiology:"üì∑",nutrition:"üçé",wellness:"üå±",fitness:"üí™",rehabilitation:"üèÉ‚Äç‚ôÇÔ∏è"},F=String(k).toLowerCase();for(const[D,j]of Object.entries(R))if(F.includes(D))return j;return"üíä"},K=(k,R)=>{var F;return e.jsxs("div",{className:"group relative bg-white/80 backdrop-blur-sm rounded-3xl p-6 mb-6 shadow-lg border border-slate-200/50 hover:shadow-2xl hover:scale-[1.02] transition-all duration-300 overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-cyan-50/50 via-blue-50/30 to-purple-50/50 opacity-0 group-hover:opacity-100 transition-opacity duration-500"}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex items-start justify-between mb-5",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-2xl bg-gradient-to-br from-cyan-400 to-blue-500 flex items-center justify-center shadow-lg group-hover:shadow-xl transition-all duration-300",children:e.jsx("span",{className:"text-white font-bold",children:(F=k.title)==null?void 0:F.charAt(0)})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-slate-800 group-hover:text-blue-700 transition-colors duration-300",children:k.title}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-emerald-400 rounded-full animate-pulse"}),e.jsx("span",{className:"text-xs text-emerald-600 font-semibold",children:"VERIFIED"})]})]})]}),e.jsxs("div",{className:"space-y-3 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3 group/contact hover:bg-cyan-50 rounded-xl p-2 transition-all duration-200",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-r from-cyan-400 to-blue-500 flex items-center justify-center shadow-md",children:e.jsx("span",{className:"text-white text-sm",children:"üìû"})}),e.jsx("span",{className:"text-slate-700 font-medium group-hover/contact:text-cyan-700",children:k.phone})]}),e.jsxs("div",{className:"flex items-start gap-3 group/address hover:bg-slate-50 rounded-xl p-2 transition-all duration-200",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-r from-slate-400 to-slate-500 flex items-center justify-center shadow-md",children:e.jsx("span",{className:"text-white text-sm",children:"üìç"})}),e.jsx("span",{className:"text-slate-600 flex-1 group-hover/address:text-slate-800",children:k.address})]})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-4 h-4 bg-emerald-400 rounded-full shadow-lg"}),e.jsx("div",{className:"absolute inset-0 w-4 h-4 bg-emerald-400 rounded-full animate-ping opacity-75"})]})]}),m==="company"&&k.items&&e.jsxs("div",{className:"mb-5",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("div",{className:"w-10 h-10 rounded-2xl bg-gradient-to-r from-emerald-400 to-teal-500 flex items-center justify-center mr-3 shadow-lg",children:e.jsx("span",{className:"text-white",children:"üè•"})}),e.jsx("span",{className:"font-bold text-slate-800",children:"Healthcare Partners:"})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:k.items.map((D,j)=>{const B=r&&D.toLowerCase().includes(r.toLowerCase());return e.jsxs("div",{className:`flex items-center gap-2 px-4 py-2 rounded-full text-sm font-medium transition-all duration-300 ${B?"bg-gradient-to-r from-cyan-100 to-blue-100 border-2 border-cyan-400 text-cyan-800 shadow-lg scale-105":"bg-gradient-to-r from-slate-50 to-slate-100 text-slate-700 hover:shadow-md hover:scale-105"}`,children:[e.jsx("span",{className:"text-lg",children:V(D)}),e.jsx("span",{children:D})]},j)})})]}),m==="medicine"&&k.Medicines&&e.jsxs("div",{className:"mb-5",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("div",{className:"w-10 h-10 rounded-2xl bg-gradient-to-r from-emerald-400 to-green-500 flex items-center justify-center mr-3 shadow-lg",children:e.jsx("span",{className:"text-white",children:"üíä"})}),e.jsx("span",{className:"font-bold text-slate-800",children:"Available Medicines:"})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:k.Medicines.map((D,j)=>{const B=r&&D.toLowerCase().includes(r.toLowerCase());return e.jsxs("div",{className:`relative flex items-center gap-3 px-4 py-3 rounded-2xl text-sm font-medium transition-all duration-300 ${B?"bg-gradient-to-r from-emerald-100 to-green-100 border-2 border-emerald-400 text-emerald-800 shadow-lg scale-105":"bg-gradient-to-r from-emerald-50 to-green-50 text-emerald-700 hover:shadow-md hover:scale-105"}`,children:[e.jsx("div",{className:"w-8 h-8 rounded-xl bg-gradient-to-r from-emerald-400 to-green-500 flex items-center justify-center shadow-md",children:e.jsx("span",{className:"text-white text-lg",children:"üíä"})}),e.jsx("span",{className:"flex-1",children:D}),B&&e.jsx("div",{className:"absolute -top-1 -right-1 w-4 h-4 bg-emerald-400 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-white text-xs",children:"‚úì"})})]},j)})})]}),m==="stockist"&&e.jsxs("div",{className:"space-y-5",children:[k.items&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("div",{className:"w-10 h-10 rounded-2xl bg-gradient-to-r from-emerald-400 to-teal-500 flex items-center justify-center mr-3 shadow-lg",children:e.jsx("span",{className:"text-white",children:"üè•"})}),e.jsx("span",{className:"font-bold text-slate-800",children:"Healthcare Partners:"})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:k.items.map((D,j)=>e.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 rounded-full text-sm font-medium bg-gradient-to-r from-slate-50 to-slate-100 text-slate-700 hover:shadow-md hover:scale-105 transition-all duration-300",children:[e.jsx("span",{className:"text-lg",children:V(D)}),e.jsx("span",{children:D})]},j))})]}),k.Medicines&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("div",{className:"w-10 h-10 rounded-2xl bg-gradient-to-r from-emerald-400 to-green-500 flex items-center justify-center mr-3 shadow-lg",children:e.jsx("span",{className:"text-white",children:"üíä"})}),e.jsx("span",{className:"font-bold text-slate-800",children:"Medicine Catalog:"})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:k.Medicines.map((D,j)=>e.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 rounded-2xl text-sm font-medium bg-gradient-to-r from-emerald-50 to-green-50 text-emerald-700 hover:shadow-md hover:scale-105 transition-all duration-300",children:[e.jsx("div",{className:"w-8 h-8 rounded-xl bg-gradient-to-r from-emerald-400 to-green-500 flex items-center justify-center shadow-md",children:e.jsx("span",{className:"text-white text-lg",children:"üíä"})}),e.jsx("span",{className:"flex-1",children:D})]},j))})]})]}),e.jsx("div",{className:"mt-6 pt-4 border-t border-slate-200/50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-500",children:[e.jsx("div",{className:"w-2 h-2 bg-emerald-400 rounded-full animate-pulse"}),e.jsx("span",{children:"Live inventory"})]}),e.jsx("button",{className:"px-4 py-2 bg-gradient-to-r from-cyan-500 to-blue-600 text-white rounded-xl font-semibold shadow-lg hover:shadow-xl hover:scale-105 transition-all duration-300",children:"Contact Now"})]})})]})]},k._id||R)};return e.jsx("div",{className:"bg-slate-50 min-h-screen",children:e.jsxs("div",{className:"max-w-6xl mx-auto px-6",children:[e.jsxs("div",{className:"flex items-center justify-between py-8",children:[e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"relative",children:e.jsx("div",{className:"w-24 h-10 flex items-center justify-center shadow-xl",children:e.jsx(_e,{})})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold bg-gradient-to-r from-slate-800 via-blue-700 to-cyan-600 bg-clip-text text-transparent",children:"Meditrap"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-emerald-400 rounded-full animate-pulse"}),e.jsx("div",{className:"px-2 py-1 bg-emerald-100 text-emerald-700 text-xs rounded-full font-semibold",children:"LIVE"})]})]})]})}),e.jsx("div",{className:"flex items-center gap-3",children:e.jsx("button",{onClick:()=>g(!0),className:"w-12 h-12 bg-white rounded-2xl shadow-lg flex items-center justify-center border border-slate-200 hover:shadow-xl hover:scale-105 transition-all duration-200","aria-label":"open menu",children:e.jsx(Ne,{children:"‚ò∞"})})})]}),c&&e.jsx("div",{className:"fixed inset-0 z-40 flex items-center justify-center bg-black/50",children:e.jsxs("div",{className:"bg-white rounded-3xl p-6 w-full max-w-md mx-4 max-h-[80vh] overflow-auto",children:[e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:()=>g(!1),className:"p-2 rounded-2xl bg-slate-100","aria-label":"close menu",children:e.jsx(Ne,{children:"‚úñ"})})}),e.jsx("nav",{className:"mt-4 space-y-2",children:$.map((k,R)=>e.jsxs("button",{onClick:()=>g(!1),className:"w-full text-left flex items-center gap-3 px-4 py-3 rounded-2xl bg-slate-50 hover:bg-slate-100",children:[e.jsx("span",{className:"text-lg",children:k.icon}),e.jsx("span",{className:"font-medium text-slate-700",children:k.label})]},R))}),e.jsx("div",{className:"mt-6 pt-4 border-t border-slate-100",children:f?e.jsxs("button",{onClick:()=>{g(!1),a.navigate("profile")},className:"w-full flex items-center gap-3 justify-center px-4 py-3 rounded-2xl bg-gradient-to-r from-violet-500 to-purple-600 text-white shadow-lg",children:[e.jsx(Ne,{children:"üë§"}),e.jsx("span",{className:"font-semibold",children:"Profile"})]}):e.jsxs("div",{className:"space-y-2",children:[e.jsxs("button",{onClick:()=>{g(!1),a.navigate("login")},className:"w-full flex items-center gap-3 justify-center px-4 py-3 rounded-2xl bg-gradient-to-r from-cyan-500 to-blue-600 text-white shadow-lg",children:[e.jsx(Ne,{children:"üîê"}),e.jsx("span",{className:"font-semibold",children:"Login"})]}),e.jsxs("button",{onClick:()=>{g(!1),a.navigate("signup")},className:"w-full flex items-center gap-3 justify-center px-4 py-3 rounded-2xl bg-gradient-to-r from-emerald-500 to-teal-600 text-white shadow-lg",children:[e.jsx(Ne,{children:"üë§‚ûï"}),e.jsx("span",{className:"font-semibold",children:"Sign Up"})]})]})})]})}),e.jsxs("div",{className:"mt-6 bg-white rounded-3xl p-6 shadow-sm border border-slate-100",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"flex items-center gap-3 bg-slate-50 rounded-2xl px-4 py-4 border border-slate-200",children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-cyan-100 flex items-center justify-center",children:e.jsx("span",{className:"text-cyan-600 text-sm",children:"üîç"})}),e.jsx("input",{value:r,onChange:k=>p(k.target.value),onFocus:()=>o(!0),className:"flex-1 bg-transparent outline-none text-slate-800 placeholder-slate-500",placeholder:`Search for ${m}...`}),r&&e.jsx("button",{onClick:M,className:"p-1 rounded-lg hover:bg-slate-200",children:e.jsx(Ne,{children:"‚úñ"})})]})}),e.jsx("div",{children:e.jsxs("button",{onClick:()=>S(!0),className:"flex items-center gap-3 bg-slate-50 px-4 py-4 rounded-2xl border border-slate-200 hover:bg-slate-100",children:[e.jsx("span",{className:"text-lg",children:(J=G.find(k=>k.value===m))==null?void 0:J.icon}),e.jsx("span",{className:"font-medium text-slate-700",children:(T=G.find(k=>k.value===m))==null?void 0:T.label}),e.jsx("span",{className:"text-sm text-slate-500",children:"‚ñº"})]})})]}),x&&e.jsx("div",{className:"fixed inset-0 z-40 flex items-center justify-center bg-black/40",children:e.jsxs("div",{className:"bg-white rounded-3xl p-6 w-full max-w-md mx-4",onClick:k=>k.stopPropagation(),children:[e.jsx("h3",{className:"text-lg font-bold text-center mb-4 text-slate-800",children:"Select Search Category"}),e.jsx("div",{className:"space-y-2",children:G.map(k=>e.jsx("button",{onClick:()=>A(k.value),className:`w-full text-left px-4 py-4 rounded-2xl ${m===k.value?"bg-cyan-100 border-2 border-cyan-300":"bg-slate-50 hover:bg-slate-100"}`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-lg",children:k.icon}),e.jsx("span",{className:`font-medium ${m===k.value?"text-cyan-800":"text-slate-700"}`,children:k.label})]})},k.value))}),e.jsx("div",{className:"mt-6 text-center",children:e.jsx("button",{onClick:()=>S(!1),className:"px-6 py-2 rounded-2xl bg-slate-200 text-slate-700 hover:bg-slate-300",children:"Close"})})]})}),N&&i.length>0&&e.jsxs("div",{className:"mt-4 bg-white border border-slate-200 rounded-2xl shadow-lg max-h-72 overflow-auto",children:[e.jsx("div",{className:"px-4 py-3 text-sm text-slate-500 border-b border-slate-100 bg-slate-50 rounded-t-2xl",children:"Click on any suggestion to see detailed results"}),e.jsx("div",{className:"divide-y divide-slate-100",children:i.map((k,R)=>{var j,B;let F=null,D="";if(m==="stockist"){const H=L.find(W=>W.title===k);F=H?H.phone:null,D=H?`${((j=H.items)==null?void 0:j.length)||0} companies, ${((B=H.Medicines)==null?void 0:B.length)||0} medicines`:""}else if(m==="company"){const H=L.filter(W=>W.items&&W.items.includes(k));D=`Available at ${H.length} supplier${H.length>1?"s":""}`}else if(m==="medicine"){const H=L.filter(W=>W.Medicines&&W.Medicines.includes(k));D=`Available at ${H.length} supplier${H.length>1?"s":""}`}return e.jsxs("button",{onClick:()=>E(k),className:"w-full text-left px-4 py-4 flex items-center gap-3 hover:bg-slate-50",children:[e.jsx("div",{className:"w-10 h-10 rounded-2xl bg-cyan-100 flex items-center justify-center",children:e.jsx("span",{className:"text-cyan-600",children:m==="medicine"?"üíä":m==="company"?"üè•":"‚öïÔ∏è"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-slate-700",children:k}),D&&e.jsx("div",{className:"text-sm text-slate-500",children:D})]}),F&&e.jsx("div",{className:"text-sm text-slate-600 font-semibold",children:F}),e.jsx("div",{className:"text-cyan-500 ml-2",children:"‚Üí"})]},R)})})]})]}),e.jsxs("div",{className:"px-6 pt-4 text-sm text-slate-500",children:["Debug: sectionData = ",L.length," medical suppliers"]}),z.length>0&&e.jsxs("div",{className:"px-6 mt-6",children:[d&&e.jsxs("div",{className:"flex items-center gap-3 bg-cyan-100 p-4 rounded-2xl mb-4",children:[e.jsx("div",{className:"animate-spin border-2 border-cyan-400 rounded-full w-5 h-5 border-t-transparent"}),e.jsx("div",{className:"text-cyan-700 font-medium",children:"Loading results..."})]}),r&&e.jsx("div",{className:"bg-gradient-to-r from-cyan-50 to-blue-50 rounded-2xl p-6 mb-6 border border-cyan-200",children:e.jsxs("div",{className:"flex items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-2xl bg-cyan-100 flex items-center justify-center",children:e.jsx("span",{className:"text-2xl text-cyan-600",children:"üîç"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"font-bold text-cyan-800 text-lg",children:['Search Results for "',r,'"']}),e.jsxs("div",{className:"text-sm text-slate-600",children:[z.length," medical supplier",z.length>1?"s":""," found"]})]})]}),e.jsx("div",{children:e.jsxs("button",{onClick:()=>{n(""),A(m)},className:"px-4 py-2 bg-gradient-to-r from-cyan-500 to-blue-600 text-white rounded-2xl font-semibold shadow-lg",children:["Show All"," ",m==="stockist"?"Suppliers":m==="company"?"Companies":"Medicines"]})})]})}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:r?`Search Results for "${r}"`:m==="stockist"?"All Medical Suppliers":m==="company"?"All Healthcare Companies":"All Medicines"}),e.jsx("div",{className:"text-sm text-slate-500 mt-2",children:r?`Found ${z.length} result${z.length>1?"s":""}`:`Showing ${z.length} medical suppliers`})]}),e.jsx("div",{className:"flex justify-end mt-4",children:e.jsx("button",{onClick:M,className:"px-4 py-2 bg-slate-200 text-slate-700 rounded-2xl hover:bg-slate-300",children:"Clear Results"})})]}),e.jsx("div",{children:z.map((k,R)=>K(k,R))})]}),e.jsx("div",{className:"px-6 mt-8 pb-12"})]})})}const _s=({navigation:s})=>{const t=(()=>{try{return Z()}catch{return null}})(),a=(()=>{try{return $e()}catch{return{key:null}}})(),r=s||{navigate:y=>{t?t(y):window.location.href=y},goBack:()=>window.history.back()},[n,i]=l.useState(null),[b,N]=l.useState(!1),[o,m]=l.useState([]),[w,c]=l.useState({medicines:null,stockists:null,companies:null}),[g,z]=l.useState(!1),[h,I]=l.useState([]);l.useEffect(()=>{let y=!0;return(async()=>{try{const[_,A,E]=await Promise.all([fetch(q("/api/stockist")),fetch(q("/api/medicine")),fetch(q("/api/company"))]),[p,M,G]=await Promise.all([_.json(),A.json(),E.json()]),$=M&&M.data||[],V=G&&G.data||[];if(c({medicines:M||null,stockists:p||null,companies:G||null}),console.warn("Screen DEBUG: medicines sample ->",$.slice(0,5)),y&&p&&p.data){const K=p.data.map(J=>{let T=$.filter(P=>Ee(P,J._id)).map(P=>ie(P)).filter(Boolean);if((!T||T.length===0)&&$.length>0){const P=new Set((J.Medicines||J.medicines||J.items||[]).map(Y=>String(Y).toLowerCase())),Q=$.filter(Y=>{const ee=ie(Y)||"";if(!ee)return!1;if(Ae(ee,J))return!0;const ce=ee.toLowerCase();for(const se of P)if(se&&(se.includes(ce)||ce.includes(se)))return!0;return!1}).map(Y=>ie(Y)).filter(Boolean);Q.length>0&&(T=Q)}const k=new Set($.filter(P=>Array.isArray(P.stockists)?P.stockists.some(Q=>String(Q.stockist||Q).includes(String(J._id))):!1).map(P=>P.company&&(P.company._id||P.company)?String(P.company._id||P.company):null).filter(Boolean));let R=V.filter(P=>k.has(String(P._id))).map(P=>P.name?P.name:P.shortName||"").filter(Boolean);const F=(P,Q)=>{if(!P)return!1;const Y=String(Q),ee=new Set,ce=se=>{if(se==null||ee.has(se))return!1;if(typeof se=="string"||typeof se=="number")return String(se)===Y;if(Array.isArray(se)){for(const me of se)if(ce(me))return!0;return!1}if(typeof se=="object"){if(ee.has(se))return!1;ee.add(se);for(const me of Object.keys(se))if(ce(se[me]))return!0;return!1}return!1};return ce(P)},D=V.filter(P=>F(P,J._id)).map(P=>P.name?P.name:P.shortName||"").filter(Boolean);R=Array.from(new Set([...R,...D]));const j=new Set((J.companies||J.items||[]).map(P=>P?typeof P=="string"?String(P):P._id?String(P._id):P.id?String(P.id):null:null).filter(Boolean));if((!T||T.length===0)&&j.size>0){const P=$.filter(Q=>{const Y=Q.company&&(Q.company._id||Q.company);return Y&&j.has(String(Y))}).map(Q=>ie(Q)).filter(Boolean);P.length>0&&(T=[...new Set([...T||[],...P])])}const B=(Array.isArray(J.companies)?J.companies:[]).map(P=>{if(typeof P=="string"){const Q=V.find(Y=>String(Y._id)===P||Y.id===P);return Q&&(Q.name||Q.shortName)||P}return P&&(P.name||P.shortName)?P.name||P.shortName:""}).filter(Boolean),H=Array.from(new Set([...B||[],...R||[]]));let W=[];return Array.isArray(J.medicines)&&J.medicines.length>0?W=J.medicines.map(P=>{if(typeof P=="string")return P;if(P&&(P.name||P.brandName))return P.name||P.brandName;try{const Q=P&&(P._id||P.id||P);if(Q&&$&&$.length>0){const Y=$.find(ee=>String(ee._id)===String(Q)||String(ee._id)===String(Q._id||Q.id||Q));if(Y)return ie(Y)}}catch{}return""}).filter(Boolean):W=(T||[]).slice(),{_id:J._id,title:J.name,phone:J.phone,address:J.address?`${J.address.street||""}${J.address.city?", "+J.address.city:""}`:"",image:J.logo&&J.logo.url||null,items:H,Medicines:W}});console.warn("Screen: loaded stockists ->",K.length),m(K);try{const J=(D,j)=>{const B=ie(D)||"";if(Ee(D,j._id)||Ae(B,j))return!0;const H=new Set((j.Medicines||j.medicines||j.items||[]).map(P=>String(P).toLowerCase())),W=B.toLowerCase();for(const P of H)if(P&&(P.includes(W)||W.includes(P)))return!0;return!1},T=($||[]).filter(D=>{for(const j of p.data)if(J(D,j))return!1;return!0}),k=[],R=[],F=1;for(const D of T){let j=0,B=-1;p.data.forEach((H,W)=>{const P=ps(ie(D)||"",H);P>j&&(j=P,B=W)}),j>=F&&B>=0?k.push({medicine:ie(D),stockistIndex:B,score:j}):R.push(D)}for(const D of k){const j=D.stockistIndex;K[j]&&(K[j].Medicines=K[j].Medicines||[],K[j].Medicines.includes(D.medicine)||K[j].Medicines.push(D.medicine))}I(R.slice(0,50)),console.warn("Screen DEBUG: autoAssigned ->",k.slice(0,10))}catch(J){console.warn("Screen: error computing unmatched medicines",J)}}}catch(_){console.warn("Screen: failed to load stockists",_)}})(),()=>{y=!1}},[a&&a.key]),l.useEffect(()=>{try{const y=localStorage.getItem("user");if(!y)return;const _=JSON.parse(y);N(_&&_.role==="admin")}catch(y){console.warn("Screen: error reading user from storage",y)}},[]);const C=y=>{const _=[["#06B6D4","#0891B2"],["#10B981","#059669"],["#8B5CF6","#7C3AED"],["#F59E0B","#D97706"],["#EF4444","#DC2626"],["#3B82F6","#2563EB"],["#EC4899","#DB2777"]];return _[y%_.length]},d=y=>{y&&(window.location.href=`tel:${y}`)},u=y=>{const _={cardiovascular:"‚ù§Ô∏è",diabetes:"ü©∫",pain:"üíä",mental:"üß†",pediatric:"üë∂",emergency:"üö®",chronic:"‚öïÔ∏è",preventive:"üõ°Ô∏è",oncology:"üéóÔ∏è",respiratory:"ü´Å",dermatology:"üß¥",orthopedic:"ü¶¥",gastro:"ü´Ñ",neurological:"üß†",pharmacy:"üíä",hospital:"üè•",clinic:"üè•",medical:"‚öïÔ∏è",health:"ü©∫",care:"üíä",medicine:"üíâ",drug:"üíä",pharma:"üíä",therapeutic:"ü©π",surgical:"üî¨",diagnostic:"üî¨",laboratory:"üß™",radiology:"üì∑",nutrition:"üçé",wellness:"üå±",fitness:"üí™",rehabilitation:"üèÉ‚Äç‚ôÇÔ∏è"},A=String(y).toLowerCase();for(const[E,p]of Object.entries(_))if(A.includes(E))return p;return"üíä"},x=()=>e.jsxs("div",{className:"px-6 pt-8 pb-6 bg-gradient-to-br from-slate-50 via-blue-50 to-cyan-50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-2xl bg-gradient-to-br from-cyan-400 to-blue-500 flex items-center justify-center shadow-lg",children:e.jsx("span",{className:"text-2xl",children:"üè•"})}),e.jsxs("div",{children:[e.jsx("span",{className:"text-slate-700 text-lg font-semibold",children:"Your Health Hub"}),e.jsx("div",{className:"text-sm text-slate-500",children:"Trusted Healthcare Network"})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-orange-400 to-pink-500 flex items-center justify-center shadow-md",children:e.jsx("span",{className:"text-white text-lg",children:"‚ù§Ô∏è"})}),e.jsx("div",{className:"w-10 h-10 rounded-xl bg-white/70 backdrop-blur-sm flex items-center justify-center shadow-md border border-white/50",children:e.jsx("span",{className:"text-slate-600 text-lg",children:"‚ô°"})})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-orange-400 via-orange-500 to-orange-600 rounded-3xl p-8 mb-8 shadow-2xl relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-black/10"}),e.jsx("div",{className:"absolute top-4 right-4 w-20 h-20 bg-white/10 rounded-full blur-xl"}),e.jsx("div",{className:"absolute bottom-4 left-4 w-16 h-16 bg-white/10 rounded-full blur-lg"}),e.jsxs("div",{className:"relative flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-white text-2xl font-bold mb-3",children:"Find Your Medical Partners"}),e.jsx("p",{className:"text-cyan-100 text-base leading-relaxed",children:"Connect with trusted healthcare suppliers & stockists"}),e.jsxs("div",{className:"flex items-center gap-4 mt-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-green-400 shadow-lg"}),e.jsx("span",{className:"text-white/90 text-sm",children:"24/7 Support"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-yellow-400 shadow-lg"}),e.jsx("span",{className:"text-white/90 text-sm",children:"Verified Partners"})]})]})]}),e.jsx("div",{className:"text-6xl opacity-90 filter drop-shadow-lg",children:"üíä"})]})]}),b&&e.jsx("div",{className:"mb-8",children:e.jsx("button",{onClick:()=>r.navigate("/adminpanel"),className:"bg-gradient-to-r from-violet-500 to-purple-600 text-white text-sm font-bold px-8 py-4 rounded-2xl shadow-xl hover:shadow-2xl transform hover:scale-105 transition-all duration-200",children:"Admin Panel"})}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-6",children:"Quick Actions"}),e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsx("div",{className:"bg-gradient-to-br from-cyan-400 to-cyan-600 rounded-3xl p-6 shadow-xl hover:shadow-2xl transform hover:scale-105 transition-all duration-200",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-2xl bg-white/20 flex items-center justify-center",children:e.jsx("span",{className:"text-3xl",children:"üìã"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-white font-bold text-base",children:"Order Refills"}),e.jsx("div",{className:"text-cyan-100 text-sm",children:"Quick reorder system"})]})]})}),e.jsx("div",{className:"bg-gradient-to-br from-orange-400 to-red-500 rounded-3xl p-6 shadow-xl hover:shadow-2xl transform hover:scale-105 transition-all duration-200",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-2xl bg-white/20 flex items-center justify-center",children:e.jsx("span",{className:"text-3xl",children:"üí¨"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-white font-bold text-base",children:"Consult"}),e.jsx("div",{className:"text-orange-100 text-sm",children:"Expert advice"})]})]})})]})]}),e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-slate-800",children:"Medical Suppliers"}),e.jsxs("div",{className:"text-base text-slate-600 mt-1",children:[o.length," trusted stockist",o.length!==1?"s":""," available"]}),e.jsxs("div",{className:"text-sm text-slate-400 mt-2",children:["Debug: loaded stockists = ",o.length]})]}),e.jsx("div",{className:"bg-gradient-to-br from-blue-500 to-cyan-500 rounded-2xl px-5 py-3 shadow-lg",children:e.jsx("span",{className:"text-white text-lg font-bold",children:o.length})})]})]}),S=(y,_)=>{var p;const[A,E]=C(_);return e.jsxs("article",{className:"bg-white rounded-3xl shadow-lg border-0 overflow-hidden mb-6 mx-6 transform hover:scale-105 hover:shadow-2xl transition-all duration-300",onClick:()=>i(_),role:"button",children:[y.image?e.jsxs("div",{className:"relative h-52 w-full",children:[e.jsx("img",{src:y.image,alt:y.title,className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 via-black/20 to-transparent"})]}):e.jsxs("div",{className:"relative h-52 w-full flex items-center justify-center",style:{background:`linear-gradient(135deg, ${A}, ${E})`},children:[e.jsx("div",{className:"text-5xl font-extrabold text-white/90 drop-shadow-lg",children:(p=y.title)==null?void 0:p.charAt(0)}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/20 to-transparent"}),e.jsx("div",{className:"absolute top-4 right-4 w-16 h-16 bg-white/10 rounded-full blur-xl"})]}),e.jsxs("div",{className:"p-8",children:[e.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-4",children:y.title}),e.jsxs("div",{className:"flex items-start gap-4 text-base text-slate-600 mb-3",children:[e.jsx("div",{className:"w-6 h-6 rounded-lg bg-blue-100 flex items-center justify-center",children:e.jsx("span",{className:"text-sm",children:"üìû"})}),e.jsx("div",{className:"flex-1 font-medium",children:y.phone||"-"})]}),e.jsxs("div",{className:"flex items-start gap-4 text-base text-slate-600 mb-6",children:[e.jsx("div",{className:"w-6 h-6 rounded-lg bg-green-100 flex items-center justify-center",children:e.jsx("span",{className:"text-sm",children:"üìç"})}),e.jsx("div",{className:"flex-1 font-medium",children:y.address||"-"})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("div",{className:"text-base text-slate-700 font-semibold mb-4",children:"Company"}),e.jsxs("div",{className:"flex flex-wrap gap-3",children:[y.items.slice(0,2).map((M,G)=>e.jsxs("div",{className:"flex items-center gap-3 bg-gradient-to-r from-slate-50 to-blue-50 rounded-2xl px-4 py-3 border border-blue-100",children:[e.jsx("span",{className:"text-lg",children:u(M)}),e.jsx("span",{className:"text-slate-700 text-sm font-semibold",children:M})]},G)),y.items.length>2&&e.jsx("div",{className:"bg-gradient-to-r from-slate-100 to-slate-200 rounded-2xl px-4 py-3",children:e.jsxs("span",{className:"text-slate-600 text-sm font-semibold",children:["+",y.items.length-2," more"]})})]})]}),e.jsxs("div",{className:"flex items-center justify-between text-base pt-4 border-t border-slate-100",children:[e.jsx("div",{className:"bg-gradient-to-r from-emerald-100 to-green-100 rounded-2xl px-4 py-2 border border-emerald-200",children:e.jsx("span",{className:"text-emerald-700 font-bold",children:y.Medicines?`${y.Medicines.length} medicines`:"0 medicines"})}),e.jsxs("div",{className:"flex items-center gap-3 text-cyan-600",children:[e.jsx("span",{className:"text-base font-bold",children:"View details"}),e.jsx("div",{className:"w-8 h-8 rounded-full bg-cyan-100 flex items-center justify-center",children:e.jsx("span",{className:"text-lg",children:"üîç"})})]})]})]})]},y._id||_)},f=()=>e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50/30 to-cyan-50/30",children:[e.jsx(x,{}),e.jsx("div",{className:"px-6 mb-6",children:e.jsxs("button",{onClick:()=>z(y=>!y),className:"px-6 py-3 bg-gradient-to-r from-slate-100 to-slate-200 rounded-2xl text-sm text-slate-600 font-semibold shadow-md hover:shadow-lg transition-all duration-200",children:[g?"Hide":"Show"," debug responses"]})}),g&&e.jsx("div",{className:"px-6 mb-8",children:e.jsxs("div",{className:"bg-white/90 backdrop-blur-sm rounded-3xl p-6 shadow-xl text-sm text-slate-700 border border-white/50",children:[e.jsx("div",{className:"mb-4 font-bold text-lg text-slate-800",children:"Raw API Responses (trimmed)"}),e.jsxs("div",{className:"mb-4",children:[e.jsx("div",{className:"font-semibold text-slate-800 mb-2",children:"Stockists:"}),e.jsx("pre",{className:"whitespace-pre-wrap max-h-48 overflow-auto text-xs bg-slate-50 p-4 rounded-2xl border border-slate-200",children:JSON.stringify(w.stockists&&w.stockists.data?w.stockists.data.slice(0,5):w.stockists,null,2)})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("div",{className:"font-semibold text-slate-800 mb-2",children:"Medicines:"}),e.jsx("pre",{className:"whitespace-pre-wrap max-h-48 overflow-auto text-xs bg-slate-50 p-4 rounded-2xl border border-slate-200",children:JSON.stringify(w.medicines&&w.medicines.data?w.medicines.data.slice(0,5):w.medicines,null,2)})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("div",{className:"font-semibold text-slate-800 mb-2",children:"Unmatched medicines (first 50):"}),e.jsx("pre",{className:"whitespace-pre-wrap max-h-48 overflow-auto text-xs bg-slate-50 p-4 rounded-2xl border border-slate-200",children:JSON.stringify(h,null,2)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-slate-800 mb-2",children:"Companies:"}),e.jsx("pre",{className:"whitespace-pre-wrap max-h-48 overflow-auto text-xs bg-slate-50 p-4 rounded-2xl border border-slate-200",children:JSON.stringify(w.companies&&w.companies.data?w.companies.data.slice(0,5):w.companies,null,2)})]})]})}),e.jsx("div",{className:"pb-32",children:o.map((y,_)=>S(y,_))})]}),v=()=>{var E;const y=o[n];if(!y)return null;const[_,A]=C(n||0);return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50/30 to-cyan-50/30",children:[e.jsx("div",{className:"sticky top-0 z-40 bg-white/95 backdrop-blur-lg border-b border-white/50 shadow-sm",children:e.jsx("div",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("button",{onClick:()=>i(null),className:"w-12 h-12 rounded-2xl bg-gradient-to-br from-slate-100 to-slate-200 flex items-center justify-center shadow-md hover:shadow-lg hover:scale-105 transition-all duration-200",children:e.jsx("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"currentColor",className:"text-slate-700",children:e.jsx("path",{fillRule:"evenodd",d:"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z",clipRule:"evenodd"})})}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-lg font-bold text-slate-800",children:y.title}),e.jsx("div",{className:"text-sm text-slate-500",children:"Medical Supplier Details"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-red-100 to-pink-100 flex items-center justify-center shadow-md",children:e.jsx("span",{className:"text-red-600 text-lg",children:"‚ù§Ô∏è"})}),e.jsx("button",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-blue-100 to-cyan-100 flex items-center justify-center shadow-md",children:e.jsx("span",{className:"text-blue-600 text-lg",children:"üìã"})})]})]})})}),e.jsxs("div",{className:"px-6 pb-32",children:[e.jsx("div",{className:"relative -mx-6 mb-8",children:e.jsxs("div",{className:"relative h-80 overflow-hidden",children:[y.image?e.jsx("img",{src:y.image,alt:y.title,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full",style:{background:`linear-gradient(135deg, ${_}, ${A})`}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-black/30 to-transparent"}),e.jsx("div",{className:"absolute top-6 right-6 w-32 h-32 bg-white/10 rounded-full blur-3xl animate-pulse"}),e.jsx("div",{className:"absolute bottom-20 left-8 w-24 h-24 bg-white/10 rounded-full blur-2xl animate-pulse delay-1000"}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-8",children:e.jsxs("div",{className:"flex items-end gap-6",children:[e.jsx("div",{className:"w-24 h-24 rounded-3xl bg-white/20 backdrop-blur-md flex items-center justify-center shadow-2xl border border-white/30",children:e.jsx("span",{className:"text-4xl font-bold text-white",children:(E=y.title)==null?void 0:E.charAt(0)})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h1",{className:"text-white text-3xl font-bold mb-2",children:y.title}),e.jsxs("div",{className:"flex items-center gap-4 mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2 bg-white/20 backdrop-blur-sm rounded-full px-3 py-1",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-green-400"}),e.jsx("span",{className:"text-white text-sm font-medium",children:"Verified"})]}),e.jsxs("div",{className:"flex items-center gap-2 bg-white/20 backdrop-blur-sm rounded-full px-3 py-1",children:[e.jsx("span",{className:"text-yellow-400 text-sm",children:"‚≠ê"}),e.jsx("span",{className:"text-white text-sm font-medium",children:"4.8 Rating"})]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-white/90",children:[e.jsx("span",{className:"text-lg",children:"üìç"}),e.jsx("span",{className:"text-base",children:y.address})]})]})]})})]})}),e.jsx("div",{className:"bg-white/95 backdrop-blur-sm rounded-3xl shadow-2xl p-6 mb-8 border border-white/50",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[e.jsxs("button",{onClick:()=>d(y.phone),className:"bg-gradient-to-r from-green-500 to-emerald-600 text-white py-5 rounded-2xl font-bold text-lg flex items-center justify-center gap-3 shadow-xl hover:shadow-2xl transform hover:scale-105 transition-all duration-200",children:[e.jsx("span",{className:"text-2xl",children:"üìû"}),e.jsx("span",{children:"Call Now"})]}),e.jsxs("button",{className:"bg-gradient-to-r from-blue-500 to-cyan-600 text-white py-5 rounded-2xl font-bold text-lg flex items-center justify-center gap-3 shadow-xl hover:shadow-2xl transform hover:scale-105 transition-all duration-200",children:[e.jsx("span",{className:"text-2xl",children:"üí¨"}),e.jsx("span",{children:"Message"})]})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-8",children:[e.jsxs("div",{className:"bg-gradient-to-br from-cyan-500 to-blue-600 rounded-3xl p-6 text-center shadow-xl",children:[e.jsx("div",{className:"text-3xl mb-2",children:"üíä"}),e.jsx("div",{className:"text-white text-2xl font-bold",children:y.Medicines?y.Medicines.length:0}),e.jsx("div",{className:"text-cyan-100 text-sm",children:"Medicines"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-orange-500 to-blue-600 rounded-3xl p-6 text-center shadow-xl",children:[e.jsx("div",{className:"text-3xl mb-2",children:"üè•"}),e.jsx("div",{className:"text-white text-2xl font-bold",children:y.items?y.items.length:0}),e.jsx("div",{className:"text-orange-100 text-sm",children:"Companies"})]})]}),e.jsxs("div",{className:"bg-white/95 backdrop-blur-sm rounded-3xl shadow-2xl p-8 mb-8 border border-white/50",children:[e.jsxs("h3",{className:"text-2xl font-bold text-slate-800 mb-6 flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-blue-500 to-cyan-500 flex items-center justify-center",children:e.jsx("span",{className:"text-white text-lg",children:"üìû"})}),"Contact Details"]}),e.jsxs("div",{className:"space-y-6",children:[y.phone&&e.jsxs("div",{className:"flex items-center gap-6 p-6 bg-gradient-to-r from-blue-50 to-cyan-50 rounded-3xl border border-blue-100 hover:scale-[1.02] transition-all duration-200",children:[e.jsx("div",{className:"w-16 h-16 rounded-2xl bg-gradient-to-br from-blue-500 to-cyan-600 flex items-center justify-center shadow-lg",children:e.jsx("span",{className:"text-white text-2xl",children:"üìû"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-blue-700 font-bold text-lg",children:"Phone Number"}),e.jsx("div",{className:"text-slate-800 text-xl font-bold mt-1",children:y.phone}),e.jsx("div",{className:"text-blue-600 text-sm mt-1",children:"Tap to call directly"})]})]}),y.address&&e.jsxs("div",{className:"flex items-center gap-6 p-6 bg-gradient-to-r from-green-50 to-emerald-50 rounded-3xl border border-green-100 hover:scale-[1.02] transition-all duration-200",children:[e.jsx("div",{className:"w-16 h-16 rounded-2xl bg-gradient-to-br from-green-500 to-emerald-600 flex items-center justify-center shadow-lg",children:e.jsx("span",{className:"text-white text-2xl",children:"üìç"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-green-700 font-bold text-lg",children:"Address"}),e.jsx("div",{className:"text-slate-800 text-xl font-bold mt-1",children:y.address}),e.jsx("div",{className:"text-green-600 text-sm mt-1",children:"View on map"})]})]})]})]}),e.jsxs("div",{className:"bg-white/95 backdrop-blur-sm rounded-3xl shadow-2xl p-8 mb-8 border border-white/50",children:[e.jsxs("h3",{className:"text-2xl font-bold text-slate-800 mb-6 flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center",children:e.jsx("span",{className:"text-white text-lg",children:"üè•"})}),"Comapany"]}),e.jsx("div",{className:"grid grid-cols-1 gap-4",children:y.items.map((p,M)=>e.jsx("div",{className:"group relative overflow-hidden",children:e.jsxs("div",{className:"flex items-center gap-6 p-6 bg-gradient-to-r from-slate-50 via-blue-50 to-cyan-50 rounded-3xl border border-blue-100 shadow-md hover:shadow-xl hover:scale-[1.02] transition-all duration-300",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-16 h-16 rounded-2xl bg-gradient-to-br from-cyan-500 to-blue-600 flex items-center justify-center shadow-lg group-hover:scale-110 transition-all duration-300",children:e.jsx("span",{className:"text-white text-2xl",children:u(p)})}),e.jsx("div",{className:"absolute -top-1 -right-1 w-6 h-6 rounded-full bg-green-500 flex items-center justify-center",children:e.jsx("span",{className:"text-white text-xs",children:"‚úì"})})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-slate-800 text-xl font-bold",children:p}),e.jsx("div",{className:"text-slate-600 text-sm mt-1",children:"Specialized medical services available"})]}),e.jsx("div",{className:"text-cyan-600 text-2xl opacity-0 group-hover:opacity-100 transition-all duration-300",children:"‚Üí"})]})},M))})]}),y.Medicines&&y.Medicines.length>0&&e.jsxs("div",{className:"bg-white/95 backdrop-blur-sm rounded-3xl shadow-2xl p-8 border border-white/50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h3",{className:"text-2xl font-bold text-slate-800 flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-emerald-500 to-green-500 flex items-center justify-center",children:e.jsx("span",{className:"text-white text-lg",children:"üíä"})}),"Medicines"]}),e.jsx("div",{className:"bg-gradient-to-r from-emerald-100 to-green-100 rounded-full px-4 py-2 border border-emerald-200",children:e.jsxs("span",{className:"text-emerald-700 font-bold text-sm",children:[y.Medicines.length," items in stock"]})})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[y.Medicines.slice(0,8).map((p,M)=>e.jsx("div",{className:"group",children:e.jsxs("div",{className:"flex items-center gap-4 p-4 bg-gradient-to-r from-emerald-50 to-green-50 rounded-2xl border border-emerald-100 hover:shadow-lg hover:scale-[1.02] transition-all duration-200",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-emerald-500 to-green-600 flex items-center justify-center shadow-md",children:e.jsx("span",{className:"text-white text-lg",children:"üíä"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-emerald-800 font-bold text-lg",children:p}),e.jsx("div",{className:"text-emerald-600 text-sm",children:"In stock ‚Ä¢ Available now"})]})]})},M)),y.Medicines.length>8&&e.jsxs("button",{className:"w-full p-4 bg-gradient-to-r from-slate-100 to-slate-200 rounded-2xl text-slate-700 font-semibold hover:from-slate-200 hover:to-slate-300 transition-all duration-200",children:["View All ",y.Medicines.length," Medicines"]})]})]})]})]})},L=()=>e.jsx("div",{className:"fixed bottom-8 left-6 right-6 z-50",children:e.jsx("div",{className:"bg-white/90 backdrop-blur-lg rounded-3xl shadow-2xl border border-white/50",children:e.jsxs("div",{className:"flex justify-around py-6",children:[e.jsxs("button",{className:"flex flex-col items-center text-cyan-600",children:[e.jsx("div",{className:"w-14 h-14 rounded-3xl bg-gradient-to-br from-cyan-100 to-blue-100 flex items-center justify-center mb-2 shadow-lg",children:e.jsx("span",{className:"text-2xl",children:"üè†"})}),e.jsx("div",{className:"text-sm font-bold",children:"Home"})]}),e.jsxs("button",{className:"flex flex-col items-center text-slate-400",children:[e.jsx("div",{className:"w-14 h-14 rounded-3xl bg-slate-100 flex items-center justify-center mb-2 shadow-md",children:e.jsx("span",{className:"text-2xl",children:"üìã"})}),e.jsx("div",{className:"text-sm font-medium",children:"Categories"})]}),e.jsxs("button",{className:"flex flex-col items-center text-slate-400",children:[e.jsx("div",{className:"w-14 h-14 rounded-3xl bg-slate-100 flex items-center justify-center mb-2 shadow-md",children:e.jsx("span",{className:"text-2xl",children:"üíæ"})}),e.jsx("div",{className:"text-sm font-medium",children:"Saved"})]}),e.jsxs("button",{className:"flex flex-col items-center text-slate-400",onClick:()=>r.navigate("/profile"),children:[e.jsx("div",{className:"w-14 h-14 rounded-3xl bg-slate-100 flex items-center justify-center mb-2 shadow-md",children:e.jsx("span",{className:"text-2xl",children:"üë§"})}),e.jsx("div",{className:"text-sm font-medium",children:"Profile"})]})]})})});return e.jsxs("div",{children:[n===null?f():v(),n===null&&L()]})};function Ts(){let s;try{const a=Z();s=r=>a(r)}catch{s=r=>{typeof r=="string"?window.location.href=r:r&&r.name&&(window.location.href=r.name)}}const t={navigate:s,goBack:()=>window.history.back()};return e.jsxs("div",{className:"min-h-screen bg-white overflow-y-auto",children:[e.jsx(Ds,{navigation:t}),e.jsx(_s,{navigation:t})]})}const Bs=({className:s=""})=>e.jsx("div",{className:`${s} rounded-lg flex items-center justify-center`,children:e.jsxs("span",{className:"text-white font-bold text-xl",children:[e.jsx("img",{src:"/final-logo.png",alt:"MedTrap"}),e.jsx("img",{src:"/logo.png",alt:"MedTrap small"})]})});function Rs(){const s=Z(),[t,a]=l.useState("Purchaser"),[r,n]=l.useState(null),i=[{id:"Stockist",name:"Stockist",icon:"/WhatsApp Image 2025-09-30 at 15.26.30_9f12fc65.jpg",gradient:"from-emerald-400 to-teal-500",bgGlow:"bg-emerald-500/10",description:"Manage inventory",color:"emerald"},{id:"Purchaser",name:"Purchaser",icon:"/WhatsApp Image 2025-09-30 at 15.26.31_55e2f48c.jpg",gradient:"from-blue-400 to-indigo-500",bgGlow:"bg-blue-500/10",description:"Handle procurement",color:"blue"},{id:"Medical Owner",name:"Medical Owner",icon:"/WhatsApp Image 2025-09-30 at 15.26.30_99a6071d.jpg",gradient:"from-orange-400 to-red-500",bgGlow:"bg-orange-500/10",description:"Clinic management",color:"orange"}],b=o=>{if(a(o),localStorage.setItem("selectedRole",o),o==="Staff"){s("/staffs");return}},N=()=>{if(localStorage.setItem("confirmedRole",t),t==="Purchaser"){s("/purchaser");return}if(t==="Stockist"){s("/adminCreateStockist");return}if(t==="Medical Owner"){s("/signup");return}s("/dashboard")};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-100 flex items-center justify-center p-4 relative overflow-hidden",children:[e.jsxs("div",{className:"absolute inset-0",children:[e.jsx("div",{className:"absolute top-20 left-20 w-72 h-72 bg-gradient-to-r from-blue-400/15 to-purple-400/15 rounded-full blur-3xl animate-pulse"}),e.jsx("div",{className:"absolute bottom-20 right-20 w-80 h-80 bg-gradient-to-r from-emerald-400/10 to-teal-400/10 rounded-full blur-3xl animate-pulse delay-1000"}),e.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-96 h-96 bg-gradient-to-r from-indigo-400/8 to-purple-400/8 rounded-full blur-3xl animate-pulse delay-2000"}),e.jsx("div",{className:"absolute top-1/4 left-1/4 w-2 h-2 bg-blue-400/30 rounded-full animate-bounce delay-300"}),e.jsx("div",{className:"absolute top-3/4 right-1/4 w-3 h-3 bg-emerald-400/30 rounded-full animate-bounce delay-700"}),e.jsx("div",{className:"absolute bottom-1/4 left-1/3 w-1.5 h-1.5 bg-purple-400/30 rounded-full animate-bounce delay-1100"})]}),e.jsxs("div",{className:"relative bg-white/80 backdrop-blur-2xl rounded-3xl shadow-2xl border border-white/60 p-10 w-full max-w-2xl",children:[e.jsxs("div",{className:"text-center mb-14",children:[e.jsx("div",{className:"mt-8 mb-6 transform hover:scale-105 transition-transform duration-300",children:e.jsx(Bs,{className:"h-25 w-32 mx-auto"})}),e.jsxs("div",{className:"relative",children:[e.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-gray-800 via-blue-600 to-indigo-600 bg-clip-text text-transparent mb-3 tracking-tight",children:"Select Your Role"}),e.jsx("div",{className:"absolute -bottom-1 left-1/2 transform -translate-x-1/2 w-24 h-1 bg-gradient-to-r from-blue-500 to-indigo-500 rounded-full"})]}),e.jsx("p",{className:"text-gray-600 text-base mt-4 font-medium",children:"Choose your primary function to get started"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-14",children:i.map((o,m)=>{const w=o.icon,c=t===o.id,g=r===o.id;return e.jsxs("div",{onClick:()=>b(o.id),onMouseEnter:()=>n(o.id),onMouseLeave:()=>n(null),className:`
                  group relative flex flex-col items-center p-8 rounded-3xl cursor-pointer transition-all duration-500 transform hover:scale-110 hover:-translate-y-2
                  ${c?"bg-gradient-to-br from-white/90 to-white/70 border-2 border-blue-400/60 shadow-2xl shadow-blue-500/30":"bg-white/70 border-2 border-gray-200/40 hover:bg-white/90 hover:border-gray-300/60 hover:shadow-xl"}
                `,style:{animationDelay:`${m*150}ms`},children:[c&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-500/15 to-indigo-600/15 rounded-3xl blur-xl animate-pulse"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-400/10 to-indigo-500/10 rounded-3xl"})]}),g&&!c&&e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-400/10 to-gray-500/10 rounded-3xl blur-lg"}),e.jsxs("div",{className:`relative p-6 rounded-2xl mb-6 transition-all duration-500 transform group-hover:scale-110 group-hover:rotate-3 ${c?`bg-gradient-to-r ${o.gradient} shadow-2xl`:"bg-gradient-to-r from-gray-100/90 to-gray-200/90 group-hover:from-gray-200/90 group-hover:to-gray-300/90"}`,children:[typeof w=="string"?e.jsx("img",{src:w,alt:o.name+" icon",className:`w-28 h-28 object-contain transition-all duration-500 ${c?"":"group-hover:opacity-90"}`}):e.jsx(w,{size:32,className:`transition-all duration-500 ${c?"text-white drop-shadow-lg":"text-gray-600 group-hover:text-gray-700"}`}),c&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"absolute -top-2 -right-2 w-3 h-3 bg-white/70 rounded-full animate-ping"}),e.jsx("div",{className:"absolute -bottom-2 -left-2 w-2 h-2 bg-white/50 rounded-full animate-ping delay-500"}),e.jsx("div",{className:"absolute top-1 right-1 w-1.5 h-1.5 bg-white/60 rounded-full animate-pulse"})]}),c&&e.jsx("div",{className:"absolute inset-0 rounded-2xl border-2 border-white/30",style:{animation:"spin 8s linear infinite"}})]}),e.jsx("h3",{className:`text-xl font-bold mb-3 transition-all duration-500 text-center tracking-wide ${c?"text-gray-800 drop-shadow-sm":"text-gray-700 group-hover:text-gray-800"}`,children:o.name}),e.jsx("p",{className:`text-sm transition-all duration-500 text-center font-medium ${c?"text-gray-600":"text-gray-500 group-hover:text-gray-600"}`,children:o.description}),e.jsx("div",{className:`absolute -top-3 -right-3 w-8 h-8 rounded-full border-3 border-white transition-all duration-500 flex items-center justify-center ${c?"bg-gradient-to-r from-blue-500 to-indigo-600 scale-100 shadow-lg":"bg-gray-400/60 scale-0 group-hover:scale-75 group-hover:bg-gray-500/60"}`,children:c&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-3 h-3 bg-white rounded-full animate-pulse"}),e.jsx("div",{className:"absolute inset-0 bg-white/20 rounded-full animate-ping"})]})}),e.jsx("div",{className:`absolute bottom-0 left-1/2 transform -translate-x-1/2 h-1 rounded-t-full transition-all duration-500 ${c?"w-full bg-gradient-to-r from-blue-500 to-indigo-600":"w-0 bg-gray-400"}`})]},o.id)})}),e.jsx("div",{className:"text-center mb-8",children:e.jsxs("button",{onClick:N,className:"group relative bg-gradient-to-r from-blue-600 via-indigo-600 to-purple-700 hover:from-blue-700 hover:via-indigo-700 hover:to-purple-800 text-white font-bold py-5 px-16 rounded-full transition-all duration-500 transform hover:scale-110 hover:shadow-2xl hover:shadow-blue-500/40 min-w-[220px] overflow-hidden text-lg tracking-wide",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/30 to-transparent -skew-x-12 translate-x-[-200%] group-hover:translate-x-[200%] transition-transform duration-1000"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-600/50 to-purple-600/50 rounded-full animate-pulse"}),e.jsxs("span",{className:"relative flex items-center justify-center gap-3",children:[e.jsx("span",{children:"CONFIRM ROLE"}),e.jsx("div",{className:"w-2 h-2 bg-white rounded-full animate-bounce group-hover:animate-pulse"})]}),e.jsx("div",{className:"absolute inset-0 rounded-full border-2 border-white/20 group-hover:border-white/40 transition-colors duration-300"})]})}),e.jsxs("div",{className:"flex justify-center space-x-2",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse"}),e.jsx("div",{className:"w-2 h-2 bg-blue-400/60 rounded-full animate-pulse delay-200"}),e.jsx("div",{className:"w-2 h-2 bg-blue-300/40 rounded-full animate-pulse delay-400"})]})]})]})}const as=({icon:s,label:t,name:a,type:r="text",placeholder:n,required:i=!1,showPasswordToggle:b=!1,form:N,handleChange:o,focusedField:m,setFocusedField:w,showPassword:c,setShowPassword:g})=>e.jsxs("div",{className:"relative group",children:[e.jsx("label",{className:`block text-sm font-medium transition-all duration-300 mb-2 ${m===a?"text-blue-600":"text-gray-700"}`,children:t}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:`absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none transition-all duration-300 ${m===a?"text-blue-500":"text-gray-400"}`,children:e.jsx(s,{className:"h-5 w-5"})}),e.jsx("input",{name:a,type:b?c?"text":"password":r,placeholder:n,value:N[a],onChange:o,onFocus:()=>w(a),onBlur:()=>w(null),required:i,className:`block w-full pl-10 pr-12 py-3 border rounded-lg shadow-sm placeholder-gray-500 transition-all duration-300 transform hover:scale-[1.01] focus:scale-[1.01] ${m===a?"border-blue-500 ring-2 ring-blue-200 bg-blue-50/50":"border-gray-300 hover:border-gray-400 bg-white"}`}),b&&e.jsx("button",{type:"button",onClick:()=>g(!c),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600 transition-all duration-200 hover:scale-110",children:c?e.jsx(We,{className:"h-5 w-5"}):e.jsx(Je,{className:"h-5 w-5"})})]})]}),Fs=()=>{const s=Z(),[t,a]=l.useState({email:"",password:""}),[r,n]=l.useState(""),[i,b]=l.useState(!1),[N,o]=l.useState(!1),[m,w]=l.useState(!1),[c,g]=l.useState(null);l.useEffect(()=>{w(!0)},[]);const z=I=>{a({...t,[I.target.name]:I.target.value})},h=async I=>{I&&I.preventDefault&&I.preventDefault(),b(!0),n("");try{const C=await fetch(q("/api/auth/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t.email,password:t.password})}),d=await C.json();if(!C.ok)throw new Error(d.message||"Login failed");if(d.success&&d.token&&d.user)localStorage.setItem("token",d.token),localStorage.setItem("user",JSON.stringify(d.user)),n("Login successful!"),setTimeout(()=>s("/dashboard"),700);else throw new Error("Invalid response format from server")}catch(C){n(C.message||"Login failed. Please check your credentials.")}finally{b(!1)}};return e.jsxs(e.Fragment,{children:[e.jsx("style",{children:`
        @import url("https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Poppins:wght@300;400;500;600;700;800&display=swap");

        * { font-family: "Inter", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif; }
        .brand-font { font-family: "Poppins", sans-serif; }
        .fade-in { opacity: ${m?1:0}; transform: translateY(${m?"0":"30px"}); transition: all 0.8s cubic-bezier(0.4, 0, 0.2, 1); }
        .slide-in-left { opacity: ${m?1:0}; transform: translateX(${m?"0":"-50px"}); transition: all 0.6s cubic-bezier(0.4, 0, 0.2, 1) 0.2s; }
        .slide-in-right { opacity: ${m?1:0}; transform: translateX(${m?"0":"50px"}); transition: all 0.6s cubic-bezier(0.4, 0, 0.2, 1) 0.4s; }
        .scale-in { opacity: ${m?1:0}; transform: scale(${m?1:.8}); transition: all 0.6s cubic-bezier(0.4, 0, 0.2, 1) 0.6s; }
        .floating { animation: floating 6s ease-in-out infinite; }
        .pulse-ring { animation: pulse-ring 2s cubic-bezier(0.4, 0, 0.6, 1) infinite; }
        @keyframes floating { 0%, 100% { transform: translateY(0px); } 50% { transform: translateY(-10px); } }
        @keyframes pulse-ring { 0% { transform: scale(1); opacity: 1; } 100% { transform: scale(1.2); opacity: 0; } }
        .gradient-text { background: linear-gradient(135deg, #3b82f6, #10b981); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; }
        .glass-effect { background: rgba(255, 255, 255, 0.95); backdrop-filter: blur(10px); border: 1px solid rgba(255, 255, 255, 0.2); }
        .hover-lift:hover { transform: translateY(-2px); box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04); }
        .button-gradient { background: linear-gradient(135deg, #3b82f6, #10b981); background-size: 200% 200%; animation: gradient-shift 3s ease infinite; }
        .button-gradient:hover { animation: gradient-shift 0.5s ease infinite; }
        @keyframes gradient-shift { 0% { background-position: 0% 50%; } 50% { background-position: 100% 50%; } 100% { background-position: 0% 50%; } }
        @media (max-width: 640px) { .mobile-padding { padding: 1rem; } .mobile-text { font-size: 2rem; } .mobile-card { margin: 1rem; padding: 1.5rem; } }
      `}),e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-green-50 flex items-center justify-center py-4 sm:py-12 px-4 sm:px-6 lg:px-8 relative overflow-hidden",children:[e.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[e.jsx("div",{className:"absolute -top-40 -right-40 w-80 h-80 bg-blue-400 rounded-full mix-blend-multiply filter blur-xl opacity-20 animate-pulse"}),e.jsx("div",{className:"absolute -bottom-40 -left-40 w-80 h-80 bg-green-400 rounded-full mix-blend-multiply filter blur-xl opacity-20 animate-pulse",style:{animationDelay:"2s"}}),e.jsx("div",{className:"absolute top-40 left-40 w-60 h-60 bg-purple-400 rounded-full mix-blend-multiply filter blur-xl opacity-20 animate-pulse",style:{animationDelay:"4s"}})]}),e.jsxs("div",{className:"max-w-md w-full relative z-10",children:[e.jsx("div",{className:"relative flex justify-center items-center mb-4",style:{height:"80px"},children:e.jsx(_e,{className:"h-25 w-32"})}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-6 sm:p-8 border border-gray-100 glass-effect hover-lift transition-all duration-500 scale-in mobile-card",children:[e.jsxs("div",{className:"mb-6 slide-in-left",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-900 mb-2 brand-font",children:"Welcome Back"}),e.jsx("p",{className:"text-gray-600 text-sm sm:text-base",children:"Sign in to your MedTrap account"})]}),e.jsxs("div",{className:"space-y-6 slide-in-right",children:[e.jsx(as,{icon:ze,label:"Email Address",name:"email",type:"email",placeholder:"Enter your email address",required:!0,form:t,handleChange:z,focusedField:c,setFocusedField:g}),e.jsx(as,{icon:Ve,label:"Password",name:"password",type:"password",placeholder:"Enter your password",required:!0,showPasswordToggle:!0,form:t,handleChange:z,focusedField:c,setFocusedField:g,showPassword:N,setShowPassword:o}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{id:"remember-me",name:"remember-me",type:"checkbox",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded transition-all duration-200 hover:scale-110"}),e.jsx("label",{htmlFor:"remember-me",className:"ml-2 block text-gray-700 font-medium",children:"Remember me"})]}),e.jsx("button",{type:"button",onClick:()=>s("/forgot-password"),className:"text-blue-600 hover:text-blue-500 transition-all duration-200 hover:underline font-medium",children:"Forgot password?"})]}),e.jsx("button",{type:"button",onClick:h,disabled:i,className:"w-full flex justify-center py-3 px-4 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white button-gradient hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-300 transform hover:scale-[1.02] active:scale-[0.98]",children:i?e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2"}),e.jsx("span",{className:"font-semibold",children:"Signing in..."})]}):e.jsx("span",{className:"font-semibold",children:"Sign In"})}),r&&e.jsxs("div",{className:`flex items-center p-4 rounded-lg transition-all duration-500 transform ${r.includes("successful")?"bg-green-50 border border-green-200 scale-100 opacity-100":"bg-red-50 border border-red-200 scale-100 opacity-100"}`,children:[r.includes("successful")?e.jsx(Ie,{className:"h-5 w-5 text-green-600 mr-3 animate-bounce"}):e.jsx(ye,{className:"h-5 w-5 text-red-600 mr-3 animate-pulse"}),e.jsx("span",{className:`text-sm font-medium ${r.includes("successful")?"text-green-700":"text-red-700"}`,children:r})]})]}),e.jsxs("div",{className:"mt-6 fade-in",style:{animationDelay:"1s"},children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:"w-full border-t border-gray-300"})}),e.jsx("div",{className:"relative flex justify-center text-sm",children:e.jsx("span",{className:"px-2 bg-white text-gray-500 font-medium",children:"New to MedTrap?"})})]}),e.jsx("div",{className:"mt-4 text-center",children:e.jsx("button",{onClick:()=>{s("/signup")},className:"font-semibold text-blue-600 hover:text-blue-500 transition-all duration-200 hover:underline transform hover:scale-105 inline-block",children:"Create your account"})})]})]}),e.jsx("div",{className:"mt-6 sm:mt-8 text-center fade-in",style:{animationDelay:"1.2s"},children:e.jsx("p",{className:"text-xs text-gray-500 font-medium",children:"üîí Protected by industry-standard security measures"})})]})]})]})},Os=()=>{const s=Z(),[t,a]=l.useState({medicalName:"",ownerName:"",address:"",email:"",contactNo:"",drugLicenseNo:"",password:"",drugLicenseImage:null}),[r,n]=l.useState(""),[i,b]=l.useState(!1),[N,o]=l.useState(!1),[m,w]=l.useState(!1),[c,g]=l.useState({fullName:"",email:"",password:"",aadharImage:null,personalPhoto:null}),[z,h]=l.useState(!1),[I,C]=l.useState(""),[d,u]=l.useState(!1),[x,S]=l.useState([]),[f,v]=l.useState([]),[L,y]=l.useState(!1),_=j=>{const{name:B,value:H,files:W}=j.target;a(B==="drugLicenseImage"?P=>({...P,drugLicenseImage:W[0]}):P=>({...P,[B]:H}))},A=j=>{const{name:B,value:H,files:W}=j.target;g(B==="aadharImage"||B==="personalPhoto"?P=>({...P,[B]:W&&W[0]?W[0]:null}):P=>({...P,[B]:H}))},E=j=>{j.preventDefault(),j.stopPropagation(),j.type==="dragenter"||j.type==="dragover"?o(!0):j.type==="dragleave"&&o(!1)},p=j=>{j.preventDefault(),j.stopPropagation(),o(!1),j.dataTransfer.files&&j.dataTransfer.files[0]&&a(B=>({...B,drugLicenseImage:j.dataTransfer.files[0]}))},M=async j=>{if(j&&j.preventDefault&&j.preventDefault(),m){h(!0),C("");try{if(!c.fullName||!c.email||!c.password){C("Please fill all purchaser fields"),h(!1);return}if(!c.aadharImage||!c.personalPhoto){C("Please upload aadhar image and personal photo"),h(!1);return}const H=new FormData;H.append("fullName",c.fullName),H.append("email",c.email),H.append("password",c.password),H.append("aadharImage",c.aadharImage),H.append("personalPhoto",c.personalPhoto);const W=await fetch(q("/api/auth/purchaser-signup"),{method:"POST",body:H}),P=await W.json();if(!W.ok)throw new Error(P.message||"Signup failed");if(P.token)try{gs("token",P.token,7)}catch{}C("Account created. Please select stockists to notify.");try{const Q=P.token||re("token"),ee=await(await fetch(q("/api/stockist"),{headers:{Authorization:`Bearer ${Q}`}})).json();S(ee.data||[]),v([]),u(!0)}catch(Q){console.warn("Failed to load stockists",Q&&Q.message)}}catch(H){C(H.message||"Signup failed")}finally{h(!1)}return}b(!0),n("");const B=new FormData;Object.entries(t).forEach(([H,W])=>{W!=null&&B.append(H,W)});try{const H=await fetch(q("/api/auth/signup"),{method:"POST",body:B}),W=await H.json();if(!H.ok)throw new Error(W.message||"Registration failed");if(W.success){try{W.user&&W.user._id&&localStorage.setItem("pendingUserId",W.user._id)}catch(P){console.warn("Failed to save pendingUserId",P&&P.message)}n("Registration successful! You will be redirected to verification."),setTimeout(()=>s("/medical-middle"),800)}else throw new Error("Invalid response format from server")}catch(H){n(H.message||"Registration failed. Please try again.")}finally{b(!1)}},G=j=>e.jsx("svg",{...j,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-4m-5 0H9m11 0v-4a2 2 0 00-2-2h-2a2 2 0 00-2 2v4m6 0V9a2 2 0 00-2-2H9a2 2 0 00-2 2v12"})}),$=j=>e.jsx("svg",{...j,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),V=j=>e.jsxs("svg",{...j,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),K=j=>e.jsx("svg",{...j,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),J=j=>e.jsx("svg",{...j,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})}),T=j=>e.jsx("svg",{...j,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),k=j=>e.jsx("svg",{...j,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),R=j=>e.jsx("svg",{...j,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),F=j=>e.jsx("svg",{...j,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),D=j=>e.jsx("svg",{...j,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})});return e.jsx("div",{className:"min-h-screen py-12 px-4 sm:px-6 lg:px-8 flex items-center justify-center",style:{backgroundColor:"#f8fafc"},children:e.jsxs("div",{className:"max-w-md w-full mx-auto",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx(_e,{className:"w-20 h-20",alt:"MedTrap Logo"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"MedTrap"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Medical Store Management"})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-8 border border-gray-100",children:[e.jsxs("div",{className:"mb-8 text-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Create Your Account"}),e.jsx("p",{className:"text-gray-600",children:"Register your medical store with MedTrap"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx(ge,{icon:G,label:"Medical Store Name",name:"medicalName",placeholder:"Enter your medical store name",required:!0,value:t.medicalName,onChange:_}),e.jsx("div",{className:"flex items-center gap-3 mb-4",children:e.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[e.jsx("input",{type:"checkbox",checked:m,onChange:j=>w(j.target.checked)}),e.jsx("span",{children:"Register as Purchaser (need stockist approvals)"})]})}),m?e.jsxs("div",{className:"space-y-4 p-4 border rounded-lg bg-gray-50",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Full Name"}),e.jsx("input",{name:"fullName",value:c.fullName,onChange:A,className:"w-full px-3 py-2 rounded-xl border"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),e.jsx("input",{name:"email",type:"email",value:c.email,onChange:A,className:"w-full px-3 py-2 rounded-xl border"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),e.jsx("input",{name:"password",type:"password",value:c.password,onChange:A,className:"w-full px-3 py-2 rounded-xl border"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Aadhar Number"}),e.jsx("input",{name:"aadharNo",value:c.aadharNo,onChange:A,className:"w-full px-3 py-2 rounded-xl border"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Aadhar Image"}),e.jsx("input",{name:"aadharImage",type:"file",accept:"image/*",onChange:A,className:"w-full text-sm text-gray-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Personal Photo"}),e.jsx("input",{name:"personalPhoto",type:"file",accept:"image/*",onChange:A,className:"w-full text-sm text-gray-500"})]}),e.jsx("div",{className:"flex gap-3",children:e.jsx("button",{onClick:M,disabled:z,className:"flex-1 py-3 px-4 rounded-xl bg-teal-500 text-white font-semibold",children:z?"Creating...":"Create Purchaser Account"})}),I&&e.jsx("div",{className:"text-sm text-gray-700",children:I})]}):e.jsxs(e.Fragment,{children:[e.jsx(ge,{icon:$,label:"Owner Name",name:"ownerName",placeholder:"Enter owner's full name",required:!0,value:t.ownerName,onChange:_}),e.jsx(ge,{icon:V,label:"Address",name:"address",placeholder:"Enter complete address",required:!0,value:t.address,onChange:_}),e.jsx(ge,{icon:K,label:"Email Address",name:"email",type:"email",placeholder:"Enter your email",required:!0,value:t.email,onChange:_}),e.jsx(ge,{icon:J,label:"Contact Number",name:"contactNo",type:"tel",placeholder:"Enter contact number",required:!0,value:t.contactNo,onChange:_}),e.jsx(ge,{icon:T,label:"Drug License Number",name:"drugLicenseNo",placeholder:"Enter drug license number",required:!0,value:t.drugLicenseNo,onChange:_}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Drug License Image"}),e.jsxs("div",{className:`relative border-2 border-dashed rounded-xl p-6 text-center transition-all duration-200 ${N?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-blue-300"}`,onDragEnter:E,onDragLeave:E,onDragOver:E,onDrop:p,children:[e.jsx("input",{name:"drugLicenseImage",type:"file",accept:"image/*",onChange:_,required:!0,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer"}),e.jsx(R,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsxs("div",{className:"mt-3",children:[e.jsx("p",{className:"text-sm text-gray-600",children:t.drugLicenseImage?e.jsx("span",{className:"text-blue-600 font-medium",children:t.drugLicenseImage.name}):e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"font-medium text-blue-600",children:"Click to upload"})," ","or drag and drop"]})}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"PNG, JPG, GIF up to 10MB"})]})]})]}),e.jsx(ge,{icon:k,label:"Password",name:"password",type:"password",placeholder:"Create a strong password",required:!0,value:t.password,onChange:_}),e.jsx("button",{onClick:M,disabled:i,className:"w-full flex justify-center py-4 px-6 border border-transparent rounded-xl shadow-md text-white bg-blue-500 hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 font-semibold",children:i?e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2"}),"Creating Account..."]}):"Create Account"})]}),r&&e.jsxs("div",{className:`flex items-center p-4 rounded-xl ${r.includes("successful")?"bg-green-50 border border-green-200":"bg-red-50 border border-red-200"}`,children:[r.includes("successful")?e.jsx(F,{className:"h-5 w-5 text-green-600 mr-3"}):e.jsx(D,{className:"h-5 w-5 text-red-600 mr-3"}),e.jsx("span",{className:`text-sm font-medium ${r.includes("successful")?"text-green-700":"text-red-700"}`,children:r})]})]}),e.jsx("div",{className:"mt-8 text-center",children:e.jsxs("p",{className:"text-sm text-gray-600",children:["Already have an account?"," ",e.jsx("button",{type:"button",onClick:()=>s("/medical-middle"),className:"font-semibold text-blue-600 hover:text-blue-500 transition-colors",children:"Sign in"})]})})]}),e.jsx("div",{className:"mt-8 text-center",children:e.jsxs("p",{className:"text-xs text-gray-500",children:["By registering, you agree to our"," ",e.jsx("a",{href:"#",className:"text-blue-600 hover:text-blue-500 font-medium",children:"Terms of Service"})," ","and"," ",e.jsx("a",{href:"#",className:"text-blue-600 hover:text-blue-500 font-medium",children:"Privacy Policy"})]})})]})})},ge=({icon:s,label:t,name:a,type:r="text",placeholder:n,required:i=!1,accept:b,value:N,onChange:o})=>e.jsxs("div",{className:"relative",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:t}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(s,{className:"h-5 w-5 text-gray-400"})}),r==="file"?e.jsx("input",{name:a,type:r,placeholder:n,onChange:o,required:i,accept:b,className:"block w-full pl-10 pr-3 py-3 border border-gray-200 rounded-xl shadow-sm placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200"}):e.jsx("input",{name:a,type:r,placeholder:n,value:N||"",onChange:m=>{o?o(m):console.warn(`No onChange handler provided for input: ${a}`)},required:i,autoComplete:a==="password"?"new-password":"on",className:"block w-full pl-10 pr-3 py-3 border border-gray-200 rounded-xl shadow-sm placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200"})]})]});function Us(s){const t=$e(),a=Z(),{company:r,stockists:n}=s,i=t.state||{},b=r||i.company,N=n||i.stockists||[],[o,m]=l.useState(null),w={hidden:{opacity:0,y:8,scale:.995},show:h=>({opacity:1,y:0,scale:1,transition:{delay:h*.05}}),exit:{opacity:0,y:-8,transition:{duration:.18}}},c={hidden:{y:20,opacity:0},show:{y:0,opacity:1,transition:{duration:.28}},exit:{y:20,opacity:0,transition:{duration:.2}}};if(!b||!N||N.length===0)return e.jsx("div",{className:"min-h-screen bg-blue-50 flex items-center justify-center p-6",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg max-w-lg w-full p-8 text-center",children:[e.jsx("div",{className:"mx-auto w-20 h-20 rounded-full bg-blue-100 flex items-center justify-center mb-6",children:e.jsx(pe,{size:36,color:"#3B82F6"})}),e.jsx("h2",{className:"text-3xl font-bold text-gray-800 mb-2",children:"No Results Found"}),e.jsx("p",{className:"text-lg text-gray-600 mb-6",children:"Please try searching for a different company."}),e.jsx("button",{onClick:()=>a?a(-1):window.history.back(),className:"mt-2 inline-block bg-blue-600 hover:bg-blue-700 text-white font-medium px-6 py-3 rounded-lg",children:"Go Back"})]})});const g=({stockist:h,index:I})=>e.jsxs(de.div,{custom:I,initial:"hidden",animate:"show",exit:"exit",variants:w,className:"bg-white rounded-2xl shadow-md overflow-hidden m-2 w-72 cursor-pointer hover:shadow-lg",onClick:()=>m(I),children:[h.image?e.jsxs("div",{className:"relative h-44 w-full",children:[e.jsx("img",{src:h.image,alt:h.title,className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute inset-0 bg-black/30"})]}):e.jsxs("div",{className:"relative h-44 w-full flex items-center justify-center",style:{background:"#DBEAFE"},children:[e.jsx("div",{className:"text-4xl font-extrabold text-white/90",children:(h.title||"").charAt(0)}),e.jsx("div",{className:"absolute inset-0 bg-black/10"})]}),e.jsxs("div",{className:"p-5",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-2",children:h.title}),h.address&&e.jsxs("div",{className:"flex items-start gap-3 mt-2",children:[e.jsx(be,{size:16,color:"#4B5563"}),e.jsx("p",{className:"text-sm text-gray-600 flex-1",children:h.address})]}),h.phone&&e.jsxs("div",{className:"flex items-center gap-3 mt-3",children:[e.jsx(je,{size:16,color:"#4B5563"}),e.jsx("p",{className:"text-sm text-gray-600",children:h.phone})]}),e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-100",children:e.jsx("button",{className:"w-full text-blue-600 font-medium",children:"View Details"})})]})]},h._id||I),z=({stockist:h})=>e.jsxs(de.div,{initial:"hidden",animate:"show",exit:"exit",variants:c,className:"bg-white rounded-2xl shadow-xl overflow-hidden max-w-3xl mx-auto",children:[e.jsxs("div",{className:"relative",children:[h.image?e.jsx("img",{src:h.image,alt:h.title,className:"w-full h-64 object-cover"}):e.jsx("div",{className:"h-64 bg-blue-600 flex items-center p-6",children:e.jsx("h2",{className:"text-3xl font-bold text-white",children:h.title})}),e.jsx("button",{onClick:()=>m(null),className:"absolute top-4 right-4 bg-white p-2 rounded-full shadow","aria-label":"close details",children:e.jsx(ds,{size:18,color:"#1F2937"})})]}),e.jsxs("div",{className:"p-6",children:[h.address&&e.jsxs("div",{className:"flex items-start gap-4 mb-4",children:[e.jsx(be,{size:20,color:"#2563EB"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-gray-700",children:"Address"}),e.jsx("div",{className:"text-gray-600",children:h.address})]})]}),h.phone&&e.jsxs("div",{className:"flex items-start gap-4 mb-4",children:[e.jsx(je,{size:20,color:"#2563EB"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-gray-700",children:"Phone"}),e.jsx("div",{className:"text-gray-600",children:h.phone})]})]}),h.medicines&&h.medicines.length>0&&e.jsxs("div",{className:"mt-6",children:[e.jsx("h4",{className:"text-xl font-bold mb-4 text-gray-800",children:"Available Medicines"}),e.jsx("div",{className:"space-y-2",children:h.medicines.map((I,C)=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-blue-100 flex items-center justify-center text-blue-800 font-medium",children:C+1}),e.jsx("div",{className:"text-gray-700",children:I})]},C))})]}),e.jsx("div",{className:"mt-8",children:e.jsxs("button",{onClick:()=>m(null),className:"inline-flex items-center gap-2 bg-blue-600 text-white px-5 py-3 rounded-lg",children:[e.jsx(qe,{size:18}),e.jsx("span",{className:"font-medium",children:"Back to All Stockists"})]})})]})]},h._id||"detail");return e.jsxs("div",{className:"min-h-screen bg-blue-50 p-6",children:[e.jsxs("div",{className:"bg-white rounded-2xl shadow-md p-6 mb-8 max-w-6xl mx-auto",children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-800",children:[e.jsx("span",{className:"text-blue-600",children:b})," Stockists"]}),e.jsxs("p",{className:"mt-2 text-gray-600",children:[N.length," locations found"]})]}),e.jsx("div",{className:"max-w-6xl mx-auto",children:e.jsx(os,{children:o===null?e.jsx(de.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"flex flex-wrap gap-4",children:N.map((h,I)=>e.jsx(g,{stockist:h,index:I},h._id||I))},"list"):e.jsx(z,{stockist:N[o]})})})]})}function qs(){const{id:s}=Ge(),t=Z(),[a,r]=l.useState(null),[n,i]=l.useState([]),[b,N]=l.useState(!0),[o,m]=l.useState("");l.useEffect(()=>{let c=!0;return(async()=>{N(!0),m("");try{const g=re("token"),z=g?{Authorization:`Bearer ${g}`}:{},[h,I]=await Promise.all([fetch(q("/api/company"),{headers:z}),fetch(q("/api/medicine"),{headers:z})]),C=await h.json().catch(()=>({})),d=await I.json().catch(()=>({}));if(!c)return;const x=(C&&C.data?C.data:Array.isArray(C)?C:[]).find(v=>String(v._id)===String(s)||String(v.id)===String(s));r(x||null);const f=(d&&d.data?d.data:Array.isArray(d)?d:[]).filter(v=>{try{return v?!!(v.company&&(String(v.company)===String(s)||v.company._id&&String(v.company._id)===String(s))||v.manufacturer&&(String(v.manufacturer)===String(s)||v.manufacturer._id&&String(v.manufacturer._id)===String(s))||v.companyId&&String(v.companyId)===String(s)||x&&v.company&&typeof v.company=="string"&&String(v.company).toLowerCase().includes((x.name||"").toLowerCase())):!1}catch{return!1}});i(f)}catch(g){console.error("CompanyProducts fetch error",g),m("Failed to load products for this company.")}finally{c&&N(!1)}})(),()=>c=!1},[s]);const w=a?a.name:`Company ${s}`;return e.jsx("div",{className:"min-h-screen p-6 bg-gray-50",children:e.jsxs("div",{className:"max-w-5xl mx-auto space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>t(-1),className:"w-10 h-10 rounded-full bg-white shadow flex items-center justify-center",children:e.jsx(Pe,{className:"w-5 h-5"})}),e.jsxs("h1",{className:"text-2xl font-bold",children:[w," ‚Äî Products"]})]}),e.jsxs("div",{className:"bg-white rounded-2xl p-4 shadow-sm",children:[b&&e.jsx("div",{className:"text-sm text-gray-500",children:"Loading..."}),o&&e.jsx("div",{className:"text-sm text-red-500",children:o}),!b&&!o&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.length===0&&e.jsx("div",{className:"text-sm text-gray-500 p-6",children:"No products found for this company."}),n.map(c=>e.jsx("div",{className:"bg-white rounded-xl p-4 border shadow-sm",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-lg bg-gradient-to-br from-cyan-400 to-blue-500 flex items-center justify-center text-white font-bold",children:e.jsx(ne,{className:"w-5 h-5"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:c.name||c.title||c.medicineName}),e.jsx("p",{className:"text-sm text-gray-500",children:c.company||c.manufacturer||""}),e.jsxs("div",{className:"mt-2 text-sm text-gray-700",children:["Price: ",c.price||"‚Äî"]})]})]})},c._id||c.id||c.name))]})]})]})})}function Hs(){const s=$e(),{medicine:t,stockists:a}=s.state||{},[r,n]=l.useState(null),[i,b]=l.useState(t||""),[N,o]=l.useState(!0);if(l.useEffect(()=>{const g=setTimeout(()=>{o(!1)},600);return()=>clearTimeout(g)},[]),!t||!a||a.length===0)return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100",children:e.jsxs(de.div,{className:"text-center bg-white p-8 rounded-2xl shadow-xl max-w-md mx-4",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.5},children:[e.jsx("div",{className:"w-24 h-24 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-6",children:e.jsx(ds,{size:40,className:"text-red-500"})}),e.jsx("h1",{className:"text-3xl font-bold mb-4 text-gray-800",children:"No Results Found"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"We couldn't find any stockists for your search. Please try searching for a different medicine."}),e.jsx("button",{className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg shadow-lg transform transition-all hover:scale-105",onClick:()=>window.history.back(),children:"Go Back"})]})});const m=a.filter(g=>{var z;return(z=g.Medicines)==null?void 0:z.some(h=>h.toLowerCase().includes(i.toLowerCase()))}),w=({stockist:g,index:z})=>{var h;return e.jsxs(de.div,{className:"bg-white rounded-xl overflow-hidden shadow-lg hover:shadow-2xl transition-all duration-300",onClick:()=>n(g),initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,scale:.95},transition:{duration:.3,delay:z*.05},whileHover:{y:-5},whileTap:{scale:.98},children:[e.jsxs("div",{className:"relative",children:[g.image?e.jsx("img",{src:g.image,alt:g.title,className:"w-full h-48 object-cover"}):e.jsx("div",{className:"w-full h-32 bg-gradient-to-r from-blue-400 to-indigo-500 flex items-center justify-center",children:e.jsx(Ze,{size:40,className:"text-white"})}),e.jsx("div",{className:"absolute top-3 right-3 bg-blue-600 text-white text-xs font-bold py-1 px-2 rounded-full",children:"Stockist"})]}),e.jsxs("div",{className:"p-5",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-2 line-clamp-1",children:g.title}),e.jsxs("div",{className:"space-y-2 mb-4",children:[g.phone&&e.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[e.jsx(je,{size:16,className:"mr-2 text-blue-500"}),e.jsx("span",{children:g.phone})]}),g.address&&e.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[e.jsx(be,{size:16,className:"mr-2 text-blue-500"}),e.jsx("span",{className:"line-clamp-1",children:g.address})]})]}),e.jsxs("div",{className:"flex items-center mt-auto pt-2 border-t border-gray-100",children:[e.jsx(ne,{size:16,className:"mr-2 text-blue-500"}),e.jsxs("span",{className:"text-sm font-medium text-blue-600",children:[((h=g.Medicines)==null?void 0:h.length)||0," medicine(s) available"]})]})]})]})},c=()=>r?e.jsx(de.div,{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>n(null),children:e.jsxs(de.div,{className:"bg-white rounded-2xl shadow-2xl max-w-3xl w-full max-h-[90vh] overflow-y-auto",initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9},transition:{type:"spring",damping:25},onClick:g=>g.stopPropagation(),children:[r.image?e.jsxs("div",{className:"relative h-56 md:h-64",children:[e.jsx("img",{src:r.image,alt:r.title,className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 to-transparent"}),e.jsx("button",{className:"absolute top-4 left-4 bg-white p-2 rounded-full text-gray-800 hover:bg-gray-100",onClick:()=>n(null),children:e.jsx(qe,{size:24})})]}):e.jsxs("div",{className:"relative h-40 bg-gradient-to-r from-blue-500 to-indigo-600 flex items-center justify-center",children:[e.jsx(Ze,{size:60,className:"text-white"}),e.jsx("button",{className:"absolute top-4 left-4 bg-white p-2 rounded-full text-gray-800 hover:bg-gray-100",onClick:()=>n(null),children:e.jsx(qe,{size:24})})]}),e.jsxs("div",{className:"p-6 md:p-8",children:[e.jsx("h2",{className:"text-3xl font-bold mb-2 text-gray-800",children:r.title}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mt-6",children:[e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"bg-blue-50 p-4 rounded-xl",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-3 flex items-center",children:[e.jsx(Xe,{size:20,className:"mr-2 text-blue-600"}),"Contact Information"]}),e.jsxs("div",{className:"space-y-3",children:[r.phone&&e.jsxs("div",{className:"flex items-center",children:[e.jsx(je,{size:18,className:"mr-3 text-blue-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-500",children:"Phone"}),e.jsx("div",{className:"font-medium",children:r.phone})]})]}),r.address&&e.jsxs("div",{className:"flex items-start",children:[e.jsx(be,{size:18,className:"mr-3 mt-1 text-blue-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-500",children:"Address"}),e.jsx("div",{className:"font-medium",children:r.address})]})]}),e.jsxs("div",{className:"flex items-start",children:[e.jsx(js,{size:18,className:"mr-3 mt-1 text-blue-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-500",children:"Business Hours"}),e.jsx("div",{className:"font-medium",children:"Mon-Sat: 9am - 8pm"}),e.jsx("div",{className:"text-sm text-gray-500",children:"Sunday: Closed"})]})]})]})]})}),e.jsx("div",{children:e.jsxs("div",{className:"bg-green-50 p-4 rounded-xl",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-3 flex items-center",children:[e.jsx(ne,{size:20,className:"mr-2 text-green-600"}),"Available Medicines"]}),r.Medicines&&r.Medicines.length>0?e.jsx("ul",{className:"space-y-2",children:r.Medicines.map((g,z)=>e.jsxs("li",{className:"flex items-center bg-white p-3 rounded-lg shadow-sm",children:[e.jsx("span",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center mr-3",children:e.jsx(ne,{size:16,className:"text-green-600"})}),e.jsx("span",{className:"font-medium",children:g})]},z))}):e.jsx("p",{className:"text-gray-600",children:"No medicines listed"})]})})]}),e.jsxs("div",{className:"mt-8 pt-4 border-t border-gray-200 flex justify-between items-center",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Last updated: April 28, 2025"}),e.jsx("button",{className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg shadow transition-all hover:shadow-lg",onClick:()=>n(null),children:"Close Details"})]})]})]})}):null;return N?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100",children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:"w-16 h-16 border-4 border-blue-400 border-t-blue-600 rounded-full animate-spin"}),e.jsx("p",{className:"mt-4 text-lg text-gray-700",children:"Loading stockists..."})]})}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100",children:e.jsxs("div",{className:"max-w-6xl mx-auto p-4 md:p-6",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs(de.div,{className:"flex flex-col md:flex-row md:items-center md:justify-between",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.4},children:[e.jsxs("div",{className:"mb-4 md:mb-0",children:[e.jsxs("h1",{className:"text-3xl md:text-4xl font-extrabold text-gray-800",children:[e.jsx("span",{className:"text-blue-700",children:"Medicine"})," Stockists"]}),e.jsxs("p",{className:"text-gray-600 mt-2",children:["Showing stockists with"," ",e.jsx("span",{className:"font-semibold text-blue-600",children:t})]})]}),e.jsxs("div",{className:"relative w-full md:w-64",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(cs,{size:18,className:"text-gray-400"})}),e.jsx("input",{type:"text",className:"bg-white border border-gray-200 text-gray-700 rounded-lg pl-10 pr-4 py-2 w-full shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-300",placeholder:"Search medicines...",value:i,onChange:g=>b(g.target.value)})]})]}),e.jsx(de.div,{className:"mt-4 bg-blue-600 text-white p-4 rounded-lg shadow-md",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,delay:.2},children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(ne,{size:24,className:"mr-3 mt-1"}),e.jsxs("div",{children:[e.jsx("h2",{className:"font-bold text-lg",children:"Why Choose Local Stockists?"}),e.jsx("p",{className:"mt-1 text-blue-100",children:"Supporting local stockists ensures you get authentic medicines and personalized service. Click on any stockist to see more details."})]})]})})]}),e.jsx(os,{mode:"wait",children:r?e.jsx(c,{}):e.jsx(de.div,{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},children:m.length>0?m.map((g,z)=>e.jsx(w,{stockist:g,index:z},z)):e.jsx("div",{className:"col-span-full flex justify-center py-16",children:e.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-lg text-center max-w-md",children:[e.jsx("div",{className:"w-20 h-20 bg-amber-100 rounded-full flex items-center justify-center mx-auto mb-6",children:e.jsx(Xe,{size:32,className:"text-amber-500"})}),e.jsx("h3",{className:"text-2xl font-bold text-gray-800 mb-2",children:"No Results"}),e.jsxs("p",{className:"text-gray-600",children:['No stockists found with medicine "',e.jsx("strong",{children:i}),'". Try searching for a different medicine or checking your spelling.']})]})})})}),e.jsx(de.div,{className:"mt-12 text-center text-gray-500 text-sm",initial:{opacity:0},animate:{opacity:1},transition:{delay:.5,duration:.4},children:e.jsx("p",{children:"¬© 2025 DK Pharma. All stockist information is updated regularly."})})]})})}const Vs=()=>{const s=(()=>{try{const f=localStorage.getItem("user");return f?JSON.parse(f):null}catch{return null}})(),[t,a]=l.useState(s||{medicalName:"HealthCare Pharmacy",ownerName:"John Doe",email:"john@healthcare.com",contactNo:"+1 234-567-8900",address:"123 Medical Street, Health City, HC 12345",drugLicenseNo:"DL-2024-12345",drugLicenseImage:null}),[r,n]=l.useState(""),[i,b]=l.useState(!1),N=Z();l.useEffect(()=>{let f=!0;return(async()=>{try{const v=re("token");if(!v)return;b(!0);const L=await fetch(q("/api/auth/me"),{headers:{Authorization:`Bearer ${v}`}}),y=await L.json().catch(()=>({}));if(!f)return;if(L.ok&&y&&y.success&&y.user){a(y.user);try{const _=re("token");_&&v===_?localStorage.setItem("user",JSON.stringify(y.user)):console.debug("Profile: skipped writing user because token changed",{tokenAtRequest:v&&v.slice(0,12)+"...",currentToken:_&&_.slice(0,12)+"..."})}catch{}}else y&&y.message&&n(y.message)}catch(v){console.warn("Profile: failed to load current user",v),n("Failed to load profile")}finally{f&&b(!1)}})(),()=>{f=!1}},[]);const o=()=>{try{fs("token"),localStorage.removeItem("user")}catch{}N("/login")},m=f=>e.jsx("svg",{...f,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),w=f=>e.jsx("svg",{...f,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-4m-5 0H9m11 0v-4a2 2 0 00-2-2h-2a2 2 0 00-2 2v4m6 0V9a2 2 0 00-2-2H9a2 2 0 00-2 2v12"})}),c=f=>e.jsx("svg",{...f,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),g=f=>e.jsx("svg",{...f,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})}),z=f=>e.jsxs("svg",{...f,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),h=f=>e.jsx("svg",{...f,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),I=f=>e.jsx("svg",{...f,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),C=f=>e.jsx("svg",{...f,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),d=({imageUrl:f})=>{const v=(()=>{const L=t&&(t.ownerName||t.medicalName||"");return L?L.split(" ").map(y=>y[0]).slice(0,2).join("").toUpperCase():"U"})();return e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-20 h-20 rounded-2xl flex items-center justify-center shadow-lg overflow-hidden bg-white",children:f?e.jsx("img",{src:f,alt:"profile",className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full bg-gradient-to-br from-cyan-400 to-cyan-500 flex items-center justify-center text-white text-xl font-bold",children:v})}),e.jsx("div",{className:"absolute -top-1 -right-1 w-6 h-6 bg-orange-400 rounded-full"}),e.jsx("div",{className:"absolute -bottom-1 -left-1 w-5 h-5 bg-orange-300 rounded-full"})]})},u=f=>!f||typeof f!="string"?null:f.startsWith("//")?`https:${f}`:f.startsWith("http://")||f.startsWith("https://")?f:q(f.startsWith("/")?f:`/${f}`),[x,S]=l.useState(!1);return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 py-8 px-4",children:e.jsxs("div",{className:"max-w-5xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx(d,{imageUrl:t&&(t.profileImageUrl||t.image||t.photo||t.avatar||t.logo&&t.logo.url||t.photoUrl)||null})}),e.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-cyan-500 to-blue-500 bg-clip-text text-transparent mb-2",children:"Your Profile"}),e.jsx("p",{className:"text-gray-600 font-medium",children:"Manage your medical store information"})]}),i&&e.jsxs("div",{className:"bg-white rounded-3xl shadow-xl p-8 text-center border-2 border-gray-100 mb-6",children:[e.jsx("div",{className:"w-16 h-16 bg-cyan-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("div",{className:"w-8 h-8 border-4 border-cyan-500 border-t-transparent rounded-full animate-spin"})}),e.jsx("p",{className:"text-gray-600 text-lg font-medium",children:"Loading your profile..."})]}),r&&e.jsx("div",{className:"bg-red-50 text-red-700 px-6 py-4 rounded-2xl border-2 border-red-200 mb-6 shadow-lg",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-red-100 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx("span",{className:"text-red-600 text-lg",children:"‚ö†"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:"Error Loading Profile"}),e.jsx("p",{children:r})]})]})}),t&&e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-3xl shadow-xl p-6 border-2 border-gray-100",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-800 mb-5 flex items-center gap-2",children:[e.jsx(w,{className:"w-6 h-6 text-cyan-500"}),"Store Information"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-gradient-to-br from-cyan-50 to-cyan-100 p-5 rounded-2xl border-2 border-cyan-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(w,{className:"w-5 h-5 text-cyan-600"}),e.jsx("span",{className:"text-gray-600 text-sm font-semibold",children:"Medical Store Name"})]}),e.jsx("p",{className:"text-gray-900 font-bold text-lg",children:t.medicalName})]}),e.jsxs("div",{className:"bg-gradient-to-br from-orange-50 to-orange-100 p-5 rounded-2xl border-2 border-orange-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(m,{className:"w-5 h-5 text-orange-600"}),e.jsx("span",{className:"text-gray-600 text-sm font-semibold",children:"Owner Name"})]}),e.jsx("p",{className:"text-gray-900 font-bold text-lg",children:t.ownerName})]}),e.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 p-5 rounded-2xl border-2 border-purple-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(c,{className:"w-5 h-5 text-purple-600"}),e.jsx("span",{className:"text-gray-600 text-sm font-semibold",children:"Email Address"})]}),e.jsx("p",{className:"text-gray-900 font-bold break-all",children:t.email})]}),e.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-green-100 p-5 rounded-2xl border-2 border-green-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(g,{className:"w-5 h-5 text-green-600"}),e.jsx("span",{className:"text-gray-600 text-sm font-semibold",children:"Contact Number"})]}),e.jsx("p",{className:"text-gray-900 font-bold",children:t.contactNo})]})]})]}),e.jsxs("div",{className:"bg-white rounded-3xl shadow-xl p-6 border-2 border-gray-100",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-800 mb-5 flex items-center gap-2",children:[e.jsx(z,{className:"w-6 h-6 text-cyan-500"}),"Location & License"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 p-5 rounded-2xl border-2 border-blue-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(z,{className:"w-5 h-5 text-blue-600"}),e.jsx("span",{className:"text-gray-600 text-sm font-semibold",children:"Store Address"})]}),e.jsx("p",{className:"text-gray-900 font-bold",children:t.address})]}),e.jsxs("div",{className:"bg-gradient-to-br from-amber-50 to-amber-100 p-5 rounded-2xl border-2 border-amber-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(h,{className:"w-5 h-5 text-amber-600"}),e.jsx("span",{className:"text-gray-600 text-sm font-semibold",children:"Drug License Number"})]}),e.jsx("p",{className:"text-gray-900 font-bold text-lg font-mono",children:t.drugLicenseNo})]})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-3xl shadow-xl p-6 border-2 border-gray-100",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx(I,{className:"w-6 h-6 text-cyan-500"}),"Drug License"]}),e.jsx("div",{className:"border-3 border-dashed border-gray-200 rounded-2xl overflow-hidden bg-gradient-to-br from-gray-50 to-gray-100",children:t.drugLicenseImage?(()=>{const f=u(t.drugLicenseImage);return console.debug("Profile: licenseUrl ->",f),f?x?e.jsxs("div",{className:"h-64 flex flex-col items-center justify-center text-gray-500 p-4",children:[e.jsx(I,{className:"w-12 h-12 mb-2 text-gray-300"}),e.jsx("p",{className:"text-sm text-center mb-2",children:"Image failed to load in the preview."}),e.jsx("a",{href:f,target:"_blank",rel:"noreferrer",className:"text-blue-600 underline",children:"Open image in new tab"})]}):e.jsx("img",{src:f,alt:"Drug License",onError:()=>{console.warn("Drug license image failed to load:",f),S(!0)},className:"w-full h-64 object-contain bg-white"}):e.jsxs("div",{className:"h-64 flex flex-col items-center justify-center text-gray-400",children:[e.jsx(I,{className:"w-16 h-16 mb-3 text-gray-300"}),e.jsx("p",{className:"text-center font-semibold text-gray-500",children:"No valid image URL"})]})})():e.jsxs("div",{className:"h-64 flex flex-col items-center justify-center text-gray-400",children:[e.jsx(I,{className:"w-16 h-16 mb-3 text-gray-300"}),e.jsx("p",{className:"text-center font-semibold text-gray-500",children:"No image uploaded"}),e.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Upload your drug license"})]})})]}),e.jsxs("div",{className:"bg-white rounded-3xl shadow-xl p-6 border-2 border-gray-100",children:[e.jsx("h2",{className:"text-lg font-bold text-gray-800 mb-4",children:"Quick Actions"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("button",{onClick:()=>N("/profile/edit"),className:"w-full flex items-center justify-center gap-2 bg-gradient-to-r from-cyan-400 to-cyan-500 text-white px-5 py-3 rounded-2xl font-bold shadow-lg hover:shadow-xl transition-all duration-200 transform hover:scale-105 active:scale-95",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),e.jsx("span",{children:"Edit Profile"})]}),e.jsxs("button",{onClick:o,className:"w-full flex items-center justify-center gap-2 bg-gradient-to-r from-red-500 to-red-600 text-white px-5 py-3 rounded-2xl font-bold shadow-lg hover:shadow-xl transition-all duration-200 transform hover:scale-105 active:scale-95",children:[e.jsx(C,{className:"w-5 h-5"}),e.jsx("span",{children:"Logout"})]})]})]})]})]})]})})};function Ws(){const[s,t]=l.useState(!1),a=(()=>{try{return Z()}catch{return null}})();if(l.useEffect(()=>{try{const n=localStorage.getItem("user");if(!n)return;const i=JSON.parse(n);t(i&&i.role==="admin")}catch(n){console.warn("AdminPanel: could not read user from storage",n)}},[]),!s)return e.jsxs("div",{className:"min-h-screen bg-slate-50 flex flex-col items-start p-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-800 mb-4",children:"Admin Panel"}),e.jsx("p",{className:"text-slate-500",children:"You must be an admin to access this page."})]});const r=n=>{a?a(n):window.location.href=n};return e.jsxs("div",{className:"min-h-screen bg-slate-50 flex flex-col items-start p-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-800 mb-6",children:"Admin Panel"}),e.jsx("button",{onClick:()=>r("/adminCreateStockist"),className:"w-full sm:w-auto bg-blue-500 hover:bg-blue-600 text-white font-semibold px-6 py-3 rounded-lg mb-3",children:"Create Stockist"}),e.jsx("button",{onClick:()=>r("/adminCreateCompany"),className:"w-full sm:w-auto bg-blue-500 hover:bg-blue-600 text-white font-semibold px-6 py-3 rounded-lg mb-3",children:"Create Company"}),e.jsx("button",{onClick:()=>r("/adminCreateMedicine"),className:"w-full sm:w-auto bg-blue-500 hover:bg-blue-600 text-white font-semibold px-6 py-3 rounded-lg",children:"Create Medicine"})]})}const rs=async s=>{const t="https://api.cloudinary.com/v1_1/dspnmgzwh/image/upload",a="project1",r=new FormData;r.append("file",s),r.append("upload_preset",a);try{const i=await(await fetch(t,{method:"POST",body:r})).json();if(i.error)throw new Error("Image upload failed");return i.secure_url}catch(n){throw new Error("Error uploading image to Cloudinary: "+n.message)}},oe=l.memo(({icon:s,label:t,type:a="text",placeholder:r,value:n,onChange:i,required:b=!1,path:N,...o})=>{const m=w=>i(N,w.target.value);return e.jsxs("div",{className:"bg-white rounded-2xl p-4 shadow-sm border border-gray-100",children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-3 flex items-center gap-2",children:[s&&e.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-r from-cyan-400 to-blue-500 flex items-center justify-center",children:e.jsx(s,{size:16,className:"text-white"})}),t,b&&e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:a,placeholder:r,className:"w-full rounded-xl border-2 border-gray-100 px-4 py-3 bg-gray-50 focus:bg-white focus:border-cyan-400 transition-all duration-200 text-gray-800",value:n,onChange:m,required:b,...o})]})}),ls=({label:s,icon:t,onChange:a,hasFile:r,fileName:n})=>e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-gray-100",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-r from-orange-400 to-pink-500 flex items-center justify-center",children:e.jsx(t,{size:20,className:"text-white"})}),e.jsx("span",{className:"font-semibold text-gray-700",children:s})]}),r&&e.jsx(Ie,{className:"text-green-500",size:20})]}),e.jsxs("label",{className:"block",children:[e.jsx("input",{type:"file",accept:"image/*",onChange:a,className:"hidden"}),e.jsxs("div",{className:"border-2 border-dashed border-gray-200 rounded-xl p-4 text-center hover:border-cyan-400 transition-colors cursor-pointer",children:[e.jsx(ms,{className:"mx-auto text-gray-400 mb-2",size:24}),e.jsx("p",{className:"text-sm text-gray-500",children:r?`Selected: ${n}`:"Tap to upload image"})]})]})]}),ns=({label:s,value:t,onChange:a,options:r,icon:n})=>e.jsxs("div",{className:"bg-white rounded-2xl p-4 shadow-sm border border-gray-100",children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-3 flex items-center gap-2",children:[n&&e.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-r from-purple-400 to-indigo-500 flex items-center justify-center",children:e.jsx(n,{size:16,className:"text-white"})}),s]}),e.jsxs("select",{value:t,onChange:i=>a(i.target.value),className:"w-full rounded-xl border-2 border-gray-100 px-4 py-3 bg-gray-50 focus:bg-white focus:border-cyan-400 transition-all duration-200 text-gray-800",children:[e.jsxs("option",{value:"",children:["Select ",s]}),r.map(i=>e.jsx("option",{value:i,children:i},i))]})]});function Js(){const[s,t]=l.useState({name:"",contactPerson:"",phone:"",email:"",password:"",address:{street:"",city:"",state:"",pincode:""},licenseNumber:"",licenseExpiry:"",licenseImageUrl:"",dob:"",bloodGroup:"",profileImageUrl:"",roleType:"",cntxNumber:""}),[a,r]=l.useState(!1),[n,i]=l.useState(null),[b,N]=l.useState(null),[o,m]=l.useState(1),w=Z(),c=l.useCallback((d,u)=>{if(d&&d.startsWith("address.")){const x=d.split(".")[1];t(S=>({...S,address:{...S.address,[x]:u}}))}else t(x=>({...x,[d]:u}))},[]),g=d=>{var x,S;const u=((S=(x=d==null?void 0:d.target)==null?void 0:x.files)==null?void 0:S[0])||null;i(u)},z=d=>{var x,S;const u=((S=(x=d==null?void 0:d.target)==null?void 0:x.files)==null?void 0:S[0])||null;N(u)},h=async d=>{var u,x,S,f;d&&d.preventDefault(),r(!0);try{let v=s.profileImageUrl||"",L=s.licenseImageUrl||"";b&&(v=await rs(b)),n&&(L=await rs(n));const y={name:s.name,contactPerson:s.contactPerson,phone:s.phone,email:s.email,password:s.password,address:s.address,licenseNumber:s.licenseNumber,licenseExpiry:s.licenseExpiry||null,licenseImageUrl:L,dob:s.dob||null,bloodGroup:s.bloodGroup||null,profileImageUrl:v,roleType:s.roleType||null,cntxNumber:s.cntxNumber||null},_=!1,A=p=>_?p:q(p),E=await Ce.post(A("/api/stockist/register"),y,{headers:{"Content-Type":"application/json"}});if((u=E==null?void 0:E.data)!=null&&u.success){try{const p=E.data.data||null;p&&p._id&&localStorage.setItem("pendingStockistId",String(p._id))}catch{}alert("Your registration is under review. You‚Äôll be notified once approved."),w("/stockist/verification")}else alert(((x=E==null?void 0:E.data)==null?void 0:x.message)||"Failed to create stockist")}catch(v){console.error("Create stockist failed:",v),alert(((f=(S=v.response)==null?void 0:S.data)==null?void 0:f.message)||v.message||"Failed to create stockist")}finally{r(!1)}},I=["A+","A-","B+","B-","AB+","AB-","O+","O-"],C=["Proprietor","Pharmacist"];return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50",children:[e.jsx("div",{className:"bg-white shadow-sm border-b border-gray-100",children:e.jsxs("div",{className:"max-w-md mx-auto px-4 py-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{className:"w-10 h-10 rounded-full bg-gray-100 flex items-center justify-center",children:e.jsx(Pe,{size:20,className:"text-gray-600"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"font-bold text-gray-800",children:"Create Stockist"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Register new stockist"})]})]}),e.jsx(Se,{className:"text-red-400",size:24})]})}),e.jsxs("div",{className:"max-w-md mx-auto p-4 space-y-4",children:[e.jsxs("div",{className:"bg-gradient-to-r from-cyan-400 to-blue-500 rounded-3xl p-6 text-white shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold",children:"Registration Form"}),e.jsx("p",{className:"text-blue-100",children:"Fill in stockist details"})]}),e.jsx("div",{className:"w-16 h-16 rounded-2xl bg-white/20 flex items-center justify-center",children:e.jsx(Fe,{size:28,className:"text-white"})})]}),e.jsx("div",{className:"flex gap-2",children:[1,2,3].map(d=>e.jsx("div",{className:`h-2 flex-1 rounded-full ${d<=o?"bg-white":"bg-white/30"}`},d))})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-white rounded-3xl p-6 shadow-sm border border-gray-100",children:[e.jsxs("h3",{className:"font-bold text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-r from-green-400 to-blue-500 flex items-center justify-center",children:e.jsx(fe,{size:16,className:"text-white"})}),"Basic Information"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(oe,{icon:Fe,label:"Firm Name",placeholder:"Enter firm name",value:s.name,path:"name",onChange:c,required:!0}),e.jsx(oe,{icon:fe,label:"Contact Person",placeholder:"Contact person name",value:s.contactPerson,path:"contactPerson",onChange:c})]})]}),e.jsxs("div",{className:"bg-white rounded-3xl p-6 shadow-sm border border-gray-100",children:[e.jsxs("h3",{className:"font-bold text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-r from-purple-400 to-pink-500 flex items-center justify-center",children:e.jsx(je,{size:16,className:"text-white"})}),"Contact Details"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(oe,{icon:je,label:"Phone",placeholder:"Phone number",value:s.phone,path:"phone",onChange:c}),e.jsx(oe,{icon:ze,label:"Email",type:"email",placeholder:"Email address",value:s.email,path:"email",onChange:c}),e.jsx(oe,{icon:Ns,label:"Password",type:"password",placeholder:"Set password",value:s.password,path:"password",onChange:c,required:!0})]})]}),e.jsxs("div",{className:"bg-white rounded-3xl p-6 shadow-sm border border-gray-100",children:[e.jsxs("h3",{className:"font-bold text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-r from-orange-400 to-red-500 flex items-center justify-center",children:e.jsx(be,{size:16,className:"text-white"})}),"Address Details"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(oe,{icon:be,label:"Street Address",placeholder:"Street address",value:s.address.street,path:"address.street",onChange:c}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx(oe,{label:"City",placeholder:"City",value:s.address.city,path:"address.city",onChange:c}),e.jsx(oe,{label:"State",placeholder:"State",value:s.address.state,path:"address.state",onChange:c})]}),e.jsx(oe,{label:"Pincode",placeholder:"Pincode",value:s.address.pincode,path:"address.pincode",onChange:c})]})]}),e.jsxs("div",{className:"bg-white rounded-3xl p-6 shadow-sm border border-gray-100",children:[e.jsxs("h3",{className:"font-bold text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-r from-indigo-400 to-purple-500 flex items-center justify-center",children:e.jsx(Oe,{size:16,className:"text-white"})}),"License Details"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(oe,{icon:Oe,label:"License Number",placeholder:"License number",value:s.licenseNumber,path:"licenseNumber",onChange:c}),e.jsx(oe,{icon:es,label:"License Expiry",type:"date",value:s.licenseExpiry,path:"licenseExpiry",onChange:c})]})]}),e.jsxs("div",{className:"bg-white rounded-3xl p-6 shadow-sm border border-gray-100",children:[e.jsxs("h3",{className:"font-bold text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-r from-teal-400 to-cyan-500 flex items-center justify-center",children:e.jsx(fe,{size:16,className:"text-white"})}),"Personal Details"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(oe,{icon:es,label:"Date of Birth",type:"date",value:s.dob,path:"dob",onChange:c}),e.jsx(ns,{icon:Se,label:"Blood Group",value:s.bloodGroup,onChange:d=>c("bloodGroup",d),options:I}),e.jsx(ns,{icon:Fe,label:"Role Type",value:s.roleType,onChange:d=>c("roleType",d),options:C}),e.jsx(oe,{icon:fe,label:"CNTX Number",placeholder:"CNTX number",value:s.cntxNumber,path:"cntxNumber",onChange:c})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(ls,{label:"Profile Image",icon:He,onChange:z,hasFile:!!b,fileName:b==null?void 0:b.name}),e.jsx(ls,{label:"License Image",icon:Oe,onChange:g,hasFile:!!n,fileName:n==null?void 0:n.name})]}),e.jsx("div",{className:"pt-4",children:e.jsx("button",{onClick:h,disabled:a,className:`w-full py-4 rounded-2xl font-bold text-lg shadow-lg transition-all duration-300 ${a?"bg-gray-400 cursor-not-allowed text-gray-600":"bg-gradient-to-r from-cyan-500 to-blue-600 hover:from-cyan-600 hover:to-blue-700 text-white transform hover:scale-[1.02] active:scale-[0.98]"}`,children:a?e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("div",{className:"w-5 h-5 border-2 border-gray-300 border-t-transparent rounded-full animate-spin"}),"Creating Stockist..."]}):"Create Stockist"})}),e.jsx("div",{className:"text-center pt-4",children:e.jsx("button",{type:"button",onClick:()=>w("/stockist-login"),className:"px-8 py-3 rounded-xl bg-white border-2 border-gray-200 text-gray-600 font-semibold shadow-sm hover:border-cyan-400 hover:text-cyan-600 transition-colors duration-200",children:"Login as Stockist"})})]}),e.jsx("div",{className:"h-8"})]})]})}function Gs(){const[s,t]=l.useState({name:"",stockists:[]}),[a,r]=l.useState(!1),[n,i]=l.useState([]),[b,N]=l.useState(!0),[o,m]=l.useState(null);l.useEffect(()=>{let h=!0;return(async()=>{var C,d;N(!0),m(null);try{const u=await Ce.get(q("/api/stockist"));h&&i(u.data.data||[])}catch(u){h&&m(((d=(C=u.response)==null?void 0:C.data)==null?void 0:d.message)||u.message||"Failed to load stockists")}finally{h&&N(!1)}})(),()=>{h=!1}},[]);const w=(h,I)=>{t(C=>({...C,[h]:I}))},c=h=>{t(I=>({...I,stockists:I.stockists.includes(h)?I.stockists.filter(C=>C!==h):[...I.stockists,h]}))},g=async h=>{h&&h.preventDefault(),r(!0),setTimeout(()=>{alert("Success ‚Äî company created"),r(!1)},2e3)},z=({stockist:h,isSelected:I,onToggle:C})=>e.jsx("div",{onClick:C,className:"group relative cursor-pointer transition-all duration-200 transform hover:scale-[1.02]",children:e.jsx("div",{className:`
        relative bg-white rounded-2xl border-2 transition-all duration-200 p-4 shadow-sm
        ${I?"border-teal-400 shadow-lg shadow-teal-500/20 bg-teal-50/30":"border-gray-200 hover:border-teal-300 hover:shadow-md"}
      `,children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:`
            p-3 rounded-xl transition-all duration-200 flex-shrink-0
            ${I?"bg-gradient-to-br from-teal-400 to-teal-500 shadow-lg":"bg-gray-100 group-hover:bg-teal-100"}
          `,children:e.jsx(pe,{size:20,className:`transition-colors duration-200 ${I?"text-white":"text-gray-600 group-hover:text-teal-600"}`})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:`font-semibold text-sm transition-colors duration-200 truncate ${I?"text-teal-700":"text-gray-800 group-hover:text-gray-900"}`,children:h.name}),e.jsx("p",{className:`text-xs transition-colors duration-200 truncate ${I?"text-teal-600":"text-gray-500"}`,children:h.email}),e.jsxs("p",{className:`text-xs transition-colors duration-200 ${I?"text-teal-500":"text-gray-400"}`,children:["üìç ",h.location]})]}),e.jsx("div",{className:`
            w-6 h-6 rounded-full border-2 transition-all duration-200 flex items-center justify-center flex-shrink-0
            ${I?"border-teal-500 bg-teal-500 shadow-lg":"border-gray-300 group-hover:border-teal-400"}
          `,children:I&&e.jsx(Le,{size:14,className:"text-white"})})]})})});return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-blue-50/30 to-teal-50/50",children:[e.jsx("div",{className:"bg-white shadow-sm border-b border-gray-100",children:e.jsx("div",{className:"max-w-md mx-auto px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("button",{className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:e.jsx(Pe,{size:20,className:"text-gray-600"})}),e.jsx("h1",{className:"text-lg font-semibold text-gray-800",children:"Create Company"}),e.jsx("div",{className:"w-8"})," "]})})}),e.jsxs("div",{className:"max-w-md mx-auto px-6 py-6 space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-r from-teal-400 to-teal-500 rounded-3xl p-6 text-white shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold mb-1",children:"Your Health Hub"}),e.jsx("p",{className:"text-teal-100 text-sm",children:"Register New Company"})]}),e.jsx("div",{className:"bg-white/20 p-3 rounded-2xl backdrop-blur-sm",children:e.jsx(ue,{size:24,className:"text-white"})})]}),e.jsxs("div",{className:"flex items-center gap-2 text-teal-100 text-sm",children:[e.jsx(ss,{size:16}),e.jsx("span",{children:"Secure & Verified Platform"})]})]}),e.jsx("div",{className:"bg-white rounded-3xl shadow-sm border border-gray-100 overflow-hidden",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"p-2 bg-orange-100 rounded-xl",children:e.jsx(ue,{size:20,className:"text-orange-600"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Company Details"})]}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Company Name *"}),e.jsx("input",{type:"text",placeholder:"Enter company name",className:"w-full bg-gray-50 border border-gray-200 rounded-xl px-4 py-3 text-gray-800 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-teal-400 focus:border-transparent transition-all duration-200",value:s.name,onChange:h=>w("name",h.target.value),required:!0})]})})]})}),e.jsxs("div",{className:"bg-white rounded-3xl shadow-sm border border-gray-100 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Quick Actions"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"bg-teal-400 rounded-2xl p-4 text-white",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(vs,{size:20}),e.jsx("span",{className:"text-xs bg-white/20 px-2 py-1 rounded-full",children:"Active"})]}),e.jsx("p",{className:"text-sm font-medium",children:"Assign Stockists"}),e.jsx("p",{className:"text-xs text-teal-100",children:"Manage distribution"})]}),e.jsxs("div",{className:"bg-orange-400 rounded-2xl p-4 text-white",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(ne,{size:20}),e.jsx("span",{className:"text-xs bg-white/20 px-2 py-1 rounded-full",children:"Setup"})]}),e.jsx("p",{className:"text-sm font-medium",children:"Product Catalog"}),e.jsx("p",{className:"text-xs text-orange-100",children:"Add medicines"})]})]})]}),e.jsx("div",{className:"bg-white rounded-3xl shadow-sm border border-gray-100 overflow-hidden",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-teal-100 rounded-xl",children:e.jsx(he,{size:20,className:"text-teal-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Assign Stockists"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Optional - Select partners"})]})]}),e.jsx("div",{className:"bg-teal-50 px-3 py-1 rounded-full",children:e.jsxs("span",{className:"text-xs font-medium text-teal-600",children:[s.stockists.length," selected"]})})]}),e.jsx("div",{className:"space-y-3 max-h-80 overflow-y-auto",children:n.length===0?e.jsx("div",{className:"p-4 bg-yellow-50 border border-yellow-200 rounded-2xl text-center",children:e.jsx("p",{className:"text-yellow-700 text-sm font-medium",children:"No stockists found."})}):n.map(h=>e.jsx(z,{stockist:h,isSelected:s.stockists.includes(h._id),onToggle:()=>c(h._id)},h._id))})]})}),e.jsxs("div",{className:"bg-white rounded-3xl shadow-sm border border-gray-100 p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx(Se,{size:18,className:"text-red-500"}),"Health Tips"]}),e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"bg-blue-100 p-3 rounded-xl mb-2 mx-auto w-fit",children:e.jsx(ne,{size:16,className:"text-blue-600"})}),e.jsx("p",{className:"text-xs font-medium text-gray-700",children:"Stay Hydrated"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Drink Water"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"bg-orange-100 p-3 rounded-xl mb-2 mx-auto w-fit",children:e.jsx(Se,{size:16,className:"text-orange-600"})}),e.jsx("p",{className:"text-xs font-medium text-gray-700",children:"New Moms"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Care Guide"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"bg-green-100 p-3 rounded-xl mb-2 mx-auto w-fit",children:e.jsx(ss,{size:16,className:"text-green-600"})}),e.jsx("p",{className:"text-xs font-medium text-gray-700",children:"Check Labels"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Read carefully"})]})]})]}),e.jsx("div",{className:"pb-6",children:e.jsx("button",{type:"submit",onClick:g,className:`w-full font-semibold py-4 px-6 rounded-2xl transition-all duration-300 shadow-lg ${a?"bg-gray-400 cursor-not-allowed":"bg-gradient-to-r from-teal-400 to-teal-500 hover:from-teal-500 hover:to-teal-600 active:scale-95 shadow-teal-500/25"} text-white`,disabled:a,children:a?e.jsxs("div",{className:"flex items-center justify-center gap-3",children:[e.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}),e.jsx("span",{children:"Creating Company..."})]}):e.jsxs("div",{className:"flex items-center justify-center gap-3",children:[e.jsx(Ye,{size:20}),e.jsx("span",{children:"CREATE COMPANY"})]})})})]}),e.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 shadow-lg",children:e.jsx("div",{className:"max-w-md mx-auto px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-around",children:[e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:"p-2 bg-teal-100 rounded-xl",children:e.jsx(ue,{size:16,className:"text-teal-600"})}),e.jsx("span",{className:"text-xs text-teal-600 font-medium mt-1",children:"Companies"})]}),e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx(pe,{size:16,className:"text-gray-400"}),e.jsx("span",{className:"text-xs text-gray-400 mt-1",children:"Products"})]}),e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx(he,{size:16,className:"text-gray-400"}),e.jsx("span",{className:"text-xs text-gray-400 mt-1",children:"Stockists"})]}),e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx(Se,{size:16,className:"text-gray-400"}),e.jsx("span",{className:"text-xs text-gray-400 mt-1",children:"Health"})]})]})})})]})}function Ys(){const[s,t]=l.useState({name:"",company:"",stockists:[]}),[a,r]=l.useState(!1),[n,i]=l.useState([]),[b,N]=l.useState([]),[o,m]=l.useState({x:0,y:0}),[w,c]=l.useState([]),g=Z();l.useEffect(()=>{const u=x=>{m({x:x.clientX,y:x.clientY})};return window.addEventListener("mousemove",u),()=>window.removeEventListener("mousemove",u)},[]),l.useEffect(()=>{(()=>{const x=[];for(let S=0;S<12;S++)x.push({id:S,x:Math.random()*100,y:Math.random()*100,size:Math.random()*3+1,opacity:Math.random()*.3+.1,duration:Math.random()*4+3});c(x)})()},[]);const z=(u,x)=>{t(S=>({...S,[u]:x}))},h=u=>{t(x=>({...x,stockists:x.stockists.includes(u)?x.stockists.filter(S=>S!==u):[...x.stockists,u]}))},I=async u=>{u&&u.preventDefault(),r(!0);try{const x=re("token"),S=await fetch(q("/api/medicine/quick"),{method:"POST",headers:{"Content-Type":"application/json",...x?{Authorization:`Bearer ${x}`}:{}},body:JSON.stringify(s)}),f=await S.json().catch(()=>({}));if(S.ok)window.alert("Success ‚Äî medicine created"),g?g(-1):window.history.back();else{const v=f&&f.message||JSON.stringify(f)||S.statusText;window.alert(`Error: ${v}`)}}catch(x){window.alert(`Error: ${String(x)}`)}finally{r(!1)}};l.useEffect(()=>{(async()=>{try{const u=await fetch(q("/api/company")),x=await u.json().catch(()=>({})),S=x&&x.data||[];u.ok&&Array.isArray(S)&&i(S);const f=await fetch(q("/api/stockist")),v=await f.json().catch(()=>({})),L=v&&v.data||[];f.ok&&Array.isArray(L)&&N(L)}catch(u){console.error("Failed to load companies/stockists",u)}})()},[]);const C=({company:u,isSelected:x,onClick:S})=>e.jsx("div",{onClick:S,className:`group relative cursor-pointer transition-all duration-300 transform hover:scale-105 hover:-translate-y-1 ${x?"z-10":""}`,children:e.jsx("div",{className:`
        relative bg-white/80 backdrop-blur-xl rounded-2xl border transition-all duration-300 p-6
        ${x?"border-blue-400/50 shadow-xl shadow-blue-500/20 bg-blue-50/50":"border-white/40 hover:border-blue-300/30 hover:shadow-lg hover:shadow-blue-500/10"}
      `,children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:`
            p-3 rounded-2xl transition-all duration-300
            ${x?"bg-gradient-to-r from-blue-500 to-indigo-600 shadow-lg":"bg-slate-100 group-hover:bg-blue-100"}
          `,children:e.jsx(ue,{size:20,className:`transition-colors duration-300 ${x?"text-white":"text-slate-600 group-hover:text-blue-600"}`})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:`font-semibold transition-colors duration-300 ${x?"text-blue-700":"text-slate-700 group-hover:text-slate-800"}`,children:u.name}),e.jsx("p",{className:`text-sm transition-colors duration-300 ${x?"text-blue-600":"text-slate-500"}`,children:u.email})]}),e.jsx("div",{className:`
            w-6 h-6 rounded-full border-2 transition-all duration-300 flex items-center justify-center
            ${x?"border-blue-500 bg-blue-500":"border-slate-300 group-hover:border-blue-400"}
          `,children:x&&e.jsx(Le,{size:14,className:"text-white"})})]})})}),d=({stockist:u,isSelected:x,onToggle:S})=>e.jsx("div",{onClick:S,className:"group relative cursor-pointer transition-all duration-300 transform hover:scale-105 hover:-translate-y-1",children:e.jsx("div",{className:`
        relative bg-white/80 backdrop-blur-xl rounded-2xl border transition-all duration-300 p-6
        ${x?"border-emerald-400/50 shadow-xl shadow-emerald-500/20 bg-emerald-50/50":"border-white/40 hover:border-emerald-300/30 hover:shadow-lg hover:shadow-emerald-500/10"}
      `,children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:`
            p-3 rounded-2xl transition-all duration-300
            ${x?"bg-gradient-to-r from-emerald-500 to-teal-600 shadow-lg":"bg-slate-100 group-hover:bg-emerald-100"}
          `,children:e.jsx(pe,{size:20,className:`transition-colors duration-300 ${x?"text-white":"text-slate-600 group-hover:text-emerald-600"}`})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:`font-semibold transition-colors duration-300 ${x?"text-emerald-700":"text-slate-700 group-hover:text-slate-800"}`,children:u.name}),e.jsx("p",{className:`text-sm transition-colors duration-300 ${x?"text-emerald-600":"text-slate-500"}`,children:u.email})]}),e.jsx("div",{className:`
            w-6 h-6 rounded-lg border-2 transition-all duration-300 flex items-center justify-center
            ${x?"border-emerald-500 bg-emerald-500":"border-slate-300 group-hover:border-emerald-400"}
          `,children:x&&e.jsx(Le,{size:14,className:"text-white"})})]})})});return e.jsxs("div",{className:"min-h-screen relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 transition-all duration-1000",style:{background:`radial-gradient(600px circle at ${o.x}px ${o.y}px, 
            rgba(99, 102, 241, 0.08), 
            rgba(139, 92, 246, 0.05), 
            rgba(168, 85, 247, 0.03), 
            transparent 50%),
            linear-gradient(135deg, 
            #f8fafc 0%, 
            #f1f5f9 25%, 
            #e2e8f0 50%, 
            #cbd5e1 75%, 
            #94a3b8 100%)`}}),w.map(u=>e.jsx("div",{className:"absolute w-1 h-1 bg-blue-400/40 rounded-full animate-ping",style:{left:`${u.x}%`,top:`${u.y}%`,opacity:u.opacity,animationDuration:`${u.duration}s`,animationDelay:`${u.id*.2}s`}},u.id)),e.jsxs("div",{className:"absolute inset-0",children:[e.jsx("div",{className:"absolute top-1/4 left-1/4 w-96 h-96 bg-gradient-to-r from-blue-500/5 to-indigo-500/5 rounded-full blur-3xl animate-pulse"}),e.jsx("div",{className:"absolute bottom-1/4 right-1/4 w-80 h-80 bg-gradient-to-r from-indigo-500/5 to-purple-500/5 rounded-full blur-3xl animate-pulse delay-1000"})]}),e.jsx("div",{className:"relative flex items-start justify-center min-h-screen py-8 px-4",children:e.jsx("div",{className:"w-full max-w-4xl",children:e.jsxs("div",{className:"relative bg-white/80 backdrop-blur-2xl rounded-3xl border border-white/60 shadow-2xl shadow-slate-200/50 p-8 sm:p-12",children:[e.jsx("div",{className:"absolute inset-0 rounded-3xl bg-gradient-to-r from-blue-500/10 via-indigo-500/10 to-purple-500/10 blur-sm animate-pulse"}),e.jsx("div",{className:"absolute inset-[1px] rounded-3xl bg-white/90 backdrop-blur-xl"}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"text-center mb-12 relative",children:[e.jsx("div",{className:"absolute -top-6 left-1/2 transform -translate-x-1/2",children:e.jsx(ys,{className:"text-blue-400 animate-pulse",size:24})}),e.jsx("div",{className:"absolute -top-3 left-1/3 transform -translate-x-1/2",children:e.jsx(ne,{className:"text-indigo-400 animate-bounce delay-300",size:16})}),e.jsx("div",{className:"absolute -top-3 right-1/3 transform translate-x-1/2",children:e.jsx(Ye,{className:"text-purple-400 animate-bounce delay-700",size:16})}),e.jsx("div",{className:"inline-flex items-center justify-center p-4 bg-gradient-to-r from-blue-500/10 to-indigo-500/10 rounded-3xl backdrop-blur-xl border border-white/30 mb-6",children:e.jsx(ne,{className:"w-8 h-8 text-blue-500 animate-pulse"})}),e.jsxs("h1",{className:"text-4xl sm:text-5xl font-black mb-4 relative",children:[e.jsx("span",{className:"bg-gradient-to-r from-slate-700 via-slate-600 to-slate-500 bg-clip-text text-transparent",children:"Create Medicine"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-500/20 via-indigo-500/20 to-purple-500/20 bg-clip-text text-transparent blur-sm animate-pulse delay-500"})]}),e.jsx("p",{className:"text-slate-500 text-lg font-light",children:"Add new medicine with company and stockist assignments"})]}),e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-500/3 to-indigo-500/3 rounded-3xl blur-xl"}),e.jsxs("div",{className:"relative bg-white/60 backdrop-blur-xl rounded-3xl border border-white/40 p-8 shadow-lg shadow-slate-200/20",children:[e.jsxs("h2",{className:"text-xl font-bold text-slate-600 mb-6 flex items-center gap-3",children:[e.jsx(ne,{className:"text-blue-500",size:20}),"Medicine Details"]}),e.jsxs("div",{className:"group relative",children:[e.jsxs("label",{className:"block text-sm font-semibold text-slate-600 mb-3 flex items-center gap-2",children:[e.jsx(ne,{size:16,className:"text-blue-500"}),"Medicine Name"]}),e.jsx("input",{type:"text",placeholder:"Enter medicine name",className:"w-full bg-white/90 backdrop-blur-xl border border-slate-200/50 rounded-2xl px-5 py-4 text-slate-700 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-400/50 focus:border-blue-400/50 transition-all duration-300 hover:border-slate-300/50 hover:bg-white group-hover:shadow-lg group-hover:shadow-blue-500/10",value:s.name,onChange:u=>z("name",u.target.value),required:!0})]})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-indigo-500/3 to-purple-500/3 rounded-3xl blur-xl"}),e.jsxs("div",{className:"relative bg-white/60 backdrop-blur-xl rounded-3xl border border-white/40 p-8 shadow-lg shadow-slate-200/20",children:[e.jsxs("h2",{className:"text-xl font-bold text-slate-600 mb-6 flex items-center gap-3",children:[e.jsx(ue,{className:"text-indigo-500",size:20}),"Select Company"]}),e.jsx("div",{className:"space-y-4",children:n.length===0?e.jsx("div",{className:"p-6 bg-yellow-50/80 border border-yellow-200/50 rounded-2xl backdrop-blur-xl",children:e.jsx("p",{className:"text-yellow-700 font-medium",children:"No companies found."})}):n.map(u=>e.jsx(C,{company:u,isSelected:s.company===u._id,onClick:()=>z("company",u._id)},u._id))})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-emerald-500/3 to-teal-500/3 rounded-3xl blur-xl"}),e.jsxs("div",{className:"relative bg-white/60 backdrop-blur-xl rounded-3xl border border-white/40 p-8 shadow-lg shadow-slate-200/20",children:[e.jsxs("h2",{className:"text-xl font-bold text-slate-600 mb-6 flex items-center gap-3",children:[e.jsx(he,{className:"text-emerald-500",size:20}),"Assign to Stockists",e.jsx("span",{className:"text-sm font-normal text-slate-500",children:"(Optional)"})]}),e.jsx("div",{className:"space-y-4",children:b.length===0?e.jsx("div",{className:"p-6 bg-yellow-50/80 border border-yellow-200/50 rounded-2xl backdrop-blur-xl",children:e.jsx("p",{className:"text-yellow-700 font-medium",children:"No stockists found."})}):b.map(u=>e.jsx(d,{stockist:u,isSelected:s.stockists.includes(u._id),onToggle:()=>h(u._id)},u._id))}),s.stockists.length>0&&e.jsx("div",{className:"mt-6 p-4 bg-emerald-50/80 border border-emerald-200/50 rounded-2xl backdrop-blur-xl",children:e.jsxs("p",{className:"text-emerald-700 font-medium",children:["Selected ",s.stockists.length," stockist",s.stockists.length===1?"":"s"]})})]})]}),e.jsx("div",{className:"pt-8",children:e.jsxs("button",{type:"submit",onClick:I,className:`group relative w-full text-white font-bold py-5 px-8 rounded-2xl transition-all duration-500 transform hover:scale-105 overflow-hidden border border-white/30 ${a?"bg-gradient-to-r from-blue-400/70 to-indigo-500/70 cursor-not-allowed":"bg-gradient-to-r from-blue-500 via-indigo-600 to-blue-700 hover:shadow-2xl hover:shadow-blue-500/25"}`,disabled:a,children:[!a&&e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent -skew-x-12 translate-x-[-200%] group-hover:translate-x-[200%] transition-transform duration-1000"}),e.jsx("div",{className:"relative flex items-center justify-center gap-3",children:a?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}),e.jsx("span",{className:"text-lg tracking-wider",children:"Creating Medicine..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(ne,{size:20}),e.jsx("span",{className:"text-lg tracking-wider",children:"CREATE MEDICINE"})]})}),!a&&e.jsx("div",{className:"absolute inset-0 rounded-2xl bg-gradient-to-r from-blue-500/30 via-indigo-500/30 to-blue-500/30 blur-md -z-10 animate-pulse"})]})})]})]})]})})})]})}const is=s=>{if(!s)return[];const t=[];return s.startsWith("http")&&t.push(s),t.push(`${De}${s.startsWith("/")?s:`/${s}`}`),t.push(`${"/".replace(/\/$/,"")}/${s.replace(/^\//,"")}`),t},Qs=()=>{const{id:s}=Ge(),[t,a]=l.useState(null),[r,n]=l.useState(!0),[i,b]=l.useState(null);return l.useEffect(()=>{(async()=>{n(!0);try{const o=await Ce.get(q(`/api/purchaser/${s}`));a(o.data.data),b(null)}catch{b("Failed to fetch purchaser details")}n(!1)})()},[s]),r?e.jsx("div",{className:"text-sky-600 py-4",children:"Loading..."}):i?e.jsx("div",{className:"text-red-600 py-4",children:i}):t?e.jsx("div",{className:"bg-sky-50 min-h-screen py-8",children:e.jsx("div",{className:"max-w-md mx-auto px-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow p-6 border border-sky-100 flex flex-col items-center gap-4",children:[e.jsx("div",{className:"w-24 h-24 rounded-full overflow-hidden border-2 border-sky-300 bg-sky-50 flex items-center justify-center",children:t.photo?(()=>{const N=is(t.photo);return e.jsx("img",{src:N[0],alt:"Photo",className:"object-cover w-full h-full",onError:o=>{const m=N.find(w=>w!==o.currentTarget.src);m?o.currentTarget.src=m:(o.currentTarget.onerror=null,o.currentTarget.src="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='120' height='120'><rect width='100%' height='100%' fill='%23e6eefc'/><text x='50%' y='50%' dominant-baseline='middle' text-anchor='middle' fill='%236b8bd7' font-size='20'>Photo</text></svg>")}})})():e.jsx("span",{className:"text-5xl",children:"üßë‚Äçüíº"})}),e.jsx("div",{className:"text-2xl font-bold text-sky-700",children:t.fullName}),e.jsx("div",{className:"text-slate-600 text-center",children:t.address}),e.jsx("div",{className:"text-slate-700 font-medium",children:t.contactNo}),e.jsxs("div",{className:"w-full flex flex-col items-center gap-2 mt-4",children:[e.jsx("div",{className:"font-semibold text-sky-600",children:"Aadhar Image"}),t.aadharImage?(()=>{const N=is(t.aadharImage);return e.jsx("img",{src:N[0],alt:"Aadhar",className:"w-48 h-32 object-cover rounded border border-sky-200",onError:o=>{const m=N.find(w=>w!==o.currentTarget.src);m?o.currentTarget.src=m:(o.currentTarget.onerror=null,o.currentTarget.src="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='240' height='160'><rect width='100%' height='100%' fill='%23f8fafc'/><text x='50%' y='50%' dominant-baseline='middle' text-anchor='middle' fill='%2399a6b2' font-size='18'>No image</text></svg>")}})})():e.jsx("span",{className:"text-slate-400",children:"No Aadhar image"})]}),e.jsxs("div",{className:"mt-2 text-xs text-slate-400",children:["ID: ",t._id]})]})})}):e.jsx("div",{className:"text-slate-500 py-4",children:"No details found."})},Ks=({staff:s,onOpen:t})=>{const a=()=>t(s),n=(i=>{if(!i)return null;try{if(i.startsWith("http"))return i}catch{}const b=i.startsWith("/")?i:`/${i}`;return`${De}${b}`})(s.image);return e.jsx("div",{onClick:a,className:"bg-white rounded-xl p-6 shadow-md hover:shadow-lg border border-gray-100 hover:border-blue-200 cursor-pointer transition-all duration-300 group",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"relative",children:[n?e.jsx("img",{src:n,alt:s.fullName,className:"w-14 h-14 rounded-xl object-cover"}):e.jsx("div",{className:"w-14 h-14 bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl flex items-center justify-center text-white font-semibold text-lg",children:s.fullName?s.fullName.charAt(0):"S"}),e.jsx("div",{className:"absolute -bottom-1 -right-1 w-4 h-4 bg-green-500 rounded-full border-2 border-white"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-gray-800 group-hover:text-blue-600 transition-colors duration-200",children:s.fullName}),e.jsx("p",{className:"text-sm text-gray-500",children:s.contact}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:s.email})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-xs text-gray-400",children:["ID: ",s._id.slice(-6)]}),e.jsx("div",{className:"text-xs text-green-600 font-medium",children:"Active"})]}),e.jsx("div",{className:"hidden sm:block",children:e.jsx("div",{className:"w-10 h-10 bg-white p-1 rounded-md shadow-sm",children:e.jsx(hs,{value:`${window.location.origin}/staff/${s._id}`,size:36})})})]})]})})},Xs=({staff:s,onClose:t})=>e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-2xl p-8 max-w-md w-full shadow-2xl",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Staff Details"}),e.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors duration-200",children:e.jsx("svg",{className:"w-5 h-5 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[(()=>{const a=s.image,r=a&&(a.startsWith("http")?a:`${De}${a.startsWith("/")?a:`/${a}`}`);return r?e.jsx("img",{src:r,alt:s.fullName,className:"w-16 h-16 rounded-xl object-cover"}):e.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl flex items-center justify-center text-white font-bold text-xl",children:s.fullName?s.fullName.charAt(0):"S"})})(),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-800",children:s.fullName}),e.jsx("p",{className:"text-sm text-gray-500",children:s.contact})]})]}),e.jsxs("div",{className:"space-y-3 pt-4 border-t border-gray-100",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-400 uppercase tracking-wide",children:"Email"}),e.jsx("p",{className:"text-sm text-gray-800",children:s.email})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-400 uppercase tracking-wide",children:"Address"}),e.jsx("p",{className:"text-sm text-gray-800",children:s.address})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-400 uppercase tracking-wide",children:"Status"}),e.jsx("p",{className:"text-sm text-green-600 font-medium",children:"Active"})]})]}),e.jsx("div",{className:"mt-6 flex items-center justify-center",children:e.jsx("div",{className:"bg-gray-50 p-4 rounded-xl",children:e.jsx(hs,{value:`${window.location.origin}/staff/${s._id}`,size:128})})})]}),e.jsxs("div",{className:"flex gap-3 mt-8",children:[e.jsx("button",{onClick:t,className:"flex-1 px-4 py-2 border border-gray-200 text-gray-600 rounded-xl hover:bg-gray-50 transition-colors duration-200",children:"Close"}),window&&window.localStorage&&(()=>{try{const a=JSON.parse(window.localStorage.getItem("user"));return a&&(a.role==="admin"||String(a._id)===String(s.stockist))}catch{return!1}})()&&e.jsx("button",{className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-xl hover:bg-blue-700 transition-colors duration-200",children:"Edit Staff"})]})]})});function Zs(){const[s,t]=l.useState([]),[a,r]=l.useState(!0),[n,i]=l.useState(null),[b,N]=l.useState(""),[o,m]=l.useState(()=>{try{const h=localStorage.getItem("user");return h?JSON.parse(h):null}catch{return null}}),w=Z(),c=$e();l.useEffect(()=>{let h=!0;return(async()=>{try{const I=getCookie("token"),C=o&&o.role==="stockist",d=q(C?"/api/staff?stockist=me":"/api/staff"),u={};I&&(u.headers={Authorization:`Bearer ${I}`});const x=await fetch(d,u),S=await x.json().catch(()=>[]);if(!h)return;x.ok&&Array.isArray(S)?t(S):x.ok&&S&&Array.isArray(S.data)&&t(S.data)}catch(I){console.error("Failed to load staff list",I)}finally{h&&r(!1)}})(),()=>{h=!1}},[c.key,o]);const g=()=>w("/adminCreateStaff"),z=s.filter(h=>h.fullName.toLowerCase().includes(b.toLowerCase())||h.contact.includes(b)||h.email.toLowerCase().includes(b.toLowerCase()));return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50 p-6",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-4 mb-2",children:[e.jsx("div",{className:"w-4 h-4 bg-blue-500 rounded-full"}),e.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Staff Management"})]}),e.jsx("p",{className:"text-gray-600 ml-8",children:"Manage your team members and their information"})]}),o&&(o.role==="stockist"||o.role==="admin")&&e.jsxs("button",{onClick:g,className:"px-6 py-3 bg-blue-600 text-white rounded-xl hover:bg-blue-700 transition-all duration-200 flex items-center gap-2 shadow-lg hover:shadow-xl",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Add New Staff"]})]}),e.jsxs("div",{className:"flex flex-col lg:flex-row gap-6",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx("svg",{className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),e.jsx("input",{type:"text",placeholder:"Search staff by name, contact, or email...",value:b,onChange:h=>N(h.target.value),className:"w-full pl-12 pr-4 py-4 bg-white border border-gray-200 rounded-xl focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all duration-200 outline-none"})]})}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-md border border-gray-100 min-w-[120px]",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:s.length}),e.jsx("div",{className:"text-sm text-gray-500",children:"Total Staff"})]}),e.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-md border border-gray-100 min-w-[120px]",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:s.length}),e.jsx("div",{className:"text-sm text-gray-500",children:"Active"})]})]})]})]}),a&&e.jsx("div",{className:"flex items-center justify-center py-16",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("svg",{className:"animate-spin w-8 h-8 text-blue-600 mx-auto mb-4",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),e.jsx("p",{className:"text-gray-600",children:"Loading staff members..."})]})}),!a&&e.jsxs("div",{className:"space-y-4",children:[z.map(h=>e.jsx(Ks,{staff:h,onOpen:I=>i(I)},h._id)),!a&&z.length===0&&s.length>0&&e.jsxs("div",{className:"text-center py-16",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("svg",{className:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"No staff found"}),e.jsx("p",{className:"text-gray-500",children:"Try adjusting your search criteria"})]}),!a&&s.length===0&&e.jsxs("div",{className:"text-center py-16",children:[e.jsx("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("svg",{className:"w-8 h-8 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"No staff members yet"}),e.jsx("p",{className:"text-gray-500 mb-6",children:"Get started by adding your first staff member"}),o&&(o.role==="stockist"||o.role==="admin")?e.jsxs("button",{onClick:g,className:"px-6 py-3 bg-blue-600 text-white rounded-xl hover:bg-blue-700 transition-colors duration-200 inline-flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Add First Staff Member"]}):e.jsx("div",{className:"text-sm text-gray-500",children:"Only stockists or admins can add staff."})]})]}),!a&&s.length>0&&e.jsx("div",{className:"mt-8",children:e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-lg border border-gray-100",children:[e.jsx("h3",{className:"font-semibold text-gray-800 mb-4",children:"Quick Actions"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("button",{className:"p-4 border border-gray-200 rounded-xl hover:bg-gray-50 transition-colors duration-200 text-left",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center mb-3",children:e.jsx("svg",{className:"w-4 h-4 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),e.jsx("h4",{className:"font-medium text-gray-800",children:"Export Staff List"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Download staff data as CSV"})]}),e.jsxs("button",{className:"p-4 border border-gray-200 rounded-xl hover:bg-gray-50 transition-colors duration-200 text-left",children:[e.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-lg flex items-center justify-center mb-3",children:e.jsx("svg",{className:"w-4 h-4 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})}),e.jsx("h4",{className:"font-medium text-gray-800",children:"Staff Analytics"}),e.jsx("p",{className:"text-sm text-gray-500",children:"View performance metrics"})]}),e.jsxs("button",{className:"p-4 border border-gray-200 rounded-xl hover:bg-gray-50 transition-colors duration-200 text-left",children:[e.jsx("div",{className:"w-8 h-8 bg-orange-100 rounded-lg flex items-center justify-center mb-3",children:e.jsx("svg",{className:"w-4 h-4 text-orange-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 100 4m0-4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 100 4m0-4v2m0-6V4"})})}),e.jsx("h4",{className:"font-medium text-gray-800",children:"Bulk Actions"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Manage multiple staff"})]})]})]})}),n&&e.jsx(Xs,{staff:n,onClose:()=>i(null)})]})})}const et={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_API_URL:"https://api.medi-trap.com/",VITE_CLOUDINARY_UPLOAD_PRESET:"project1",VITE_CLOUDINARY_URL:"https://api.cloudinary.com/v1_1/dspnmgzwh/image/upload",VITE_REMOTE_API:"https://medi-trap-backend-2.onrender.com"};function st(){const[s,t]=l.useState({fullName:"",contact:"",email:"",address:""}),[a,r]=l.useState(()=>{try{const $=localStorage.getItem("user");return $?JSON.parse($):null}catch{return null}}),[n,i]=l.useState(!1),[b,N]=l.useState(!1),[o,m]=l.useState({}),[w,c]=l.useState(null),[g,z]=l.useState(null),[h,I]=l.useState([]),[C,d]=l.useState(""),[u,x]=l.useState(!1),S=Z();xs.useEffect(()=>{(async()=>{try{const $=re("token")||localStorage.getItem("token");if(!$)return;i(!0);const V=await fetch(q("/api/auth/me"),{headers:{Authorization:`Bearer ${$}`}}),K=await V.json().catch(()=>({}));try{m({tokenResolved:$,meStatus:V.status,meBody:K,localUser:(()=>{try{return JSON.parse(localStorage.getItem("user"))}catch{return null}})()})}catch{}if(V.ok&&K&&K.user){try{localStorage.setItem("user",JSON.stringify(K.user))}catch{}if(r(K.user),K.user.role==="admin")try{const J=await fetch(q("/api/stockist")),T=await J.json().catch(()=>({})),k=T&&T.data||[];J.ok&&Array.isArray(k)&&I(k)}catch(J){console.error("Failed to load stockists",J)}}else try{localStorage.removeItem("user")}catch{}N(!0),i(!1)}catch($){console.error("Failed to load profile on mount",$),N(!0),i(!1)}})()},[]);const f=async $=>{if($.preventDefault(),!w||!g)return alert("Please attach image and aadhar card.");x(!0);try{const V=re("token"),K=new FormData;K.append("fullName",s.fullName),K.append("contact",s.contact),K.append("email",s.email),K.append("address",s.address),a&&a.role==="admin"&&C&&K.append("stockist",C),K.append("image",w),K.append("aadharCard",g);const J=await fetch(q("/api/staff"),{method:"POST",body:K,headers:{...V?{Authorization:`Bearer ${V}`}:{}}}),T=await J.json().catch(()=>({}));if(!J.ok){const k=T&&T.message||JSON.stringify(T)||J.statusText;throw new Error(k)}alert("Staff created successfully!"),S(-1)}catch(V){alert(String(V))}finally{x(!1)}},v=a||o.localUser||function(){try{return JSON.parse(localStorage.getItem("user"))}catch{return null}}(),L=o&&o.meBody||null,y=L&&L.user&&L.user.role||L&&L.user&&L.user.roleType||L&&L.user&&L.user.role_type||L&&L.role||L&&L.data&&L.data.user&&L.data.user.role||null,_=!!(re("token")||localStorage.getItem("token")),A=y?String(y).toLowerCase():null,E=v&&v.role?String(v.role).toLowerCase():null,p=A&&(A==="stockist"||A==="admin"||A==="proprietor"||A.includes("propriet")),G=!!(E&&(E==="stockist"||E==="admin")||p);return typeof window<"u"&&(window.__staffAuthDebug={localUser:v,meBody:L,meRole:y,hasToken:_,isAuthorized:G,attemptedProfile:b}),e.jsxs("div",{className:"min-h-screen flex items-start justify-center p-6",style:{backgroundColor:"#f8fafc"},children:[n?e.jsxs("div",{className:"w-full max-w-2xl bg-white p-8 rounded-2xl shadow-lg border border-gray-100 text-center",children:[e.jsx("div",{className:"w-10 h-10 mx-auto mb-4 animate-spin rounded-full border-4 border-blue-200 border-t-blue-600"}),e.jsx("div",{className:"text-gray-600",children:"Verifying session..."})]}):!b&&!v&&_?e.jsxs("div",{className:"w-full max-w-2xl bg-white p-8 rounded-2xl shadow-lg border border-gray-100 text-center",children:[e.jsx("div",{className:"w-10 h-10 mx-auto mb-4 animate-spin rounded-full border-4 border-blue-200 border-t-blue-600"}),e.jsx("div",{className:"text-gray-600",children:"Verifying session..."})]}):G?e.jsxs("div",{className:"w-full max-w-2xl bg-white p-8 rounded-2xl shadow-lg border border-gray-100",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"w-16 h-16 bg-blue-500 rounded-2xl flex items-center justify-center mx-auto mb-4",children:e.jsx("svg",{className:"w-8 h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"})})}),e.jsx("h2",{className:"text-2xl font-semibold text-gray-800",children:"Create Staff"}),e.jsx("p",{className:"text-gray-500 mt-1",children:"Add new team member information"})]}),e.jsxs("div",{className:"space-y-6",children:[a&&a.role==="admin"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Assign to Stockist"}),e.jsxs("select",{className:"w-full px-4 py-3 border border-gray-200 rounded-xl",value:C,onChange:$=>d($.target.value),children:[e.jsx("option",{value:"",children:"-- Select stockist (optional) --"}),h.map($=>e.jsx("option",{value:$._id,children:$.name||$.title||$.companyName||$.email},$._id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Full Name"}),e.jsx("input",{className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",placeholder:"Enter full name",value:s.fullName,onChange:$=>t(V=>({...V,fullName:$.target.value})),required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Contact Number"}),e.jsx("input",{className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",placeholder:"Enter contact number",value:s.contact,onChange:$=>t(V=>({...V,contact:$.target.value})),required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),e.jsx("input",{className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",placeholder:"Enter email address",type:"email",value:s.email,onChange:$=>t(V=>({...V,email:$.target.value}))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Address"}),e.jsx("input",{className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",placeholder:"Enter address",value:s.address,onChange:$=>t(V=>({...V,address:$.target.value}))})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Profile Photo"}),e.jsxs("div",{className:"border-2 border-dashed border-gray-200 rounded-xl p-6 text-center hover:border-blue-300 transition-colors",children:[e.jsx("svg",{className:"w-8 h-8 text-gray-400 mx-auto mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),e.jsx("input",{type:"file",accept:"image/*",onChange:$=>c($.target.files[0]),className:"w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100",required:!0}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Upload profile photo"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Aadhar Card"}),e.jsxs("div",{className:"border-2 border-dashed border-gray-200 rounded-xl p-6 text-center hover:border-blue-300 transition-colors",children:[e.jsx("svg",{className:"w-8 h-8 text-gray-400 mx-auto mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),e.jsx("input",{type:"file",accept:"image/*",onChange:$=>z($.target.files[0]),className:"w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100",required:!0}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Upload Aadhar card image"})]})]})]}),e.jsx("div",{className:"pt-4",children:e.jsx("button",{onClick:f,disabled:u,className:"w-full bg-blue-500 hover:bg-blue-600 disabled:bg-blue-300 text-white font-semibold py-4 px-6 rounded-xl transition-colors duration-200 flex items-center justify-center",children:u?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Creating Staff..."]}):"Create Staff Member"})})]})]}):e.jsxs("div",{className:"w-full max-w-2xl bg-white p-8 rounded-2xl shadow-lg border border-gray-100 text-center",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Unauthorized"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Only stockists or admins can add staff members."}),e.jsxs("div",{className:"flex items-center justify-center gap-3",children:[e.jsx("button",{onClick:()=>window.location.href="/stockist-login",className:"px-4 py-2 bg-blue-600 text-white rounded-lg",children:"Go to Login"}),e.jsx("button",{onClick:()=>window.history.back(),className:"px-4 py-2 border border-gray-200 rounded-lg",children:"Go Back"})]})]}),et&&!1]})}function tt(){const{id:s}=Ge(),t=Z(),[a,r]=l.useState(null),[n,i]=l.useState(!0),[b,N]=l.useState(null),[o,m]=l.useState(()=>{try{const g=localStorage.getItem("user");return g?JSON.parse(g):null}catch{return null}}),[w,c]=l.useState(null);return l.useEffect(()=>{(async()=>{try{if(!a)return;const g=a.stockist;if(g&&typeof g=="object"){c(g.name||g.companyName||g.title||null);return}if(g&&typeof g=="string")try{const z=re("token")||localStorage.getItem("token"),h=await fetch(q(`/api/stockist/${g}`),{headers:z?{Authorization:`Bearer ${z}`}:{}});if(h.ok){const x=await h.json().catch(()=>({}));if(x&&x.data){c(x.data.name||x.data.companyName||x.data.title||null);return}}const C=await(await fetch(q("/api/stockist"),{headers:z?{Authorization:`Bearer ${z}`}:{}})).json().catch(()=>({})),d=C&&C.data||[],u=Array.isArray(d)?d.find(x=>String(x._id)===String(g)):null;if(u){c(u.name||u.companyName||u.title||null);return}}catch{}c(o&&(o.name||o.companyName||o.title)?o.name||o.companyName||o.title:null)}catch{}})()},[a]),l.useEffect(()=>{(async()=>{if(!s){N("Staff id missing in route."),i(!1);return}try{i(!0);const g=re("token")||localStorage.getItem("token"),z=await fetch(q(`/api/staff/${s}`),{headers:g?{Authorization:`Bearer ${g}`}:{}}),h=await z.json().catch(()=>({}));z.ok?r(h&&h.data||null):(N(h&&h.message||"Failed to load staff."),r(null))}catch(g){N(String(g)),r(null)}finally{i(!1)}})()},[s]),n?e.jsx("div",{className:"min-h-screen flex items-center justify-center p-4",children:e.jsxs("div",{className:"w-full max-w-md bg-white p-8 rounded-xl shadow text-center",children:[e.jsx("div",{className:"w-10 h-10 mx-auto mb-4 animate-spin rounded-full border-4 border-blue-200 border-t-blue-600"}),e.jsx("div",{children:"Loading staff..."})]})}):b||!a?e.jsx("div",{className:"min-h-screen flex items-center justify-center p-4",children:e.jsxs("div",{className:"w-full max-w-md bg-white p-8 rounded-xl shadow text-center",children:[e.jsx("div",{className:"text-red-600 font-semibold mb-2",children:b||"Staff not found."}),e.jsx("button",{onClick:()=>t(-1),className:"px-4 py-2 bg-blue-500 text-white rounded",children:"Go back"})]})}):e.jsx("div",{className:"min-h-screen flex items-center justify-center p-4 bg-gradient-to-br from-blue-50 via-white to-blue-100",children:e.jsxs("div",{className:"w-full max-w-2xl",children:[e.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl overflow-hidden relative",children:[e.jsx("div",{className:"absolute top-0 right-0 w-full h-32 bg-gradient-to-br from-blue-600 to-blue-700 rounded-bl-full"}),e.jsx("div",{className:"absolute top-0 right-0 w-3/4 h-24 bg-gradient-to-br from-blue-500 to-blue-600 rounded-bl-full"}),e.jsx("div",{className:"relative pt-6 px-8 pb-4",children:e.jsxs("div",{className:"flex items-center gap-3 mb-8",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-600 rounded-full flex items-center justify-center",children:e.jsx(fe,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:w||"YOUR COMPANY"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Staff Management System"})]})]})}),e.jsxs("div",{className:"relative px-8 pb-8",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:gap-8 items-start",children:[e.jsx("div",{className:"flex-shrink-0 mb-6 md:mb-0 md:mr-4",children:e.jsx("div",{className:"relative",children:e.jsx("div",{className:"w-36 h-36 md:w-48 md:h-48 rounded-full border-4 border-blue-600 shadow-xl overflow-hidden bg-gray-100 ring-4 ring-blue-100",children:e.jsx("img",{src:a.image||a.profileImageUrl||"https://via.placeholder.com/400",alt:"Staff Photo",className:"w-full h-full object-cover"})})})}),e.jsxs("div",{className:"flex-1 pt-2",children:[e.jsx("div",{className:"bg-blue-600 text-white px-6 py-2 rounded-full inline-block mb-6 font-bold text-lg tracking-wide",children:"STAFF ID CARD"}),e.jsx("h3",{className:"text-3xl md:text-4xl font-bold text-blue-900 mb-6 md:mb-8",children:a.fullName||a.name}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-gray-700 font-semibold min-w-32",children:"Staff ID"}),e.jsx("span",{className:"text-gray-700",children:":"}),e.jsx("span",{className:"text-gray-900 font-medium",children:a.staffId||a.id||"N/A"})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-gray-700 font-semibold min-w-32",children:"Date"}),e.jsx("span",{className:"text-gray-700",children:":"}),e.jsx("span",{className:"text-gray-900 font-medium",children:a.joiningDate||new Date().toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"})})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-gray-700 font-semibold min-w-32",children:"Contact"}),e.jsx("span",{className:"text-gray-700",children:":"}),e.jsx("span",{className:"text-gray-900 font-medium",children:a.contact||a.contactNo||a.phone})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-gray-700 font-semibold min-w-32",children:"Email"}),e.jsx("span",{className:"text-gray-700",children:":"}),e.jsx("span",{className:"text-gray-900 font-medium break-all",children:a.email})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-gray-700 font-semibold min-w-32",children:"Address"}),e.jsx("span",{className:"text-gray-700",children:":"}),e.jsx("span",{className:"text-gray-900 font-medium",children:a.address&&a.address.street||a.address||a.city})]})]})]})]}),e.jsx("div",{className:"flex justify-end mt-8",children:e.jsxs("div",{className:"bg-white p-4 rounded-lg",children:[e.jsx("div",{className:"flex gap-px h-24 items-end",children:[3,7,2,8,4,9,3,5,7,2,8,4,6,3,7,2,9,4,8,3,7,2,5,8,4,9,3,6,7,2,8,5].map((g,z)=>e.jsx("div",{className:"bg-black w-1",style:{height:`${g*10}%`}},z))}),e.jsx("div",{className:"text-center text-xs text-gray-600 font-mono mt-1",children:a.staffId||a.id||"000000000000"})]})}),o&&o.role==="admin"?e.jsxs("div",{className:"flex flex-col md:flex-row gap-3 mt-6",children:[e.jsxs("button",{className:"w-full md:flex-1 flex items-center justify-center gap-2 px-4 py-3 bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white rounded-lg font-medium transition-all shadow-md hover:shadow-lg",children:[e.jsx(ws,{className:"w-4 h-4"}),"Edit"]}),e.jsxs("button",{className:"w-full md:flex-1 flex items-center justify-center gap-2 px-4 py-3 bg-gradient-to-r from-red-500 to-red-600 hover:from-red-600 hover:to-red-700 text-white rounded-lg font-medium transition-all shadow-md hover:shadow-lg",children:[e.jsx(us,{className:"w-4 h-4"}),"Delete"]})]}):e.jsx("div",{className:"text-center text-sm text-gray-500 bg-gray-50 p-3 rounded-lg mt-6",children:"You do not have permissions to modify this staff member"})]}),e.jsx("div",{className:"absolute bottom-0 left-0 w-full h-24 bg-gradient-to-tl from-blue-600 to-blue-700 rounded-tr-full"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-2/3 h-16 bg-gradient-to-tl from-blue-500 to-blue-600 rounded-tr-full"}),e.jsx("div",{className:"h-3 bg-gradient-to-r from-blue-600 via-blue-500 to-blue-600 relative z-10"})]}),e.jsx("div",{className:"text-center mt-6 text-sm text-gray-500",children:"Official Staff Identification Card"})]})})}function at(){const[s,t]=l.useState([{id:Date.now(),name:"",qty:0}]),[a,r]=l.useState([]),[n,i]=l.useState([]),[b,N]=l.useState(null),[o,m]=l.useState([]),[w,c]=l.useState(!1),[g,z]=l.useState(null),h="savedDemand";l.useEffect(()=>{(async()=>{try{const[S,f]=await Promise.all([fetch(q("/api/medicine")),fetch(q("/api/stockist"))]);if(S&&S.ok){const v=await S.json();r(v.data||[])}if(f&&f.ok){const v=await f.json();i(v.data||[])}}catch(S){console.warn("Could not fetch medicines/stockists",S)}})();try{const S=localStorage.getItem(h);if(S){const f=JSON.parse(S);f&&f.groups&&N(f.groups)}}catch{}},[]);const I=(x,S)=>{t(f=>f.map(v=>v.id===x?{...v,...S}:v))},C=()=>t(x=>[...x,{id:Date.now()+Math.random(),name:"",qty:0}]),d=x=>t(S=>S.filter(f=>f.id!==x)),u=async()=>{c(!0),z(null);try{const x={},S=f=>(f||"").toString().trim();for(const f of s){const v={query:f.name,foundMeds:[],candidateStockists:[],assignedTo:null},L=S(f.name);if(!L){x.unmatched=x.unmatched||[],x.unmatched.push({line:f});continue}const y=L.toLowerCase();let _=[];if(Array.isArray(a)&&a.length>0){const E=a.filter(M=>(M.name||M.medicineName||M.title||"").toString().toLowerCase()===y),p=a.filter(M=>{const G=(M.name||M.medicineName||M.title||"").toString().toLowerCase();return G.includes(y)&&G!==y});_=E.length?E:p,v.foundMeds=_.map(M=>ie(M)||String(M._id))}let A=!1;for(const E of _){let p=null;if(Array.isArray(n)&&n.length>0&&(p=n.find(M=>Ee(E,M._id)),!p)){const M=ie(E)||"";p=n.find(G=>Ae(M,G))}if(p){v.candidateStockists.push(p.title||p.name||p._id);const M=p.title||p.name||p._id;x[M]=x[M]||[],x[M].push({line:f,medicine:E}),A=!0,v.assignedTo=M}}if(!A){if(Array.isArray(n)&&n.length>0){let E=n.find(p=>Ae(L,p));if(!E){let p=0,M=null;for(const G of n){const $=ps(L,G);$>p&&(p=$,M=G)}p>=1&&(E=M)}if(E){v.candidateStockists.push(E.title||E.name||E._id);const p=E.title||E.name||E._id;x[p]=x[p]||[],x[p].push({line:f,medicine:null}),A=!0,v.assignedTo=p}}A||(x.unmatched=x.unmatched||[],x.unmatched.push({line:f}),v.assignedTo="unmatched"),m(E=>[...E,v])}}N(x);try{localStorage.setItem(h,JSON.stringify({groups:x,createdAt:Date.now()}))}catch(f){console.warn("Could not save demand to localStorage",f)}}catch(x){console.error(x),z("Could not create demand. See console.")}finally{c(!1)}};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-100 via-white to-blue-50",children:e.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-4xl",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-blue-600 text-white rounded-full mb-4",children:e.jsx(pe,{size:32})}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Create Today's Demand"}),e.jsx("p",{className:"text-gray-600",children:"Add medicine requirements and organize by stockists"})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Medicine Requirements"}),e.jsxs("div",{className:"text-sm text-gray-500",children:[s.length," item",s.length!==1?"s":""]})]}),e.jsx("div",{className:"space-y-4 mb-6",children:s.map((x,S)=>e.jsx("div",{className:"group",children:e.jsxs("div",{className:"flex items-center gap-4 p-4 border border-gray-200 rounded-lg hover:border-blue-300 transition-colors",children:[e.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-gray-100 rounded-full flex items-center justify-center text-sm font-medium text-gray-600",children:S+1}),e.jsx("div",{className:"flex-1",children:e.jsx("input",{value:x.name,onChange:f=>I(x.id,{name:f.target.value}),placeholder:"Enter medicine name...",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition-all"})}),e.jsx("div",{className:"flex-shrink-0",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Qty:"}),e.jsx("input",{type:"number",min:0,value:x.qty,onChange:f=>I(x.id,{qty:Number(f.target.value===""?0:f.target.value)}),className:"w-20 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition-all text-center"})]})}),s.length>1&&e.jsx("button",{onClick:()=>d(x.id),className:"flex-shrink-0 p-2 text-red-500 hover:bg-red-50 rounded-lg transition-colors opacity-0 group-hover:opacity-100",title:"Remove item",children:e.jsx(us,{size:18})})]})},x.id))}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:C,className:"flex items-center gap-2 px-6 py-3 bg-green-600 hover:bg-green-700 text-white rounded-lg font-medium transition-colors",children:[e.jsx(Ye,{size:18}),"Add Item"]}),e.jsx("button",{onClick:u,className:"flex items-center gap-2 px-8 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed",disabled:w,children:w?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent"}),"Processing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Le,{size:18}),"Create Demand"]})})]})]}),g&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-8",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ts,{className:"text-red-500",size:20}),e.jsx("div",{className:"text-red-700 font-medium",children:g})]})}),b&&e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[e.jsxs("h3",{className:"text-xl font-semibold text-gray-800 mb-6 flex items-center gap-2",children:[e.jsx(Le,{className:"text-green-500",size:24}),"Grouped Demand Results"]}),Object.keys(b).length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(pe,{size:48,className:"mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No results to display"})]}):e.jsx("div",{className:"space-y-4",children:Object.entries(b).map(([x,S])=>e.jsxs("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:[e.jsxs("div",{className:`px-6 py-4 font-semibold text-white ${x==="unmatched"?"bg-amber-500":"bg-gradient-to-r from-blue-500 to-blue-600"}`,children:[x==="unmatched"?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ts,{size:20}),"Unmatched / Not Found"]}):x,e.jsxs("div",{className:"text-sm opacity-90 mt-1",children:[S.length," item",S.length!==1?"s":""]})]}),e.jsx("div",{className:"divide-y divide-gray-100",children:S.map((f,v)=>e.jsx("div",{className:"px-6 py-4 hover:bg-gray-50 transition-colors",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-gray-900 mb-1",children:f.line.name}),f.medicine&&e.jsxs("div",{className:"text-sm text-green-600",children:["‚úì Matches:"," ",f.medicine.name||f.medicine.title||f.medicine.medicineName||f.medicine._id]}),!f.medicine&&x!=="unmatched"&&e.jsx("div",{className:"text-sm text-gray-500",children:"No direct medicine match"})]}),e.jsx("div",{className:"flex-shrink-0",children:e.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-blue-100 text-blue-800",children:["Qty: ",f.line.qty]})})]})},v))})]},x))})]}),o&&o.length>0&&e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 mt-6",children:[e.jsx("h4",{className:"font-semibold mb-3",children:"Debug: matching details"}),e.jsx("div",{className:"space-y-3 text-sm text-gray-700",children:o.map((x,S)=>e.jsxs("div",{className:"p-3 border rounded",children:[e.jsxs("div",{className:"font-medium",children:["Query: ",x.query]}),e.jsxs("div",{children:["Found medicines: ",x.foundMeds.join(", ")||"none"]}),e.jsxs("div",{children:["Candidate stockists:"," ",x.candidateStockists.join(", ")||"none"]}),e.jsxs("div",{children:["Assigned to: ",x.assignedTo||"none"]})]},S))})]})]})})}function rt(){const s=Z(),[t,a]=l.useState(""),[r,n]=l.useState(""),[i,b]=l.useState(!1),[N,o]=l.useState(""),[m,w]=l.useState(!1),[c,g]=l.useState(!1);async function z(h){h.preventDefault(),o(""),b(!0);try{const I=await fetch(q("/api/auth/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t,password:r})}),C=await I.json().catch(()=>({}));if(!I.ok){o(C&&C.message||"Login failed"),b(!1);return}try{fs("token"),localStorage.removeItem("user")}catch{}C.token&&(console.debug("Login: storing token (cookie) ->",C.token&&C.token.slice(0,16)+"..."),gs("token",C.token,7)),C.user&&(console.debug("Login: storing user ->",C.user&&C.user.email),localStorage.setItem("user",JSON.stringify(C.user)));try{console.log("Login: stored user ->",JSON.parse(localStorage.getItem("user"))),console.log("Login: current token (cookie) ->",(re("token")||"(none)").slice(0,16)+"...")}catch(d){console.warn("Login: could not parse stored user",d)}try{const d=C.user||JSON.parse(localStorage.getItem("user")||"null"),u=d&&(d.role==="stockist"||d.roleType==="stockist"),x=d&&d.approved;u&&!x?(s("/stockist-outcode"),setTimeout(()=>window.location.reload(),120)):(s("/stockist-outcode"),setTimeout(()=>window.location.reload(),120))}catch{s("/stockist-outcode"),setTimeout(()=>window.location.reload(),120)}}catch{o("Network error")}finally{b(!1)}}return xs.useEffect(()=>{},[]),e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-blue-50 to-indigo-100 flex items-center justify-center p-4",children:e.jsxs("div",{className:"w-full max-w-md",children:[e.jsx("div",{className:"text-center mb-8",children:e.jsxs("div",{className:"relative inline-block",children:[e.jsxs("div",{className:"w-20 h-20 bg-gradient-to-r from-teal-400 via-blue-500 to-purple-600 rounded-2xl flex items-center justify-center mb-4 mx-auto shadow-lg transform rotate-12",children:[e.jsx("img",{src:"/final-logo.png",alt:""}),e.jsx("div",{className:"bg-white rounded-lg p-2 transform -rotate-12",children:e.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-teal-500 to-blue-600 rounded-md flex items-center justify-center",children:e.jsx("div",{className:"w-4 h-4 bg-white rounded-sm flex items-center justify-center",children:e.jsx("div",{className:"w-2 h-2 bg-teal-500 rounded-full"})})})})]}),e.jsx("div",{className:"absolute -top-2 -right-2 w-6 h-6 bg-gradient-to-r from-orange-400 to-red-500 rounded-full flex items-center justify-center",children:e.jsx("div",{className:"w-3 h-3 bg-white rounded-full flex items-center justify-center",children:e.jsx("div",{className:"w-1.5 h-1.5 bg-green-500 rounded-full"})})})]})}),e.jsxs("div",{className:"bg-white rounded-3xl shadow-xl p-8 backdrop-blur-sm",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Welcome Back"}),e.jsx("p",{className:"text-gray-600",children:"Sign in to your MedTrap account"})]}),N&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg mb-6",children:N}),e.jsxs("form",{onSubmit:z,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),e.jsxs("div",{className:"relative",children:[e.jsx(ze,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:"email",required:!0,value:t,onChange:h=>a(h.target.value),placeholder:"Enter your email address",className:"w-full pl-10 pr-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-teal-500 focus:border-transparent transition-all duration-200 bg-gray-50"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(Ve,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:c?"text":"password",required:!0,value:r,onChange:h=>n(h.target.value),placeholder:"Enter your password",className:"w-full pl-10 pr-12 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-teal-500 focus:border-transparent transition-all duration-200 bg-gray-50"}),e.jsx("button",{type:"button",onClick:()=>g(!c),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors",children:c?e.jsx(We,{className:"w-5 h-5"}):e.jsx(Je,{className:"w-5 h-5"})})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:m,onChange:h=>w(h.target.checked),className:"w-4 h-4 text-teal-600 bg-gray-100 border-gray-300 rounded focus:ring-teal-500 focus:ring-2"}),e.jsx("span",{className:"ml-2 text-sm text-gray-600",children:"Remember me"})]}),e.jsx("a",{href:"/forgot-password",className:"text-sm text-teal-600 hover:text-teal-500 font-medium transition-colors",children:"Forgot password?"})]}),e.jsx("button",{type:"submit",disabled:i,className:"w-full bg-gradient-to-r from-teal-500 to-blue-600 hover:from-teal-600 hover:to-blue-700 text-white font-semibold py-3 px-4 rounded-xl transition-all duration-200 transform hover:scale-[1.02] disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none shadow-lg",children:i?e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Signing in..."]}):"Sign In"})]}),e.jsxs("div",{className:"relative my-8",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:"w-full border-t border-gray-200"})}),e.jsx("div",{className:"relative flex justify-center text-sm",children:e.jsx("span",{className:"px-4 bg-white text-gray-500",children:"New to MedTrap?"})})]}),e.jsx("div",{className:"text-center",children:e.jsx("a",{href:"/adminCreateStockist",className:"text-teal-600 hover:text-teal-500 font-semibold transition-colors",children:"Create your account"})})]}),e.jsx("div",{className:"text-center mt-6",children:e.jsxs("div",{className:"flex items-center justify-center text-sm text-gray-500",children:[e.jsx(Me,{className:"w-4 h-4 text-amber-500 mr-1"}),"Protected by industry-standard security measures"]})})]})})}const lt=({name:s,size:t=48,className:a=""})=>{const r=(s==null?void 0:s.split(" ").map(b=>b[0]).join("").toUpperCase().slice(0,2))||"?",n=["from-orange-400 to-pink-400","from-cyan-400 to-blue-400","from-purple-400 to-pink-400","from-green-400 to-cyan-400"],i=(s==null?void 0:s.charCodeAt(0))%n.length||0;return e.jsx("div",{className:`rounded-full bg-gradient-to-br ${n[i]} flex items-center justify-center text-white font-bold ${a}`,style:{width:t,height:t,fontSize:t/2.5},children:r})};function nt(s){if(!s)return"‚Äî";try{const t=new Date(s);return isNaN(t)?"‚Äî":t.toLocaleDateString()}catch{return"‚Äî"}}function ve(s,t="‚Äî"){if(s==null)return t;if(typeof s=="string"||typeof s=="number")return String(s);if(Array.isArray(s))return s.join(", ");if(typeof s=="object"){const{street:a,city:r,state:n,pincode:i}=s||{};if(a||r||n||i)return[a,r,n,i].filter(Boolean).join(", ");if(s.name)return ve(s.name,t);const b=Object.values(s).filter(N=>N!=null);return b.length?b.join(", "):t}return String(s)}function it({stockist:s,qrDataUrl:t,onPrint:a}){return e.jsxs("div",{className:"w-full max-w-4xl bg-white overflow-hidden mx-auto print:shadow-none relative",children:[e.jsxs("div",{className:"relative bg-gradient-to-r from-blue-600 to-blue-700 h-32 overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-2/3 h-full",children:e.jsxs("svg",{className:"absolute top-0 right-0 h-full w-full",viewBox:"0 0 800 200",preserveAspectRatio:"none",children:[e.jsx("path",{d:"M0,0 L800,0 L800,200 Q600,150 400,180 T0,160 Z",fill:"rgba(59, 130, 246, 0.3)"}),e.jsx("path",{d:"M0,20 L800,20 L800,200 Q600,160 400,190 T0,170 Z",fill:"rgba(29, 78, 216, 0.2)",className:"opacity-70"})]})}),e.jsx("div",{className:"relative z-10 px-6 py-4 flex items-center justify-between",children:e.jsx(_e,{className:"h-8 w-auto filter invert brightness-0 invert"})})]}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-8 px-8 py-6 -mt-12 relative z-20",children:[e.jsx("div",{className:"flex flex-col items-center md:w-1/3",children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-400 to-blue-600 rounded-full transform scale-110 opacity-20"}),s!=null&&s.profileImageUrl?e.jsx("img",{src:s==null?void 0:s.profileImageUrl,alt:`${ve(s==null?void 0:s.name,"profile")} profile`,className:"relative w-44 h-44 rounded-full object-cover border-8 border-white shadow-2xl"}):e.jsx("div",{className:"relative w-44 h-44 bg-gradient-to-br from-blue-100 to-blue-200 rounded-full flex items-center justify-center border-8 border-white shadow-2xl",children:e.jsx(lt,{name:ve(s==null?void 0:s.name,""),size:120})})]})}),e.jsxs("div",{className:"flex-1 md:w-2/3 bg-white rounded-2xl p-6",children:[e.jsx("div",{className:"inline-block bg-gradient-to-r from-blue-600 to-blue-700 text-white px-6 py-2 rounded-full mb-4 shadow-lg",children:e.jsx("span",{className:"font-bold text-sm uppercase tracking-wide",children:(s==null?void 0:s.roleType)||(s==null?void 0:s.designation)||"ID CARD"})}),e.jsx("h2",{className:"text-4xl font-extrabold text-blue-900 mb-2 uppercase tracking-wide",children:ve((s==null?void 0:s.contactPerson)||(s==null?void 0:s.name),"EMPLOYEE NAME")}),e.jsxs("div",{className:"space-y-3 mt-6",children:[e.jsxs("div",{className:"flex items-center border-b border-gray-200 pb-2",children:[e.jsx("span",{className:"font-bold text-gray-700 w-32",children:"Student Id"}),e.jsxs("span",{className:"text-gray-900 font-semibold",children:[": ",s!=null&&s._id?String(s._id).slice(-8):"00000000"]})]}),e.jsxs("div",{className:"flex items-center border-b border-gray-200 pb-2",children:[e.jsx("span",{className:"font-bold text-gray-700 w-32",children:"Date"}),e.jsxs("span",{className:"text-gray-900 font-semibold",children:[": ",nt(s==null?void 0:s.dob)]})]}),e.jsxs("div",{className:"flex items-center border-b border-gray-200 pb-2",children:[e.jsx("span",{className:"font-bold text-gray-700 w-32",children:"Address"}),e.jsxs("span",{className:"text-gray-900 font-semibold",children:[": ",ve((s==null?void 0:s.address)||(s==null?void 0:s.location),"N/A")]})]}),e.jsxs("div",{className:"flex items-center border-b border-gray-200 pb-2",children:[e.jsx("span",{className:"font-bold text-gray-700 w-32",children:"Phone"}),e.jsxs("span",{className:"text-gray-900 font-semibold",children:[":"," ",ve((s==null?void 0:s.phone)||(s==null?void 0:s.contactNo),"000-000-123456")]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"font-bold text-gray-700 w-32",children:"Blood Group"}),e.jsxs("span",{className:"text-gray-900 font-semibold",children:[": ",(s==null?void 0:s.bloodGroup)||"-"]})]})]}),e.jsx("div",{className:"mt-6 flex justify-end",children:t?e.jsx("img",{src:t,alt:"Barcode",className:"h-16 object-contain"}):e.jsx("div",{className:"h-16 w-48 bg-gray-200 flex items-center justify-center rounded",children:e.jsx("div",{className:"flex gap-0.5",children:[...Array(30)].map((r,n)=>e.jsx("div",{className:"w-1 bg-black",style:{height:`${Math.random()*40+20}px`}},n))})})})]})]}),e.jsx("div",{className:"relative bg-gradient-to-r from-blue-600 to-blue-700 h-20 overflow-hidden mt-4",children:e.jsxs("svg",{className:"absolute bottom-0 left-0 w-full h-full",viewBox:"0 0 800 100",preserveAspectRatio:"none",children:[e.jsx("path",{d:"M0,100 L0,40 Q200,20 400,40 T800,40 L800,100 Z",fill:"rgba(59, 130, 246, 0.3)"}),e.jsx("path",{d:"M0,100 L0,50 Q200,30 400,50 T800,50 L800,100 Z",fill:"rgba(29, 78, 216, 0.2)"})]})}),e.jsx("div",{className:"mt-6 print:hidden px-8 pb-6",children:e.jsx("button",{onClick:a,className:"w-full px-6 py-3 bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-lg shadow-lg hover:from-blue-700 hover:to-blue-800 transition-all duration-200 font-bold uppercase tracking-wide",children:"Print Card"})})]})}function ot(){var c,g,z,h,I;const[s,t]=l.useState([]),[a,r]=l.useState(!0),[n,i]=l.useState(null),[b,N]=l.useState({});l.useEffect(()=>{let C=!0;const d=async()=>{var f,v;r(!0),i(null);try{const L=re("token"),y=await Ce.get(q("/api/purchasing-card/requests"),{headers:L?{Authorization:`Bearer ${L}`}:{}});let _=null;try{const E=typeof window<"u"?localStorage.getItem("user"):null;if(E){const p=JSON.parse(E||"null"),M=p&&p.user?p.user:p;_=M&&(M._id||M.id||M.userId)?M._id||M.id||M.userId:null}}catch{_=null}let A=y.data.data||[];_&&(A=A.filter(E=>{try{return!Array.isArray(E.approvals)||E.approvals.length===0?!0:!E.approvals.some(p=>String(p.stockist)===String(_))}catch{return!0}})),C&&t(A)}catch(L){i(((v=(f=L.response)==null?void 0:f.data)==null?void 0:v.message)||L.message||"Failed to load requests")}finally{C&&r(!1)}};d();const x=setInterval(()=>{d()},8e3);let S=null;try{const f=re("token");f&&typeof window<"u"&&window.EventSource&&(S=new EventSource(q(`/api/purchasing-card/stream?token=${f}`)),S.addEventListener("newRequest",v=>{try{const L=JSON.parse(v.data);let y=null;try{const A=localStorage.getItem("user"),E=A?JSON.parse(A):null,p=E&&E.user?E.user:E;y=p&&(p._id||p.id||p.userId)?p._id||p.id||p.userId:null}catch{}y&&Array.isArray(L.approvals)&&L.approvals.some(A=>String(A.stockist)===String(y))||t(A=>A.some(E=>String(E._id)===String(L._id))?A:[L,...A])}catch(L){console.warn("Failed to parse SSE newRequest",L)}}),S.onerror=v=>{try{S.close()}catch{}})}catch{S=null}return()=>{C=!1;try{S&&S.close()}catch{}clearInterval(x)}},[]);const o=async C=>{var d,u;try{N(f=>({...f,[C]:!0}));const x=re("token"),S=await Ce.post(q(`/api/purchasing-card/approve/${C}`),{},{headers:x?{Authorization:`Bearer ${x}`}:{}});S.data&&S.data.success&&t(f=>f.filter(v=>String(v._id)!==String(C)))}catch(x){alert(((u=(d=x.response)==null?void 0:d.data)==null?void 0:u.message)||x.message||"Approval failed")}finally{N(x=>({...x,[C]:!1}))}},[m,w]=l.useState(null);return a?e.jsx("div",{children:"Loading approval requests..."}):n?e.jsx("div",{className:"text-red-600",children:n}):!s||s.length===0?e.jsx("div",{children:"No pending requests"}):e.jsxs("div",{className:"space-y-4",children:[s.map(C=>{var d,u,x,S,f,v,L;return e.jsxs("div",{onClick:()=>w(C),className:"p-4 border rounded-lg bg-white shadow-sm flex items-center justify-between cursor-pointer",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[(d=C.requesterDisplay)!=null&&d.photo?e.jsx("img",{src:C.requesterDisplay.photo,alt:"purchaser",className:"w-10 h-10 rounded-full object-cover"}):e.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-200 flex items-center justify-center text-sm font-semibold",children:((((u=C.requesterDisplay)==null?void 0:u.name)||((x=C.requester)==null?void 0:x.medicalName)||((S=C.requester)==null?void 0:S.email)||"?").split(" ").map(y=>y[0]).join("")||"?").slice(0,2).toUpperCase()}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold",children:((f=C.requesterDisplay)==null?void 0:f.name)||((v=C.requester)==null?void 0:v.medicalName)||((L=C.requester)==null?void 0:L.email)||"Unknown"}),e.jsxs("div",{className:"text-sm text-gray-500",children:["Requested on: ",new Date(C.createdAt).toLocaleString()]}),e.jsxs("div",{className:"text-sm text-gray-600",children:["Request ID: ",C._id]})]})]}),e.jsx("div",{children:e.jsx("button",{onClick:()=>o(C._id),disabled:b[C._id],className:"px-4 py-2 bg-teal-500 text-white rounded-lg",children:b[C._id]?"Approving...":"Approve"})})]},C._id)}),m&&e.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",onClick:()=>w(null),children:e.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full",onClick:C=>C.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center gap-4",children:[(c=m.requesterDisplay)!=null&&c.photo?e.jsx("img",{src:m.requesterDisplay.photo,className:"w-20 h-20 rounded-full object-cover"}):e.jsx("div",{className:"w-20 h-20 rounded-full bg-gray-200 flex items-center justify-center text-xl font-semibold",children:(((g=m.requesterDisplay)==null?void 0:g.name)||((z=m.requester)==null?void 0:z.medicalName)||"?").slice(0,2).toUpperCase()}),e.jsxs("div",{children:[e.jsx("div",{className:"font-bold text-lg",children:((h=m.requesterDisplay)==null?void 0:h.name)||((I=m.requester)==null?void 0:I.medicalName)}),e.jsxs("div",{className:"text-sm text-gray-500",children:["ID: ",m._id]})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsxs("p",{className:"text-sm",children:["Requested on:"," ",new Date(m.createdAt).toLocaleString()]}),e.jsxs("p",{className:"text-sm mt-2",children:["Approvals: ",(m.approvals||[]).length]})]}),e.jsx("div",{className:"mt-4 flex justify-end",children:e.jsx("button",{onClick:()=>{o(m._id),w(null)},className:"px-4 py-2 bg-teal-500 text-white rounded",children:"Approve"})})]})})]})}const bs=({name:s,size:t=48,className:a=""})=>{const r=(s==null?void 0:s.split(" ").map(b=>b[0]).join("").toUpperCase().slice(0,2))||"?",n=["from-orange-400 to-pink-400","from-cyan-400 to-blue-400","from-purple-400 to-pink-400","from-green-400 to-cyan-400"],i=(s==null?void 0:s.charCodeAt(0))%n.length||0;return e.jsx("div",{className:`rounded-full bg-gradient-to-br ${n[i]} flex items-center justify-center text-white font-bold ${a}`,style:{width:t,height:t,fontSize:t/2.5},children:r})},dt=()=>e.jsxs("div",{className:"animate-pulse space-y-6 p-6",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-200 rounded-full"}),e.jsxs("div",{className:"space-y-2 flex-1",children:[e.jsx("div",{className:"h-6 bg-gray-200 rounded-full w-48"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded-full w-32"})]})]}),e.jsx("div",{className:"h-48 bg-gray-200 rounded-3xl"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[...Array(3)].map((s,t)=>e.jsx("div",{className:"h-32 bg-gray-200 rounded-3xl"},t))})]}),ct=({error:s,onRetry:t})=>e.jsxs("div",{className:"flex flex-col items-center justify-center p-8 bg-white rounded-3xl shadow-sm",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-red-50 flex items-center justify-center mb-4",children:e.jsx(ye,{className:"w-8 h-8 text-red-500"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Something went wrong"}),e.jsx("p",{className:"text-gray-500 text-center mb-4 text-sm",children:s}),t&&e.jsx("button",{onClick:t,className:"px-6 py-2.5 bg-gradient-to-r from-cyan-400 to-blue-500 text-white rounded-full hover:shadow-lg transition-all text-sm font-medium",children:"Try Again"})]}),mt=({company:s})=>{const t=()=>{s!=null&&s._id&&(window.location.href=`/company/${s._id}/products`)};return e.jsxs("div",{className:"bg-white rounded-3xl p-5 shadow-sm hover:shadow-md transition-all",children:[e.jsx("div",{className:"flex items-start justify-between mb-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-2xl bg-gradient-to-br from-orange-400 to-pink-400 flex items-center justify-center",children:e.jsx(ue,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 text-sm",children:s.name}),e.jsxs("p",{className:"text-xs text-gray-500",children:[s.products??0," products"]})]})]})}),e.jsx("button",{onClick:t,className:"w-full py-2.5 bg-gradient-to-r from-cyan-400 to-blue-500 text-white rounded-full text-sm font-medium hover:shadow-md transition-all",children:s!=null&&s._id?"View Details":"No Details"})]})},xt=({medicine:s})=>e.jsxs("div",{className:"bg-white rounded-3xl p-5 shadow-sm hover:shadow-md transition-all",children:[e.jsx("div",{className:"flex items-start justify-between mb-3",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-2xl bg-gradient-to-br from-cyan-400 to-blue-500 flex items-center justify-center",children:e.jsx(ne,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-gray-900 text-sm",children:s.name}),e.jsx("p",{className:"text-xs text-gray-500",children:s.company||""})]})]})}),e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("div",{className:"px-3 py-1.5 bg-orange-50 rounded-full",children:e.jsx("span",{className:"text-orange-600 font-bold text-sm",children:s.price||""})}),e.jsxs("span",{className:"text-xs text-gray-500",children:["Stock: ",s.stock??0]})]})]}),ut=({staff:s})=>{const t=()=>{s!=null&&s._id&&(window.location.href=`/staff/${s._id}`)};return e.jsxs("div",{className:"bg-white rounded-3xl p-5 shadow-sm hover:shadow-md transition-all",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(bs,{name:s.fullName||s.name||"S",size:48}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-gray-900 text-sm",children:s.fullName||s.name}),e.jsx("p",{className:"text-xs text-gray-500",children:s.role})]})]}),e.jsx("div",{className:"text-xs text-gray-600 mb-3",children:s.phone||""}),e.jsx("button",{onClick:t,className:"w-full py-2.5 bg-gradient-to-r from-orange-400 to-yellow-500 text-white rounded-full text-sm font-medium hover:shadow-md transition-all",children:"View Profile"})]})},Ue=({icon:s,label:t,value:a,gradient:r})=>e.jsxs("div",{className:"bg-white rounded-3xl p-6 shadow-sm",children:[e.jsx("div",{className:`w-12 h-12 rounded-2xl bg-gradient-to-br ${r} flex items-center justify-center mb-3`,children:e.jsx(s,{className:"w-6 h-6 text-white"})}),e.jsx("div",{className:"text-2xl font-bold text-gray-900 mb-1",children:a}),e.jsx("div",{className:"text-sm text-gray-500",children:t})]});function ht(){const s=Z(),[t]=Qe(),a=t.get("id")||null,[r,n]=l.useState(null),[i,b]=l.useState([]),[N,o]=l.useState([]),[m,w]=l.useState([]),[c,g]=l.useState(!1),[z,h]=l.useState(""),[I,C]=l.useState("medicines"),[d,u]=l.useState(""),[x,S]=l.useState(!1),[f,v]=l.useState(!1),[L,y]=l.useState({}),_=l.useMemo(()=>({companies:i.length,medicines:N.length,staff:m.length}),[i.length,N.length,m.length]),A=l.useMemo(()=>r&&(r.medicalName||r.contactPerson||r.name||r.companyName||r.ownerName||r.fullName||r.email||r.phone)||"Unnamed Stockist",[r]),E=l.useCallback((T,k=["name"])=>{if(!d)return T||[];const R=d.trim().toLowerCase();return(T||[]).filter(F=>k.some(D=>String((F==null?void 0:F[D])||"").toLowerCase().includes(R)))},[d]),p=l.useMemo(()=>({companies:E(i,["name"]),medicines:E(N,["name"]),staff:E(m,["fullName","name"]),approvals:[]}),[i,N,m,E]),M=(T,k)=>{if(!T)return!1;const R=[];try{Array.isArray(T.stockists)&&R.push(...T.stockists),T.stockist&&R.push(T.stockist),T.stockistId&&R.push(T.stockistId),T.seller&&R.push(T.seller),T.sellerId&&R.push(T.sellerId),T.vendor&&R.push(T.vendor),T.vendorId&&R.push(T.vendorId),T.supplier&&R.push(T.supplier),T.supplierId&&R.push(T.supplierId)}catch{}return R.some(F=>{const D=(F==null?void 0:F._id)||(F==null?void 0:F.id)||F;return String(D)===String(k)})},G=l.useCallback(async()=>{g(!0),h("");try{const T=re("token"),k=T?{Authorization:`Bearer ${T}`}:{},F=await(await fetch(q("/api/stockist"),{headers:k})).json().catch(()=>({})),D=(F==null?void 0:F.data)||[];let j=null,B=null;try{B=typeof window<"u"?JSON.parse(localStorage.getItem("user")||"null"):null}catch{}B&&B.user&&(B=B.user);const H=new Set,W=new Set,P=new Set;B&&([B._id,B.id,B==null?void 0:B.userId].filter(Boolean).forEach(U=>H.add(String(U))),(B.email?[B.email]:[]).filter(Boolean).forEach(U=>W.add(String(U).toLowerCase())),(B.phone?[B.phone]:[]).filter(Boolean).forEach(U=>P.add(String(U))));const Q=U=>{var xe;if(U._id&&H.has(String(U._id))||U.id&&H.has(String(U.id)))return!0;const le=[U.email,U.ownerEmail,(xe=U.user)==null?void 0:xe.email];for(const ae of le.filter(Boolean))if(W.has(String(ae).toLowerCase()))return!0;const te=[U.phone,U.contactPhone,U.mobile];for(const ae of te.filter(Boolean))if(P.has(String(ae)))return!0;return!1};if(a&&a!=="me"?j=D.find(U=>String(U._id)===String(a)||String(U.id)===String(a)):(B&&(j=D.find(U=>Q(U))),!j&&D.length>0&&(j=D[0])),!j&&B&&(B.medicalName||B.druglicenseNo||B.ownerName||B.companyName)&&(j=B),!j)throw new Error("Stockist not found");n(j);const[Y,ee,ce]=await Promise.all([fetch(q("/api/company"),{headers:k}),fetch(q("/api/medicine"),{headers:k}),fetch(q(`/api/staff?stockist=${j._id}`),{headers:k})]),[se,me,we]=await Promise.all([Y.json().catch(()=>({})),ee.json().catch(()=>({})),ce.json().catch(()=>({}))]),Te=(se==null?void 0:se.data)||[],ke=(me==null?void 0:me.data)||[],Be=(we==null?void 0:we.data)||[],Ke=Te.filter(U=>{try{return Array.isArray(U.stockists)?U.stockists.some(te=>String((te==null?void 0:te._id)||te)===String(j._id)):[U.stockist,U.stockistId,U.seller,U.sellerId,U.vendor,U.vendorId,U.supplier,U.supplierId].some(te=>te&&String(te._id||te.id||te)===String(j._id))}catch{return!1}}),O=ke.filter(U=>M(U,j._id));b(Ke),o(O),w(Be)}catch(T){console.error("Error loading stockist data:",T),h(T.message||"Failed to load data")}finally{g(!1)}},[a]);l.useEffect(()=>{G()},[G]);const $=()=>{S(!0),setTimeout(()=>S(!1),1e3),window.location.reload()},V=l.useMemo(()=>{if(!(r!=null&&r._id))return null;const T=`${window.location.origin}/stockist/${r._id}`;return`https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=${encodeURIComponent(T)}`},[r]),K=[{key:"medicines",label:"Medicines",icon:ne,gradient:"from-cyan-400 to-blue-500"},{key:"companies",label:"Companies",icon:ue,gradient:"from-orange-400 to-pink-400"},{key:"staff",label:"Staff",icon:he,gradient:"from-purple-400 to-pink-400"},{key:"approvals",label:"Approvals",icon:pe,gradient:"from-teal-400 to-cyan-400"}],J=()=>{if(I==="approvals")return e.jsx("div",{className:"grid grid-cols-1 gap-4",children:e.jsx(ot,{})});const T=p[I];return!T||T.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center p-12 bg-gray-50 rounded-3xl",children:[e.jsxs("div",{className:"w-16 h-16 bg-white rounded-full flex items-center justify-center mb-4 shadow-sm",children:[I==="companies"&&e.jsx(ue,{className:"w-8 h-8 text-gray-300"}),I==="medicines"&&e.jsx(ne,{className:"w-8 h-8 text-gray-300"}),I==="staff"&&e.jsx(he,{className:"w-8 h-8 text-gray-300"})]}),e.jsxs("h3",{className:"text-base font-semibold text-gray-900 mb-2",children:["No ",I," found"]}),e.jsx("p",{className:"text-gray-500 text-center text-sm",children:d?`No ${I} match your search.`:`No ${I} available yet.`})]}):e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4",children:[I==="companies"&&T.map(k=>e.jsx(mt,{company:k},k._id||k.id||k.name)),I==="medicines"&&T.map(k=>e.jsx(xt,{medicine:k},k._id||k.id||k.name)),I==="staff"&&T.map(k=>e.jsx(ut,{staff:k},k._id||k.id||k.fullName))]})};return c?e.jsx("div",{className:"min-h-screen p-4 lg:p-6 bg-gradient-to-b from-gray-50 to-white",children:e.jsx("div",{className:"max-w-7xl mx-auto",children:e.jsx(dt,{})})}):z?e.jsx("div",{className:"min-h-screen p-4 lg:p-6 bg-gradient-to-b from-gray-50 to-white flex items-center justify-center",children:e.jsx("div",{className:"max-w-md w-full",children:e.jsx(ct,{error:z,onRetry:$})})}):e.jsx("div",{className:"min-h-screen p-4 lg:p-6 bg-gradient-to-b from-gray-50 to-white",children:e.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-3xl shadow-sm p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsx("button",{className:"w-10 h-10 rounded-full bg-gray-100 flex items-center justify-center hover:bg-gray-200 transition-colors",children:e.jsx(Pe,{className:"w-5 h-5 text-gray-600"})})}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(bs,{name:A,size:64,className:"shadow-md"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-1",children:A}),e.jsx("p",{className:"text-sm text-gray-500",children:(r==null?void 0:r.email)||(r==null?void 0:r.contactPerson)||"‚Äî"}),(r==null?void 0:r.location)&&e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:r.location})]})]})]}),e.jsx(it,{stockist:r&&{...r,contactPerson:r.contactPerson||r.medicalName||A},qrDataUrl:V,onPrint:()=>window.print()}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(Ue,{icon:ue,label:"Companies",value:_.companies,gradient:"from-orange-400 to-pink-400"}),e.jsx(Ue,{icon:ne,label:"Medicines",value:_.medicines,gradient:"from-cyan-400 to-blue-500"}),e.jsx(Ue,{icon:he,label:"Staff Members",value:_.staff,gradient:"from-purple-400 to-pink-400"})]}),e.jsxs("div",{className:"bg-white rounded-3xl shadow-sm",children:[e.jsx("div",{className:"p-6 border-b border-gray-100",children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center justify-between gap-4",children:[e.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2",children:K.map(({key:T,label:k,icon:R,gradient:F})=>e.jsxs("button",{onClick:()=>C(T),className:`flex items-center gap-2 px-4 py-2 rounded-full font-medium transition-all whitespace-nowrap text-sm ${I===T?`bg-gradient-to-r ${F} text-white shadow-md`:"text-gray-600 bg-gray-100 hover:bg-gray-200"}`,children:[e.jsx(R,{size:16}),e.jsx("span",{children:k}),e.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full ${I===T?"bg-white/30":"bg-white"}`,children:p[T].length})]},T))}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"relative flex-1 lg:flex-none",children:[e.jsx(cs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:16}),e.jsx("input",{type:"text",placeholder:`Search ${I}...`,value:d,onChange:T=>u(T.target.value),className:"pl-10 pr-4 py-2.5 border border-gray-200 bg-gray-50 rounded-full focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 outline-none transition-all w-full lg:w-64 text-sm"})]}),e.jsxs("button",{onClick:()=>s("/adminCreateStaff"),className:"hidden md:inline-flex items-center gap-2 px-4 py-2.5 bg-gradient-to-r from-orange-400 to-yellow-500 text-white rounded-full text-sm font-medium hover:shadow-md transition-all",children:[e.jsx(he,{className:"w-4 h-4"}),"Add Staff"]}),e.jsx("button",{onClick:()=>s("/adminCreateStaff"),className:"md:hidden w-10 h-10 rounded-full bg-orange-400 flex items-center justify-center text-white hover:shadow-md transition-colors","aria-label":"Add staff",children:e.jsx(he,{className:"w-4 h-4"})}),e.jsx("button",{onClick:$,className:"w-10 h-10 rounded-full bg-gray-100 flex items-center justify-center hover:bg-gray-200 transition-colors",children:e.jsx(ks,{size:18,className:`text-gray-600 ${x?"animate-spin":""}`})})]})]})}),e.jsx("div",{className:"p-6",children:J()})]}),e.jsxs("div",{className:"px-2",children:[e.jsxs("button",{onClick:()=>v(T=>!T),className:"text-sm text-gray-500 underline",children:[f?"Hide":"Show"," debug responses"]}),f&&e.jsx("pre",{className:"mt-4 p-4 bg-white rounded-2xl border overflow-auto text-xs max-h-64",children:JSON.stringify(L,null,2)})]})]})})}function gt(){const[s]=Qe(),t=Z(),a=s.get("id"),[r,n]=l.useState(""),[i,b]=l.useState(!1),[N,o]=l.useState(""),[m,w]=l.useState(null),c=async g=>{g&&g.preventDefault(),b(!0),o("");try{const z=await fetch(q("/api/stockist/verify-password"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:a,password:r})}),h=await z.json().catch(()=>({}));if(!z.ok)throw new Error(h.message||"Invalid");w(h.data)}catch(z){o(String(z.message||z))}finally{b(!1)}};if(m){const g=m.address||{};return e.jsx("div",{className:"min-h-screen p-6 bg-slate-50 flex items-center justify-center",children:e.jsxs("div",{className:"bg-white rounded-xl shadow p-6 w-full max-w-md",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("img",{src:m.profileImageUrl||"/vite.svg",alt:"profile",className:"w-20 h-20 rounded-full object-cover"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold",children:m.name}),e.jsx("div",{className:"text-sm text-gray-600",children:m.roleType}),e.jsx("div",{className:"text-sm text-gray-600",children:m.firmName})]})]}),e.jsxs("div",{className:"mt-4 grid grid-cols-1 gap-2",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Address:"})," ",g.street||""," ",g.city||""," ",g.state||""," ",g.pincode||""]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Blood Group:"})," ",m.bloodGroup||"N/A"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"CNTX Number:"})," ",m.cntxNumber||"N/A"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Phone:"})," ",m.phone||"N/A"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Email:"})," ",m.email||"N/A"]})]}),e.jsx("div",{className:"mt-6 flex gap-2",children:e.jsx("button",{className:"px-4 py-2 bg-blue-600 text-white rounded",onClick:()=>t(-1),children:"Close"})})]})})}return e.jsx("div",{className:"min-h-screen p-6 bg-slate-50 flex items-center justify-center",children:e.jsxs("form",{onSubmit:c,className:"bg-white rounded-xl shadow p-6 w-full max-w-md",children:[e.jsx("h2",{className:"text-lg font-bold mb-2",children:"Verify to view details"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Enter stockist password to view full details."}),e.jsx("input",{type:"password",value:r,onChange:g=>n(g.target.value),placeholder:"Stockist password",className:"w-full rounded-xl border px-4 py-3 mb-3"}),N&&e.jsx("div",{className:"text-red-500 mb-2",children:N}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{type:"submit",disabled:i,className:"px-4 py-2 bg-blue-600 text-white rounded",children:i?"Verifying...":"Verify"}),e.jsx("button",{type:"button",onClick:()=>t(-1),className:"px-4 py-2 border rounded",children:"Cancel"})]})]})})}const ft=()=>{const s=Z(),[t,a]=l.useState(!0),[r,n]=l.useState("Thanks for registering. Your documents are under verification. We will notify you once your account is approved.");return l.useEffect(()=>{let i=null;try{i=localStorage.getItem("pendingStockistId")}catch{i=null}if(!i){a(!1);return}let b=!1;const N=async()=>{try{const w=await fetch((g=>q(g))(`/api/stockist/${i}`)),c=await w.json().catch(()=>({}));if(w.ok&&c&&c.data){if(c.data.approved){try{localStorage.removeItem("pendingStockistId")}catch{}s("/stockist-login");return}else if(c.data.declined){n("Document verification failed"),a(!1);return}}}catch{}b||setTimeout(N,3e3)};return N(),()=>{b=!0}},[s]),e.jsx("div",{className:"min-h-screen flex items-center justify-center p-6",children:e.jsxs("div",{className:"max-w-md w-full bg-white p-6 rounded-xl shadow-lg text-center",children:[e.jsx("h1",{className:"text-2xl font-bold mb-4",children:r==="Document verification failed"?"Verification Failed":"Documents under verification"}),e.jsx("p",{className:"text-gray-600 mb-4",children:r}),r!=="Document verification failed"&&e.jsx("p",{className:"text-sm text-gray-400",children:"You can close this page and wait for an email or login later."})]})})};function pt(){const[s,t]=l.useState(""),[a,r]=l.useState(null),[n,i]=l.useState(!1),b=Z(),N=async o=>{if(o&&o.preventDefault(),!s)return r({ok:!1,msg:"Please enter a valid email."});i(!0),r(null);try{const m=await fetch(q("/api/auth/forgot-password"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:s})}),w=await m.json().catch(()=>({}));if(m.ok){const c=(w==null?void 0:w.message)||"If an account exists, a reset email has been sent.",g=(w==null?void 0:w.debug)||null;r({ok:!0,msg:c,debug:g})}else{const c=(w==null?void 0:w.message)||"Something went wrong. Please try again.";r({ok:!1,msg:c})}}catch{r({ok:!1,msg:"Network error. Please try again."})}finally{i(!1)}};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-teal-50 via-cyan-50 to-blue-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"w-full max-w-md",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-gradient-to-br from-teal-500 to-cyan-600 rounded-2xl mb-4 shadow-lg",children:e.jsx(Me,{className:"w-8 h-8 text-white"})}),e.jsx("h1",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Forgot Password?"}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Don't worry ‚Äî we'll help you reset it."})]}),e.jsxs("div",{className:"bg-white rounded-3xl shadow-xl p-8 backdrop-blur-sm border border-white/50",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-2",children:"Reset Your Password"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Enter your email address and we'll send you a secure link to reset your password."})]}),e.jsxs("form",{onSubmit:N,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Email Address"}),e.jsxs("div",{className:"relative",children:[e.jsx(ze,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"email",value:s,onChange:o=>t(o.target.value),placeholder:"Enter your email address",className:"w-full pl-12 pr-4 py-4 border border-gray-200 rounded-2xl focus:ring-2 focus:ring-teal-500 focus:border-transparent transition-all duration-200 text-gray-800 placeholder-gray-400"})]})]}),e.jsx("button",{type:"submit",disabled:n||!s,className:"w-full bg-gradient-to-r from-teal-500 to-cyan-600 hover:from-teal-600 hover:to-cyan-700 disabled:from-gray-300 disabled:to-gray-400 text-white font-semibold py-4 rounded-2xl transition-all duration-200 transform hover:scale-[1.02] disabled:scale-100 shadow-lg disabled:shadow-none",children:n?e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),e.jsx("span",{children:"Sending Reset Link..."})]}):"Send Reset Link"}),a&&e.jsxs("div",{className:`flex items-start space-x-3 p-4 rounded-2xl ${a.ok?"bg-emerald-50 border border-emerald-200":"bg-red-50 border border-red-200"}`,children:[a.ok?e.jsx(Ie,{className:"w-5 h-5 text-emerald-600 mt-0.5 flex-shrink-0"}):e.jsx(ye,{className:"w-5 h-5 text-red-600 mt-0.5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:`text-sm ${a.ok?"text-emerald-800":"text-red-800"}`,children:a.msg}),a.debug&&e.jsxs("div",{className:"mt-2 text-sm",children:[a.debug.resetUrl&&e.jsx("p",{children:e.jsx("a",{href:a.debug.resetUrl,className:"text-teal-600 hover:underline",target:"_blank",rel:"noreferrer",children:"Open reset link"})}),a.debug.previewUrl&&e.jsx("p",{children:e.jsx("a",{href:a.debug.previewUrl,className:"text-teal-600 hover:underline",target:"_blank",rel:"noreferrer",children:"Open mail preview"})})]})]})]}),e.jsx("div",{className:"text-center pt-4 border-t border-gray-100",children:e.jsxs("button",{type:"button",onClick:()=>b("/login"),className:"inline-flex items-center space-x-2 text-sm text-gray-600 hover:text-teal-600 transition-colors duration-200",children:[e.jsx(Pe,{className:"w-4 h-4"}),e.jsx("span",{children:"Back to Login"})]})})]})]}),e.jsx("div",{className:"text-center mt-6",children:e.jsx("p",{className:"text-xs text-gray-500",children:"Need help? Contact our support team"})})]})})}function bt(){const[s]=Qe(),t=Z(),a=s.get("token")||"",r=s.get("email")||"",[n,i]=l.useState(""),[b,N]=l.useState(""),[o,m]=l.useState(!1),[w,c]=l.useState(null),[g,z]=l.useState(!1),[h,I]=l.useState(0),[C,d]=l.useState([]);l.useEffect(()=>{const f=[];let v=0;n.length>=8?v+=25:n.length>0&&f.push("At least 8 characters"),/[A-Z]/.test(n)?v+=25:n.length>0&&f.push("One uppercase letter"),/[a-z]/.test(n)?v+=25:n.length>0&&f.push("One lowercase letter"),/[0-9]/.test(n)?v+=25:n.length>0&&f.push("One number"),I(v),d(f)},[n]);const u=async()=>{if(h<100)return c({ok:!1,msg:"Please meet all password requirements"});if(!a||!r)return c({ok:!1,msg:"Missing reset token or email. Use the link from your email."});if(n!==b)return c({ok:!1,msg:"Passwords do not match."});z(!0),c(null);try{const f=await fetch(q("/api/auth/reset-password"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:a,email:r,newPassword:n})}),v=await f.json().catch(()=>({}));f.ok?(c({ok:!0,msg:(v==null?void 0:v.message)||"Password updated successfully. Redirecting to login..."}),setTimeout(()=>t("/login"),1500)):c({ok:!1,msg:(v==null?void 0:v.message)||"Failed to reset password"})}catch{c({ok:!1,msg:"Network error. Please try again."})}finally{z(!1)}},x=()=>h>=75?"bg-emerald-500":h>=50?"bg-yellow-500":h>=25?"bg-orange-500":"bg-red-500",S=()=>h>=75?"Strong":h>=50?"Good":h>=25?"Fair":"Weak";return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-teal-50 via-cyan-50 to-blue-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"w-full max-w-md",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-gradient-to-br from-teal-500 to-cyan-600 rounded-2xl mb-4 shadow-lg",children:e.jsx(Me,{className:"w-8 h-8 text-white"})}),e.jsx("h1",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Reset Password"}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Create a new secure password"})]}),e.jsxs("div",{className:"bg-white rounded-3xl shadow-xl p-8 backdrop-blur-sm border border-white/50",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-2",children:"Set New Password"}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Creating a new password for ",e.jsx("span",{className:"font-medium text-teal-600",children:r})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"New Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(Ve,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:o?"text":"password",value:n,onChange:f=>i(f.target.value),placeholder:"Enter your new password",className:"w-full pl-12 pr-12 py-4 border border-gray-200 rounded-2xl focus:ring-2 focus:ring-teal-500 focus:border-transparent transition-all duration-200 text-gray-800 placeholder-gray-400"}),e.jsx("button",{type:"button",onClick:()=>m(!o),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:o?e.jsx(We,{className:"w-5 h-5"}):e.jsx(Je,{className:"w-5 h-5"})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Confirm Password"}),e.jsx("div",{className:"relative",children:e.jsx("input",{type:o?"text":"password",value:b,onChange:f=>N(f.target.value),placeholder:"Re-enter new password",className:"w-full pl-4 pr-12 py-4 border border-gray-200 rounded-2xl focus:ring-2 focus:ring-teal-500 focus:border-transparent transition-all duration-200 text-gray-800 placeholder-gray-400"})})]}),n&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Password Strength"}),e.jsx("span",{className:`text-sm font-medium ${h>=75?"text-emerald-600":h>=50?"text-yellow-600":h>=25?"text-orange-600":"text-red-600"}`,children:S()})]}),e.jsx("div",{className:"h-2 bg-gray-200 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full ${x()} transition-all duration-300`,style:{width:`${h}%`}})}),e.jsx("div",{className:"space-y-2",children:[{text:"At least 8 characters",met:n.length>=8},{text:"One uppercase letter",met:/[A-Z]/.test(n)},{text:"One lowercase letter",met:/[a-z]/.test(n)},{text:"One number",met:/[0-9]/.test(n)}].map((f,v)=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:`w-4 h-4 rounded-full flex items-center justify-center ${f.met?"bg-emerald-100":"bg-gray-100"}`,children:f.met&&e.jsx(Ss,{className:"w-3 h-3 text-emerald-600"})}),e.jsx("span",{className:`text-xs ${f.met?"text-emerald-600":"text-gray-500"}`,children:f.text})]},v))})]}),e.jsx("button",{onClick:u,disabled:g||h<100,className:"w-full bg-gradient-to-r from-teal-500 to-cyan-600 hover:from-teal-600 hover:to-cyan-700 disabled:from-gray-300 disabled:to-gray-400 text-white font-semibold py-4 rounded-2xl transition-all duration-200 transform hover:scale-[1.02] disabled:scale-100 shadow-lg disabled:shadow-none",children:g?e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),e.jsx("span",{children:"Resetting Password..."})]}):"Reset Password"}),w&&e.jsxs("div",{className:`flex items-start space-x-3 p-4 rounded-2xl ${w.ok?"bg-emerald-50 border border-emerald-200":"bg-red-50 border border-red-200"}`,children:[w.ok?e.jsx(Ie,{className:"w-5 h-5 text-emerald-600 mt-0.5 flex-shrink-0"}):e.jsx(ye,{className:"w-5 h-5 text-red-600 mt-0.5 flex-shrink-0"}),e.jsx("p",{className:`text-sm ${w.ok?"text-emerald-800":"text-red-800"}`,children:w.msg})]})]})]}),e.jsx("div",{className:"bg-white/50 backdrop-blur-sm rounded-2xl p-4 mt-6 border border-white/50",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(Me,{className:"w-5 h-5 text-teal-600 mt-0.5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-800 mb-1",children:"Security Tip"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Use a unique password that you haven't used elsewhere. Consider using a password manager to generate and store secure passwords."})]})]})})]})})}function jt(){const s=Z(),[t,a]=l.useState({fullName:"",address:"",contactNo:"",aadharImage:null,photo:null}),[r,n]=l.useState({aadharImage:null,photo:null}),[i,b]=l.useState({}),[N,o]=l.useState(!1),[m,w]=l.useState(null),[c,g]=l.useState(null),[z,h]=l.useState([]),[I,C]=l.useState([]),[d,u]=l.useState(!1),[x,S]=l.useState(""),[f,v]=l.useState(!1),L=p=>{const{name:M,value:G}=p.target;a($=>({...$,[M]:G})),i[M]&&b($=>({...$,[M]:""}))},y=(p,M)=>{const G=p.target.files[0];if(G){if(!G.type.startsWith("image/")){b(V=>({...V,[M]:"Please upload a valid image file"}));return}if(G.size>5*1024*1024){b(V=>({...V,[M]:"File size should be less than 5MB"}));return}a(V=>({...V,[M]:G}));const $=new FileReader;$.onloadend=()=>{n(V=>({...V,[M]:$.result}))},$.readAsDataURL(G),i[M]&&b(V=>({...V,[M]:""}))}},_=()=>{const p={};return t.fullName.trim()?t.fullName.trim().length<3&&(p.fullName="Name must be at least 3 characters"):p.fullName="Full name is required",t.address.trim()?t.address.trim().length<10&&(p.address="Please enter a complete address"):p.address="Address is required",t.contactNo.trim()?/^[6-9]\d{9}$/.test(t.contactNo.trim())||(p.contactNo="Please enter a valid 10-digit mobile number"):p.contactNo="Contact number is required",t.aadharImage||(p.aadharImage="Aadhar card image is required"),t.photo||(p.photo="Photo is required"),b(p),Object.keys(p).length===0},A=async()=>{var p,M,G;if(_()){if(!Array.isArray(I)||I.length<3){b($=>({...$,stockists:"Please select at least 3 stockists to notify"}));return}o(!0),w(null);try{const $=new FormData;$.append("fullName",t.fullName.trim()),$.append("address",t.address.trim()),$.append("contactNo",t.contactNo.trim()),$.append("aadharImage",t.aadharImage),$.append("photo",t.photo);const V=localStorage.getItem("token"),K=q("/api/purchaser"),J=V?`${String(V).slice(0,8)}...`:null;console.debug("Purchaser create request ->",{url:K,token:!!V,tokenPreview:J,pageProtocol:typeof window<"u"?window.location.protocol:null,online:typeof navigator<"u"?navigator.onLine:null});const T=await $s("/api/purchaser",$,{headers:V?{Authorization:`Bearer ${V}`}:{},credentials:"omit"});try{T&&T.data&&T.data._id&&localStorage.setItem("pendingPurchaserId",T.data._id)}catch{}const k=q("/api/purchasing-card/request");console.debug("Purchasing-card request ->",{url:k,token:!!V,tokenPreview:J});const R=await zs("/api/purchasing-card/request",{stockistIds:I,purchaserId:(p=T.data)==null?void 0:p._id,requester:{fullName:t.fullName,email:t.email},purchaserData:{fullName:t.fullName,address:t.address,contactNo:t.contactNo,aadharImage:(M=T.data)==null?void 0:M.aadharImage,photo:(G=T.data)==null?void 0:G.photo}},{headers:V?{Authorization:`Bearer ${V}`}:{},credentials:"omit"});try{R&&R.requestId&&localStorage.setItem("pendingPurchasingRequestId",R.requestId)}catch{}try{s("/purchasermiddle")}catch{}w("success"),a({fullName:"",address:"",contactNo:"",aadharImage:null,photo:null}),n({aadharImage:null,photo:null}),C([])}catch($){try{const V={createUrl:q("/api/purchaser"),reqUrl:q("/api/purchasing-card/request"),tokenPreview:localStorage.getItem("token")?`${String(localStorage.getItem("token")).slice(0,8)}...`:null,pageProtocol:typeof window<"u"?window.location.protocol:null,online:typeof navigator<"u"?navigator.onLine:null};console.error("Error submitting:",$,V)}catch{console.error("Error submitting (failed to build debug ctx):",$)}try{const V=$&&$.status,K=$&&$.body&&$.body.message;if($&&$.name==="AbortError"){g("The request timed out. The server may be slow or unreachable ‚Äî try again in a moment."),w("timeout");return}V===501||typeof K=="string"&&K.includes("Route not implemented on this deployment")?(g("The server deployment does not support purchaser registration at this time. Please try again later or contact support."),w("route-missing")):w("error")}catch{w("error")}}finally{o(!1)}}};l.useEffect(()=>{try{console.debug("Resolved API base:",q("/"))}catch{}(async()=>{u(!0);try{const G=await(await fetch(q("/api/stockist"))).json();h(G.data||[])}catch(M){console.warn("Failed to load stockists",M.message)}finally{u(!1)}})()},[]);const E=p=>{C(M=>M.includes(p)?M.filter(G=>G!==p):[...M,p]),b(M=>({...M,stockists:""}))};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 py-12 px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"max-w-3xl mx-auto",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl overflow-hidden",children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 px-8 py-6",children:[e.jsxs("h2",{className:"text-3xl font-bold text-white flex items-center gap-3",children:[e.jsx(fe,{className:"w-8 h-8"}),"Purchaser Registration"]}),e.jsx("p",{className:"text-blue-100 mt-2",children:"Please fill in all the required information"})]}),e.jsxs("div",{className:"px-8 py-6 space-y-6",children:[m==="success"&&e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 flex items-start gap-3",children:[e.jsx(Ie,{className:"w-5 h-5 text-green-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-green-800 font-semibold",children:"Registration Successful!"}),e.jsx("p",{className:"text-green-700 text-sm",children:"Purchaser has been registered successfully."})]})]}),m==="error"&&e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 flex items-start gap-3",children:[e.jsx(ye,{className:"w-5 h-5 text-red-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-red-800 font-semibold",children:"Registration Failed"}),e.jsx("p",{className:"text-red-700 text-sm",children:c||"There was an error submitting the form. Please try again."})]})]}),m==="route-missing"&&e.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 flex items-start gap-3",children:[e.jsx(ye,{className:"w-5 h-5 text-yellow-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-yellow-800 font-semibold",children:"Unavailable"}),e.jsx("p",{className:"text-yellow-700 text-sm",children:c})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:[e.jsx(fe,{className:"w-4 h-4 inline mr-2"}),"Full Name *"]}),e.jsx("input",{type:"text",name:"fullName",value:t.fullName,onChange:L,className:`w-full px-4 py-3 border ${i.fullName?"border-red-300":"border-gray-300"} rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition`,placeholder:"Enter full name"}),i.fullName&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:i.fullName})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:[e.jsx(be,{className:"w-4 h-4 inline mr-2"}),"Address *"]}),e.jsx("textarea",{name:"address",value:t.address,onChange:L,rows:"3",className:`w-full px-4 py-3 border ${i.address?"border-red-300":"border-gray-300"} rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition resize-none`,placeholder:"Enter complete address"}),i.address&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:i.address})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:[e.jsx(je,{className:"w-4 h-4 inline mr-2"}),"Contact Number *"]}),e.jsx("input",{type:"tel",name:"contactNo",value:t.contactNo,onChange:L,maxLength:"10",className:`w-full px-4 py-3 border ${i.contactNo?"border-red-300":"border-gray-300"} rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition`,placeholder:"Enter 10-digit mobile number"}),i.contactNo&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:i.contactNo})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:[e.jsx(Cs,{className:"w-4 h-4 inline mr-2"}),"Aadhar Card Image *"]}),e.jsx("div",{className:`border-2 border-dashed ${i.aadharImage?"border-red-300":"border-gray-300"} rounded-lg p-4 text-center hover:border-blue-400 transition`,children:r.aadharImage?e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:r.aadharImage,alt:"Aadhar preview",className:"w-full h-40 object-cover rounded-lg"}),e.jsx("button",{type:"button",onClick:()=>{a(p=>({...p,aadharImage:null})),n(p=>({...p,aadharImage:null}))},className:"absolute top-2 right-2 bg-red-500 text-white rounded-full p-1 hover:bg-red-600",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}):e.jsxs(e.Fragment,{children:[e.jsx(ms,{className:"w-8 h-8 text-gray-400 mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Upload Aadhar Card"}),e.jsx("input",{type:"file",accept:"image/*",onChange:p=>y(p,"aadharImage"),className:"hidden",id:"aadharImage"}),e.jsx("label",{htmlFor:"aadharImage",className:"inline-block px-4 py-2 bg-blue-600 text-white rounded-lg cursor-pointer hover:bg-blue-700 transition text-sm",children:"Choose File"})]})}),i.aadharImage&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:i.aadharImage})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:[e.jsx(He,{className:"w-4 h-4 inline mr-2"}),"Photo *"]}),e.jsx("div",{className:`border-2 border-dashed ${i.photo?"border-red-300":"border-gray-300"} rounded-lg p-4 text-center hover:border-blue-400 transition`,children:r.photo?e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:r.photo,alt:"Photo preview",className:"w-full h-40 object-cover rounded-lg"}),e.jsx("button",{type:"button",onClick:()=>{a(p=>({...p,photo:null})),n(p=>({...p,photo:null}))},className:"absolute top-2 right-2 bg-red-500 text-white rounded-full p-1 hover:bg-red-600",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}):e.jsxs(e.Fragment,{children:[e.jsx(He,{className:"w-8 h-8 text-gray-400 mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Upload Photo"}),e.jsx("input",{type:"file",accept:"image/*",onChange:p=>y(p,"photo"),className:"hidden",id:"photo"}),e.jsx("label",{htmlFor:"photo",className:"inline-block px-4 py-2 bg-blue-600 text-white rounded-lg cursor-pointer hover:bg-blue-700 transition text-sm",children:"Choose File"})]})}),i.photo&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:i.photo})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Select Stockists to verify (choose at least 3)"}),e.jsxs("div",{className:"border rounded p-2",children:[e.jsxs("div",{className:"flex flex-wrap gap-2 mb-2",children:[I.length===0&&e.jsx("div",{className:"text-xs text-gray-400",children:"No stockists selected"}),I.map(p=>{const M=z.find($=>$._id===p)||{},G=M.contactPerson||M.name||M.medicalName||p;return e.jsxs("span",{className:"inline-flex items-center bg-blue-50 border border-blue-200 text-blue-700 px-2 py-0.5 rounded-full text-xs",children:[e.jsx("span",{className:"mr-2",children:G}),e.jsx("button",{type:"button",onClick:()=>E(p),className:"text-blue-500 hover:text-blue-700 rounded-full p-0.5","aria-label":`Remove ${G}`,children:"√ó"})]},p)})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:x,onChange:p=>{S(p.target.value),v(!0)},onFocus:()=>v(!0),placeholder:"Search stockists by name, email or phone",className:"w-full px-3 py-2 border border-gray-200 rounded focus:outline-none focus:ring-2 focus:ring-blue-300"}),f&&e.jsxs("div",{className:"absolute z-20 left-0 right-0 mt-1 bg-white border rounded max-h-48 overflow-auto shadow",children:[d?e.jsx("div",{className:"p-2 text-sm text-gray-500",children:"Loading stockists‚Ä¶"}):z.filter(p=>{const M=x.trim().toLowerCase();if(!M)return!0;const G=(p.contactPerson||p.name||p.medicalName||"").toLowerCase(),$=(p.email||"").toLowerCase(),V=(p.phone||"").toLowerCase();return G.includes(M)||$.includes(M)||V.includes(M)}).map(p=>{const M=p._id,G=p.contactPerson||p.name||p.medicalName||M,$=I.includes(M);return e.jsxs("button",{type:"button",onClick:()=>{$||E(M),S(""),v(!1)},className:`w-full text-left px-3 py-2 hover:bg-gray-50 flex items-center justify-between ${$?"opacity-60":""}`,children:[e.jsxs("div",{className:"text-sm",children:[e.jsx("div",{className:"font-medium",children:G}),e.jsx("div",{className:"text-xs text-gray-500",children:p.email||p.phone||p.location})]}),$&&e.jsx("div",{className:"text-xs text-green-600",children:"Selected"})]},M)}),z.length===0&&!d&&e.jsx("div",{className:"p-2 text-sm text-gray-500",children:"No stockists available"})]})]})]}),i.stockists&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:i.stockists})]}),e.jsx("div",{className:"pt-4",children:e.jsx("button",{type:"button",onClick:A,disabled:N,className:`w-full py-4 rounded-lg font-semibold text-white transition ${N?"bg-gray-400 cursor-not-allowed":"bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700"}`,children:N?"Submitting...":"Register Purchaser"})})]})]})})})}const Nt=()=>{Z();const[s,t]=l.useState([]),[a,r]=l.useState(!1),[n,i]=l.useState(null),[b,N]=l.useState({}),[o,m]=l.useState({}),w="admin_approved_stockists",c=async()=>{r(!0),i(null);try{const x=await fetch((v=>q(v))("/api/stockist")),S=await x.json();if(!x.ok)throw new Error(S.message||"Failed to load stockists");let f=S.data||[];try{const v=localStorage.getItem(w);if(v){const L=JSON.parse(v);Array.isArray(L)&&L.length&&(f=f.map(y=>L.includes(y._id)?{...y,approved:!0,status:"approved"}:y))}}catch(v){console.warn("Failed to read approved IDs from localStorage",v)}t(f)}catch(d){i(d.message||String(d))}finally{r(!1)}};l.useEffect(()=>{c()},[]);const g=!1,[z,h]=l.useState("");l.useEffect(()=>{},[g]);const I=async d=>{N(u=>({...u,[d]:!0}));try{let u=re("token");!u&&typeof localStorage<"u"&&(u=localStorage.getItem("token"));const x={"Content-Type":"application/json"};u&&(x.Authorization=`Bearer ${u}`);const S=!1,v=(A=>S?A:q(A))(`/api/stockist/${d}/approve`),y=await fetch(v,{method:"PATCH",headers:{...x,...{}},credentials:"include"}),_=await y.json();if(!y.ok){const A=(_==null?void 0:_.message)||`Approval failed (${y.status})`;throw new Error(A)}t(A=>A.map(E=>{var p;return E._id===d?{...E,approved:!0,approvedAt:(p=_.data)==null?void 0:p.approvedAt}:E}));try{const A=localStorage.getItem(w),E=A?JSON.parse(A):[];E.includes(d)||(E.push(d),localStorage.setItem(w,JSON.stringify(E)))}catch(A){console.warn("Failed to persist approved id",A)}await c()}catch(u){alert(u.message||String(u))}finally{N(u=>({...u,[d]:!1}))}},C=async d=>{m(u=>({...u,[d]:!0}));try{let u=re("token");!u&&typeof localStorage<"u"&&(u=localStorage.getItem("token"));const x={"Content-Type":"application/json"};u&&(x.Authorization=`Bearer ${u}`);const S=!1,v=(A=>S?A:q(A))(`/api/stockist/${d}/decline`),y=await fetch(v,{method:"PATCH",headers:{...x,...{}},credentials:"include"}),_=await y.json();if(!y.ok){const A=(_==null?void 0:_.message)||`Decline failed (${y.status})`;throw new Error(A)}t(A=>A.filter(E=>E._id!==d));try{const A=localStorage.getItem(w),p=(A?JSON.parse(A):[]).filter(M=>M!==d);localStorage.setItem(w,JSON.stringify(p))}catch(A){console.warn("Failed to remove declined id from localStorage",A)}}catch(u){alert(u.message||String(u))}finally{m(u=>({...u,[d]:!1}))}};return e.jsxs("div",{className:"p-6",children:[e.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Stockists (Admin)"}),g,a&&e.jsx("div",{children:"Loading..."}),n&&e.jsx("div",{className:"text-red-600",children:n}),e.jsx("div",{className:"space-y-3",children:s.map(d=>{const u=d.profileImageUrl||d.licenseImageUrl||null;return e.jsxs("div",{className:"p-4 border rounded flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[u?e.jsx("img",{src:u,alt:d.name||"stockist",className:`w-16 h-16 rounded-md object-cover border ${d.approved?"opacity-50 pointer-events-none":""}`}):e.jsx("div",{className:`w-16 h-16 rounded-md bg-gray-100 flex items-center justify-center text-sm text-gray-500 border ${d.approved?"opacity-50 pointer-events-none":""}`,children:"No image"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold",children:d.title||d.name||d.companyName}),e.jsx("div",{className:"text-sm text-gray-600",children:d.email||d.phone}),d.status==="approved"&&e.jsx("div",{className:"text-green-600 text-sm",children:"Approved"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[d.status==="processing"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"px-4 py-2 bg-blue-600 text-white rounded",onClick:()=>I(d._id),disabled:b[d._id],children:b[d._id]?"Approving...":"Approve"}),e.jsx("button",{className:"px-4 py-2 bg-red-600 text-white rounded",onClick:()=>C(d._id),disabled:o[d._id],children:o[d._id]?"Declining...":"Decline"})]}),d.approved&&e.jsx("button",{className:"px-4 py-2 bg-gray-200 text-gray-700 rounded",disabled:!0,children:"Approved"})]})]},d._id)})})]})},vt=()=>{const s=Z(),[t,a]=l.useState(!0),[r,n]=l.useState("Thanks for registering. Your documents are under verification. We will notify you once your account is approved.");return l.useEffect(()=>{let i=null,b=null;try{i=localStorage.getItem("pendingStockistId")}catch{i=null}try{b=localStorage.getItem("pendingUserId")}catch{b=null}if(!i&&!b){a(!1);return}let N=!1;const o=async()=>{try{const w=c=>q(c);if(i){const c=await fetch(w(`/api/stockist/${i}`)),g=await c.json().catch(()=>({}));if(c.ok&&g&&g.data){if(g.data.approved){try{localStorage.removeItem("pendingStockistId")}catch{}s("/stockist-login");return}else if(g.data.declined){n("Document verification failed"),a(!1);return}}}else if(b){const c=await fetch(w(`/api/user/${b}`)),g=await c.json().catch(()=>({}));if(c.ok&&g&&g.data){if(g.data.approved){try{localStorage.removeItem("pendingUserId")}catch{}s("/login");return}else if(g.data.declined){n("Document verification failed"),a(!1);return}}}}catch{}N||setTimeout(o,3e3)};return o(),()=>{N=!0}},[s]),e.jsx("div",{className:"min-h-screen flex items-center justify-center p-6",children:e.jsxs("div",{className:"max-w-md w-full bg-white p-6 rounded-xl shadow-lg text-center",children:[e.jsx("h1",{className:"text-2xl font-bold mb-4",children:r==="Document verification failed"?"Verification Failed":"Documents under verification"}),e.jsx("p",{className:"text-gray-600 mb-4",children:r}),r!=="Document verification failed"&&e.jsx("p",{className:"text-sm text-gray-400",children:"You can close this page and wait for an email or login later."})]})})},yt=()=>{Z();const[s,t]=l.useState([]),[a,r]=l.useState(!1),[n,i]=l.useState(null),[b,N]=l.useState({}),[o,m]=l.useState({}),w="admin_approved_users",c=async()=>{r(!0),i(null);try{const x=await fetch((v=>q(v))("/api/user")),S=await x.json();if(!x.ok)throw new Error(S.message||"Failed to load users");let f=S.data||[];try{const v=localStorage.getItem(w);if(v){const L=JSON.parse(v);Array.isArray(L)&&L.length&&(f=f.map(y=>L.includes(y._id)?{...y,approved:!0,status:"approved"}:y))}}catch(v){console.warn("Failed to read approved IDs from localStorage",v)}t(f)}catch(d){i(d.message||String(d))}finally{r(!1)}};l.useEffect(()=>{c()},[]);const g=!1,[z,h]=l.useState("");l.useEffect(()=>{},[g]);const I=async d=>{N(u=>({...u,[d]:!0}));try{let u=re("token");!u&&typeof localStorage<"u"&&(u=localStorage.getItem("token"));const x={"Content-Type":"application/json"};u&&(x.Authorization=`Bearer ${u}`);const S=!1,v=(A=>S?A:q(A))(`/api/user/${d}/approve`),y=await fetch(v,{method:"PATCH",headers:{...x,...{}},credentials:"include"}),_=await y.json();if(!y.ok){const A=(_==null?void 0:_.message)||`Approval failed (${y.status})`;throw new Error(A)}t(A=>A.map(E=>{var p;return E._id===d?{...E,approved:!0,approvedAt:(p=_.data)==null?void 0:p.approvedAt}:E}));try{const A=localStorage.getItem(w),E=A?JSON.parse(A):[];E.includes(d)||(E.push(d),localStorage.setItem(w,JSON.stringify(E)))}catch(A){console.warn("Failed to persist approved id",A)}await c()}catch(u){alert(u.message||String(u))}finally{N(u=>({...u,[d]:!1}))}},C=async d=>{m(u=>({...u,[d]:!0}));try{let u=re("token");!u&&typeof localStorage<"u"&&(u=localStorage.getItem("token"));const x={"Content-Type":"application/json"};u&&(x.Authorization=`Bearer ${u}`);const S=!1,v=(A=>S?A:q(A))(`/api/user/${d}/decline`),y=await fetch(v,{method:"PATCH",headers:{...x,...{}},credentials:"include"}),_=await y.json();if(!y.ok){const A=(_==null?void 0:_.message)||`Decline failed (${y.status})`;throw new Error(A)}t(A=>A.filter(E=>E._id!==d));try{const A=localStorage.getItem(w),p=(A?JSON.parse(A):[]).filter(M=>M!==d);localStorage.setItem(w,JSON.stringify(p))}catch(A){console.warn("Failed to remove declined id from localStorage",A)}}catch(u){alert(u.message||String(u))}finally{m(u=>({...u,[d]:!1}))}};return e.jsxs("div",{className:"p-6",children:[e.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Users (Admin)"}),g,a&&e.jsx("div",{children:"Loading..."}),n&&e.jsx("div",{className:"text-red-600",children:n}),e.jsx("div",{className:"space-y-3",children:s.map(d=>{const u=d.profileImageUrl||d.licenseImageUrl||null;return e.jsxs("div",{className:"p-4 border rounded flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[u?e.jsx("img",{src:u,alt:d.name||"user",className:`w-16 h-16 rounded-md object-cover border ${d.approved?"opacity-50 pointer-events-none":""}`}):e.jsx("div",{className:`w-16 h-16 rounded-md bg-gray-100 flex items-center justify-center text-sm text-gray-500 border ${d.approved?"opacity-50 pointer-events-none":""}`,children:"No image"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold",children:d.title||d.name||d.companyName}),e.jsx("div",{className:"text-sm text-gray-600",children:d.email||d.phone}),d.status==="approved"&&e.jsx("div",{className:"text-green-600 text-sm",children:"Approved"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[!d.approved&&!d.declined&&e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"px-4 py-2 bg-blue-600 text-white rounded",onClick:()=>I(d._id),disabled:b[d._id],children:b[d._id]?"Approving...":"Approve"}),e.jsx("button",{className:"px-4 py-2 bg-red-600 text-white rounded",onClick:()=>C(d._id),disabled:o[d._id],children:o[d._id]?"Declining...":"Decline"})]}),d.approved&&e.jsx("button",{className:"px-4 py-2 bg-gray-200 text-gray-700 rounded",disabled:!0,children:"Approved"})]})]},d._id)})})]})},wt=()=>{const[s,t]=l.useState(""),[a,r]=l.useState(""),[n,i]=l.useState(""),b=N=>{if(N.preventDefault(),!s||!a){i("Email and password are required.");return}i(""),console.log("Login attempt",{email:s,password:a})};return e.jsxs("div",{style:{maxWidth:400,margin:"50px auto"},children:[e.jsx("h2",{children:"Purchaser Login"}),e.jsxs("form",{onSubmit:b,children:[e.jsxs("div",{style:{marginBottom:12},children:[e.jsx("label",{children:"Email:"}),e.jsx("input",{type:"email",value:s,onChange:N=>t(N.target.value),placeholder:"Enter email",required:!0,style:{width:"100%",padding:8}})]}),e.jsxs("div",{style:{marginBottom:12},children:[e.jsx("label",{children:"Password:"}),e.jsx("input",{type:"password",value:a,onChange:N=>r(N.target.value),placeholder:"Enter password",required:!0,style:{width:"100%",padding:8}})]}),n&&e.jsx("div",{style:{color:"red",marginBottom:12},children:n}),e.jsx("button",{type:"submit",style:{width:"100%",padding:10},children:"Login"})]})]})},kt=()=>{const s=Z(),[t,a]=l.useState(!0),[r,n]=l.useState("Thanks for registering. Your documents are under verification. We will notify you once your account is approved.");return l.useEffect(()=>{let i=null,b=null;try{i=localStorage.getItem("pendingPurchaserId"),b=localStorage.getItem("pendingPurchasingRequestId")}catch{i=b=null}if(!i&&!b){a(!1);return}let N=!1;const o=async()=>{try{const w=c=>q(c);if(i){const c=await fetch(w(`/api/purchaser/${i}`)),g=await c.json().catch(()=>({}));if(c.ok&&g&&g.data){if(g.data.approved){try{localStorage.removeItem("pendingPurchaserId")}catch{}s("/purchaserLogin");return}else if(g.data.declined){n("Document verification failed"),a(!1);return}}}if(b){const c=await fetch(w(`/api/purchasing-card/status/${b}`)),g=await c.json().catch(()=>({}));if(c.ok&&g&&g.data&&g.data.status==="approved"){try{localStorage.removeItem("pendingPurchasingRequestId")}catch{}s("/purchaserLogin");return}}}catch{}N||setTimeout(o,3e3)};return o(),()=>{N=!0}},[s]),e.jsx("div",{className:"min-h-screen flex items-center justify-center p-6",children:e.jsxs("div",{className:"max-w-md w-full bg-white p-6 rounded-xl shadow-lg text-center",children:[e.jsx("h1",{className:"text-2xl font-bold mb-4",children:r==="Document verification failed"?"Verification Failed":"Documents under verification"}),e.jsx("p",{className:"text-gray-600 mb-4",children:r}),r!=="Document verification failed"&&e.jsx("p",{className:"text-sm text-gray-400",children:"You can close this page and wait for an email or login later."})]})})},St=()=>e.jsx("div",{className:"",children:e.jsxs(Ls,{children:[e.jsx(X,{path:"/",element:e.jsx(Rs,{})}),e.jsx(X,{path:"/dashboard",element:e.jsx(Ts,{})}),e.jsx(X,{path:"/login",element:e.jsx(Fs,{})}),e.jsx(X,{path:"/forgot-password",element:e.jsx(pt,{})}),e.jsx(X,{path:"/reset-password",element:e.jsx(bt,{})}),e.jsx(X,{path:"/signup",element:e.jsx(Os,{})}),e.jsx(X,{path:"/CompanyResult",element:e.jsx(Us,{})}),e.jsx(X,{path:"/company/:id/products",element:e.jsx(qs,{})}),e.jsx(X,{path:"/MedicineRes",element:e.jsx(Hs,{})}),e.jsx(X,{path:"/profile",element:e.jsx(Vs,{})}),e.jsx(X,{path:"/adminpanel",element:e.jsx(Ws,{})}),e.jsx(X,{path:"/adminCreateStockist",element:e.jsx(Js,{})}),e.jsx(X,{path:"/stockist-login",element:e.jsx(rt,{})}),e.jsx(X,{path:"/stockist-outcode",element:e.jsx(ht,{})}),e.jsx(X,{path:"/stockist-card",element:e.jsx(gt,{})}),e.jsx(X,{path:"/stockist/verification",element:e.jsx(ft,{})}),e.jsx(X,{path:"/adminCreateCompany",element:e.jsx(Gs,{})}),e.jsx(X,{path:"/adminCreateMedicine",element:e.jsx(Ys,{})}),e.jsx(X,{path:"/adminCreateStaff",element:e.jsx(st,{})}),e.jsx(X,{path:"/staffs",element:e.jsx(Zs,{})}),e.jsx(X,{path:"/staff/:id",element:e.jsx(tt,{})}),e.jsx(X,{path:"/staff/create",element:e.jsx(As,{to:"/adminCreateStaff",replace:!0})}),e.jsx(X,{path:"/purchaser",element:e.jsx(jt,{})}),e.jsx(X,{path:"/purchaser/:id",element:e.jsx(Qs,{})}),e.jsx(X,{path:"/demand",element:e.jsx(at,{})}),e.jsx(X,{path:"/admin/stockists",element:e.jsx(Nt,{})}),e.jsx(X,{path:"/medical-middle",element:e.jsx(vt,{})}),e.jsx(X,{path:"/user-admin",element:e.jsx(yt,{})}),e.jsx(X,{path:"/purchaserLogin",element:e.jsx(wt,{})}),e.jsx(X,{path:"/purchasermiddle",element:e.jsx(kt,{})})]})});Is.createRoot(document.getElementById("root")).render(e.jsx(Ps,{children:e.jsx(St,{})}));
