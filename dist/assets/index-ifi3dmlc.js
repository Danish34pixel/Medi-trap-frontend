import{j as e,u as te,r as l,a as Ae,M as ze,L as qe,C as Ie,b as $e,E as We,c as Ue,P as be,A as ns,m as ce,d as je,e as Ne,X as is,f as Oe,g as He,h as ke,i as le,S as os,I as Ge,k as Qe,l as hs,H as ve,B as Te,U as Ce,K as us,F as _e,n as Ye,o as gs,p as me,q as fs,s as he,t as Xe,v as ps,w as pe,x as Ve,y as ye,z as bs,R as Le,T as js,D as Ke,G as Me,J as Ns,N as ds,O as vs,Q as ys,V as ee,W as ws,Y as ks}from"./vendor-Cn7el9d_.js";import{Q as Je,a as Ze}from"./vendor_qrcode-LZzFQqkj.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))o(a);new MutationObserver(a=>{for(const h of a)if(h.type==="childList")for(const g of h.addedNodes)g.tagName==="LINK"&&g.rel==="modulepreload"&&o(g)}).observe(document,{childList:!0,subtree:!0});function r(a){const h={};return a.integrity&&(h.integrity=a.integrity),a.referrerPolicy&&(h.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?h.credentials="include":a.crossOrigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function o(a){if(a.ep)return;a.ep=!0;const h=r(a);fetch(a.href,h)}})();const Ss="https://medi-trap-backend-2.onrender.com",ie=Ss,G=s=>{const t=s.startsWith("/")?s:`/${s}`;return`${ie}${t}`};function Pe(s,t){if(!s||!t)return!1;try{const r=String(t);if(Array.isArray(s.stockists))for(const a of s.stockists){const h=a&&(a.stockist||a._id||a.id||a);if(h&&String(h).includes(r))return!0}const o=[s.stockist,s.stockistId,s.seller,s.sellerId,s.vendor,s.vendorId,s.supplier,s.supplierId];for(const a of o){if(!a)continue;const h=a&&(a._id||a.id||a);if(String(h).includes(r))return!0}for(const a of Object.keys(s))if(/stock|seller|vendor|supplier/i.test(a)){const h=s[a];if(!h)continue;const g=h&&(h._id||h.id||h);if(String(g).includes(r))return!0}}catch{}return!1}function ne(s){return s&&(s.name||s.brandName||s.title||s.medicineName||s.displayName)||""}function we(s,t){if(!s||!t)return!1;try{const r=k=>String(k||"").toLowerCase().replace(/[^a-z0-9\s]/g," ").replace(/\s+/g," ").trim(),o=r(s);if(!o)return!1;const a=new Set,h=[t.Medicines,t.medicines,t.items,t.itemsList,t.companies];for(const k of h)if(Array.isArray(k))for(const m of k)a.add(r(m));t.title&&a.add(r(t.title));const g=o.split(" ").filter(k=>k.length>2);if(g.length===0)return!1;for(const k of a){if(!k)continue;if(k.includes(o)||o.includes(k))return!0;const m=k.split(" ").filter(c=>c.length>2);for(const c of g)if(m.includes(c))return!0}}catch{}return!1}function cs(s,t){if(!s||!t)return 0;try{const r=m=>String(m||"").toLowerCase().replace(/[^a-z0-9\s]/g," ").replace(/\s+/g," ").trim(),o=r(s);if(!o)return 0;const a=new Set(o.split(" ").filter(m=>m.length>2));if(a.size===0)return 0;const h=new Set,g=[t.Medicines,t.medicines,t.items,t.itemsList,t.companies];for(const m of g)if(Array.isArray(m))for(const c of m)h.add(r(c));t.title&&h.add(r(t.title));let k=0;for(const m of h){if(!m)continue;const c=new Set(m.split(" ").filter(d=>d.length>2));let j=0;for(const d of a)c.has(d)&&j++;j>k&&(k=j)}return k}catch{return 0}}function Ee({className:s="w-20 h-20",alt:t="MedTrap Logo"}){return e.jsx("img",{src:"/Gemini_Generated_Image_hnxythhnxythhnxy-removebg-preview.png",alt:t,className:`mx-auto ${s} mb-4 relative z-10`})}const fe=({children:s})=>e.jsx("span",{className:"text-lg",children:s});function Cs({navigation:s}){var V,X;const t=(()=>{try{return te()}catch{return null}})(),r=s||{navigate:N=>{t?t(N):window.location.href=N},goBack:()=>window.history.back()},[o,a]=l.useState(""),[h,g]=l.useState([]),[k,m]=l.useState(!1),[c,j]=l.useState("company"),[d,f]=l.useState(!1),[P,i]=l.useState([]),[p,M]=l.useState(!1),[z,v]=l.useState(!1),[u,b]=l.useState(!1),[x,C]=l.useState(null),[D,S]=l.useState([]);l.useEffect(()=>{let N=!0;return(async()=>{try{const[R,_,A]=await Promise.all([fetch(`${ie}/api/stockist`),fetch(`${ie}/api/medicine`),fetch(`${ie}/api/company`)]),[L,y,q]=await Promise.all([R.json(),_.json(),A.json()]),E=y&&y.data||[],n=q&&q.data||[];if(N&&L&&L.data){const w=L.data.map($=>{let F=E.filter(B=>Pe(B,$._id)).map(B=>ne(B)).filter(Boolean);if((!F||F.length===0)&&E.length>0){const B=new Set(($.Medicines||$.medicines||$.items||[]).map(ae=>String(ae).toLowerCase())),K=E.filter(ae=>{const xe=ne(ae)||"";if(!xe)return!1;if(we(xe,$))return!0;const ge=xe.toLowerCase();for(const re of B)if(re&&(re.includes(ge)||ge.includes(re)))return!0;return!1}).map(ae=>ne(ae)).filter(Boolean);K.length>0&&(F=K)}const se=new Set(E.filter(B=>Array.isArray(B.stockists)?B.stockists.some(K=>String(K.stockist||K).includes(String($._id))):!1).map(B=>B.company&&(B.company._id||B.company)?String(B.company._id||B.company):null).filter(Boolean)),J=new Set(($.companies||$.items||[]).map(B=>B?typeof B=="string"?String(B):B._id?String(B._id):B.id?String(B.id):null:null).filter(Boolean));if((!F||F.length===0)&&J.size>0){const B=E.filter(K=>{const ae=K.company&&(K.company._id||K.company);return ae&&J.has(String(ae))}).map(K=>ne(K)).filter(Boolean);B.length>0&&(F=[...new Set([...F||[],...B])])}let oe=n.filter(B=>se.has(String(B._id))).map(B=>B.name?B.name:B.shortName||"").filter(Boolean);const Be=(Array.isArray($.companies)?$.companies:[]).map(B=>{if(typeof B=="string"){const K=n.find(ae=>String(ae._id)===B||ae.id===B);return K&&(K.name||K.shortName)||B}return B&&(B.name||B.shortName)?B.name||B.shortName:""}).filter(Boolean),De=Array.from(new Set([...Be||[],...oe||[]]));let ue=[];Array.isArray($.medicines)&&$.medicines.length>0?ue=$.medicines.map(B=>{if(typeof B=="string")return B;if(B&&(B.name||B.brandName))return B.name||B.brandName;try{const K=B&&(B._id||B.id||B);if(K&&E&&E.length>0){const ae=E.find(xe=>String(xe._id)===String(K)||String(xe._id)===String(K&&(K._id||K.id)||K));if(ae)return ne(ae)}}catch{}return""}).filter(Boolean):ue=(F||[]).slice();const Se=(B,K)=>{if(!B)return!1;const ae=String(K),xe=new Set,ge=re=>{if(re==null||xe.has(re))return!1;if(typeof re=="string"||typeof re=="number")return String(re)===ae;if(Array.isArray(re)){for(const Re of re)if(ge(Re))return!0;return!1}if(typeof re=="object"){if(xe.has(re))return!1;xe.add(re);for(const Re of Object.keys(re))if(ge(re[Re]))return!0;return!1}return!1};return ge(B)},xs=n.filter(B=>Se(B,$._id)).map(B=>B.name?B.name:B.shortName||"").filter(Boolean);return{_id:$._id,title:$.name,phone:$.phone,address:$.address?`${$.address.street||""}, ${$.address.city||""}`:"",items:De,Medicines:ue}});S(w),console.warn("Nav: loaded stockists ->",w.length)}}catch(R){console.warn("Nav: failed to load stockists",R)}})(),()=>N=!1},[]),l.useEffect(()=>{const N=localStorage.getItem("token");C(N)},[]);const O=N=>{if(N==="company"){const R=new Set,_=A=>String(A||"").toLowerCase().trim();return D.forEach(A=>{var L;return(L=A.items)==null?void 0:L.forEach(y=>R.add(_(y)))}),Array.from(R)}else{if(N==="stockist")return D.map(R=>R.title);if(N==="medicine"){const R=new Set;return D.forEach(_=>{var A;return(A=_.Medicines)==null?void 0:A.forEach(L=>R.add(L))}),Array.from(R)}}return[]},Y=N=>{j(N),a(""),i([]),M(!0),b(!1);const R=O(N);if(N==="stockist")i(D);else if(N==="company"){const _=[],A=L=>String(L||"").toLowerCase().trim();R.forEach(L=>{const y=D.filter(q=>(q.items||[]).some(E=>A(E)===L));_.push(...y)}),i([...new Set(_)])}else if(N==="medicine"){const _=[];R.forEach(A=>{const L=D.filter(y=>y.Medicines&&y.Medicines.includes(A));_.push(...L)}),i([...new Set(_)])}};l.useEffect(()=>{const N=o.trim().toLowerCase(),R=new Set;if(!N){g([]),m(!1);return}if(c==="company"){const A=L=>String(L||"").toLowerCase().trim();D.forEach(L=>{var y;return(y=L.items)==null?void 0:y.forEach(q=>{A(q).includes(N)&&R.add(A(q))})})}else c==="stockist"?D.forEach(A=>{A.title.toLowerCase().includes(N)&&R.add(A.title)}):c==="medicine"&&D.forEach(A=>{var L;return(L=A.Medicines)==null?void 0:L.forEach(y=>{y.toLowerCase().includes(N)&&R.add(y)})});const _=[...R];if(g(_),m(_.length>0),c==="company"){const A=L=>String(L||"").toLowerCase().trim();if(N){const L=D.filter(y=>(y.items||[]).some(q=>A(q).includes(N)));i(L),M(!1),m(_.length>0),v(!1)}}},[o,c,D]);const H=N=>{v(!0),a(N),m(!1),setTimeout(()=>{let R=[];if(c==="stockist")R=D.filter(_=>_.title===N);else if(c==="company"){const _=A=>String(A||"").toLowerCase().trim();R=D.filter(A=>(A.items||[]).some(L=>_(L)===N))}else c==="medicine"&&(R=D.filter(_=>_.Medicines&&_.Medicines.includes(N)));i(R),M(!1),v(!1)},300)},W=N=>{if(a(N),N===""){M(!0);const R=O(c);if(c==="stockist")i(D);else if(c==="company"){const _=[],A=L=>String(L||"").toLowerCase().trim();R.forEach(L=>{const y=D.filter(q=>(q.items||[]).some(E=>A(E)===L));_.push(...y)}),i([...new Set(_)])}else if(c==="medicine"){const _=[];R.forEach(A=>{const L=D.filter(y=>y.Medicines&&y.Medicines.includes(A));_.push(...L)}),i([...new Set(_)])}}},I=()=>{a(""),i([]),m(!1),M(!1)},T=[{value:"medicine",label:"Medicine",icon:"ðŸ’Š"},{value:"company",label:"Company",icon:"ðŸ¥"},{value:"stockist",label:"Supplier",icon:"âš•ï¸"}],Q=[{label:"Home",icon:"ðŸ "},{label:"Health Info",icon:"ðŸ©º"},{label:"Contact",icon:"ðŸ“ž"}];l.useEffect(()=>Y("company"),[]),l.useEffect(()=>{if(!D||D.length===0||P&&P.length>0)return;const N=O(c);if(c==="stockist")i(D);else if(c==="company"){const R=[],_=A=>String(A||"").toLowerCase().trim();N.forEach(A=>{const L=D.filter(y=>(y.items||[]).some(q=>_(q)===A));R.push(...L)}),i([...new Set(R)])}else if(c==="medicine"){const R=[];N.forEach(_=>{const A=D.filter(L=>L.Medicines&&L.Medicines.includes(_));R.push(...A)}),i([...new Set(R)])}M(!0)},[D]);const U=N=>{const R={cardiovascular:"â¤ï¸",diabetes:"ðŸ©º",pain:"ðŸ’Š",mental:"ðŸ§ ",pediatric:"ðŸ‘¶",emergency:"ðŸš¨",chronic:"âš•ï¸",preventive:"ðŸ›¡ï¸",oncology:"ðŸŽ—ï¸",respiratory:"ðŸ«",dermatology:"ðŸ§´",orthopedic:"ðŸ¦´",pharmacy:"ðŸ’Š",hospital:"ðŸ¥",clinic:"ðŸ¥",medical:"âš•ï¸",health:"ðŸ©º",care:"ðŸ’Š",medicine:"ðŸ’‰",drug:"ðŸ’Š",pharma:"ðŸ’Š",therapeutic:"ðŸ©¹",surgical:"ðŸ”¬",diagnostic:"ðŸ”¬",laboratory:"ðŸ§ª",radiology:"ðŸ“·",nutrition:"ðŸŽ",wellness:"ðŸŒ±",fitness:"ðŸ’ª",rehabilitation:"ðŸƒâ€â™‚ï¸"},_=String(N).toLowerCase();for(const[A,L]of Object.entries(R))if(_.includes(A))return L;return"ðŸ’Š"},Z=(N,R)=>{var _;return e.jsxs("div",{className:"group relative bg-white/80 backdrop-blur-sm rounded-3xl p-6 mb-6 shadow-lg border border-slate-200/50 hover:shadow-2xl hover:scale-[1.02] transition-all duration-300 overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-cyan-50/50 via-blue-50/30 to-purple-50/50 opacity-0 group-hover:opacity-100 transition-opacity duration-500"}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex items-start justify-between mb-5",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-2xl bg-gradient-to-br from-cyan-400 to-blue-500 flex items-center justify-center shadow-lg group-hover:shadow-xl transition-all duration-300",children:e.jsx("span",{className:"text-white font-bold",children:(_=N.title)==null?void 0:_.charAt(0)})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-slate-800 group-hover:text-blue-700 transition-colors duration-300",children:N.title}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-emerald-400 rounded-full animate-pulse"}),e.jsx("span",{className:"text-xs text-emerald-600 font-semibold",children:"VERIFIED"})]})]})]}),e.jsxs("div",{className:"space-y-3 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3 group/contact hover:bg-cyan-50 rounded-xl p-2 transition-all duration-200",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-r from-cyan-400 to-blue-500 flex items-center justify-center shadow-md",children:e.jsx("span",{className:"text-white text-sm",children:"ðŸ“ž"})}),e.jsx("span",{className:"text-slate-700 font-medium group-hover/contact:text-cyan-700",children:N.phone})]}),e.jsxs("div",{className:"flex items-start gap-3 group/address hover:bg-slate-50 rounded-xl p-2 transition-all duration-200",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-r from-slate-400 to-slate-500 flex items-center justify-center shadow-md",children:e.jsx("span",{className:"text-white text-sm",children:"ðŸ“"})}),e.jsx("span",{className:"text-slate-600 flex-1 group-hover/address:text-slate-800",children:N.address})]})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-4 h-4 bg-emerald-400 rounded-full shadow-lg"}),e.jsx("div",{className:"absolute inset-0 w-4 h-4 bg-emerald-400 rounded-full animate-ping opacity-75"})]})]}),c==="company"&&N.items&&e.jsxs("div",{className:"mb-5",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("div",{className:"w-10 h-10 rounded-2xl bg-gradient-to-r from-emerald-400 to-teal-500 flex items-center justify-center mr-3 shadow-lg",children:e.jsx("span",{className:"text-white",children:"ðŸ¥"})}),e.jsx("span",{className:"font-bold text-slate-800",children:"Healthcare Partners:"})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:N.items.map((A,L)=>{const y=o&&A.toLowerCase().includes(o.toLowerCase());return e.jsxs("div",{className:`flex items-center gap-2 px-4 py-2 rounded-full text-sm font-medium transition-all duration-300 ${y?"bg-gradient-to-r from-cyan-100 to-blue-100 border-2 border-cyan-400 text-cyan-800 shadow-lg scale-105":"bg-gradient-to-r from-slate-50 to-slate-100 text-slate-700 hover:shadow-md hover:scale-105"}`,children:[e.jsx("span",{className:"text-lg",children:U(A)}),e.jsx("span",{children:A})]},L)})})]}),c==="medicine"&&N.Medicines&&e.jsxs("div",{className:"mb-5",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("div",{className:"w-10 h-10 rounded-2xl bg-gradient-to-r from-emerald-400 to-green-500 flex items-center justify-center mr-3 shadow-lg",children:e.jsx("span",{className:"text-white",children:"ðŸ’Š"})}),e.jsx("span",{className:"font-bold text-slate-800",children:"Available Medicines:"})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:N.Medicines.map((A,L)=>{const y=o&&A.toLowerCase().includes(o.toLowerCase());return e.jsxs("div",{className:`relative flex items-center gap-3 px-4 py-3 rounded-2xl text-sm font-medium transition-all duration-300 ${y?"bg-gradient-to-r from-emerald-100 to-green-100 border-2 border-emerald-400 text-emerald-800 shadow-lg scale-105":"bg-gradient-to-r from-emerald-50 to-green-50 text-emerald-700 hover:shadow-md hover:scale-105"}`,children:[e.jsx("div",{className:"w-8 h-8 rounded-xl bg-gradient-to-r from-emerald-400 to-green-500 flex items-center justify-center shadow-md",children:e.jsx("span",{className:"text-white text-lg",children:"ðŸ’Š"})}),e.jsx("span",{className:"flex-1",children:A}),y&&e.jsx("div",{className:"absolute -top-1 -right-1 w-4 h-4 bg-emerald-400 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-white text-xs",children:"âœ“"})})]},L)})})]}),c==="stockist"&&e.jsxs("div",{className:"space-y-5",children:[N.items&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("div",{className:"w-10 h-10 rounded-2xl bg-gradient-to-r from-emerald-400 to-teal-500 flex items-center justify-center mr-3 shadow-lg",children:e.jsx("span",{className:"text-white",children:"ðŸ¥"})}),e.jsx("span",{className:"font-bold text-slate-800",children:"Healthcare Partners:"})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:N.items.map((A,L)=>e.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 rounded-full text-sm font-medium bg-gradient-to-r from-slate-50 to-slate-100 text-slate-700 hover:shadow-md hover:scale-105 transition-all duration-300",children:[e.jsx("span",{className:"text-lg",children:U(A)}),e.jsx("span",{children:A})]},L))})]}),N.Medicines&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("div",{className:"w-10 h-10 rounded-2xl bg-gradient-to-r from-emerald-400 to-green-500 flex items-center justify-center mr-3 shadow-lg",children:e.jsx("span",{className:"text-white",children:"ðŸ’Š"})}),e.jsx("span",{className:"font-bold text-slate-800",children:"Medicine Catalog:"})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:N.Medicines.map((A,L)=>e.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 rounded-2xl text-sm font-medium bg-gradient-to-r from-emerald-50 to-green-50 text-emerald-700 hover:shadow-md hover:scale-105 transition-all duration-300",children:[e.jsx("div",{className:"w-8 h-8 rounded-xl bg-gradient-to-r from-emerald-400 to-green-500 flex items-center justify-center shadow-md",children:e.jsx("span",{className:"text-white text-lg",children:"ðŸ’Š"})}),e.jsx("span",{className:"flex-1",children:A})]},L))})]})]}),e.jsx("div",{className:"mt-6 pt-4 border-t border-slate-200/50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-500",children:[e.jsx("div",{className:"w-2 h-2 bg-emerald-400 rounded-full animate-pulse"}),e.jsx("span",{children:"Live inventory"})]}),e.jsx("button",{className:"px-4 py-2 bg-gradient-to-r from-cyan-500 to-blue-600 text-white rounded-xl font-semibold shadow-lg hover:shadow-xl hover:scale-105 transition-all duration-300",children:"Contact Now"})]})})]})]},N._id||R)};return e.jsx("div",{className:"bg-slate-50 min-h-screen",children:e.jsxs("div",{className:"max-w-6xl mx-auto px-6",children:[e.jsxs("div",{className:"flex items-center justify-between py-8",children:[e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"relative",children:e.jsx("div",{className:"w-24 h-10 flex items-center justify-center shadow-xl",children:e.jsx(Ee,{})})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold bg-gradient-to-r from-slate-800 via-blue-700 to-cyan-600 bg-clip-text text-transparent",children:"Meditrap"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-emerald-400 rounded-full animate-pulse"}),e.jsx("div",{className:"px-2 py-1 bg-emerald-100 text-emerald-700 text-xs rounded-full font-semibold",children:"LIVE"})]})]})]})}),e.jsx("div",{className:"flex items-center gap-3",children:e.jsx("button",{onClick:()=>f(!0),className:"w-12 h-12 bg-white rounded-2xl shadow-lg flex items-center justify-center border border-slate-200 hover:shadow-xl hover:scale-105 transition-all duration-200","aria-label":"open menu",children:e.jsx(fe,{children:"â˜°"})})})]}),d&&e.jsx("div",{className:"fixed inset-0 z-40 flex items-center justify-center bg-black/50",children:e.jsxs("div",{className:"bg-white rounded-3xl p-6 w-full max-w-md mx-4 max-h-[80vh] overflow-auto",children:[e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:()=>f(!1),className:"p-2 rounded-2xl bg-slate-100","aria-label":"close menu",children:e.jsx(fe,{children:"âœ–"})})}),e.jsx("nav",{className:"mt-4 space-y-2",children:Q.map((N,R)=>e.jsxs("button",{onClick:()=>f(!1),className:"w-full text-left flex items-center gap-3 px-4 py-3 rounded-2xl bg-slate-50 hover:bg-slate-100",children:[e.jsx("span",{className:"text-lg",children:N.icon}),e.jsx("span",{className:"font-medium text-slate-700",children:N.label})]},R))}),e.jsx("div",{className:"mt-6 pt-4 border-t border-slate-100",children:x?e.jsxs("button",{onClick:()=>{f(!1),r.navigate("profile")},className:"w-full flex items-center gap-3 justify-center px-4 py-3 rounded-2xl bg-gradient-to-r from-violet-500 to-purple-600 text-white shadow-lg",children:[e.jsx(fe,{children:"ðŸ‘¤"}),e.jsx("span",{className:"font-semibold",children:"Profile"})]}):e.jsxs("div",{className:"space-y-2",children:[e.jsxs("button",{onClick:()=>{f(!1),r.navigate("login")},className:"w-full flex items-center gap-3 justify-center px-4 py-3 rounded-2xl bg-gradient-to-r from-cyan-500 to-blue-600 text-white shadow-lg",children:[e.jsx(fe,{children:"ðŸ”"}),e.jsx("span",{className:"font-semibold",children:"Login"})]}),e.jsxs("button",{onClick:()=>{f(!1),r.navigate("signup")},className:"w-full flex items-center gap-3 justify-center px-4 py-3 rounded-2xl bg-gradient-to-r from-emerald-500 to-teal-600 text-white shadow-lg",children:[e.jsx(fe,{children:"ðŸ‘¤âž•"}),e.jsx("span",{className:"font-semibold",children:"Sign Up"})]})]})})]})}),e.jsxs("div",{className:"mt-6 bg-white rounded-3xl p-6 shadow-sm border border-slate-100",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"flex items-center gap-3 bg-slate-50 rounded-2xl px-4 py-4 border border-slate-200",children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-cyan-100 flex items-center justify-center",children:e.jsx("span",{className:"text-cyan-600 text-sm",children:"ðŸ”"})}),e.jsx("input",{value:o,onChange:N=>W(N.target.value),onFocus:()=>m(!0),className:"flex-1 bg-transparent outline-none text-slate-800 placeholder-slate-500",placeholder:`Search for ${c}...`}),o&&e.jsx("button",{onClick:I,className:"p-1 rounded-lg hover:bg-slate-200",children:e.jsx(fe,{children:"âœ–"})})]})}),e.jsx("div",{children:e.jsxs("button",{onClick:()=>b(!0),className:"flex items-center gap-3 bg-slate-50 px-4 py-4 rounded-2xl border border-slate-200 hover:bg-slate-100",children:[e.jsx("span",{className:"text-lg",children:(V=T.find(N=>N.value===c))==null?void 0:V.icon}),e.jsx("span",{className:"font-medium text-slate-700",children:(X=T.find(N=>N.value===c))==null?void 0:X.label}),e.jsx("span",{className:"text-sm text-slate-500",children:"â–¼"})]})})]}),u&&e.jsx("div",{className:"fixed inset-0 z-40 flex items-center justify-center bg-black/40",children:e.jsxs("div",{className:"bg-white rounded-3xl p-6 w-full max-w-md mx-4",onClick:N=>N.stopPropagation(),children:[e.jsx("h3",{className:"text-lg font-bold text-center mb-4 text-slate-800",children:"Select Search Category"}),e.jsx("div",{className:"space-y-2",children:T.map(N=>e.jsx("button",{onClick:()=>Y(N.value),className:`w-full text-left px-4 py-4 rounded-2xl ${c===N.value?"bg-cyan-100 border-2 border-cyan-300":"bg-slate-50 hover:bg-slate-100"}`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-lg",children:N.icon}),e.jsx("span",{className:`font-medium ${c===N.value?"text-cyan-800":"text-slate-700"}`,children:N.label})]})},N.value))}),e.jsx("div",{className:"mt-6 text-center",children:e.jsx("button",{onClick:()=>b(!1),className:"px-6 py-2 rounded-2xl bg-slate-200 text-slate-700 hover:bg-slate-300",children:"Close"})})]})}),k&&h.length>0&&e.jsxs("div",{className:"mt-4 bg-white border border-slate-200 rounded-2xl shadow-lg max-h-72 overflow-auto",children:[e.jsx("div",{className:"px-4 py-3 text-sm text-slate-500 border-b border-slate-100 bg-slate-50 rounded-t-2xl",children:"Click on any suggestion to see detailed results"}),e.jsx("div",{className:"divide-y divide-slate-100",children:h.map((N,R)=>{var L,y;let _=null,A="";if(c==="stockist"){const q=D.find(E=>E.title===N);_=q?q.phone:null,A=q?`${((L=q.items)==null?void 0:L.length)||0} companies, ${((y=q.Medicines)==null?void 0:y.length)||0} medicines`:""}else if(c==="company"){const q=D.filter(E=>E.items&&E.items.includes(N));A=`Available at ${q.length} supplier${q.length>1?"s":""}`}else if(c==="medicine"){const q=D.filter(E=>E.Medicines&&E.Medicines.includes(N));A=`Available at ${q.length} supplier${q.length>1?"s":""}`}return e.jsxs("button",{onClick:()=>H(N),className:"w-full text-left px-4 py-4 flex items-center gap-3 hover:bg-slate-50",children:[e.jsx("div",{className:"w-10 h-10 rounded-2xl bg-cyan-100 flex items-center justify-center",children:e.jsx("span",{className:"text-cyan-600",children:c==="medicine"?"ðŸ’Š":c==="company"?"ðŸ¥":"âš•ï¸"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-slate-700",children:N}),A&&e.jsx("div",{className:"text-sm text-slate-500",children:A})]}),_&&e.jsx("div",{className:"text-sm text-slate-600 font-semibold",children:_}),e.jsx("div",{className:"text-cyan-500 ml-2",children:"â†’"})]},R)})})]})]}),e.jsxs("div",{className:"px-6 pt-4 text-sm text-slate-500",children:["Debug: sectionData = ",D.length," medical suppliers"]}),P.length>0&&e.jsxs("div",{className:"px-6 mt-6",children:[z&&e.jsxs("div",{className:"flex items-center gap-3 bg-cyan-100 p-4 rounded-2xl mb-4",children:[e.jsx("div",{className:"animate-spin border-2 border-cyan-400 rounded-full w-5 h-5 border-t-transparent"}),e.jsx("div",{className:"text-cyan-700 font-medium",children:"Loading results..."})]}),o&&e.jsx("div",{className:"bg-gradient-to-r from-cyan-50 to-blue-50 rounded-2xl p-6 mb-6 border border-cyan-200",children:e.jsxs("div",{className:"flex items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-2xl bg-cyan-100 flex items-center justify-center",children:e.jsx("span",{className:"text-2xl text-cyan-600",children:"ðŸ”"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"font-bold text-cyan-800 text-lg",children:['Search Results for "',o,'"']}),e.jsxs("div",{className:"text-sm text-slate-600",children:[P.length," medical supplier",P.length>1?"s":""," found"]})]})]}),e.jsx("div",{children:e.jsxs("button",{onClick:()=>{a(""),Y(c)},className:"px-4 py-2 bg-gradient-to-r from-cyan-500 to-blue-600 text-white rounded-2xl font-semibold shadow-lg",children:["Show All"," ",c==="stockist"?"Suppliers":c==="company"?"Companies":"Medicines"]})})]})}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:o?`Search Results for "${o}"`:c==="stockist"?"All Medical Suppliers":c==="company"?"All Healthcare Companies":"All Medicines"}),e.jsx("div",{className:"text-sm text-slate-500 mt-2",children:o?`Found ${P.length} result${P.length>1?"s":""}`:`Showing ${P.length} medical suppliers`})]}),e.jsx("div",{className:"flex justify-end mt-4",children:e.jsx("button",{onClick:I,className:"px-4 py-2 bg-slate-200 text-slate-700 rounded-2xl hover:bg-slate-300",children:"Clear Results"})})]}),e.jsx("div",{children:P.map((N,R)=>Z(N,R))})]}),e.jsx("div",{className:"px-6 mt-8 pb-12"})]})})}const Ls=({navigation:s})=>{const t=(()=>{try{return te()}catch{return null}})(),r=(()=>{try{return Ae()}catch{return{key:null}}})(),o=s||{navigate:S=>{t?t(S):window.location.href=S},goBack:()=>window.history.back()},[a,h]=l.useState(null),[g,k]=l.useState(!1),[m,c]=l.useState([]),[j,d]=l.useState({medicines:null,stockists:null,companies:null}),[f,P]=l.useState(!1),[i,p]=l.useState([]);l.useEffect(()=>{let S=!0;return(async()=>{try{const[O,Y,H]=await Promise.all([fetch(`${ie}/api/stockist`),fetch(`${ie}/api/medicine`),fetch(`${ie}/api/company`)]),[W,I,T]=await Promise.all([O.json(),Y.json(),H.json()]),Q=I&&I.data||[],U=T&&T.data||[];if(d({medicines:I||null,stockists:W||null,companies:T||null}),console.warn("Screen DEBUG: medicines sample ->",Q.slice(0,5)),S&&W&&W.data){const Z=W.data.map(V=>{let X=Q.filter(n=>Pe(n,V._id)).map(n=>ne(n)).filter(Boolean);if((!X||X.length===0)&&Q.length>0){const n=new Set((V.Medicines||V.medicines||V.items||[]).map($=>String($).toLowerCase())),w=Q.filter($=>{const F=ne($)||"";if(!F)return!1;if(we(F,V))return!0;const se=F.toLowerCase();for(const J of n)if(J&&(J.includes(se)||se.includes(J)))return!0;return!1}).map($=>ne($)).filter(Boolean);w.length>0&&(X=w)}const N=new Set(Q.filter(n=>Array.isArray(n.stockists)?n.stockists.some(w=>String(w.stockist||w).includes(String(V._id))):!1).map(n=>n.company&&(n.company._id||n.company)?String(n.company._id||n.company):null).filter(Boolean));let R=U.filter(n=>N.has(String(n._id))).map(n=>n.name?n.name:n.shortName||"").filter(Boolean);const _=(n,w)=>{if(!n)return!1;const $=String(w),F=new Set,se=J=>{if(J==null||F.has(J))return!1;if(typeof J=="string"||typeof J=="number")return String(J)===$;if(Array.isArray(J)){for(const oe of J)if(se(oe))return!0;return!1}if(typeof J=="object"){if(F.has(J))return!1;F.add(J);for(const oe of Object.keys(J))if(se(J[oe]))return!0;return!1}return!1};return se(n)},A=U.filter(n=>_(n,V._id)).map(n=>n.name?n.name:n.shortName||"").filter(Boolean);R=Array.from(new Set([...R,...A]));const L=new Set((V.companies||V.items||[]).map(n=>n?typeof n=="string"?String(n):n._id?String(n._id):n.id?String(n.id):null:null).filter(Boolean));if((!X||X.length===0)&&L.size>0){const n=Q.filter(w=>{const $=w.company&&(w.company._id||w.company);return $&&L.has(String($))}).map(w=>ne(w)).filter(Boolean);n.length>0&&(X=[...new Set([...X||[],...n])])}const y=(Array.isArray(V.companies)?V.companies:[]).map(n=>{if(typeof n=="string"){const w=U.find($=>String($._id)===n||$.id===n);return w&&(w.name||w.shortName)||n}return n&&(n.name||n.shortName)?n.name||n.shortName:""}).filter(Boolean),q=Array.from(new Set([...y||[],...R||[]]));let E=[];return Array.isArray(V.medicines)&&V.medicines.length>0?E=V.medicines.map(n=>{if(typeof n=="string")return n;if(n&&(n.name||n.brandName))return n.name||n.brandName;try{const w=n&&(n._id||n.id||n);if(w&&Q&&Q.length>0){const $=Q.find(F=>String(F._id)===String(w)||String(F._id)===String(w._id||w.id||w));if($)return ne($)}}catch{}return""}).filter(Boolean):E=(X||[]).slice(),{_id:V._id,title:V.name,phone:V.phone,address:V.address?`${V.address.street||""}${V.address.city?", "+V.address.city:""}`:"",image:V.logo&&V.logo.url||null,items:q,Medicines:E}});console.warn("Screen: loaded stockists ->",Z.length),c(Z);try{const V=(A,L)=>{const y=ne(A)||"";if(Pe(A,L._id)||we(y,L))return!0;const q=new Set((L.Medicines||L.medicines||L.items||[]).map(n=>String(n).toLowerCase())),E=y.toLowerCase();for(const n of q)if(n&&(n.includes(E)||E.includes(n)))return!0;return!1},X=(Q||[]).filter(A=>{for(const L of W.data)if(V(A,L))return!1;return!0}),N=[],R=[],_=1;for(const A of X){let L=0,y=-1;W.data.forEach((q,E)=>{const n=cs(ne(A)||"",q);n>L&&(L=n,y=E)}),L>=_&&y>=0?N.push({medicine:ne(A),stockistIndex:y,score:L}):R.push(A)}for(const A of N){const L=A.stockistIndex;Z[L]&&(Z[L].Medicines=Z[L].Medicines||[],Z[L].Medicines.includes(A.medicine)||Z[L].Medicines.push(A.medicine))}p(R.slice(0,50)),console.warn("Screen DEBUG: autoAssigned ->",N.slice(0,10))}catch(V){console.warn("Screen: error computing unmatched medicines",V)}}}catch(O){console.warn("Screen: failed to load stockists",O)}})(),()=>{S=!1}},[r&&r.key]),l.useEffect(()=>{try{const S=localStorage.getItem("user");if(!S)return;const O=JSON.parse(S);k(O&&O.role==="admin")}catch(S){console.warn("Screen: error reading user from storage",S)}},[]);const M=S=>{const O=[["#06B6D4","#0891B2"],["#10B981","#059669"],["#8B5CF6","#7C3AED"],["#F59E0B","#D97706"],["#EF4444","#DC2626"],["#3B82F6","#2563EB"],["#EC4899","#DB2777"]];return O[S%O.length]},z=S=>{S&&(window.location.href=`tel:${S}`)},v=S=>{const O={cardiovascular:"â¤ï¸",diabetes:"ðŸ©º",pain:"ðŸ’Š",mental:"ðŸ§ ",pediatric:"ðŸ‘¶",emergency:"ðŸš¨",chronic:"âš•ï¸",preventive:"ðŸ›¡ï¸",oncology:"ðŸŽ—ï¸",respiratory:"ðŸ«",dermatology:"ðŸ§´",orthopedic:"ðŸ¦´",gastro:"ðŸ«„",neurological:"ðŸ§ ",pharmacy:"ðŸ’Š",hospital:"ðŸ¥",clinic:"ðŸ¥",medical:"âš•ï¸",health:"ðŸ©º",care:"ðŸ’Š",medicine:"ðŸ’‰",drug:"ðŸ’Š",pharma:"ðŸ’Š",therapeutic:"ðŸ©¹",surgical:"ðŸ”¬",diagnostic:"ðŸ”¬",laboratory:"ðŸ§ª",radiology:"ðŸ“·",nutrition:"ðŸŽ",wellness:"ðŸŒ±",fitness:"ðŸ’ª",rehabilitation:"ðŸƒâ€â™‚ï¸"},Y=String(S).toLowerCase();for(const[H,W]of Object.entries(O))if(Y.includes(H))return W;return"ðŸ’Š"},u=()=>e.jsxs("div",{className:"px-6 pt-8 pb-6 bg-gradient-to-br from-slate-50 via-blue-50 to-cyan-50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-2xl bg-gradient-to-br from-cyan-400 to-blue-500 flex items-center justify-center shadow-lg",children:e.jsx("span",{className:"text-2xl",children:"ðŸ¥"})}),e.jsxs("div",{children:[e.jsx("span",{className:"text-slate-700 text-lg font-semibold",children:"Your Health Hub"}),e.jsx("div",{className:"text-sm text-slate-500",children:"Trusted Healthcare Network"})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-orange-400 to-pink-500 flex items-center justify-center shadow-md",children:e.jsx("span",{className:"text-white text-lg",children:"â¤ï¸"})}),e.jsx("div",{className:"w-10 h-10 rounded-xl bg-white/70 backdrop-blur-sm flex items-center justify-center shadow-md border border-white/50",children:e.jsx("span",{className:"text-slate-600 text-lg",children:"â™¡"})})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-orange-400 via-orange-500 to-orange-600 rounded-3xl p-8 mb-8 shadow-2xl relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-black/10"}),e.jsx("div",{className:"absolute top-4 right-4 w-20 h-20 bg-white/10 rounded-full blur-xl"}),e.jsx("div",{className:"absolute bottom-4 left-4 w-16 h-16 bg-white/10 rounded-full blur-lg"}),e.jsxs("div",{className:"relative flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-white text-2xl font-bold mb-3",children:"Find Your Medical Partners"}),e.jsx("p",{className:"text-cyan-100 text-base leading-relaxed",children:"Connect with trusted healthcare suppliers & stockists"}),e.jsxs("div",{className:"flex items-center gap-4 mt-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-green-400 shadow-lg"}),e.jsx("span",{className:"text-white/90 text-sm",children:"24/7 Support"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-yellow-400 shadow-lg"}),e.jsx("span",{className:"text-white/90 text-sm",children:"Verified Partners"})]})]})]}),e.jsx("div",{className:"text-6xl opacity-90 filter drop-shadow-lg",children:"ðŸ’Š"})]})]}),g&&e.jsx("div",{className:"mb-8",children:e.jsx("button",{onClick:()=>o.navigate("/adminpanel"),className:"bg-gradient-to-r from-violet-500 to-purple-600 text-white text-sm font-bold px-8 py-4 rounded-2xl shadow-xl hover:shadow-2xl transform hover:scale-105 transition-all duration-200",children:"Admin Panel"})}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-6",children:"Quick Actions"}),e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsx("div",{className:"bg-gradient-to-br from-cyan-400 to-cyan-600 rounded-3xl p-6 shadow-xl hover:shadow-2xl transform hover:scale-105 transition-all duration-200",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-2xl bg-white/20 flex items-center justify-center",children:e.jsx("span",{className:"text-3xl",children:"ðŸ“‹"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-white font-bold text-base",children:"Order Refills"}),e.jsx("div",{className:"text-cyan-100 text-sm",children:"Quick reorder system"})]})]})}),e.jsx("div",{className:"bg-gradient-to-br from-orange-400 to-red-500 rounded-3xl p-6 shadow-xl hover:shadow-2xl transform hover:scale-105 transition-all duration-200",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-2xl bg-white/20 flex items-center justify-center",children:e.jsx("span",{className:"text-3xl",children:"ðŸ’¬"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-white font-bold text-base",children:"Consult"}),e.jsx("div",{className:"text-orange-100 text-sm",children:"Expert advice"})]})]})})]})]}),e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-slate-800",children:"Medical Suppliers"}),e.jsxs("div",{className:"text-base text-slate-600 mt-1",children:[m.length," trusted stockist",m.length!==1?"s":""," available"]}),e.jsxs("div",{className:"text-sm text-slate-400 mt-2",children:["Debug: loaded stockists = ",m.length]})]}),e.jsx("div",{className:"bg-gradient-to-br from-blue-500 to-cyan-500 rounded-2xl px-5 py-3 shadow-lg",children:e.jsx("span",{className:"text-white text-lg font-bold",children:m.length})})]})]}),b=(S,O)=>{var W;const[Y,H]=M(O);return e.jsxs("article",{className:"bg-white rounded-3xl shadow-lg border-0 overflow-hidden mb-6 mx-6 transform hover:scale-105 hover:shadow-2xl transition-all duration-300",onClick:()=>h(O),role:"button",children:[S.image?e.jsxs("div",{className:"relative h-52 w-full",children:[e.jsx("img",{src:S.image,alt:S.title,className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 via-black/20 to-transparent"})]}):e.jsxs("div",{className:"relative h-52 w-full flex items-center justify-center",style:{background:`linear-gradient(135deg, ${Y}, ${H})`},children:[e.jsx("div",{className:"text-5xl font-extrabold text-white/90 drop-shadow-lg",children:(W=S.title)==null?void 0:W.charAt(0)}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/20 to-transparent"}),e.jsx("div",{className:"absolute top-4 right-4 w-16 h-16 bg-white/10 rounded-full blur-xl"})]}),e.jsxs("div",{className:"p-8",children:[e.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-4",children:S.title}),e.jsxs("div",{className:"flex items-start gap-4 text-base text-slate-600 mb-3",children:[e.jsx("div",{className:"w-6 h-6 rounded-lg bg-blue-100 flex items-center justify-center",children:e.jsx("span",{className:"text-sm",children:"ðŸ“ž"})}),e.jsx("div",{className:"flex-1 font-medium",children:S.phone||"-"})]}),e.jsxs("div",{className:"flex items-start gap-4 text-base text-slate-600 mb-6",children:[e.jsx("div",{className:"w-6 h-6 rounded-lg bg-green-100 flex items-center justify-center",children:e.jsx("span",{className:"text-sm",children:"ðŸ“"})}),e.jsx("div",{className:"flex-1 font-medium",children:S.address||"-"})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("div",{className:"text-base text-slate-700 font-semibold mb-4",children:"Company"}),e.jsxs("div",{className:"flex flex-wrap gap-3",children:[S.items.slice(0,2).map((I,T)=>e.jsxs("div",{className:"flex items-center gap-3 bg-gradient-to-r from-slate-50 to-blue-50 rounded-2xl px-4 py-3 border border-blue-100",children:[e.jsx("span",{className:"text-lg",children:v(I)}),e.jsx("span",{className:"text-slate-700 text-sm font-semibold",children:I})]},T)),S.items.length>2&&e.jsx("div",{className:"bg-gradient-to-r from-slate-100 to-slate-200 rounded-2xl px-4 py-3",children:e.jsxs("span",{className:"text-slate-600 text-sm font-semibold",children:["+",S.items.length-2," more"]})})]})]}),e.jsxs("div",{className:"flex items-center justify-between text-base pt-4 border-t border-slate-100",children:[e.jsx("div",{className:"bg-gradient-to-r from-emerald-100 to-green-100 rounded-2xl px-4 py-2 border border-emerald-200",children:e.jsx("span",{className:"text-emerald-700 font-bold",children:S.Medicines?`${S.Medicines.length} medicines`:"0 medicines"})}),e.jsxs("div",{className:"flex items-center gap-3 text-cyan-600",children:[e.jsx("span",{className:"text-base font-bold",children:"View details"}),e.jsx("div",{className:"w-8 h-8 rounded-full bg-cyan-100 flex items-center justify-center",children:e.jsx("span",{className:"text-lg",children:"ðŸ”"})})]})]})]})]},S._id||O)},x=()=>e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50/30 to-cyan-50/30",children:[e.jsx(u,{}),e.jsx("div",{className:"px-6 mb-6",children:e.jsxs("button",{onClick:()=>P(S=>!S),className:"px-6 py-3 bg-gradient-to-r from-slate-100 to-slate-200 rounded-2xl text-sm text-slate-600 font-semibold shadow-md hover:shadow-lg transition-all duration-200",children:[f?"Hide":"Show"," debug responses"]})}),f&&e.jsx("div",{className:"px-6 mb-8",children:e.jsxs("div",{className:"bg-white/90 backdrop-blur-sm rounded-3xl p-6 shadow-xl text-sm text-slate-700 border border-white/50",children:[e.jsx("div",{className:"mb-4 font-bold text-lg text-slate-800",children:"Raw API Responses (trimmed)"}),e.jsxs("div",{className:"mb-4",children:[e.jsx("div",{className:"font-semibold text-slate-800 mb-2",children:"Stockists:"}),e.jsx("pre",{className:"whitespace-pre-wrap max-h-48 overflow-auto text-xs bg-slate-50 p-4 rounded-2xl border border-slate-200",children:JSON.stringify(j.stockists&&j.stockists.data?j.stockists.data.slice(0,5):j.stockists,null,2)})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("div",{className:"font-semibold text-slate-800 mb-2",children:"Medicines:"}),e.jsx("pre",{className:"whitespace-pre-wrap max-h-48 overflow-auto text-xs bg-slate-50 p-4 rounded-2xl border border-slate-200",children:JSON.stringify(j.medicines&&j.medicines.data?j.medicines.data.slice(0,5):j.medicines,null,2)})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("div",{className:"font-semibold text-slate-800 mb-2",children:"Unmatched medicines (first 50):"}),e.jsx("pre",{className:"whitespace-pre-wrap max-h-48 overflow-auto text-xs bg-slate-50 p-4 rounded-2xl border border-slate-200",children:JSON.stringify(i,null,2)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-slate-800 mb-2",children:"Companies:"}),e.jsx("pre",{className:"whitespace-pre-wrap max-h-48 overflow-auto text-xs bg-slate-50 p-4 rounded-2xl border border-slate-200",children:JSON.stringify(j.companies&&j.companies.data?j.companies.data.slice(0,5):j.companies,null,2)})]})]})}),e.jsx("div",{className:"pb-32",children:m.map((S,O)=>b(S,O))})]}),C=()=>{var H;const S=m[a];if(!S)return null;const[O,Y]=M(a||0);return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50/30 to-cyan-50/30",children:[e.jsx("div",{className:"sticky top-0 z-40 bg-white/95 backdrop-blur-lg border-b border-white/50 shadow-sm",children:e.jsx("div",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("button",{onClick:()=>h(null),className:"w-12 h-12 rounded-2xl bg-gradient-to-br from-slate-100 to-slate-200 flex items-center justify-center shadow-md hover:shadow-lg hover:scale-105 transition-all duration-200",children:e.jsx("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"currentColor",className:"text-slate-700",children:e.jsx("path",{fillRule:"evenodd",d:"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z",clipRule:"evenodd"})})}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-lg font-bold text-slate-800",children:S.title}),e.jsx("div",{className:"text-sm text-slate-500",children:"Medical Supplier Details"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-red-100 to-pink-100 flex items-center justify-center shadow-md",children:e.jsx("span",{className:"text-red-600 text-lg",children:"â¤ï¸"})}),e.jsx("button",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-blue-100 to-cyan-100 flex items-center justify-center shadow-md",children:e.jsx("span",{className:"text-blue-600 text-lg",children:"ðŸ“‹"})})]})]})})}),e.jsxs("div",{className:"px-6 pb-32",children:[e.jsx("div",{className:"relative -mx-6 mb-8",children:e.jsxs("div",{className:"relative h-80 overflow-hidden",children:[S.image?e.jsx("img",{src:S.image,alt:S.title,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full",style:{background:`linear-gradient(135deg, ${O}, ${Y})`}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-black/30 to-transparent"}),e.jsx("div",{className:"absolute top-6 right-6 w-32 h-32 bg-white/10 rounded-full blur-3xl animate-pulse"}),e.jsx("div",{className:"absolute bottom-20 left-8 w-24 h-24 bg-white/10 rounded-full blur-2xl animate-pulse delay-1000"}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-8",children:e.jsxs("div",{className:"flex items-end gap-6",children:[e.jsx("div",{className:"w-24 h-24 rounded-3xl bg-white/20 backdrop-blur-md flex items-center justify-center shadow-2xl border border-white/30",children:e.jsx("span",{className:"text-4xl font-bold text-white",children:(H=S.title)==null?void 0:H.charAt(0)})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h1",{className:"text-white text-3xl font-bold mb-2",children:S.title}),e.jsxs("div",{className:"flex items-center gap-4 mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2 bg-white/20 backdrop-blur-sm rounded-full px-3 py-1",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-green-400"}),e.jsx("span",{className:"text-white text-sm font-medium",children:"Verified"})]}),e.jsxs("div",{className:"flex items-center gap-2 bg-white/20 backdrop-blur-sm rounded-full px-3 py-1",children:[e.jsx("span",{className:"text-yellow-400 text-sm",children:"â­"}),e.jsx("span",{className:"text-white text-sm font-medium",children:"4.8 Rating"})]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-white/90",children:[e.jsx("span",{className:"text-lg",children:"ðŸ“"}),e.jsx("span",{className:"text-base",children:S.address})]})]})]})})]})}),e.jsx("div",{className:"bg-white/95 backdrop-blur-sm rounded-3xl shadow-2xl p-6 mb-8 border border-white/50",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[e.jsxs("button",{onClick:()=>z(S.phone),className:"bg-gradient-to-r from-green-500 to-emerald-600 text-white py-5 rounded-2xl font-bold text-lg flex items-center justify-center gap-3 shadow-xl hover:shadow-2xl transform hover:scale-105 transition-all duration-200",children:[e.jsx("span",{className:"text-2xl",children:"ðŸ“ž"}),e.jsx("span",{children:"Call Now"})]}),e.jsxs("button",{className:"bg-gradient-to-r from-blue-500 to-cyan-600 text-white py-5 rounded-2xl font-bold text-lg flex items-center justify-center gap-3 shadow-xl hover:shadow-2xl transform hover:scale-105 transition-all duration-200",children:[e.jsx("span",{className:"text-2xl",children:"ðŸ’¬"}),e.jsx("span",{children:"Message"})]})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-8",children:[e.jsxs("div",{className:"bg-gradient-to-br from-cyan-500 to-blue-600 rounded-3xl p-6 text-center shadow-xl",children:[e.jsx("div",{className:"text-3xl mb-2",children:"ðŸ’Š"}),e.jsx("div",{className:"text-white text-2xl font-bold",children:S.Medicines?S.Medicines.length:0}),e.jsx("div",{className:"text-cyan-100 text-sm",children:"Medicines"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-orange-500 to-blue-600 rounded-3xl p-6 text-center shadow-xl",children:[e.jsx("div",{className:"text-3xl mb-2",children:"ðŸ¥"}),e.jsx("div",{className:"text-white text-2xl font-bold",children:S.items?S.items.length:0}),e.jsx("div",{className:"text-orange-100 text-sm",children:"Companies"})]})]}),e.jsxs("div",{className:"bg-white/95 backdrop-blur-sm rounded-3xl shadow-2xl p-8 mb-8 border border-white/50",children:[e.jsxs("h3",{className:"text-2xl font-bold text-slate-800 mb-6 flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-blue-500 to-cyan-500 flex items-center justify-center",children:e.jsx("span",{className:"text-white text-lg",children:"ðŸ“ž"})}),"Contact Details"]}),e.jsxs("div",{className:"space-y-6",children:[S.phone&&e.jsxs("div",{className:"flex items-center gap-6 p-6 bg-gradient-to-r from-blue-50 to-cyan-50 rounded-3xl border border-blue-100 hover:scale-[1.02] transition-all duration-200",children:[e.jsx("div",{className:"w-16 h-16 rounded-2xl bg-gradient-to-br from-blue-500 to-cyan-600 flex items-center justify-center shadow-lg",children:e.jsx("span",{className:"text-white text-2xl",children:"ðŸ“ž"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-blue-700 font-bold text-lg",children:"Phone Number"}),e.jsx("div",{className:"text-slate-800 text-xl font-bold mt-1",children:S.phone}),e.jsx("div",{className:"text-blue-600 text-sm mt-1",children:"Tap to call directly"})]})]}),S.address&&e.jsxs("div",{className:"flex items-center gap-6 p-6 bg-gradient-to-r from-green-50 to-emerald-50 rounded-3xl border border-green-100 hover:scale-[1.02] transition-all duration-200",children:[e.jsx("div",{className:"w-16 h-16 rounded-2xl bg-gradient-to-br from-green-500 to-emerald-600 flex items-center justify-center shadow-lg",children:e.jsx("span",{className:"text-white text-2xl",children:"ðŸ“"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-green-700 font-bold text-lg",children:"Address"}),e.jsx("div",{className:"text-slate-800 text-xl font-bold mt-1",children:S.address}),e.jsx("div",{className:"text-green-600 text-sm mt-1",children:"View on map"})]})]})]})]}),e.jsxs("div",{className:"bg-white/95 backdrop-blur-sm rounded-3xl shadow-2xl p-8 mb-8 border border-white/50",children:[e.jsxs("h3",{className:"text-2xl font-bold text-slate-800 mb-6 flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center",children:e.jsx("span",{className:"text-white text-lg",children:"ðŸ¥"})}),"Comapany"]}),e.jsx("div",{className:"grid grid-cols-1 gap-4",children:S.items.map((W,I)=>e.jsx("div",{className:"group relative overflow-hidden",children:e.jsxs("div",{className:"flex items-center gap-6 p-6 bg-gradient-to-r from-slate-50 via-blue-50 to-cyan-50 rounded-3xl border border-blue-100 shadow-md hover:shadow-xl hover:scale-[1.02] transition-all duration-300",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-16 h-16 rounded-2xl bg-gradient-to-br from-cyan-500 to-blue-600 flex items-center justify-center shadow-lg group-hover:scale-110 transition-all duration-300",children:e.jsx("span",{className:"text-white text-2xl",children:v(W)})}),e.jsx("div",{className:"absolute -top-1 -right-1 w-6 h-6 rounded-full bg-green-500 flex items-center justify-center",children:e.jsx("span",{className:"text-white text-xs",children:"âœ“"})})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-slate-800 text-xl font-bold",children:W}),e.jsx("div",{className:"text-slate-600 text-sm mt-1",children:"Specialized medical services available"})]}),e.jsx("div",{className:"text-cyan-600 text-2xl opacity-0 group-hover:opacity-100 transition-all duration-300",children:"â†’"})]})},I))})]}),S.Medicines&&S.Medicines.length>0&&e.jsxs("div",{className:"bg-white/95 backdrop-blur-sm rounded-3xl shadow-2xl p-8 border border-white/50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h3",{className:"text-2xl font-bold text-slate-800 flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-emerald-500 to-green-500 flex items-center justify-center",children:e.jsx("span",{className:"text-white text-lg",children:"ðŸ’Š"})}),"Medicines"]}),e.jsx("div",{className:"bg-gradient-to-r from-emerald-100 to-green-100 rounded-full px-4 py-2 border border-emerald-200",children:e.jsxs("span",{className:"text-emerald-700 font-bold text-sm",children:[S.Medicines.length," items in stock"]})})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[S.Medicines.slice(0,8).map((W,I)=>e.jsx("div",{className:"group",children:e.jsxs("div",{className:"flex items-center gap-4 p-4 bg-gradient-to-r from-emerald-50 to-green-50 rounded-2xl border border-emerald-100 hover:shadow-lg hover:scale-[1.02] transition-all duration-200",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-emerald-500 to-green-600 flex items-center justify-center shadow-md",children:e.jsx("span",{className:"text-white text-lg",children:"ðŸ’Š"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-emerald-800 font-bold text-lg",children:W}),e.jsx("div",{className:"text-emerald-600 text-sm",children:"In stock â€¢ Available now"})]})]})},I)),S.Medicines.length>8&&e.jsxs("button",{className:"w-full p-4 bg-gradient-to-r from-slate-100 to-slate-200 rounded-2xl text-slate-700 font-semibold hover:from-slate-200 hover:to-slate-300 transition-all duration-200",children:["View All ",S.Medicines.length," Medicines"]})]})]})]})]})},D=()=>e.jsx("div",{className:"fixed bottom-8 left-6 right-6 z-50",children:e.jsx("div",{className:"bg-white/90 backdrop-blur-lg rounded-3xl shadow-2xl border border-white/50",children:e.jsxs("div",{className:"flex justify-around py-6",children:[e.jsxs("button",{className:"flex flex-col items-center text-cyan-600",children:[e.jsx("div",{className:"w-14 h-14 rounded-3xl bg-gradient-to-br from-cyan-100 to-blue-100 flex items-center justify-center mb-2 shadow-lg",children:e.jsx("span",{className:"text-2xl",children:"ðŸ "})}),e.jsx("div",{className:"text-sm font-bold",children:"Home"})]}),e.jsxs("button",{className:"flex flex-col items-center text-slate-400",children:[e.jsx("div",{className:"w-14 h-14 rounded-3xl bg-slate-100 flex items-center justify-center mb-2 shadow-md",children:e.jsx("span",{className:"text-2xl",children:"ðŸ“‹"})}),e.jsx("div",{className:"text-sm font-medium",children:"Categories"})]}),e.jsxs("button",{className:"flex flex-col items-center text-slate-400",children:[e.jsx("div",{className:"w-14 h-14 rounded-3xl bg-slate-100 flex items-center justify-center mb-2 shadow-md",children:e.jsx("span",{className:"text-2xl",children:"ðŸ’¾"})}),e.jsx("div",{className:"text-sm font-medium",children:"Saved"})]}),e.jsxs("button",{className:"flex flex-col items-center text-slate-400",onClick:()=>o.navigate("/profile"),children:[e.jsx("div",{className:"w-14 h-14 rounded-3xl bg-slate-100 flex items-center justify-center mb-2 shadow-md",children:e.jsx("span",{className:"text-2xl",children:"ðŸ‘¤"})}),e.jsx("div",{className:"text-sm font-medium",children:"Profile"})]})]})})});return e.jsxs("div",{children:[a===null?x():C(),a===null&&D()]})};function Ms(){let s;try{const r=te();s=o=>r(o)}catch{s=o=>{typeof o=="string"?window.location.href=o:o&&o.name&&(window.location.href=o.name)}}const t={navigate:s,goBack:()=>window.history.back()};return e.jsxs("div",{className:"min-h-screen bg-white overflow-y-auto",children:[e.jsx(Cs,{navigation:t}),e.jsx(Ls,{navigation:t})]})}const Ps=({className:s=""})=>e.jsx("div",{className:`${s} rounded-lg flex items-center justify-center`,children:e.jsxs("span",{className:"text-white font-bold text-xl",children:[e.jsx("img",{src:"/final-logo.png",alt:"MedTrap"}),e.jsx("img",{src:"/logo.png",alt:"MedTrap small"})]})});function As(){const s=te(),[t,r]=l.useState("Purchaser"),[o,a]=l.useState(null),h=[{id:"Stockist",name:"Stockist",icon:"/WhatsApp Image 2025-09-30 at 15.26.30_9f12fc65.jpg",gradient:"from-emerald-400 to-teal-500",bgGlow:"bg-emerald-500/10",description:"Manage inventory",color:"emerald"},{id:"Purchaser",name:"Purchaser",icon:"/WhatsApp Image 2025-09-30 at 15.26.31_55e2f48c.jpg",gradient:"from-blue-400 to-indigo-500",bgGlow:"bg-blue-500/10",description:"Handle procurement",color:"blue"},{id:"Medical Owner",name:"Medical Owner",icon:"/WhatsApp Image 2025-09-30 at 15.26.30_99a6071d.jpg",gradient:"from-orange-400 to-red-500",bgGlow:"bg-orange-500/10",description:"Clinic management",color:"orange"}],g=m=>{if(r(m),localStorage.setItem("selectedRole",m),m==="Staff"){s("/staffs");return}},k=()=>{if(localStorage.setItem("confirmedRole",t),t==="Purchaser"){s("/purchaser");return}if(t==="Stockist"){s("/adminCreateStockist");return}if(t==="Medical Owner"){s("/signup");return}s("/dashboard")};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-100 flex items-center justify-center p-4 relative overflow-hidden",children:[e.jsxs("div",{className:"absolute inset-0",children:[e.jsx("div",{className:"absolute top-20 left-20 w-72 h-72 bg-gradient-to-r from-blue-400/15 to-purple-400/15 rounded-full blur-3xl animate-pulse"}),e.jsx("div",{className:"absolute bottom-20 right-20 w-80 h-80 bg-gradient-to-r from-emerald-400/10 to-teal-400/10 rounded-full blur-3xl animate-pulse delay-1000"}),e.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-96 h-96 bg-gradient-to-r from-indigo-400/8 to-purple-400/8 rounded-full blur-3xl animate-pulse delay-2000"}),e.jsx("div",{className:"absolute top-1/4 left-1/4 w-2 h-2 bg-blue-400/30 rounded-full animate-bounce delay-300"}),e.jsx("div",{className:"absolute top-3/4 right-1/4 w-3 h-3 bg-emerald-400/30 rounded-full animate-bounce delay-700"}),e.jsx("div",{className:"absolute bottom-1/4 left-1/3 w-1.5 h-1.5 bg-purple-400/30 rounded-full animate-bounce delay-1100"})]}),e.jsxs("div",{className:"relative bg-white/80 backdrop-blur-2xl rounded-3xl shadow-2xl border border-white/60 p-10 w-full max-w-2xl",children:[e.jsxs("div",{className:"text-center mb-14",children:[e.jsx("div",{className:"mt-8 mb-6 transform hover:scale-105 transition-transform duration-300",children:e.jsx(Ps,{className:"h-25 w-32 mx-auto"})}),e.jsxs("div",{className:"relative",children:[e.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-gray-800 via-blue-600 to-indigo-600 bg-clip-text text-transparent mb-3 tracking-tight",children:"Select Your Role"}),e.jsx("div",{className:"absolute -bottom-1 left-1/2 transform -translate-x-1/2 w-24 h-1 bg-gradient-to-r from-blue-500 to-indigo-500 rounded-full"})]}),e.jsx("p",{className:"text-gray-600 text-base mt-4 font-medium",children:"Choose your primary function to get started"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-14",children:h.map((m,c)=>{const j=m.icon,d=t===m.id,f=o===m.id;return e.jsxs("div",{onClick:()=>g(m.id),onMouseEnter:()=>a(m.id),onMouseLeave:()=>a(null),className:`
                  group relative flex flex-col items-center p-8 rounded-3xl cursor-pointer transition-all duration-500 transform hover:scale-110 hover:-translate-y-2
                  ${d?"bg-gradient-to-br from-white/90 to-white/70 border-2 border-blue-400/60 shadow-2xl shadow-blue-500/30":"bg-white/70 border-2 border-gray-200/40 hover:bg-white/90 hover:border-gray-300/60 hover:shadow-xl"}
                `,style:{animationDelay:`${c*150}ms`},children:[d&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-500/15 to-indigo-600/15 rounded-3xl blur-xl animate-pulse"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-400/10 to-indigo-500/10 rounded-3xl"})]}),f&&!d&&e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-400/10 to-gray-500/10 rounded-3xl blur-lg"}),e.jsxs("div",{className:`relative p-6 rounded-2xl mb-6 transition-all duration-500 transform group-hover:scale-110 group-hover:rotate-3 ${d?`bg-gradient-to-r ${m.gradient} shadow-2xl`:"bg-gradient-to-r from-gray-100/90 to-gray-200/90 group-hover:from-gray-200/90 group-hover:to-gray-300/90"}`,children:[typeof j=="string"?e.jsx("img",{src:j,alt:m.name+" icon",className:`w-28 h-28 object-contain transition-all duration-500 ${d?"":"group-hover:opacity-90"}`}):e.jsx(j,{size:32,className:`transition-all duration-500 ${d?"text-white drop-shadow-lg":"text-gray-600 group-hover:text-gray-700"}`}),d&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"absolute -top-2 -right-2 w-3 h-3 bg-white/70 rounded-full animate-ping"}),e.jsx("div",{className:"absolute -bottom-2 -left-2 w-2 h-2 bg-white/50 rounded-full animate-ping delay-500"}),e.jsx("div",{className:"absolute top-1 right-1 w-1.5 h-1.5 bg-white/60 rounded-full animate-pulse"})]}),d&&e.jsx("div",{className:"absolute inset-0 rounded-2xl border-2 border-white/30",style:{animation:"spin 8s linear infinite"}})]}),e.jsx("h3",{className:`text-xl font-bold mb-3 transition-all duration-500 text-center tracking-wide ${d?"text-gray-800 drop-shadow-sm":"text-gray-700 group-hover:text-gray-800"}`,children:m.name}),e.jsx("p",{className:`text-sm transition-all duration-500 text-center font-medium ${d?"text-gray-600":"text-gray-500 group-hover:text-gray-600"}`,children:m.description}),e.jsx("div",{className:`absolute -top-3 -right-3 w-8 h-8 rounded-full border-3 border-white transition-all duration-500 flex items-center justify-center ${d?"bg-gradient-to-r from-blue-500 to-indigo-600 scale-100 shadow-lg":"bg-gray-400/60 scale-0 group-hover:scale-75 group-hover:bg-gray-500/60"}`,children:d&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-3 h-3 bg-white rounded-full animate-pulse"}),e.jsx("div",{className:"absolute inset-0 bg-white/20 rounded-full animate-ping"})]})}),e.jsx("div",{className:`absolute bottom-0 left-1/2 transform -translate-x-1/2 h-1 rounded-t-full transition-all duration-500 ${d?"w-full bg-gradient-to-r from-blue-500 to-indigo-600":"w-0 bg-gray-400"}`})]},m.id)})}),e.jsx("div",{className:"text-center mb-8",children:e.jsxs("button",{onClick:k,className:"group relative bg-gradient-to-r from-blue-600 via-indigo-600 to-purple-700 hover:from-blue-700 hover:via-indigo-700 hover:to-purple-800 text-white font-bold py-5 px-16 rounded-full transition-all duration-500 transform hover:scale-110 hover:shadow-2xl hover:shadow-blue-500/40 min-w-[220px] overflow-hidden text-lg tracking-wide",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/30 to-transparent -skew-x-12 translate-x-[-200%] group-hover:translate-x-[200%] transition-transform duration-1000"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-600/50 to-purple-600/50 rounded-full animate-pulse"}),e.jsxs("span",{className:"relative flex items-center justify-center gap-3",children:[e.jsx("span",{children:"CONFIRM ROLE"}),e.jsx("div",{className:"w-2 h-2 bg-white rounded-full animate-bounce group-hover:animate-pulse"})]}),e.jsx("div",{className:"absolute inset-0 rounded-full border-2 border-white/20 group-hover:border-white/40 transition-colors duration-300"})]})}),e.jsxs("div",{className:"flex justify-center space-x-2",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse"}),e.jsx("div",{className:"w-2 h-2 bg-blue-400/60 rounded-full animate-pulse delay-200"}),e.jsx("div",{className:"w-2 h-2 bg-blue-300/40 rounded-full animate-pulse delay-400"})]})]})]})}const es=({icon:s,label:t,name:r,type:o="text",placeholder:a,required:h=!1,showPasswordToggle:g=!1,form:k,handleChange:m,focusedField:c,setFocusedField:j,showPassword:d,setShowPassword:f})=>e.jsxs("div",{className:"relative group",children:[e.jsx("label",{className:`block text-sm font-medium transition-all duration-300 mb-2 ${c===r?"text-blue-600":"text-gray-700"}`,children:t}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:`absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none transition-all duration-300 ${c===r?"text-blue-500":"text-gray-400"}`,children:e.jsx(s,{className:"h-5 w-5"})}),e.jsx("input",{name:r,type:g?d?"text":"password":o,placeholder:a,value:k[r],onChange:m,onFocus:()=>j(r),onBlur:()=>j(null),required:h,className:`block w-full pl-10 pr-12 py-3 border rounded-lg shadow-sm placeholder-gray-500 transition-all duration-300 transform hover:scale-[1.01] focus:scale-[1.01] ${c===r?"border-blue-500 ring-2 ring-blue-200 bg-blue-50/50":"border-gray-300 hover:border-gray-400 bg-white"}`}),g&&e.jsx("button",{type:"button",onClick:()=>f(!d),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600 transition-all duration-200 hover:scale-110",children:d?e.jsx(We,{className:"h-5 w-5"}):e.jsx(Ue,{className:"h-5 w-5"})})]})]}),zs=()=>{const s=te(),[t,r]=l.useState({email:"",password:""}),[o,a]=l.useState(""),[h,g]=l.useState(!1),[k,m]=l.useState(!1),[c,j]=l.useState(!1),[d,f]=l.useState(null);l.useEffect(()=>{j(!0)},[]);const P=p=>{r({...t,[p.target.name]:p.target.value})},i=async p=>{p&&p.preventDefault&&p.preventDefault(),g(!0),a("");try{const M=await fetch(G("/api/auth/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t.email,password:t.password})}),z=await M.json();if(!M.ok)throw new Error(z.message||"Login failed");if(z.success&&z.token&&z.user)localStorage.setItem("token",z.token),localStorage.setItem("user",JSON.stringify(z.user)),a("Login successful!"),setTimeout(()=>s("/dashboard"),700);else throw new Error("Invalid response format from server")}catch(M){a(M.message||"Login failed. Please check your credentials.")}finally{g(!1)}};return e.jsxs(e.Fragment,{children:[e.jsx("style",{children:`
        @import url("https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Poppins:wght@300;400;500;600;700;800&display=swap");

        * { font-family: "Inter", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif; }
        .brand-font { font-family: "Poppins", sans-serif; }
        .fade-in { opacity: ${c?1:0}; transform: translateY(${c?"0":"30px"}); transition: all 0.8s cubic-bezier(0.4, 0, 0.2, 1); }
        .slide-in-left { opacity: ${c?1:0}; transform: translateX(${c?"0":"-50px"}); transition: all 0.6s cubic-bezier(0.4, 0, 0.2, 1) 0.2s; }
        .slide-in-right { opacity: ${c?1:0}; transform: translateX(${c?"0":"50px"}); transition: all 0.6s cubic-bezier(0.4, 0, 0.2, 1) 0.4s; }
        .scale-in { opacity: ${c?1:0}; transform: scale(${c?1:.8}); transition: all 0.6s cubic-bezier(0.4, 0, 0.2, 1) 0.6s; }
        .floating { animation: floating 6s ease-in-out infinite; }
        .pulse-ring { animation: pulse-ring 2s cubic-bezier(0.4, 0, 0.6, 1) infinite; }
        @keyframes floating { 0%, 100% { transform: translateY(0px); } 50% { transform: translateY(-10px); } }
        @keyframes pulse-ring { 0% { transform: scale(1); opacity: 1; } 100% { transform: scale(1.2); opacity: 0; } }
        .gradient-text { background: linear-gradient(135deg, #3b82f6, #10b981); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; }
        .glass-effect { background: rgba(255, 255, 255, 0.95); backdrop-filter: blur(10px); border: 1px solid rgba(255, 255, 255, 0.2); }
        .hover-lift:hover { transform: translateY(-2px); box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04); }
        .button-gradient { background: linear-gradient(135deg, #3b82f6, #10b981); background-size: 200% 200%; animation: gradient-shift 3s ease infinite; }
        .button-gradient:hover { animation: gradient-shift 0.5s ease infinite; }
        @keyframes gradient-shift { 0% { background-position: 0% 50%; } 50% { background-position: 100% 50%; } 100% { background-position: 0% 50%; } }
        @media (max-width: 640px) { .mobile-padding { padding: 1rem; } .mobile-text { font-size: 2rem; } .mobile-card { margin: 1rem; padding: 1.5rem; } }
      `}),e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-green-50 flex items-center justify-center py-4 sm:py-12 px-4 sm:px-6 lg:px-8 relative overflow-hidden",children:[e.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[e.jsx("div",{className:"absolute -top-40 -right-40 w-80 h-80 bg-blue-400 rounded-full mix-blend-multiply filter blur-xl opacity-20 animate-pulse"}),e.jsx("div",{className:"absolute -bottom-40 -left-40 w-80 h-80 bg-green-400 rounded-full mix-blend-multiply filter blur-xl opacity-20 animate-pulse",style:{animationDelay:"2s"}}),e.jsx("div",{className:"absolute top-40 left-40 w-60 h-60 bg-purple-400 rounded-full mix-blend-multiply filter blur-xl opacity-20 animate-pulse",style:{animationDelay:"4s"}})]}),e.jsxs("div",{className:"max-w-md w-full relative z-10",children:[e.jsx("div",{className:"relative flex justify-center items-center mb-4",style:{height:"80px"},children:e.jsx(Ee,{className:"h-25 w-32"})}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-6 sm:p-8 border border-gray-100 glass-effect hover-lift transition-all duration-500 scale-in mobile-card",children:[e.jsxs("div",{className:"mb-6 slide-in-left",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-900 mb-2 brand-font",children:"Welcome Back"}),e.jsx("p",{className:"text-gray-600 text-sm sm:text-base",children:"Sign in to your MedTrap account"})]}),e.jsxs("div",{className:"space-y-6 slide-in-right",children:[e.jsx(es,{icon:ze,label:"Email Address",name:"email",type:"email",placeholder:"Enter your email address",required:!0,form:t,handleChange:P,focusedField:d,setFocusedField:f}),e.jsx(es,{icon:qe,label:"Password",name:"password",type:"password",placeholder:"Enter your password",required:!0,showPasswordToggle:!0,form:t,handleChange:P,focusedField:d,setFocusedField:f,showPassword:k,setShowPassword:m}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{id:"remember-me",name:"remember-me",type:"checkbox",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded transition-all duration-200 hover:scale-110"}),e.jsx("label",{htmlFor:"remember-me",className:"ml-2 block text-gray-700 font-medium",children:"Remember me"})]}),e.jsx("button",{type:"button",onClick:()=>s("/forgot-password"),className:"text-blue-600 hover:text-blue-500 transition-all duration-200 hover:underline font-medium",children:"Forgot password?"})]}),e.jsx("button",{type:"button",onClick:i,disabled:h,className:"w-full flex justify-center py-3 px-4 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white button-gradient hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-300 transform hover:scale-[1.02] active:scale-[0.98]",children:h?e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2"}),e.jsx("span",{className:"font-semibold",children:"Signing in..."})]}):e.jsx("span",{className:"font-semibold",children:"Sign In"})}),o&&e.jsxs("div",{className:`flex items-center p-4 rounded-lg transition-all duration-500 transform ${o.includes("successful")?"bg-green-50 border border-green-200 scale-100 opacity-100":"bg-red-50 border border-red-200 scale-100 opacity-100"}`,children:[o.includes("successful")?e.jsx(Ie,{className:"h-5 w-5 text-green-600 mr-3 animate-bounce"}):e.jsx($e,{className:"h-5 w-5 text-red-600 mr-3 animate-pulse"}),e.jsx("span",{className:`text-sm font-medium ${o.includes("successful")?"text-green-700":"text-red-700"}`,children:o})]})]}),e.jsxs("div",{className:"mt-6 fade-in",style:{animationDelay:"1s"},children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:"w-full border-t border-gray-300"})}),e.jsx("div",{className:"relative flex justify-center text-sm",children:e.jsx("span",{className:"px-2 bg-white text-gray-500 font-medium",children:"New to MedTrap?"})})]}),e.jsx("div",{className:"mt-4 text-center",children:e.jsx("button",{onClick:()=>{s("/signup")},className:"font-semibold text-blue-600 hover:text-blue-500 transition-all duration-200 hover:underline transform hover:scale-105 inline-block",children:"Create your account"})})]})]}),e.jsx("div",{className:"mt-6 sm:mt-8 text-center fade-in",style:{animationDelay:"1.2s"},children:e.jsx("p",{className:"text-xs text-gray-500 font-medium",children:"ðŸ”’ Protected by industry-standard security measures"})})]})]})]})},Is=()=>{const s=te(),[t,r]=l.useState({medicalName:"",ownerName:"",address:"",email:"",contactNo:"",drugLicenseNo:"",password:"",drugLicenseImage:null}),[o,a]=l.useState(""),[h,g]=l.useState(!1),[k,m]=l.useState(!1),[c,j]=l.useState(!1),[d,f]=l.useState({fullName:"",email:"",password:"",aadharImage:null,personalPhoto:null}),[P,i]=l.useState(!1),[p,M]=l.useState(""),[z,v]=l.useState(!1),[u,b]=l.useState([]),[x,C]=l.useState([]),[D,S]=l.useState(!1),O=y=>{const{name:q,value:E,files:n}=y.target;r(q==="drugLicenseImage"?w=>({...w,drugLicenseImage:n[0]}):w=>({...w,[q]:E}))},Y=y=>{const{name:q,value:E,files:n}=y.target;f(q==="aadharImage"||q==="personalPhoto"?w=>({...w,[q]:n&&n[0]?n[0]:null}):w=>({...w,[q]:E}))},H=y=>{y.preventDefault(),y.stopPropagation(),y.type==="dragenter"||y.type==="dragover"?m(!0):y.type==="dragleave"&&m(!1)},W=y=>{y.preventDefault(),y.stopPropagation(),m(!1),y.dataTransfer.files&&y.dataTransfer.files[0]&&r(q=>({...q,drugLicenseImage:y.dataTransfer.files[0]}))},I=async y=>{if(y&&y.preventDefault&&y.preventDefault(),c){i(!0),M("");try{if(!d.fullName||!d.email||!d.password){M("Please fill all purchaser fields"),i(!1);return}if(!d.aadharImage||!d.personalPhoto){M("Please upload aadhar image and personal photo"),i(!1);return}const E=new FormData;E.append("fullName",d.fullName),E.append("email",d.email),E.append("password",d.password),E.append("aadharImage",d.aadharImage),E.append("personalPhoto",d.personalPhoto);const n=await fetch(G("/api/auth/purchaser-signup"),{method:"POST",body:E}),w=await n.json();if(!n.ok)throw new Error(w.message||"Signup failed");if(w.token)try{localStorage.setItem("token",w.token)}catch{}M("Account created. Please select stockists to notify.");try{const $=w.token||localStorage.getItem("token"),se=await(await fetch(G("/api/stockist"),{headers:{Authorization:`Bearer ${$}`}})).json();b(se.data||[]),C([]),v(!0)}catch($){console.warn("Failed to load stockists",$&&$.message)}}catch(E){M(E.message||"Signup failed")}finally{i(!1)}return}g(!0),a("");const q=new FormData;Object.entries(t).forEach(([E,n])=>{n!=null&&q.append(E,n)});try{const E=await fetch(G("/api/auth/signup"),{method:"POST",body:q}),n=await E.json();if(!E.ok)throw new Error(n.message||"Registration failed");if(n.success)a("Registration successful! You can now log in."),setTimeout(()=>s("/login"),2e3);else throw new Error("Invalid response format from server")}catch(E){a(E.message||"Registration failed. Please try again.")}finally{g(!1)}},T=({icon:y,label:q,name:E,type:n="text",placeholder:w,required:$=!1,accept:F})=>e.jsxs("div",{className:"relative",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:q}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(y,{className:"h-5 w-5 text-gray-400"})}),n==="file"?e.jsx("input",{name:E,type:n,placeholder:w,onChange:O,required:$,accept:F,className:"block w-full pl-10 pr-3 py-3 border border-gray-200 rounded-xl shadow-sm placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200"}):e.jsx("input",{name:E,type:n,placeholder:w,value:t[E]||"",onChange:O,required:$,autoComplete:E==="password"?"new-password":"on",className:"block w-full pl-10 pr-3 py-3 border border-gray-200 rounded-xl shadow-sm placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200"})]})]}),Q=y=>e.jsx("svg",{...y,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-4m-5 0H9m11 0v-4a2 2 0 00-2-2h-2a2 2 0 00-2 2v4m6 0V9a2 2 0 00-2-2H9a2 2 0 00-2 2v12"})}),U=y=>e.jsx("svg",{...y,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),Z=y=>e.jsxs("svg",{...y,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),V=y=>e.jsx("svg",{...y,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),X=y=>e.jsx("svg",{...y,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})}),N=y=>e.jsx("svg",{...y,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),R=y=>e.jsx("svg",{...y,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),_=y=>e.jsx("svg",{...y,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),A=y=>e.jsx("svg",{...y,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),L=y=>e.jsx("svg",{...y,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})});return e.jsx("div",{className:"min-h-screen py-12 px-4 sm:px-6 lg:px-8 flex items-center justify-center",style:{backgroundColor:"#f8fafc"},children:e.jsxs("div",{className:"max-w-md w-full mx-auto",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx(Ee,{className:"w-20 h-20",alt:"MedTrap Logo"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"MedTrap"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Medical Store Management"})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-8 border border-gray-100",children:[e.jsxs("div",{className:"mb-8 text-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Create Your Account"}),e.jsx("p",{className:"text-gray-600",children:"Register your medical store with MedTrap"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx(T,{icon:Q,label:"Medical Store Name",name:"medicalName",placeholder:"Enter your medical store name",required:!0}),e.jsx("div",{className:"flex items-center gap-3 mb-4",children:e.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[e.jsx("input",{type:"checkbox",checked:c,onChange:y=>j(y.target.checked)}),e.jsx("span",{children:"Register as Purchaser (need stockist approvals)"})]})}),c?e.jsxs("div",{className:"space-y-4 p-4 border rounded-lg bg-gray-50",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Full Name"}),e.jsx("input",{name:"fullName",value:d.fullName,onChange:Y,className:"w-full px-3 py-2 rounded-xl border"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),e.jsx("input",{name:"email",type:"email",value:d.email,onChange:Y,className:"w-full px-3 py-2 rounded-xl border"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),e.jsx("input",{name:"password",type:"password",value:d.password,onChange:Y,className:"w-full px-3 py-2 rounded-xl border"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Aadhar Number"}),e.jsx("input",{name:"aadharNo",value:d.aadharNo,onChange:Y,className:"w-full px-3 py-2 rounded-xl border"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Aadhar Image"}),e.jsx("input",{name:"aadharImage",type:"file",accept:"image/*",onChange:Y,className:"w-full text-sm text-gray-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Personal Photo"}),e.jsx("input",{name:"personalPhoto",type:"file",accept:"image/*",onChange:Y,className:"w-full text-sm text-gray-500"})]}),e.jsx("div",{className:"flex gap-3",children:e.jsx("button",{onClick:I,disabled:P,className:"flex-1 py-3 px-4 rounded-xl bg-teal-500 text-white font-semibold",children:P?"Creating...":"Create Purchaser Account"})}),p&&e.jsx("div",{className:"text-sm text-gray-700",children:p})]}):e.jsxs(e.Fragment,{children:[e.jsx(T,{icon:U,label:"Owner Name",name:"ownerName",placeholder:"Enter owner's full name",required:!0}),e.jsx(T,{icon:Z,label:"Address",name:"address",placeholder:"Enter complete address",required:!0}),e.jsx(T,{icon:V,label:"Email Address",name:"email",type:"email",placeholder:"Enter your email",required:!0}),e.jsx(T,{icon:X,label:"Contact Number",name:"contactNo",type:"tel",placeholder:"Enter contact number",required:!0}),e.jsx(T,{icon:N,label:"Drug License Number",name:"drugLicenseNo",placeholder:"Enter drug license number",required:!0}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Drug License Image"}),e.jsxs("div",{className:`relative border-2 border-dashed rounded-xl p-6 text-center transition-all duration-200 ${k?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-blue-300"}`,onDragEnter:H,onDragLeave:H,onDragOver:H,onDrop:W,children:[e.jsx("input",{name:"drugLicenseImage",type:"file",accept:"image/*",onChange:O,required:!0,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer"}),e.jsx(_,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsxs("div",{className:"mt-3",children:[e.jsx("p",{className:"text-sm text-gray-600",children:t.drugLicenseImage?e.jsx("span",{className:"text-blue-600 font-medium",children:t.drugLicenseImage.name}):e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"font-medium text-blue-600",children:"Click to upload"})," ","or drag and drop"]})}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"PNG, JPG, GIF up to 10MB"})]})]})]}),e.jsx(T,{icon:R,label:"Password",name:"password",type:"password",placeholder:"Create a strong password",required:!0}),e.jsx("button",{onClick:I,disabled:h,className:"w-full flex justify-center py-4 px-6 border border-transparent rounded-xl shadow-md text-white bg-blue-500 hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 font-semibold",children:h?e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2"}),"Creating Account..."]}):"Create Account"})]}),o&&e.jsxs("div",{className:`flex items-center p-4 rounded-xl ${o.includes("successful")?"bg-green-50 border border-green-200":"bg-red-50 border border-red-200"}`,children:[o.includes("successful")?e.jsx(A,{className:"h-5 w-5 text-green-600 mr-3"}):e.jsx(L,{className:"h-5 w-5 text-red-600 mr-3"}),e.jsx("span",{className:`text-sm font-medium ${o.includes("successful")?"text-green-700":"text-red-700"}`,children:o})]})]}),e.jsx("div",{className:"mt-8 text-center",children:e.jsxs("p",{className:"text-sm text-gray-600",children:["Already have an account?"," ",e.jsx("button",{type:"button",onClick:()=>s("/login"),className:"font-semibold text-blue-600 hover:text-blue-500 transition-colors",children:"Sign in"})]})})]}),e.jsx("div",{className:"mt-8 text-center",children:e.jsxs("p",{className:"text-xs text-gray-500",children:["By registering, you agree to our"," ",e.jsx("a",{href:"#",className:"text-blue-600 hover:text-blue-500 font-medium",children:"Terms of Service"})," ","and"," ",e.jsx("a",{href:"#",className:"text-blue-600 hover:text-blue-500 font-medium",children:"Privacy Policy"})]})})]})})};function $s(s){const t=Ae(),r=te(),{company:o,stockists:a}=s,h=t.state||{},g=o||h.company,k=a||h.stockists||[],[m,c]=l.useState(null),j={hidden:{opacity:0,y:8,scale:.995},show:i=>({opacity:1,y:0,scale:1,transition:{delay:i*.05}}),exit:{opacity:0,y:-8,transition:{duration:.18}}},d={hidden:{y:20,opacity:0},show:{y:0,opacity:1,transition:{duration:.28}},exit:{y:20,opacity:0,transition:{duration:.2}}};if(!g||!k||k.length===0)return e.jsx("div",{className:"min-h-screen bg-blue-50 flex items-center justify-center p-6",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg max-w-lg w-full p-8 text-center",children:[e.jsx("div",{className:"mx-auto w-20 h-20 rounded-full bg-blue-100 flex items-center justify-center mb-6",children:e.jsx(be,{size:36,color:"#3B82F6"})}),e.jsx("h2",{className:"text-3xl font-bold text-gray-800 mb-2",children:"No Results Found"}),e.jsx("p",{className:"text-lg text-gray-600 mb-6",children:"Please try searching for a different company."}),e.jsx("button",{onClick:()=>r?r(-1):window.history.back(),className:"mt-2 inline-block bg-blue-600 hover:bg-blue-700 text-white font-medium px-6 py-3 rounded-lg",children:"Go Back"})]})});const f=({stockist:i,index:p})=>e.jsxs(ce.div,{custom:p,initial:"hidden",animate:"show",exit:"exit",variants:j,className:"bg-white rounded-2xl shadow-md overflow-hidden m-2 w-72 cursor-pointer hover:shadow-lg",onClick:()=>c(p),children:[i.image?e.jsxs("div",{className:"relative h-44 w-full",children:[e.jsx("img",{src:i.image,alt:i.title,className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute inset-0 bg-black/30"})]}):e.jsxs("div",{className:"relative h-44 w-full flex items-center justify-center",style:{background:"#DBEAFE"},children:[e.jsx("div",{className:"text-4xl font-extrabold text-white/90",children:(i.title||"").charAt(0)}),e.jsx("div",{className:"absolute inset-0 bg-black/10"})]}),e.jsxs("div",{className:"p-5",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-2",children:i.title}),i.address&&e.jsxs("div",{className:"flex items-start gap-3 mt-2",children:[e.jsx(je,{size:16,color:"#4B5563"}),e.jsx("p",{className:"text-sm text-gray-600 flex-1",children:i.address})]}),i.phone&&e.jsxs("div",{className:"flex items-center gap-3 mt-3",children:[e.jsx(Ne,{size:16,color:"#4B5563"}),e.jsx("p",{className:"text-sm text-gray-600",children:i.phone})]}),e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-100",children:e.jsx("button",{className:"w-full text-blue-600 font-medium",children:"View Details"})})]})]},i._id||p),P=({stockist:i})=>e.jsxs(ce.div,{initial:"hidden",animate:"show",exit:"exit",variants:d,className:"bg-white rounded-2xl shadow-xl overflow-hidden max-w-3xl mx-auto",children:[e.jsxs("div",{className:"relative",children:[i.image?e.jsx("img",{src:i.image,alt:i.title,className:"w-full h-64 object-cover"}):e.jsx("div",{className:"h-64 bg-blue-600 flex items-center p-6",children:e.jsx("h2",{className:"text-3xl font-bold text-white",children:i.title})}),e.jsx("button",{onClick:()=>c(null),className:"absolute top-4 right-4 bg-white p-2 rounded-full shadow","aria-label":"close details",children:e.jsx(is,{size:18,color:"#1F2937"})})]}),e.jsxs("div",{className:"p-6",children:[i.address&&e.jsxs("div",{className:"flex items-start gap-4 mb-4",children:[e.jsx(je,{size:20,color:"#2563EB"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-gray-700",children:"Address"}),e.jsx("div",{className:"text-gray-600",children:i.address})]})]}),i.phone&&e.jsxs("div",{className:"flex items-start gap-4 mb-4",children:[e.jsx(Ne,{size:20,color:"#2563EB"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-gray-700",children:"Phone"}),e.jsx("div",{className:"text-gray-600",children:i.phone})]})]}),i.medicines&&i.medicines.length>0&&e.jsxs("div",{className:"mt-6",children:[e.jsx("h4",{className:"text-xl font-bold mb-4 text-gray-800",children:"Available Medicines"}),e.jsx("div",{className:"space-y-2",children:i.medicines.map((p,M)=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-blue-100 flex items-center justify-center text-blue-800 font-medium",children:M+1}),e.jsx("div",{className:"text-gray-700",children:p})]},M))})]}),e.jsx("div",{className:"mt-8",children:e.jsxs("button",{onClick:()=>c(null),className:"inline-flex items-center gap-2 bg-blue-600 text-white px-5 py-3 rounded-lg",children:[e.jsx(Oe,{size:18}),e.jsx("span",{className:"font-medium",children:"Back to All Stockists"})]})})]})]},i._id||"detail");return e.jsxs("div",{className:"min-h-screen bg-blue-50 p-6",children:[e.jsxs("div",{className:"bg-white rounded-2xl shadow-md p-6 mb-8 max-w-6xl mx-auto",children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-800",children:[e.jsx("span",{className:"text-blue-600",children:g})," Stockists"]}),e.jsxs("p",{className:"mt-2 text-gray-600",children:[k.length," locations found"]})]}),e.jsx("div",{className:"max-w-6xl mx-auto",children:e.jsx(ns,{children:m===null?e.jsx(ce.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"flex flex-wrap gap-4",children:k.map((i,p)=>e.jsx(f,{stockist:i,index:p},i._id||p))},"list"):e.jsx(P,{stockist:k[m]})})})]})}function Es(){const{id:s}=He(),t=te(),[r,o]=l.useState(null),[a,h]=l.useState([]),[g,k]=l.useState(!0),[m,c]=l.useState("");l.useEffect(()=>{let d=!0;return(async()=>{k(!0),c("");try{const f=localStorage.getItem("token"),P=f?{Authorization:`Bearer ${f}`}:{},[i,p]=await Promise.all([fetch(G("/api/company"),{headers:P}),fetch(G("/api/medicine"),{headers:P})]),M=await i.json().catch(()=>({})),z=await p.json().catch(()=>({}));if(!d)return;const u=(M&&M.data?M.data:Array.isArray(M)?M:[]).find(C=>String(C._id)===String(s)||String(C.id)===String(s));o(u||null);const x=(z&&z.data?z.data:Array.isArray(z)?z:[]).filter(C=>{try{return C?!!(C.company&&(String(C.company)===String(s)||C.company._id&&String(C.company._id)===String(s))||C.manufacturer&&(String(C.manufacturer)===String(s)||C.manufacturer._id&&String(C.manufacturer._id)===String(s))||C.companyId&&String(C.companyId)===String(s)||u&&C.company&&typeof C.company=="string"&&String(C.company).toLowerCase().includes((u.name||"").toLowerCase())):!1}catch{return!1}});h(x)}catch(f){console.error("CompanyProducts fetch error",f),c("Failed to load products for this company.")}finally{d&&k(!1)}})(),()=>d=!1},[s]);const j=r?r.name:`Company ${s}`;return e.jsx("div",{className:"min-h-screen p-6 bg-gray-50",children:e.jsxs("div",{className:"max-w-5xl mx-auto space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>t(-1),className:"w-10 h-10 rounded-full bg-white shadow flex items-center justify-center",children:e.jsx(ke,{className:"w-5 h-5"})}),e.jsxs("h1",{className:"text-2xl font-bold",children:[j," â€” Products"]})]}),e.jsxs("div",{className:"bg-white rounded-2xl p-4 shadow-sm",children:[g&&e.jsx("div",{className:"text-sm text-gray-500",children:"Loading..."}),m&&e.jsx("div",{className:"text-sm text-red-500",children:m}),!g&&!m&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.length===0&&e.jsx("div",{className:"text-sm text-gray-500 p-6",children:"No products found for this company."}),a.map(d=>e.jsx("div",{className:"bg-white rounded-xl p-4 border shadow-sm",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-lg bg-gradient-to-br from-cyan-400 to-blue-500 flex items-center justify-center text-white font-bold",children:e.jsx(le,{className:"w-5 h-5"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:d.name||d.title||d.medicineName}),e.jsx("p",{className:"text-sm text-gray-500",children:d.company||d.manufacturer||""}),e.jsxs("div",{className:"mt-2 text-sm text-gray-700",children:["Price: ",d.price||"â€”"]})]})]})},d._id||d.id||d.name))]})]})]})})}function Bs(){const s=Ae(),{medicine:t,stockists:r}=s.state||{},[o,a]=l.useState(null),[h,g]=l.useState(t||""),[k,m]=l.useState(!0);if(l.useEffect(()=>{const f=setTimeout(()=>{m(!1)},600);return()=>clearTimeout(f)},[]),!t||!r||r.length===0)return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100",children:e.jsxs(ce.div,{className:"text-center bg-white p-8 rounded-2xl shadow-xl max-w-md mx-4",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.5},children:[e.jsx("div",{className:"w-24 h-24 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-6",children:e.jsx(is,{size:40,className:"text-red-500"})}),e.jsx("h1",{className:"text-3xl font-bold mb-4 text-gray-800",children:"No Results Found"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"We couldn't find any stockists for your search. Please try searching for a different medicine."}),e.jsx("button",{className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg shadow-lg transform transition-all hover:scale-105",onClick:()=>window.history.back(),children:"Go Back"})]})});const c=r.filter(f=>{var P;return(P=f.Medicines)==null?void 0:P.some(i=>i.toLowerCase().includes(h.toLowerCase()))}),j=({stockist:f,index:P})=>{var i;return e.jsxs(ce.div,{className:"bg-white rounded-xl overflow-hidden shadow-lg hover:shadow-2xl transition-all duration-300",onClick:()=>a(f),initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,scale:.95},transition:{duration:.3,delay:P*.05},whileHover:{y:-5},whileTap:{scale:.98},children:[e.jsxs("div",{className:"relative",children:[f.image?e.jsx("img",{src:f.image,alt:f.title,className:"w-full h-48 object-cover"}):e.jsx("div",{className:"w-full h-32 bg-gradient-to-r from-blue-400 to-indigo-500 flex items-center justify-center",children:e.jsx(Qe,{size:40,className:"text-white"})}),e.jsx("div",{className:"absolute top-3 right-3 bg-blue-600 text-white text-xs font-bold py-1 px-2 rounded-full",children:"Stockist"})]}),e.jsxs("div",{className:"p-5",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-2 line-clamp-1",children:f.title}),e.jsxs("div",{className:"space-y-2 mb-4",children:[f.phone&&e.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[e.jsx(Ne,{size:16,className:"mr-2 text-blue-500"}),e.jsx("span",{children:f.phone})]}),f.address&&e.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[e.jsx(je,{size:16,className:"mr-2 text-blue-500"}),e.jsx("span",{className:"line-clamp-1",children:f.address})]})]}),e.jsxs("div",{className:"flex items-center mt-auto pt-2 border-t border-gray-100",children:[e.jsx(le,{size:16,className:"mr-2 text-blue-500"}),e.jsxs("span",{className:"text-sm font-medium text-blue-600",children:[((i=f.Medicines)==null?void 0:i.length)||0," medicine(s) available"]})]})]})]})},d=()=>o?e.jsx(ce.div,{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>a(null),children:e.jsxs(ce.div,{className:"bg-white rounded-2xl shadow-2xl max-w-3xl w-full max-h-[90vh] overflow-y-auto",initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9},transition:{type:"spring",damping:25},onClick:f=>f.stopPropagation(),children:[o.image?e.jsxs("div",{className:"relative h-56 md:h-64",children:[e.jsx("img",{src:o.image,alt:o.title,className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 to-transparent"}),e.jsx("button",{className:"absolute top-4 left-4 bg-white p-2 rounded-full text-gray-800 hover:bg-gray-100",onClick:()=>a(null),children:e.jsx(Oe,{size:24})})]}):e.jsxs("div",{className:"relative h-40 bg-gradient-to-r from-blue-500 to-indigo-600 flex items-center justify-center",children:[e.jsx(Qe,{size:60,className:"text-white"}),e.jsx("button",{className:"absolute top-4 left-4 bg-white p-2 rounded-full text-gray-800 hover:bg-gray-100",onClick:()=>a(null),children:e.jsx(Oe,{size:24})})]}),e.jsxs("div",{className:"p-6 md:p-8",children:[e.jsx("h2",{className:"text-3xl font-bold mb-2 text-gray-800",children:o.title}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mt-6",children:[e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"bg-blue-50 p-4 rounded-xl",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-3 flex items-center",children:[e.jsx(Ge,{size:20,className:"mr-2 text-blue-600"}),"Contact Information"]}),e.jsxs("div",{className:"space-y-3",children:[o.phone&&e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ne,{size:18,className:"mr-3 text-blue-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-500",children:"Phone"}),e.jsx("div",{className:"font-medium",children:o.phone})]})]}),o.address&&e.jsxs("div",{className:"flex items-start",children:[e.jsx(je,{size:18,className:"mr-3 mt-1 text-blue-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-500",children:"Address"}),e.jsx("div",{className:"font-medium",children:o.address})]})]}),e.jsxs("div",{className:"flex items-start",children:[e.jsx(hs,{size:18,className:"mr-3 mt-1 text-blue-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-500",children:"Business Hours"}),e.jsx("div",{className:"font-medium",children:"Mon-Sat: 9am - 8pm"}),e.jsx("div",{className:"text-sm text-gray-500",children:"Sunday: Closed"})]})]})]})]})}),e.jsx("div",{children:e.jsxs("div",{className:"bg-green-50 p-4 rounded-xl",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-3 flex items-center",children:[e.jsx(le,{size:20,className:"mr-2 text-green-600"}),"Available Medicines"]}),o.Medicines&&o.Medicines.length>0?e.jsx("ul",{className:"space-y-2",children:o.Medicines.map((f,P)=>e.jsxs("li",{className:"flex items-center bg-white p-3 rounded-lg shadow-sm",children:[e.jsx("span",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center mr-3",children:e.jsx(le,{size:16,className:"text-green-600"})}),e.jsx("span",{className:"font-medium",children:f})]},P))}):e.jsx("p",{className:"text-gray-600",children:"No medicines listed"})]})})]}),e.jsxs("div",{className:"mt-8 pt-4 border-t border-gray-200 flex justify-between items-center",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Last updated: April 28, 2025"}),e.jsx("button",{className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg shadow transition-all hover:shadow-lg",onClick:()=>a(null),children:"Close Details"})]})]})]})}):null;return k?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100",children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:"w-16 h-16 border-4 border-blue-400 border-t-blue-600 rounded-full animate-spin"}),e.jsx("p",{className:"mt-4 text-lg text-gray-700",children:"Loading stockists..."})]})}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100",children:e.jsxs("div",{className:"max-w-6xl mx-auto p-4 md:p-6",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs(ce.div,{className:"flex flex-col md:flex-row md:items-center md:justify-between",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.4},children:[e.jsxs("div",{className:"mb-4 md:mb-0",children:[e.jsxs("h1",{className:"text-3xl md:text-4xl font-extrabold text-gray-800",children:[e.jsx("span",{className:"text-blue-700",children:"Medicine"})," Stockists"]}),e.jsxs("p",{className:"text-gray-600 mt-2",children:["Showing stockists with"," ",e.jsx("span",{className:"font-semibold text-blue-600",children:t})]})]}),e.jsxs("div",{className:"relative w-full md:w-64",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(os,{size:18,className:"text-gray-400"})}),e.jsx("input",{type:"text",className:"bg-white border border-gray-200 text-gray-700 rounded-lg pl-10 pr-4 py-2 w-full shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-300",placeholder:"Search medicines...",value:h,onChange:f=>g(f.target.value)})]})]}),e.jsx(ce.div,{className:"mt-4 bg-blue-600 text-white p-4 rounded-lg shadow-md",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,delay:.2},children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(le,{size:24,className:"mr-3 mt-1"}),e.jsxs("div",{children:[e.jsx("h2",{className:"font-bold text-lg",children:"Why Choose Local Stockists?"}),e.jsx("p",{className:"mt-1 text-blue-100",children:"Supporting local stockists ensures you get authentic medicines and personalized service. Click on any stockist to see more details."})]})]})})]}),e.jsx(ns,{mode:"wait",children:o?e.jsx(d,{}):e.jsx(ce.div,{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},children:c.length>0?c.map((f,P)=>e.jsx(j,{stockist:f,index:P},P)):e.jsx("div",{className:"col-span-full flex justify-center py-16",children:e.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-lg text-center max-w-md",children:[e.jsx("div",{className:"w-20 h-20 bg-amber-100 rounded-full flex items-center justify-center mx-auto mb-6",children:e.jsx(Ge,{size:32,className:"text-amber-500"})}),e.jsx("h3",{className:"text-2xl font-bold text-gray-800 mb-2",children:"No Results"}),e.jsxs("p",{className:"text-gray-600",children:['No stockists found with medicine "',e.jsx("strong",{children:h}),'". Try searching for a different medicine or checking your spelling.']})]})})})}),e.jsx(ce.div,{className:"mt-12 text-center text-gray-500 text-sm",initial:{opacity:0},animate:{opacity:1},transition:{delay:.5,duration:.4},children:e.jsx("p",{children:"Â© 2025 DK Pharma. All stockist information is updated regularly."})})]})})}const Ds=()=>{const s=(()=>{try{const x=localStorage.getItem("user");return x?JSON.parse(x):null}catch{return null}})(),[t,r]=l.useState(s||{medicalName:"HealthCare Pharmacy",ownerName:"John Doe",email:"john@healthcare.com",contactNo:"+1 234-567-8900",address:"123 Medical Street, Health City, HC 12345",drugLicenseNo:"DL-2024-12345",drugLicenseImage:null}),[o,a]=l.useState(""),[h,g]=l.useState(!1),k=te();l.useEffect(()=>{let x=!0;return(async()=>{try{const C=localStorage.getItem("token");if(!C)return;g(!0);const D=await fetch(G("/api/auth/me"),{headers:{Authorization:`Bearer ${C}`}}),S=await D.json().catch(()=>({}));if(!x)return;if(D.ok&&S&&S.success&&S.user){r(S.user);try{const O=localStorage.getItem("token");O&&C===O?localStorage.setItem("user",JSON.stringify(S.user)):console.debug("Profile: skipped writing user because token changed",{tokenAtRequest:C&&C.slice(0,12)+"...",currentToken:O&&O.slice(0,12)+"..."})}catch{}}else S&&S.message&&a(S.message)}catch(C){console.warn("Profile: failed to load current user",C),a("Failed to load profile")}finally{x&&g(!1)}})(),()=>{x=!1}},[]);const m=()=>{try{localStorage.removeItem("token"),localStorage.removeItem("user")}catch{}k("/login")},c=x=>e.jsx("svg",{...x,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),j=x=>e.jsx("svg",{...x,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-4m-5 0H9m11 0v-4a2 2 0 00-2-2h-2a2 2 0 00-2 2v4m6 0V9a2 2 0 00-2-2H9a2 2 0 00-2 2v12"})}),d=x=>e.jsx("svg",{...x,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),f=x=>e.jsx("svg",{...x,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})}),P=x=>e.jsxs("svg",{...x,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),i=x=>e.jsx("svg",{...x,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),p=x=>e.jsx("svg",{...x,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),M=x=>e.jsx("svg",{...x,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),z=({imageUrl:x})=>{const C=(()=>{const D=t&&(t.ownerName||t.medicalName||"");return D?D.split(" ").map(S=>S[0]).slice(0,2).join("").toUpperCase():"U"})();return e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-20 h-20 rounded-2xl flex items-center justify-center shadow-lg overflow-hidden bg-white",children:x?e.jsx("img",{src:x,alt:"profile",className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full bg-gradient-to-br from-cyan-400 to-cyan-500 flex items-center justify-center text-white text-xl font-bold",children:C})}),e.jsx("div",{className:"absolute -top-1 -right-1 w-6 h-6 bg-orange-400 rounded-full"}),e.jsx("div",{className:"absolute -bottom-1 -left-1 w-5 h-5 bg-orange-300 rounded-full"})]})},v=x=>!x||typeof x!="string"?null:x.startsWith("//")?`https:${x}`:x.startsWith("http://")||x.startsWith("https://")?x:`${ie}${x.startsWith("/")?"":"/"}${x}`,[u,b]=l.useState(!1);return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 py-8 px-4",children:e.jsxs("div",{className:"max-w-5xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx(z,{imageUrl:t&&(t.profileImageUrl||t.image||t.photo||t.avatar||t.logo&&t.logo.url||t.photoUrl)||null})}),e.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-cyan-500 to-blue-500 bg-clip-text text-transparent mb-2",children:"Your Profile"}),e.jsx("p",{className:"text-gray-600 font-medium",children:"Manage your medical store information"})]}),h&&e.jsxs("div",{className:"bg-white rounded-3xl shadow-xl p-8 text-center border-2 border-gray-100 mb-6",children:[e.jsx("div",{className:"w-16 h-16 bg-cyan-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("div",{className:"w-8 h-8 border-4 border-cyan-500 border-t-transparent rounded-full animate-spin"})}),e.jsx("p",{className:"text-gray-600 text-lg font-medium",children:"Loading your profile..."})]}),o&&e.jsx("div",{className:"bg-red-50 text-red-700 px-6 py-4 rounded-2xl border-2 border-red-200 mb-6 shadow-lg",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-red-100 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx("span",{className:"text-red-600 text-lg",children:"âš "})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:"Error Loading Profile"}),e.jsx("p",{children:o})]})]})}),t&&e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-3xl shadow-xl p-6 border-2 border-gray-100",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-800 mb-5 flex items-center gap-2",children:[e.jsx(j,{className:"w-6 h-6 text-cyan-500"}),"Store Information"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-gradient-to-br from-cyan-50 to-cyan-100 p-5 rounded-2xl border-2 border-cyan-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(j,{className:"w-5 h-5 text-cyan-600"}),e.jsx("span",{className:"text-gray-600 text-sm font-semibold",children:"Medical Store Name"})]}),e.jsx("p",{className:"text-gray-900 font-bold text-lg",children:t.medicalName})]}),e.jsxs("div",{className:"bg-gradient-to-br from-orange-50 to-orange-100 p-5 rounded-2xl border-2 border-orange-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(c,{className:"w-5 h-5 text-orange-600"}),e.jsx("span",{className:"text-gray-600 text-sm font-semibold",children:"Owner Name"})]}),e.jsx("p",{className:"text-gray-900 font-bold text-lg",children:t.ownerName})]}),e.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 p-5 rounded-2xl border-2 border-purple-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(d,{className:"w-5 h-5 text-purple-600"}),e.jsx("span",{className:"text-gray-600 text-sm font-semibold",children:"Email Address"})]}),e.jsx("p",{className:"text-gray-900 font-bold break-all",children:t.email})]}),e.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-green-100 p-5 rounded-2xl border-2 border-green-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(f,{className:"w-5 h-5 text-green-600"}),e.jsx("span",{className:"text-gray-600 text-sm font-semibold",children:"Contact Number"})]}),e.jsx("p",{className:"text-gray-900 font-bold",children:t.contactNo})]})]})]}),e.jsxs("div",{className:"bg-white rounded-3xl shadow-xl p-6 border-2 border-gray-100",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-800 mb-5 flex items-center gap-2",children:[e.jsx(P,{className:"w-6 h-6 text-cyan-500"}),"Location & License"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 p-5 rounded-2xl border-2 border-blue-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(P,{className:"w-5 h-5 text-blue-600"}),e.jsx("span",{className:"text-gray-600 text-sm font-semibold",children:"Store Address"})]}),e.jsx("p",{className:"text-gray-900 font-bold",children:t.address})]}),e.jsxs("div",{className:"bg-gradient-to-br from-amber-50 to-amber-100 p-5 rounded-2xl border-2 border-amber-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(i,{className:"w-5 h-5 text-amber-600"}),e.jsx("span",{className:"text-gray-600 text-sm font-semibold",children:"Drug License Number"})]}),e.jsx("p",{className:"text-gray-900 font-bold text-lg font-mono",children:t.drugLicenseNo})]})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-3xl shadow-xl p-6 border-2 border-gray-100",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx(p,{className:"w-6 h-6 text-cyan-500"}),"Drug License"]}),e.jsx("div",{className:"border-3 border-dashed border-gray-200 rounded-2xl overflow-hidden bg-gradient-to-br from-gray-50 to-gray-100",children:t.drugLicenseImage?(()=>{const x=v(t.drugLicenseImage);return console.debug("Profile: licenseUrl ->",x),x?u?e.jsxs("div",{className:"h-64 flex flex-col items-center justify-center text-gray-500 p-4",children:[e.jsx(p,{className:"w-12 h-12 mb-2 text-gray-300"}),e.jsx("p",{className:"text-sm text-center mb-2",children:"Image failed to load in the preview."}),e.jsx("a",{href:x,target:"_blank",rel:"noreferrer",className:"text-blue-600 underline",children:"Open image in new tab"})]}):e.jsx("img",{src:x,alt:"Drug License",onError:()=>{console.warn("Drug license image failed to load:",x),b(!0)},className:"w-full h-64 object-contain bg-white"}):e.jsxs("div",{className:"h-64 flex flex-col items-center justify-center text-gray-400",children:[e.jsx(p,{className:"w-16 h-16 mb-3 text-gray-300"}),e.jsx("p",{className:"text-center font-semibold text-gray-500",children:"No valid image URL"})]})})():e.jsxs("div",{className:"h-64 flex flex-col items-center justify-center text-gray-400",children:[e.jsx(p,{className:"w-16 h-16 mb-3 text-gray-300"}),e.jsx("p",{className:"text-center font-semibold text-gray-500",children:"No image uploaded"}),e.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Upload your drug license"})]})})]}),e.jsxs("div",{className:"bg-white rounded-3xl shadow-xl p-6 border-2 border-gray-100",children:[e.jsx("h2",{className:"text-lg font-bold text-gray-800 mb-4",children:"Quick Actions"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("button",{onClick:()=>k("/profile/edit"),className:"w-full flex items-center justify-center gap-2 bg-gradient-to-r from-cyan-400 to-cyan-500 text-white px-5 py-3 rounded-2xl font-bold shadow-lg hover:shadow-xl transition-all duration-200 transform hover:scale-105 active:scale-95",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),e.jsx("span",{children:"Edit Profile"})]}),e.jsxs("button",{onClick:m,className:"w-full flex items-center justify-center gap-2 bg-gradient-to-r from-red-500 to-red-600 text-white px-5 py-3 rounded-2xl font-bold shadow-lg hover:shadow-xl transition-all duration-200 transform hover:scale-105 active:scale-95",children:[e.jsx(M,{className:"w-5 h-5"}),e.jsx("span",{children:"Logout"})]})]})]})]})]})]})})};function Rs(){const[s,t]=l.useState(!1),r=(()=>{try{return te()}catch{return null}})();if(l.useEffect(()=>{try{const a=localStorage.getItem("user");if(!a)return;const h=JSON.parse(a);t(h&&h.role==="admin")}catch(a){console.warn("AdminPanel: could not read user from storage",a)}},[]),!s)return e.jsxs("div",{className:"min-h-screen bg-slate-50 flex flex-col items-start p-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-800 mb-4",children:"Admin Panel"}),e.jsx("p",{className:"text-slate-500",children:"You must be an admin to access this page."})]});const o=a=>{r?r(a):window.location.href=a};return e.jsxs("div",{className:"min-h-screen bg-slate-50 flex flex-col items-start p-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-800 mb-6",children:"Admin Panel"}),e.jsx("button",{onClick:()=>o("/adminCreateStockist"),className:"w-full sm:w-auto bg-blue-500 hover:bg-blue-600 text-white font-semibold px-6 py-3 rounded-lg mb-3",children:"Create Stockist"}),e.jsx("button",{onClick:()=>o("/adminCreateCompany"),className:"w-full sm:w-auto bg-blue-500 hover:bg-blue-600 text-white font-semibold px-6 py-3 rounded-lg mb-3",children:"Create Company"}),e.jsx("button",{onClick:()=>o("/adminCreateMedicine"),className:"w-full sm:w-auto bg-blue-500 hover:bg-blue-600 text-white font-semibold px-6 py-3 rounded-lg",children:"Create Medicine"})]})}const ss=async s=>{const t="https://api.cloudinary.com/v1_1/dspnmgzwh/image/upload",r=new FormData;r.append("file",s),r.append("upload_preset","project1");try{const a=await(await fetch(t,{method:"POST",body:r})).json();if(a.error)throw new Error("Image upload failed");return a.secure_url}catch(o){throw new Error("Error uploading image to Cloudinary: "+o.message)}},de=l.memo(({icon:s,label:t,type:r="text",placeholder:o,value:a,onChange:h,required:g=!1,path:k,...m})=>{const c=j=>h(k,j.target.value);return e.jsxs("div",{className:"bg-white rounded-2xl p-4 shadow-sm border border-gray-100",children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-3 flex items-center gap-2",children:[s&&e.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-r from-cyan-400 to-blue-500 flex items-center justify-center",children:e.jsx(s,{size:16,className:"text-white"})}),t,g&&e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:r,placeholder:o,className:"w-full rounded-xl border-2 border-gray-100 px-4 py-3 bg-gray-50 focus:bg-white focus:border-cyan-400 transition-all duration-200 text-gray-800",value:a,onChange:c,required:g,...m})]})}),ts=({label:s,icon:t,onChange:r,hasFile:o,fileName:a})=>e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-gray-100",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-r from-orange-400 to-pink-500 flex items-center justify-center",children:e.jsx(t,{size:20,className:"text-white"})}),e.jsx("span",{className:"font-semibold text-gray-700",children:s})]}),o&&e.jsx(Ie,{className:"text-green-500",size:20})]}),e.jsxs("label",{className:"block",children:[e.jsx("input",{type:"file",accept:"image/*",onChange:r,className:"hidden"}),e.jsxs("div",{className:"border-2 border-dashed border-gray-200 rounded-xl p-4 text-center hover:border-cyan-400 transition-colors cursor-pointer",children:[e.jsx(fs,{className:"mx-auto text-gray-400 mb-2",size:24}),e.jsx("p",{className:"text-sm text-gray-500",children:o?`Selected: ${a}`:"Tap to upload image"})]})]})]}),as=({label:s,value:t,onChange:r,options:o,icon:a})=>e.jsxs("div",{className:"bg-white rounded-2xl p-4 shadow-sm border border-gray-100",children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-3 flex items-center gap-2",children:[a&&e.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-r from-purple-400 to-indigo-500 flex items-center justify-center",children:e.jsx(a,{size:16,className:"text-white"})}),s]}),e.jsxs("select",{value:t,onChange:h=>r(h.target.value),className:"w-full rounded-xl border-2 border-gray-100 px-4 py-3 bg-gray-50 focus:bg-white focus:border-cyan-400 transition-all duration-200 text-gray-800",children:[e.jsxs("option",{value:"",children:["Select ",s]}),o.map(h=>e.jsx("option",{value:h,children:h},h))]})]});function Ts(){const[s,t]=l.useState({name:"",contactPerson:"",phone:"",email:"",password:"",address:{street:"",city:"",state:"",pincode:""},licenseNumber:"",licenseExpiry:"",licenseImageUrl:"",dob:"",bloodGroup:"",profileImageUrl:"",roleType:"",cntxNumber:""}),[r,o]=l.useState(!1),[a,h]=l.useState(null),[g,k]=l.useState(null),[m,c]=l.useState(1),j=te(),d=l.useCallback((z,v)=>{if(z&&z.startsWith("address.")){const u=z.split(".")[1];t(b=>({...b,address:{...b.address,[u]:v}}))}else t(u=>({...u,[z]:v}))},[]),f=z=>{var u,b;const v=((b=(u=z==null?void 0:z.target)==null?void 0:u.files)==null?void 0:b[0])||null;h(v)},P=z=>{var u,b;const v=((b=(u=z==null?void 0:z.target)==null?void 0:u.files)==null?void 0:b[0])||null;k(v)},i=async z=>{var v,u,b,x;z&&z.preventDefault(),o(!0);try{let C=s.profileImageUrl||"",D=s.licenseImageUrl||"";g&&(C=await ss(g)),a&&(D=await ss(a));const S={name:s.name,contactPerson:s.contactPerson,phone:s.phone,email:s.email,password:s.password,address:s.address,licenseNumber:s.licenseNumber,licenseExpiry:s.licenseExpiry||null,licenseImageUrl:D,dob:s.dob||null,bloodGroup:s.bloodGroup||null,profileImageUrl:C,roleType:s.roleType||null,cntxNumber:s.cntxNumber||null},O=await me.post(G("/api/stockist/register"),S,{headers:{"Content-Type":"application/json"}});(v=O==null?void 0:O.data)!=null&&v.success?j("/stockist-login"):alert(((u=O==null?void 0:O.data)==null?void 0:u.message)||"Failed to create stockist")}catch(C){console.error("Create stockist failed:",C),alert(((x=(b=C.response)==null?void 0:b.data)==null?void 0:x.message)||C.message||"Failed to create stockist")}finally{o(!1)}},p=["A+","A-","B+","B-","AB+","AB-","O+","O-"],M=["Proprietor","Pharmacist"];return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50",children:[e.jsx("div",{className:"bg-white shadow-sm border-b border-gray-100",children:e.jsxs("div",{className:"max-w-md mx-auto px-4 py-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{className:"w-10 h-10 rounded-full bg-gray-100 flex items-center justify-center",children:e.jsx(ke,{size:20,className:"text-gray-600"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"font-bold text-gray-800",children:"Create Stockist"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Register new stockist"})]})]}),e.jsx(ve,{className:"text-red-400",size:24})]})}),e.jsxs("div",{className:"max-w-md mx-auto p-4 space-y-4",children:[e.jsxs("div",{className:"bg-gradient-to-r from-cyan-400 to-blue-500 rounded-3xl p-6 text-white shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold",children:"Registration Form"}),e.jsx("p",{className:"text-blue-100",children:"Fill in stockist details"})]}),e.jsx("div",{className:"w-16 h-16 rounded-2xl bg-white/20 flex items-center justify-center",children:e.jsx(Te,{size:28,className:"text-white"})})]}),e.jsx("div",{className:"flex gap-2",children:[1,2,3].map(z=>e.jsx("div",{className:`h-2 flex-1 rounded-full ${z<=m?"bg-white":"bg-white/30"}`},z))})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-white rounded-3xl p-6 shadow-sm border border-gray-100",children:[e.jsxs("h3",{className:"font-bold text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-r from-green-400 to-blue-500 flex items-center justify-center",children:e.jsx(Ce,{size:16,className:"text-white"})}),"Basic Information"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(de,{icon:Te,label:"Firm Name",placeholder:"Enter firm name",value:s.name,path:"name",onChange:d,required:!0}),e.jsx(de,{icon:Ce,label:"Contact Person",placeholder:"Contact person name",value:s.contactPerson,path:"contactPerson",onChange:d})]})]}),e.jsxs("div",{className:"bg-white rounded-3xl p-6 shadow-sm border border-gray-100",children:[e.jsxs("h3",{className:"font-bold text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-r from-purple-400 to-pink-500 flex items-center justify-center",children:e.jsx(Ne,{size:16,className:"text-white"})}),"Contact Details"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(de,{icon:Ne,label:"Phone",placeholder:"Phone number",value:s.phone,path:"phone",onChange:d}),e.jsx(de,{icon:ze,label:"Email",type:"email",placeholder:"Email address",value:s.email,path:"email",onChange:d}),e.jsx(de,{icon:us,label:"Password",type:"password",placeholder:"Set password",value:s.password,path:"password",onChange:d,required:!0})]})]}),e.jsxs("div",{className:"bg-white rounded-3xl p-6 shadow-sm border border-gray-100",children:[e.jsxs("h3",{className:"font-bold text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-r from-orange-400 to-red-500 flex items-center justify-center",children:e.jsx(je,{size:16,className:"text-white"})}),"Address Details"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(de,{icon:je,label:"Street Address",placeholder:"Street address",value:s.address.street,path:"address.street",onChange:d}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx(de,{label:"City",placeholder:"City",value:s.address.city,path:"address.city",onChange:d}),e.jsx(de,{label:"State",placeholder:"State",value:s.address.state,path:"address.state",onChange:d})]}),e.jsx(de,{label:"Pincode",placeholder:"Pincode",value:s.address.pincode,path:"address.pincode",onChange:d})]})]}),e.jsxs("div",{className:"bg-white rounded-3xl p-6 shadow-sm border border-gray-100",children:[e.jsxs("h3",{className:"font-bold text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-r from-indigo-400 to-purple-500 flex items-center justify-center",children:e.jsx(_e,{size:16,className:"text-white"})}),"License Details"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(de,{icon:_e,label:"License Number",placeholder:"License number",value:s.licenseNumber,path:"licenseNumber",onChange:d}),e.jsx(de,{icon:Ye,label:"License Expiry",type:"date",value:s.licenseExpiry,path:"licenseExpiry",onChange:d})]})]}),e.jsxs("div",{className:"bg-white rounded-3xl p-6 shadow-sm border border-gray-100",children:[e.jsxs("h3",{className:"font-bold text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-r from-teal-400 to-cyan-500 flex items-center justify-center",children:e.jsx(Ce,{size:16,className:"text-white"})}),"Personal Details"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(de,{icon:Ye,label:"Date of Birth",type:"date",value:s.dob,path:"dob",onChange:d}),e.jsx(as,{icon:ve,label:"Blood Group",value:s.bloodGroup,onChange:z=>d("bloodGroup",z),options:p}),e.jsx(as,{icon:Te,label:"Role Type",value:s.roleType,onChange:z=>d("roleType",z),options:M}),e.jsx(de,{icon:Ce,label:"CNTX Number",placeholder:"CNTX number",value:s.cntxNumber,path:"cntxNumber",onChange:d})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(ts,{label:"Profile Image",icon:gs,onChange:P,hasFile:!!g,fileName:g==null?void 0:g.name}),e.jsx(ts,{label:"License Image",icon:_e,onChange:f,hasFile:!!a,fileName:a==null?void 0:a.name})]}),e.jsx("div",{className:"pt-4",children:e.jsx("button",{onClick:i,disabled:r,className:`w-full py-4 rounded-2xl font-bold text-lg shadow-lg transition-all duration-300 ${r?"bg-gray-400 cursor-not-allowed text-gray-600":"bg-gradient-to-r from-cyan-500 to-blue-600 hover:from-cyan-600 hover:to-blue-700 text-white transform hover:scale-[1.02] active:scale-[0.98]"}`,children:r?e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("div",{className:"w-5 h-5 border-2 border-gray-300 border-t-transparent rounded-full animate-spin"}),"Creating Stockist..."]}):"Create Stockist"})}),e.jsx("div",{className:"text-center pt-4",children:e.jsx("button",{type:"button",onClick:()=>j("/stockist-login"),className:"px-8 py-3 rounded-xl bg-white border-2 border-gray-200 text-gray-600 font-semibold shadow-sm hover:border-cyan-400 hover:text-cyan-600 transition-colors duration-200",children:"Login as Stockist"})})]}),e.jsx("div",{className:"h-8"})]})]})}function _s(){const[s,t]=l.useState({name:"",stockists:[]}),[r,o]=l.useState(!1),[a,h]=l.useState([]),[g,k]=l.useState(!0),[m,c]=l.useState(null);l.useEffect(()=>{let i=!0;return(async()=>{var M,z;k(!0),c(null);try{const v=await me.get(G("/api/stockist"));i&&h(v.data.data||[])}catch(v){i&&c(((z=(M=v.response)==null?void 0:M.data)==null?void 0:z.message)||v.message||"Failed to load stockists")}finally{i&&k(!1)}})(),()=>{i=!1}},[]);const j=(i,p)=>{t(M=>({...M,[i]:p}))},d=i=>{t(p=>({...p,stockists:p.stockists.includes(i)?p.stockists.filter(M=>M!==i):[...p.stockists,i]}))},f=async i=>{i&&i.preventDefault(),o(!0),setTimeout(()=>{alert("Success â€” company created"),o(!1)},2e3)},P=({stockist:i,isSelected:p,onToggle:M})=>e.jsx("div",{onClick:M,className:"group relative cursor-pointer transition-all duration-200 transform hover:scale-[1.02]",children:e.jsx("div",{className:`
        relative bg-white rounded-2xl border-2 transition-all duration-200 p-4 shadow-sm
        ${p?"border-teal-400 shadow-lg shadow-teal-500/20 bg-teal-50/30":"border-gray-200 hover:border-teal-300 hover:shadow-md"}
      `,children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:`
            p-3 rounded-xl transition-all duration-200 flex-shrink-0
            ${p?"bg-gradient-to-br from-teal-400 to-teal-500 shadow-lg":"bg-gray-100 group-hover:bg-teal-100"}
          `,children:e.jsx(be,{size:20,className:`transition-colors duration-200 ${p?"text-white":"text-gray-600 group-hover:text-teal-600"}`})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:`font-semibold text-sm transition-colors duration-200 truncate ${p?"text-teal-700":"text-gray-800 group-hover:text-gray-900"}`,children:i.name}),e.jsx("p",{className:`text-xs transition-colors duration-200 truncate ${p?"text-teal-600":"text-gray-500"}`,children:i.email}),e.jsxs("p",{className:`text-xs transition-colors duration-200 ${p?"text-teal-500":"text-gray-400"}`,children:["ðŸ“ ",i.location]})]}),e.jsx("div",{className:`
            w-6 h-6 rounded-full border-2 transition-all duration-200 flex items-center justify-center flex-shrink-0
            ${p?"border-teal-500 bg-teal-500 shadow-lg":"border-gray-300 group-hover:border-teal-400"}
          `,children:p&&e.jsx(ye,{size:14,className:"text-white"})})]})})});return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-blue-50/30 to-teal-50/50",children:[e.jsx("div",{className:"bg-white shadow-sm border-b border-gray-100",children:e.jsx("div",{className:"max-w-md mx-auto px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("button",{className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:e.jsx(ke,{size:20,className:"text-gray-600"})}),e.jsx("h1",{className:"text-lg font-semibold text-gray-800",children:"Create Company"}),e.jsx("div",{className:"w-8"})," "]})})}),e.jsxs("div",{className:"max-w-md mx-auto px-6 py-6 space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-r from-teal-400 to-teal-500 rounded-3xl p-6 text-white shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold mb-1",children:"Your Health Hub"}),e.jsx("p",{className:"text-teal-100 text-sm",children:"Register New Company"})]}),e.jsx("div",{className:"bg-white/20 p-3 rounded-2xl backdrop-blur-sm",children:e.jsx(he,{size:24,className:"text-white"})})]}),e.jsxs("div",{className:"flex items-center gap-2 text-teal-100 text-sm",children:[e.jsx(Xe,{size:16}),e.jsx("span",{children:"Secure & Verified Platform"})]})]}),e.jsx("div",{className:"bg-white rounded-3xl shadow-sm border border-gray-100 overflow-hidden",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"p-2 bg-orange-100 rounded-xl",children:e.jsx(he,{size:20,className:"text-orange-600"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Company Details"})]}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Company Name *"}),e.jsx("input",{type:"text",placeholder:"Enter company name",className:"w-full bg-gray-50 border border-gray-200 rounded-xl px-4 py-3 text-gray-800 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-teal-400 focus:border-transparent transition-all duration-200",value:s.name,onChange:i=>j("name",i.target.value),required:!0})]})})]})}),e.jsxs("div",{className:"bg-white rounded-3xl shadow-sm border border-gray-100 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Quick Actions"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"bg-teal-400 rounded-2xl p-4 text-white",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(ps,{size:20}),e.jsx("span",{className:"text-xs bg-white/20 px-2 py-1 rounded-full",children:"Active"})]}),e.jsx("p",{className:"text-sm font-medium",children:"Assign Stockists"}),e.jsx("p",{className:"text-xs text-teal-100",children:"Manage distribution"})]}),e.jsxs("div",{className:"bg-orange-400 rounded-2xl p-4 text-white",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(le,{size:20}),e.jsx("span",{className:"text-xs bg-white/20 px-2 py-1 rounded-full",children:"Setup"})]}),e.jsx("p",{className:"text-sm font-medium",children:"Product Catalog"}),e.jsx("p",{className:"text-xs text-orange-100",children:"Add medicines"})]})]})]}),e.jsx("div",{className:"bg-white rounded-3xl shadow-sm border border-gray-100 overflow-hidden",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-teal-100 rounded-xl",children:e.jsx(pe,{size:20,className:"text-teal-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Assign Stockists"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Optional - Select partners"})]})]}),e.jsx("div",{className:"bg-teal-50 px-3 py-1 rounded-full",children:e.jsxs("span",{className:"text-xs font-medium text-teal-600",children:[s.stockists.length," selected"]})})]}),e.jsx("div",{className:"space-y-3 max-h-80 overflow-y-auto",children:a.length===0?e.jsx("div",{className:"p-4 bg-yellow-50 border border-yellow-200 rounded-2xl text-center",children:e.jsx("p",{className:"text-yellow-700 text-sm font-medium",children:"No stockists found."})}):a.map(i=>e.jsx(P,{stockist:i,isSelected:s.stockists.includes(i._id),onToggle:()=>d(i._id)},i._id))})]})}),e.jsxs("div",{className:"bg-white rounded-3xl shadow-sm border border-gray-100 p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx(ve,{size:18,className:"text-red-500"}),"Health Tips"]}),e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"bg-blue-100 p-3 rounded-xl mb-2 mx-auto w-fit",children:e.jsx(le,{size:16,className:"text-blue-600"})}),e.jsx("p",{className:"text-xs font-medium text-gray-700",children:"Stay Hydrated"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Drink Water"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"bg-orange-100 p-3 rounded-xl mb-2 mx-auto w-fit",children:e.jsx(ve,{size:16,className:"text-orange-600"})}),e.jsx("p",{className:"text-xs font-medium text-gray-700",children:"New Moms"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Care Guide"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"bg-green-100 p-3 rounded-xl mb-2 mx-auto w-fit",children:e.jsx(Xe,{size:16,className:"text-green-600"})}),e.jsx("p",{className:"text-xs font-medium text-gray-700",children:"Check Labels"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Read carefully"})]})]})]}),e.jsx("div",{className:"pb-6",children:e.jsx("button",{type:"submit",onClick:f,className:`w-full font-semibold py-4 px-6 rounded-2xl transition-all duration-300 shadow-lg ${r?"bg-gray-400 cursor-not-allowed":"bg-gradient-to-r from-teal-400 to-teal-500 hover:from-teal-500 hover:to-teal-600 active:scale-95 shadow-teal-500/25"} text-white`,disabled:r,children:r?e.jsxs("div",{className:"flex items-center justify-center gap-3",children:[e.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}),e.jsx("span",{children:"Creating Company..."})]}):e.jsxs("div",{className:"flex items-center justify-center gap-3",children:[e.jsx(Ve,{size:20}),e.jsx("span",{children:"CREATE COMPANY"})]})})})]}),e.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 shadow-lg",children:e.jsx("div",{className:"max-w-md mx-auto px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-around",children:[e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:"p-2 bg-teal-100 rounded-xl",children:e.jsx(he,{size:16,className:"text-teal-600"})}),e.jsx("span",{className:"text-xs text-teal-600 font-medium mt-1",children:"Companies"})]}),e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx(be,{size:16,className:"text-gray-400"}),e.jsx("span",{className:"text-xs text-gray-400 mt-1",children:"Products"})]}),e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx(pe,{size:16,className:"text-gray-400"}),e.jsx("span",{className:"text-xs text-gray-400 mt-1",children:"Stockists"})]}),e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx(ve,{size:16,className:"text-gray-400"}),e.jsx("span",{className:"text-xs text-gray-400 mt-1",children:"Health"})]})]})})})]})}function Fs(){const[s,t]=l.useState({name:"",company:"",stockists:[]}),[r,o]=l.useState(!1),[a,h]=l.useState([]),[g,k]=l.useState([]),[m,c]=l.useState({x:0,y:0}),[j,d]=l.useState([]),f=te();l.useEffect(()=>{const v=u=>{c({x:u.clientX,y:u.clientY})};return window.addEventListener("mousemove",v),()=>window.removeEventListener("mousemove",v)},[]),l.useEffect(()=>{(()=>{const u=[];for(let b=0;b<12;b++)u.push({id:b,x:Math.random()*100,y:Math.random()*100,size:Math.random()*3+1,opacity:Math.random()*.3+.1,duration:Math.random()*4+3});d(u)})()},[]);const P=(v,u)=>{t(b=>({...b,[v]:u}))},i=v=>{t(u=>({...u,stockists:u.stockists.includes(v)?u.stockists.filter(b=>b!==v):[...u.stockists,v]}))},p=async v=>{v&&v.preventDefault(),o(!0);try{const u=localStorage.getItem("token"),b=await fetch(G("/api/medicine/quick"),{method:"POST",headers:{"Content-Type":"application/json",...u?{Authorization:`Bearer ${u}`}:{}},body:JSON.stringify(s)}),x=await b.json().catch(()=>({}));if(b.ok)window.alert("Success â€” medicine created"),f?f(-1):window.history.back();else{const C=x&&x.message||JSON.stringify(x)||b.statusText;window.alert(`Error: ${C}`)}}catch(u){window.alert(`Error: ${String(u)}`)}finally{o(!1)}};l.useEffect(()=>{(async()=>{try{const v=await fetch(G("/api/company")),u=await v.json().catch(()=>({})),b=u&&u.data||[];v.ok&&Array.isArray(b)&&h(b);const x=await fetch(G("/api/stockist")),C=await x.json().catch(()=>({})),D=C&&C.data||[];x.ok&&Array.isArray(D)&&k(D)}catch(v){console.error("Failed to load companies/stockists",v)}})()},[]);const M=({company:v,isSelected:u,onClick:b})=>e.jsx("div",{onClick:b,className:`group relative cursor-pointer transition-all duration-300 transform hover:scale-105 hover:-translate-y-1 ${u?"z-10":""}`,children:e.jsx("div",{className:`
        relative bg-white/80 backdrop-blur-xl rounded-2xl border transition-all duration-300 p-6
        ${u?"border-blue-400/50 shadow-xl shadow-blue-500/20 bg-blue-50/50":"border-white/40 hover:border-blue-300/30 hover:shadow-lg hover:shadow-blue-500/10"}
      `,children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:`
            p-3 rounded-2xl transition-all duration-300
            ${u?"bg-gradient-to-r from-blue-500 to-indigo-600 shadow-lg":"bg-slate-100 group-hover:bg-blue-100"}
          `,children:e.jsx(he,{size:20,className:`transition-colors duration-300 ${u?"text-white":"text-slate-600 group-hover:text-blue-600"}`})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:`font-semibold transition-colors duration-300 ${u?"text-blue-700":"text-slate-700 group-hover:text-slate-800"}`,children:v.name}),e.jsx("p",{className:`text-sm transition-colors duration-300 ${u?"text-blue-600":"text-slate-500"}`,children:v.email})]}),e.jsx("div",{className:`
            w-6 h-6 rounded-full border-2 transition-all duration-300 flex items-center justify-center
            ${u?"border-blue-500 bg-blue-500":"border-slate-300 group-hover:border-blue-400"}
          `,children:u&&e.jsx(ye,{size:14,className:"text-white"})})]})})}),z=({stockist:v,isSelected:u,onToggle:b})=>e.jsx("div",{onClick:b,className:"group relative cursor-pointer transition-all duration-300 transform hover:scale-105 hover:-translate-y-1",children:e.jsx("div",{className:`
        relative bg-white/80 backdrop-blur-xl rounded-2xl border transition-all duration-300 p-6
        ${u?"border-emerald-400/50 shadow-xl shadow-emerald-500/20 bg-emerald-50/50":"border-white/40 hover:border-emerald-300/30 hover:shadow-lg hover:shadow-emerald-500/10"}
      `,children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:`
            p-3 rounded-2xl transition-all duration-300
            ${u?"bg-gradient-to-r from-emerald-500 to-teal-600 shadow-lg":"bg-slate-100 group-hover:bg-emerald-100"}
          `,children:e.jsx(be,{size:20,className:`transition-colors duration-300 ${u?"text-white":"text-slate-600 group-hover:text-emerald-600"}`})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:`font-semibold transition-colors duration-300 ${u?"text-emerald-700":"text-slate-700 group-hover:text-slate-800"}`,children:v.name}),e.jsx("p",{className:`text-sm transition-colors duration-300 ${u?"text-emerald-600":"text-slate-500"}`,children:v.email})]}),e.jsx("div",{className:`
            w-6 h-6 rounded-lg border-2 transition-all duration-300 flex items-center justify-center
            ${u?"border-emerald-500 bg-emerald-500":"border-slate-300 group-hover:border-emerald-400"}
          `,children:u&&e.jsx(ye,{size:14,className:"text-white"})})]})})});return e.jsxs("div",{className:"min-h-screen relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 transition-all duration-1000",style:{background:`radial-gradient(600px circle at ${m.x}px ${m.y}px, 
            rgba(99, 102, 241, 0.08), 
            rgba(139, 92, 246, 0.05), 
            rgba(168, 85, 247, 0.03), 
            transparent 50%),
            linear-gradient(135deg, 
            #f8fafc 0%, 
            #f1f5f9 25%, 
            #e2e8f0 50%, 
            #cbd5e1 75%, 
            #94a3b8 100%)`}}),j.map(v=>e.jsx("div",{className:"absolute w-1 h-1 bg-blue-400/40 rounded-full animate-ping",style:{left:`${v.x}%`,top:`${v.y}%`,opacity:v.opacity,animationDuration:`${v.duration}s`,animationDelay:`${v.id*.2}s`}},v.id)),e.jsxs("div",{className:"absolute inset-0",children:[e.jsx("div",{className:"absolute top-1/4 left-1/4 w-96 h-96 bg-gradient-to-r from-blue-500/5 to-indigo-500/5 rounded-full blur-3xl animate-pulse"}),e.jsx("div",{className:"absolute bottom-1/4 right-1/4 w-80 h-80 bg-gradient-to-r from-indigo-500/5 to-purple-500/5 rounded-full blur-3xl animate-pulse delay-1000"})]}),e.jsx("div",{className:"relative flex items-start justify-center min-h-screen py-8 px-4",children:e.jsx("div",{className:"w-full max-w-4xl",children:e.jsxs("div",{className:"relative bg-white/80 backdrop-blur-2xl rounded-3xl border border-white/60 shadow-2xl shadow-slate-200/50 p-8 sm:p-12",children:[e.jsx("div",{className:"absolute inset-0 rounded-3xl bg-gradient-to-r from-blue-500/10 via-indigo-500/10 to-purple-500/10 blur-sm animate-pulse"}),e.jsx("div",{className:"absolute inset-[1px] rounded-3xl bg-white/90 backdrop-blur-xl"}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"text-center mb-12 relative",children:[e.jsx("div",{className:"absolute -top-6 left-1/2 transform -translate-x-1/2",children:e.jsx(bs,{className:"text-blue-400 animate-pulse",size:24})}),e.jsx("div",{className:"absolute -top-3 left-1/3 transform -translate-x-1/2",children:e.jsx(le,{className:"text-indigo-400 animate-bounce delay-300",size:16})}),e.jsx("div",{className:"absolute -top-3 right-1/3 transform translate-x-1/2",children:e.jsx(Ve,{className:"text-purple-400 animate-bounce delay-700",size:16})}),e.jsx("div",{className:"inline-flex items-center justify-center p-4 bg-gradient-to-r from-blue-500/10 to-indigo-500/10 rounded-3xl backdrop-blur-xl border border-white/30 mb-6",children:e.jsx(le,{className:"w-8 h-8 text-blue-500 animate-pulse"})}),e.jsxs("h1",{className:"text-4xl sm:text-5xl font-black mb-4 relative",children:[e.jsx("span",{className:"bg-gradient-to-r from-slate-700 via-slate-600 to-slate-500 bg-clip-text text-transparent",children:"Create Medicine"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-500/20 via-indigo-500/20 to-purple-500/20 bg-clip-text text-transparent blur-sm animate-pulse delay-500"})]}),e.jsx("p",{className:"text-slate-500 text-lg font-light",children:"Add new medicine with company and stockist assignments"})]}),e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-500/3 to-indigo-500/3 rounded-3xl blur-xl"}),e.jsxs("div",{className:"relative bg-white/60 backdrop-blur-xl rounded-3xl border border-white/40 p-8 shadow-lg shadow-slate-200/20",children:[e.jsxs("h2",{className:"text-xl font-bold text-slate-600 mb-6 flex items-center gap-3",children:[e.jsx(le,{className:"text-blue-500",size:20}),"Medicine Details"]}),e.jsxs("div",{className:"group relative",children:[e.jsxs("label",{className:"block text-sm font-semibold text-slate-600 mb-3 flex items-center gap-2",children:[e.jsx(le,{size:16,className:"text-blue-500"}),"Medicine Name"]}),e.jsx("input",{type:"text",placeholder:"Enter medicine name",className:"w-full bg-white/90 backdrop-blur-xl border border-slate-200/50 rounded-2xl px-5 py-4 text-slate-700 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-400/50 focus:border-blue-400/50 transition-all duration-300 hover:border-slate-300/50 hover:bg-white group-hover:shadow-lg group-hover:shadow-blue-500/10",value:s.name,onChange:v=>P("name",v.target.value),required:!0})]})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-indigo-500/3 to-purple-500/3 rounded-3xl blur-xl"}),e.jsxs("div",{className:"relative bg-white/60 backdrop-blur-xl rounded-3xl border border-white/40 p-8 shadow-lg shadow-slate-200/20",children:[e.jsxs("h2",{className:"text-xl font-bold text-slate-600 mb-6 flex items-center gap-3",children:[e.jsx(he,{className:"text-indigo-500",size:20}),"Select Company"]}),e.jsx("div",{className:"space-y-4",children:a.length===0?e.jsx("div",{className:"p-6 bg-yellow-50/80 border border-yellow-200/50 rounded-2xl backdrop-blur-xl",children:e.jsx("p",{className:"text-yellow-700 font-medium",children:"No companies found."})}):a.map(v=>e.jsx(M,{company:v,isSelected:s.company===v._id,onClick:()=>P("company",v._id)},v._id))})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-emerald-500/3 to-teal-500/3 rounded-3xl blur-xl"}),e.jsxs("div",{className:"relative bg-white/60 backdrop-blur-xl rounded-3xl border border-white/40 p-8 shadow-lg shadow-slate-200/20",children:[e.jsxs("h2",{className:"text-xl font-bold text-slate-600 mb-6 flex items-center gap-3",children:[e.jsx(pe,{className:"text-emerald-500",size:20}),"Assign to Stockists",e.jsx("span",{className:"text-sm font-normal text-slate-500",children:"(Optional)"})]}),e.jsx("div",{className:"space-y-4",children:g.length===0?e.jsx("div",{className:"p-6 bg-yellow-50/80 border border-yellow-200/50 rounded-2xl backdrop-blur-xl",children:e.jsx("p",{className:"text-yellow-700 font-medium",children:"No stockists found."})}):g.map(v=>e.jsx(z,{stockist:v,isSelected:s.stockists.includes(v._id),onToggle:()=>i(v._id)},v._id))}),s.stockists.length>0&&e.jsx("div",{className:"mt-6 p-4 bg-emerald-50/80 border border-emerald-200/50 rounded-2xl backdrop-blur-xl",children:e.jsxs("p",{className:"text-emerald-700 font-medium",children:["Selected ",s.stockists.length," stockist",s.stockists.length===1?"":"s"]})})]})]}),e.jsx("div",{className:"pt-8",children:e.jsxs("button",{type:"submit",onClick:p,className:`group relative w-full text-white font-bold py-5 px-8 rounded-2xl transition-all duration-500 transform hover:scale-105 overflow-hidden border border-white/30 ${r?"bg-gradient-to-r from-blue-400/70 to-indigo-500/70 cursor-not-allowed":"bg-gradient-to-r from-blue-500 via-indigo-600 to-blue-700 hover:shadow-2xl hover:shadow-blue-500/25"}`,disabled:r,children:[!r&&e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent -skew-x-12 translate-x-[-200%] group-hover:translate-x-[200%] transition-transform duration-1000"}),e.jsx("div",{className:"relative flex items-center justify-center gap-3",children:r?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}),e.jsx("span",{className:"text-lg tracking-wider",children:"Creating Medicine..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(le,{size:20}),e.jsx("span",{className:"text-lg tracking-wider",children:"CREATE MEDICINE"})]})}),!r&&e.jsx("div",{className:"absolute inset-0 rounded-2xl bg-gradient-to-r from-blue-500/30 via-indigo-500/30 to-blue-500/30 blur-md -z-10 animate-pulse"})]})})]})]})]})})})]})}const rs=s=>{if(!s)return"";if(typeof s=="string")return s;try{const t=[];return s.street&&t.push(s.street),s.city&&t.push(s.city),s.state&&t.push(s.state),s.pincode&&t.push(s.pincode),t.filter(Boolean).join(", ")}catch{return""}},Os=({srcCandidates:s=[],alt:t="",className:r=""})=>{const[o,a]=Le.useState(0),[h,g]=Le.useState(!1),k=s&&s.length?s[o]:null,m=c=>{o+1<s.length?(a(o+1),g(!1)):(g(!0),c.currentTarget.style.display="none")};return!k||h?e.jsx("div",{className:`${r} bg-gradient-to-br from-teal-100 to-teal-200 flex items-center justify-center`,children:e.jsx("svg",{className:"w-12 h-12 text-teal-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}):e.jsx("img",{src:k,alt:t,className:r,onError:m})},qs=()=>{const[s,t]=l.useState([]),[r,o]=l.useState(!1),[a,h]=l.useState(null),[g,k]=l.useState(null),[m,c]=l.useState(!0),[j,d]=l.useState(!1),[f,P]=l.useState(""),[i,p]=l.useState([]),[M,z]=l.useState(!1),[v,u]=l.useState([]),[b,x]=l.useState({fullName:"",address:"",contactNo:"",email:"",aadharNo:"",password:"",aadharImage:null,photo:null}),[C,D]=l.useState(null),[S,O]=l.useState(null),[Y,H]=l.useState(!1),[W,I]=l.useState(!1),[T,Q]=l.useState(""),[U,Z]=l.useState(!1);l.useEffect(()=>{V(),(async()=>{try{c(!0);let n=null;try{n=localStorage.getItem("token")}catch{}if(!n){k(null),c(!1);return}const w=await me.get(G("/api/auth/me"),{headers:{Authorization:`Bearer ${n}`}});w.data&&w.data.user&&k(w.data.user)}catch{}finally{c(!1)}})()},[]);const V=async()=>{o(!0),h(null);try{let n=null;try{n=localStorage.getItem("token")}catch{}if(!n){t([]),h("Login required to view purchasers."),o(!1);return}try{const w=await me.get(G("/api/purchaser"),{headers:{Authorization:`Bearer ${n}`}});t(w.data.data||[])}catch(w){if(w&&w.response&&w.response.status===401){try{localStorage.removeItem("token")}catch{}t([]),h("Unauthorized. Please login to view purchasers."),o(!1);return}throw w}}catch{h("Failed to fetch purchasers")}o(!1)};l.useEffect(()=>{let n=null;const w=()=>{n=setInterval(async()=>{try{const $=localStorage.getItem("token");if(!$)return;const F=await me.get(G("/api/auth/me"),{headers:{Authorization:`Bearer ${$}`}});if(F.data&&F.data.user&&(k(F.data.user),F.data.user.hasPurchasingCard)){I(!0);try{V()}catch{}clearInterval(n)}}catch{}},1e4)};return g&&g.purchasingCardRequested&&!g.hasPurchasingCard?w():g&&g.hasPurchasingCard&&I(!0),()=>{n&&clearInterval(n)}},[g]);const X=n=>{const{name:w,value:$,files:F}=n.target;w==="aadharImage"&&F&&F[0]?(x({...b,aadharImage:F[0]}),D(URL.createObjectURL(F[0]))):w==="photo"&&F&&F[0]?(x({...b,photo:F[0]}),O(URL.createObjectURL(F[0]))):x({...b,[w]:$})},N=()=>{x({fullName:"",address:"",contactNo:"",aadharImage:null,photo:null}),D(null),O(null)},R=async n=>{var w,$;n.preventDefault(),H(!0),h(null);try{if(!b.aadharImage||!b.photo){h("Aadhar image and photo are required"),H(!1);return}if(g&&g.hasPurchasingCard){const F=new FormData;F.append("fullName",b.fullName),F.append("address",b.address),F.append("contactNo",b.contactNo),F.append("aadharImage",b.aadharImage),F.append("photo",b.photo);let se=null;try{se=localStorage.getItem("token")}catch{}if(!se){h("Login required to add purchaser."),H(!1);return}const J=await me.post(G("/api/purchaser"),F,{headers:{"Content-Type":"multipart/form-data",Authorization:`Bearer ${se}`}});if(J.data&&J.data.success)t([J.data.data,...s]),N(),I(!1),Q("Purchaser added successfully!"),H(!1),setTimeout(()=>Q(""),3e3);else throw new Error(J.data.message||"Failed to add purchaser")}else Z(!0),await A(),H(!1)}catch(F){h((($=(w=F.response)==null?void 0:w.data)==null?void 0:$.message)||F.message||"Failed to add purchaser"),H(!1)}},_=()=>{if(!g&&!m){P("Please login to request a purchasing card.");return}if(g&&g.purchasingCardRequested){P("Your purchasing card request is pending approval.");return}P(""),I(!0)},A=async()=>{d(!0),P("");try{const n=localStorage.getItem("token");if(!n){P("Login required to request a purchasing card."),d(!1);return}const w=await me.get(G("/api/stockist"),{headers:{Authorization:`Bearer ${n}`}});p(w.data&&w.data.data?w.data.data:[]),u([]),z(!0)}catch(n){console.warn("Failed to fetch stockists",n&&n.message),P("Failed to load stockists. Try again later.")}finally{d(!1)}},L=()=>{A()},y=n=>{u(w=>w.includes(n)?w.filter($=>$!==n):[...w,n])},q=async()=>{var n,w,$;d(!0),P("");try{const F=localStorage.getItem("token");if(!F){P("Login required to request a purchasing card."),d(!1);return}if(!Array.isArray(v)||v.length<3){P("Please select at least 3 stockists to notify"),d(!1);return}let se;if(U){const J=[];if((!b.fullName||!b.fullName.trim())&&J.push("Full name"),(!b.email||!b.email.trim())&&J.push("Email"),b.aadharImage||J.push("Aadhar image file"),b.photo||J.push("Personal photo file"),J.length){P(`Missing fields for account creation: ${J.join(", ")}`),d(!1);return}const oe=new FormData;oe.append("fullName",b.fullName||""),oe.append("email",b.email||"");const Be=()=>Math.random().toString(36).slice(-8)+"A1",De=b.password&&b.password.length>=6?b.password:Be();oe.append("password",De),oe.append("aadharImage",b.aadharImage),oe.append("personalPhoto",b.photo);const ue=await me.post(G("/api/auth/purchaser-signup"),oe,{headers:{"Content-Type":"multipart/form-data"}});if(!ue.data||!ue.data.token)throw new Error(((n=ue.data)==null?void 0:n.message)||"Failed to create purchaser account");const Se=ue.data.token;try{localStorage.setItem("token",Se)}catch{}se=await me.post(G("/api/purchasing-card/request"),{stockistIds:v},{headers:{Authorization:`Bearer ${Se}`}})}else se=await me.post(G("/api/purchasing-card/request"),{stockistIds:v},{headers:{Authorization:`Bearer ${F}`}});se.data&&se.data.success?(P(se.data.message||"Requested"),k(J=>J&&{...J,purchasingCardRequested:!0}),z(!1),Z(!1),x(J=>({...J,aadharImage:null,photo:null})),D(null),O(null)):P(se.data.message||"Request failed")}catch(F){P((($=(w=F.response)==null?void 0:w.data)==null?void 0:$.message)||F.message||"Request failed")}finally{d(!1)}},E=({value:n,size:w=120})=>e.jsx("div",{className:"flex flex-col items-center",children:e.jsx(Je,{value:n,size:w})});return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-white shadow-sm border-b border-gray-100",children:e.jsx("div",{className:"max-w-4xl mx-auto px-4 py-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-teal-400 to-teal-600 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold text-gray-800",children:"Purchaser Management"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Manage purchaser profiles and generate QR codes"})]})]}),e.jsx("div",{className:"flex items-center gap-3",children:e.jsx("div",{className:"bg-gray-100 px-3 py-1 rounded-full",children:e.jsxs("span",{className:"text-sm font-medium text-gray-600",children:["Total: ",s.length]})})})]})})}),e.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-6 space-y-6",children:[T&&e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-2xl p-4 flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-green-500 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-green-800 font-semibold text-lg",children:T}),e.jsx("p",{className:"text-green-600 text-sm",children:"QR code has been generated for the new purchaser."})]}),e.jsx("button",{onClick:()=>Q(""),className:"text-green-600 hover:text-green-800 p-2",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"bg-white/80 backdrop-blur-xl rounded-3xl shadow-2xl border border-white/20",children:[e.jsx("div",{className:"p-8 border-b border-gray-100/50",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-14 h-14 bg-gradient-to-br from-teal-400 to-teal-600 rounded-2xl flex items-center justify-center shadow-lg",children:e.jsx("svg",{className:"w-7 h-7 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})}),e.jsx("div",{className:"absolute -top-1 -right-1 w-5 h-5 bg-green-400 rounded-full border-2 border-white animate-pulse"})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold bg-gradient-to-r from-gray-900 to-gray-600 bg-clip-text text-transparent",children:"Active Purchasers"}),e.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"Manage and monitor purchaser profiles"})]})]})})}),r?e.jsxs("div",{className:"flex items-center justify-center py-16",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-teal-500"}),e.jsx("span",{className:"ml-3 text-teal-600 font-medium",children:"Loading purchasers..."})]}):a?e.jsx("div",{className:"text-red-600 py-8 text-center bg-red-50 rounded-xl border border-red-200 m-4",children:e.jsx("p",{className:"font-medium",children:a})}):s.length===0?e.jsxs("div",{className:"text-center py-16 m-4",children:[e.jsx("div",{className:"w-20 h-20 bg-gray-100 rounded-2xl flex items-center justify-center mx-auto mb-4",children:e.jsx("svg",{className:"w-10 h-10 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})}),e.jsx("h3",{className:"text-lg font-medium text-gray-600 mb-2",children:"No purchasers found"}),e.jsx("p",{className:"text-gray-500",children:"Add your first purchaser using the form below!"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 p-6",children:s.map(n=>e.jsxs("div",{className:"flex flex-col items-center space-y-6",children:[e.jsxs("div",{className:"group bg-gradient-to-br from-white via-white to-teal-50/30 border border-teal-100/50 rounded-3xl p-8 shadow-xl hover:shadow-2xl transition-all duration-500 w-full transform hover:-translate-y-2 backdrop-blur-sm",children:[e.jsxs("div",{className:"flex flex-col items-center gap-6",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-28 h-28 rounded-full overflow-hidden border-4 border-teal-200 bg-teal-50 flex items-center justify-center shadow-2xl group-hover:border-teal-300 transition-all duration-300",children:(()=>{const w=n.photo||n.image||n.aadharImage||"",$=[];return w&&typeof w=="string"&&(w.startsWith("data:")&&$.push(w),w.startsWith("http")&&$.push(w),$.push(`${ie}${w.startsWith("/")?w:`/${w}`}`)),$.push("https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=150&h=150&fit=crop&crop=face","https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=150&h=150&fit=crop&crop=face"),e.jsx(Os,{srcCandidates:$,alt:`${n.fullName} Photo`,className:"object-cover w-full h-full"})})()}),e.jsx("div",{className:"absolute -bottom-2 -right-2 w-8 h-8 bg-green-400 rounded-full border-4 border-white shadow-lg flex items-center justify-center animate-pulse",children:e.jsx("div",{className:"w-2 h-2 bg-white rounded-full"})}),e.jsx("div",{className:"absolute -top-2 -left-2 w-6 h-6 bg-teal-500 rounded-full border-2 border-white shadow-md opacity-0 group-hover:opacity-100 transition-opacity duration-300"})]}),e.jsxs("div",{className:"text-center w-full space-y-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-bold bg-gradient-to-r from-gray-900 to-gray-600 bg-clip-text text-transparent mb-2",children:n.fullName}),e.jsx("p",{className:"text-gray-600 text-sm leading-relaxed px-4",children:rs(n.address)})]}),e.jsxs("div",{className:"inline-flex items-center gap-3 bg-gradient-to-r from-teal-100 to-teal-50 px-6 py-3 rounded-2xl border border-teal-200/50 shadow-sm",children:[e.jsx("div",{className:"w-8 h-8 bg-teal-500 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})})}),e.jsx("span",{className:"text-gray-700 font-semibold",children:n.contactNo})]})]})]}),e.jsx("div",{className:"mt-6",children:e.jsxs("div",{className:"bg-gradient-to-r from-gray-50 to-gray-100 border border-gray-200 rounded-2xl px-4 py-3 text-center shadow-inner",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 mb-1",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-teal-500 rounded-full"}),e.jsx("span",{className:"text-xs text-gray-400 font-medium uppercase tracking-wider",children:"Purchaser ID"}),e.jsx("div",{className:"w-1.5 h-1.5 bg-teal-500 rounded-full"})]}),e.jsxs("span",{className:"text-xs font-mono text-gray-600 bg-white px-3 py-1 rounded-lg border",children:[n._id.substring(0,12),"..."]})]})})]}),e.jsxs("div",{className:"group bg-white/90 backdrop-blur-sm p-8 rounded-3xl shadow-2xl border border-white/30 flex flex-col items-center space-y-4 hover:shadow-3xl transition-all duration-500 hover:scale-105",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"w-2 h-2 bg-teal-500 rounded-full animate-pulse"}),e.jsx("span",{className:"text-teal-600 font-bold text-sm uppercase tracking-wider",children:"QR Access Code"}),e.jsx("div",{className:"w-2 h-2 bg-teal-500 rounded-full animate-pulse"})]}),e.jsxs("div",{className:"relative p-4 bg-gradient-to-br from-gray-50 to-white rounded-2xl shadow-inner border border-gray-100",children:[e.jsx(E,{value:`${window.location.origin}/purchaser/${n._id}`,size:130}),e.jsx("div",{className:"absolute inset-0 rounded-2xl bg-gradient-to-br from-transparent via-transparent to-teal-500/5 group-hover:to-teal-500/10 transition-all duration-300"})]}),e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx("div",{className:"text-xs text-gray-500 font-medium",children:"Scan to view profile"}),e.jsx("button",{className:"px-4 py-2 bg-teal-50 hover:bg-teal-100 text-teal-600 rounded-xl text-xs font-semibold transition-all duration-200 border border-teal-200/50",children:"Download QR"})]})]})]},n._id))})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-100",children:[e.jsxs("h3",{className:"text-2xl font-bold text-gray-800 flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-teal-500 rounded-lg flex items-center justify-center",children:e.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})}),"Add New Purchaser"]}),!W&&e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:_,className:"px-6 py-3 bg-teal-500 text-white rounded-xl hover:bg-teal-600 transition-colors duration-200 font-semibold shadow-md",children:"Add Another"}),m?null:g&&!g.hasPurchasingCard?e.jsx("div",{className:"flex items-center gap-2",children:g.purchasingCardRequested?e.jsx("span",{className:"text-sm text-gray-600",children:"Request pending"}):e.jsx("button",{onClick:L,disabled:j,className:"px-4 py-2 bg-yellow-400 text-gray-900 rounded-xl text-sm font-semibold hover:brightness-95",children:j?"Requesting...":"Request Purchasing Card"})}):null]})]}),W?e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-gray-700 font-medium text-sm",children:"Full Name *"}),e.jsx("input",{type:"text",name:"fullName",placeholder:"Enter full name",value:b.fullName,onChange:X,required:!0,className:"w-full px-4 py-3 rounded-xl border border-gray-200 bg-gray-50 focus:outline-none focus:ring-2 focus:ring-teal-500 focus:border-teal-500 transition-all duration-200"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-gray-700 font-medium text-sm",children:"Contact Number *"}),e.jsx("input",{type:"tel",name:"contactNo",placeholder:"Enter contact number",value:b.contactNo,onChange:X,required:!0,className:"w-full px-4 py-3 rounded-xl border border-gray-200 bg-gray-50 focus:outline-none focus:ring-2 focus:ring-teal-500 focus:border-teal-500 transition-all duration-200"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-gray-700 font-medium text-sm",children:"Email *"}),e.jsx("input",{type:"email",name:"email",placeholder:"Enter purchaser email",value:b.email,onChange:X,required:!0,className:"w-full px-4 py-3 rounded-xl border border-gray-200 bg-gray-50 focus:outline-none focus:ring-2 focus:ring-teal-500 focus:border-teal-500 transition-all duration-200"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-gray-700 font-medium text-sm",children:"Password (will be emailed)"}),e.jsx("input",{type:"password",name:"password",placeholder:"Create password (optional)",value:b.password,onChange:X,className:"w-full px-4 py-3 rounded-xl border border-gray-200 bg-gray-50 focus:outline-none focus:ring-2 focus:ring-teal-500 focus:border-teal-500 transition-all duration-200"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-gray-700 font-medium text-sm",children:"Address *"}),e.jsx("textarea",{name:"address",placeholder:"Enter complete address",value:b.address,onChange:X,required:!0,rows:"3",className:"w-full px-4 py-3 rounded-xl border border-gray-200 bg-gray-50 focus:outline-none focus:ring-2 focus:ring-teal-500 focus:border-teal-500 transition-all duration-200 resize-vertical"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-gray-700 font-medium text-sm",children:"Purchaser Photo *"}),e.jsxs("div",{className:"border-2 border-dashed border-gray-200 rounded-xl p-6 text-center hover:border-teal-300 transition-colors",children:[e.jsx("svg",{className:"w-8 h-8 text-gray-400 mx-auto mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),e.jsx("input",{type:"file",name:"photo",accept:"image/*",onChange:X,required:!0,className:"w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-teal-50 file:text-teal-700 hover:file:bg-teal-100"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Upload photo"})]}),S&&e.jsx("div",{className:"mt-3 flex justify-center",children:e.jsx("img",{src:S,alt:"Photo Preview",className:"w-20 h-20 object-cover rounded-full border-4 border-teal-200 shadow-sm"})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-gray-700 font-medium text-sm",children:"Aadhar Card Image *"}),e.jsxs("div",{className:"border-2 border-dashed border-gray-200 rounded-xl p-6 text-center hover:border-teal-300 transition-colors",children:[e.jsx("svg",{className:"w-8 h-8 text-gray-400 mx-auto mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),e.jsx("input",{type:"file",name:"aadharImage",accept:"image/*",onChange:X,required:!0,className:"w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-teal-50 file:text-teal-700 hover:file:bg-teal-100"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Upload Aadhar card"})]}),C&&e.jsx("div",{className:"mt-3 flex justify-center",children:e.jsx("img",{src:C,alt:"Aadhar Preview",className:"w-32 h-20 object-cover rounded-lg border-2 border-teal-200 shadow-sm"})})]})]}),a&&e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-xl p-4 flex items-center gap-3",children:[e.jsx("svg",{className:"w-5 h-5 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})}),e.jsx("span",{className:"text-red-700 font-medium",children:a})]}),e.jsxs("div",{className:"flex gap-4 pt-4",children:[e.jsx("button",{onClick:R,disabled:Y,className:`flex-1 px-6 py-4 rounded-xl font-semibold transition-all duration-200 shadow-md ${Y?"bg-teal-400 text-white cursor-not-allowed":"bg-teal-500 text-white hover:bg-teal-600 hover:shadow-lg"}`,children:Y?e.jsxs("span",{className:"flex items-center justify-center gap-2",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Adding Purchaser..."]}):"Add Purchaser"}),e.jsx("button",{onClick:N,className:"px-6 py-4 rounded-xl border-2 border-teal-200 text-teal-600 font-semibold hover:bg-teal-50 transition-all duration-200",children:"Reset"})]})]}):e.jsx("div",{className:"text-center py-16",children:g&&!g.hasPurchasingCard?e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"w-20 h-20 bg-yellow-50 rounded-2xl flex items-center justify-center mx-auto mb-2",children:e.jsx("svg",{className:"w-10 h-10 text-yellow-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3"})})}),e.jsx("h4",{className:"text-xl font-bold text-gray-800",children:"Purchasing Card Required"}),e.jsx("p",{className:"text-gray-600",children:"You need a purchasing card to add or modify purchasers."}),g.purchasingCardRequested?e.jsx("p",{className:"text-sm text-gray-500",children:"Your request is pending approval."}):e.jsx("button",{onClick:L,disabled:j,className:"px-6 py-3 bg-yellow-400 text-gray-900 rounded-xl font-semibold",children:j?"Requesting...":"Request Purchasing Card"}),f&&e.jsx("div",{className:"text-sm text-gray-600 mt-2",children:f})]}):e.jsxs("div",{children:[e.jsx("div",{className:"w-20 h-20 bg-green-100 rounded-2xl flex items-center justify-center mx-auto mb-6",children:e.jsx("svg",{className:"w-10 h-10 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),e.jsx("h4",{className:"text-2xl font-bold text-green-700 mb-3",children:"Purchaser Added Successfully!"}),e.jsx("p",{className:"text-green-600 text-lg mb-6",children:"QR code has been generated and the purchaser is now listed above."})]})})]}),M&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-2xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h4",{className:"text-lg font-bold",children:"Select Stockists (min 3)"}),e.jsx("button",{onClick:()=>z(!1),className:"text-gray-500 hover:text-gray-700",children:"Close"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 max-h-64 overflow-auto mb-4",children:i&&i.length>0?i.map(n=>e.jsxs("label",{className:`flex items-center gap-3 p-3 rounded-lg border ${v.includes(n._id)?"border-teal-400 bg-teal-50":"border-gray-100"}`,children:[e.jsx("input",{type:"checkbox",checked:v.includes(n._id),onChange:()=>y(n._id)}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium",children:n.name||n.email||n._id}),e.jsx("div",{className:"text-sm text-gray-500",children:rs(n.address)})]})]},n._id)):e.jsx("div",{className:"text-center text-gray-500 p-6",children:"No stockists available"})}),e.jsxs("div",{className:"flex items-center justify-end gap-3",children:[e.jsx("button",{onClick:()=>z(!1),className:"px-4 py-2 rounded-lg border",children:"Cancel"}),e.jsx("button",{onClick:q,disabled:j,className:"px-4 py-2 rounded-lg bg-teal-500 text-white",children:j?"Requesting...":"Notify Selected"})]}),f&&e.jsx("div",{className:"mt-3 text-sm text-gray-700",children:f})]})})]})]})},ls=s=>{if(!s)return[];const t=[];return s.startsWith("http")&&t.push(s),t.push(`${ie}${s.startsWith("/")?s:`/${s}`}`),t.push(`${"/".replace(/\/$/,"")}/${s.replace(/^\//,"")}`),t},Ws=()=>{const{id:s}=He(),[t,r]=l.useState(null),[o,a]=l.useState(!0),[h,g]=l.useState(null);return l.useEffect(()=>{(async()=>{a(!0);try{const m=await me.get(G(`/api/purchaser/${s}`));r(m.data.data),g(null)}catch{g("Failed to fetch purchaser details")}a(!1)})()},[s]),o?e.jsx("div",{className:"text-sky-600 py-4",children:"Loading..."}):h?e.jsx("div",{className:"text-red-600 py-4",children:h}):t?e.jsx("div",{className:"bg-sky-50 min-h-screen py-8",children:e.jsx("div",{className:"max-w-md mx-auto px-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow p-6 border border-sky-100 flex flex-col items-center gap-4",children:[e.jsx("div",{className:"w-24 h-24 rounded-full overflow-hidden border-2 border-sky-300 bg-sky-50 flex items-center justify-center",children:t.photo?(()=>{const k=ls(t.photo);return e.jsx("img",{src:k[0],alt:"Photo",className:"object-cover w-full h-full",onError:m=>{const c=k.find(j=>j!==m.currentTarget.src);c?m.currentTarget.src=c:(m.currentTarget.onerror=null,m.currentTarget.src="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='120' height='120'><rect width='100%' height='100%' fill='%23e6eefc'/><text x='50%' y='50%' dominant-baseline='middle' text-anchor='middle' fill='%236b8bd7' font-size='20'>Photo</text></svg>")}})})():e.jsx("span",{className:"text-5xl",children:"ðŸ§‘â€ðŸ’¼"})}),e.jsx("div",{className:"text-2xl font-bold text-sky-700",children:t.fullName}),e.jsx("div",{className:"text-slate-600 text-center",children:t.address}),e.jsx("div",{className:"text-slate-700 font-medium",children:t.contactNo}),e.jsxs("div",{className:"w-full flex flex-col items-center gap-2 mt-4",children:[e.jsx("div",{className:"font-semibold text-sky-600",children:"Aadhar Image"}),t.aadharImage?(()=>{const k=ls(t.aadharImage);return e.jsx("img",{src:k[0],alt:"Aadhar",className:"w-48 h-32 object-cover rounded border border-sky-200",onError:m=>{const c=k.find(j=>j!==m.currentTarget.src);c?m.currentTarget.src=c:(m.currentTarget.onerror=null,m.currentTarget.src="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='240' height='160'><rect width='100%' height='100%' fill='%23f8fafc'/><text x='50%' y='50%' dominant-baseline='middle' text-anchor='middle' fill='%2399a6b2' font-size='18'>No image</text></svg>")}})})():e.jsx("span",{className:"text-slate-400",children:"No Aadhar image"})]}),e.jsxs("div",{className:"mt-2 text-xs text-slate-400",children:["ID: ",t._id]})]})})}):e.jsx("div",{className:"text-slate-500 py-4",children:"No details found."})},Us=({staff:s,onOpen:t})=>{const r=()=>t(s),a=(h=>{if(!h)return null;try{if(h.startsWith("http"))return h}catch{}const g=h.startsWith("/")?h:`/${h}`;return`${ie}${g}`})(s.image);return e.jsx("div",{onClick:r,className:"bg-white rounded-xl p-6 shadow-md hover:shadow-lg border border-gray-100 hover:border-blue-200 cursor-pointer transition-all duration-300 group",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"relative",children:[a?e.jsx("img",{src:a,alt:s.fullName,className:"w-14 h-14 rounded-xl object-cover"}):e.jsx("div",{className:"w-14 h-14 bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl flex items-center justify-center text-white font-semibold text-lg",children:s.fullName?s.fullName.charAt(0):"S"}),e.jsx("div",{className:"absolute -bottom-1 -right-1 w-4 h-4 bg-green-500 rounded-full border-2 border-white"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-gray-800 group-hover:text-blue-600 transition-colors duration-200",children:s.fullName}),e.jsx("p",{className:"text-sm text-gray-500",children:s.contact}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:s.email})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-xs text-gray-400",children:["ID: ",s._id.slice(-6)]}),e.jsx("div",{className:"text-xs text-green-600 font-medium",children:"Active"})]}),e.jsx("div",{className:"hidden sm:block",children:e.jsx("div",{className:"w-10 h-10 bg-white p-1 rounded-md shadow-sm",children:e.jsx(Je,{value:`${window.location.origin}/staff/${s._id}`,size:36})})})]})]})})},Hs=({staff:s,onClose:t})=>e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-2xl p-8 max-w-md w-full shadow-2xl",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Staff Details"}),e.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors duration-200",children:e.jsx("svg",{className:"w-5 h-5 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[(()=>{const r=s.image,o=r&&(r.startsWith("http")?r:`${ie}${r.startsWith("/")?r:`/${r}`}`);return o?e.jsx("img",{src:o,alt:s.fullName,className:"w-16 h-16 rounded-xl object-cover"}):e.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl flex items-center justify-center text-white font-bold text-xl",children:s.fullName?s.fullName.charAt(0):"S"})})(),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-800",children:s.fullName}),e.jsx("p",{className:"text-sm text-gray-500",children:s.contact})]})]}),e.jsxs("div",{className:"space-y-3 pt-4 border-t border-gray-100",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-400 uppercase tracking-wide",children:"Email"}),e.jsx("p",{className:"text-sm text-gray-800",children:s.email})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-400 uppercase tracking-wide",children:"Address"}),e.jsx("p",{className:"text-sm text-gray-800",children:s.address})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-400 uppercase tracking-wide",children:"Status"}),e.jsx("p",{className:"text-sm text-green-600 font-medium",children:"Active"})]})]}),e.jsx("div",{className:"mt-6 flex items-center justify-center",children:e.jsx("div",{className:"bg-gray-50 p-4 rounded-xl",children:e.jsx(Je,{value:`${window.location.origin}/staff/${s._id}`,size:128})})})]}),e.jsxs("div",{className:"flex gap-3 mt-8",children:[e.jsx("button",{onClick:t,className:"flex-1 px-4 py-2 border border-gray-200 text-gray-600 rounded-xl hover:bg-gray-50 transition-colors duration-200",children:"Close"}),window&&window.localStorage&&(()=>{try{const r=JSON.parse(window.localStorage.getItem("user"));return r&&(r.role==="admin"||String(r._id)===String(s.stockist))}catch{return!1}})()&&e.jsx("button",{className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-xl hover:bg-blue-700 transition-colors duration-200",children:"Edit Staff"})]})]})});function Vs(){const[s,t]=l.useState([]),[r,o]=l.useState(!0),[a,h]=l.useState(null),[g,k]=l.useState(""),[m,c]=l.useState(()=>{try{const i=localStorage.getItem("user");return i?JSON.parse(i):null}catch{return null}}),j=te(),d=Ae();l.useEffect(()=>{let i=!0;return(async()=>{try{const p=localStorage.getItem("token"),M=m&&m.role==="stockist",z=G(M?"/api/staff?stockist=me":"/api/staff"),v={};p&&(v.headers={Authorization:`Bearer ${p}`});const u=await fetch(z,v),b=await u.json().catch(()=>[]);if(!i)return;u.ok&&Array.isArray(b)?t(b):u.ok&&b&&Array.isArray(b.data)&&t(b.data)}catch(p){console.error("Failed to load staff list",p)}finally{i&&o(!1)}})(),()=>{i=!1}},[d.key,m]);const f=()=>j("/adminCreateStaff"),P=s.filter(i=>i.fullName.toLowerCase().includes(g.toLowerCase())||i.contact.includes(g)||i.email.toLowerCase().includes(g.toLowerCase()));return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50 p-6",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-4 mb-2",children:[e.jsx("div",{className:"w-4 h-4 bg-blue-500 rounded-full"}),e.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Staff Management"})]}),e.jsx("p",{className:"text-gray-600 ml-8",children:"Manage your team members and their information"})]}),m&&(m.role==="stockist"||m.role==="admin")&&e.jsxs("button",{onClick:f,className:"px-6 py-3 bg-blue-600 text-white rounded-xl hover:bg-blue-700 transition-all duration-200 flex items-center gap-2 shadow-lg hover:shadow-xl",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Add New Staff"]})]}),e.jsxs("div",{className:"flex flex-col lg:flex-row gap-6",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx("svg",{className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),e.jsx("input",{type:"text",placeholder:"Search staff by name, contact, or email...",value:g,onChange:i=>k(i.target.value),className:"w-full pl-12 pr-4 py-4 bg-white border border-gray-200 rounded-xl focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all duration-200 outline-none"})]})}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-md border border-gray-100 min-w-[120px]",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:s.length}),e.jsx("div",{className:"text-sm text-gray-500",children:"Total Staff"})]}),e.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-md border border-gray-100 min-w-[120px]",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:s.length}),e.jsx("div",{className:"text-sm text-gray-500",children:"Active"})]})]})]})]}),r&&e.jsx("div",{className:"flex items-center justify-center py-16",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("svg",{className:"animate-spin w-8 h-8 text-blue-600 mx-auto mb-4",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),e.jsx("p",{className:"text-gray-600",children:"Loading staff members..."})]})}),!r&&e.jsxs("div",{className:"space-y-4",children:[P.map(i=>e.jsx(Us,{staff:i,onOpen:p=>h(p)},i._id)),!r&&P.length===0&&s.length>0&&e.jsxs("div",{className:"text-center py-16",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("svg",{className:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"No staff found"}),e.jsx("p",{className:"text-gray-500",children:"Try adjusting your search criteria"})]}),!r&&s.length===0&&e.jsxs("div",{className:"text-center py-16",children:[e.jsx("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("svg",{className:"w-8 h-8 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"No staff members yet"}),e.jsx("p",{className:"text-gray-500 mb-6",children:"Get started by adding your first staff member"}),m&&(m.role==="stockist"||m.role==="admin")?e.jsxs("button",{onClick:f,className:"px-6 py-3 bg-blue-600 text-white rounded-xl hover:bg-blue-700 transition-colors duration-200 inline-flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Add First Staff Member"]}):e.jsx("div",{className:"text-sm text-gray-500",children:"Only stockists or admins can add staff."})]})]}),!r&&s.length>0&&e.jsx("div",{className:"mt-8",children:e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-lg border border-gray-100",children:[e.jsx("h3",{className:"font-semibold text-gray-800 mb-4",children:"Quick Actions"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("button",{className:"p-4 border border-gray-200 rounded-xl hover:bg-gray-50 transition-colors duration-200 text-left",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center mb-3",children:e.jsx("svg",{className:"w-4 h-4 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),e.jsx("h4",{className:"font-medium text-gray-800",children:"Export Staff List"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Download staff data as CSV"})]}),e.jsxs("button",{className:"p-4 border border-gray-200 rounded-xl hover:bg-gray-50 transition-colors duration-200 text-left",children:[e.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-lg flex items-center justify-center mb-3",children:e.jsx("svg",{className:"w-4 h-4 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})}),e.jsx("h4",{className:"font-medium text-gray-800",children:"Staff Analytics"}),e.jsx("p",{className:"text-sm text-gray-500",children:"View performance metrics"})]}),e.jsxs("button",{className:"p-4 border border-gray-200 rounded-xl hover:bg-gray-50 transition-colors duration-200 text-left",children:[e.jsx("div",{className:"w-8 h-8 bg-orange-100 rounded-lg flex items-center justify-center mb-3",children:e.jsx("svg",{className:"w-4 h-4 text-orange-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 100 4m0-4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 100 4m0-4v2m0-6V4"})})}),e.jsx("h4",{className:"font-medium text-gray-800",children:"Bulk Actions"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Manage multiple staff"})]})]})]})}),a&&e.jsx(Hs,{staff:a,onClose:()=>h(null)})]})})}function Js(){const[s,t]=l.useState({fullName:"",contact:"",email:"",address:""}),[r]=l.useState(()=>{try{const p=localStorage.getItem("user");return p?JSON.parse(p):null}catch{return null}}),[o,a]=l.useState(null),[h,g]=l.useState(null),[k,m]=l.useState([]),[c,j]=l.useState(""),[d,f]=l.useState(!1),P=te();Le.useEffect(()=>{(async()=>{try{if(r&&r.role==="admin"){const p=await fetch(G("/api/stockist")),M=await p.json().catch(()=>({})),z=M&&M.data||[];p.ok&&Array.isArray(z)&&m(z)}}catch(p){console.error("Failed to load stockists",p)}})()},[r]);const i=async p=>{if(p.preventDefault(),!o||!h)return alert("Please attach image and aadhar card.");f(!0);try{const M=localStorage==null?void 0:localStorage.getItem("token"),z=new FormData;z.append("fullName",s.fullName),z.append("contact",s.contact),z.append("email",s.email),z.append("address",s.address),r&&r.role==="admin"&&c&&z.append("stockist",c),z.append("image",o),z.append("aadharCard",h);const v=await fetch(G("/api/staff"),{method:"POST",body:z,headers:{...M?{Authorization:`Bearer ${M}`}:{}}}),u=await v.json().catch(()=>({}));if(!v.ok){const b=u&&u.message||JSON.stringify(u)||v.statusText;throw new Error(b)}alert("Staff created successfully!"),P(-1)}catch(M){alert(String(M))}finally{f(!1)}};return e.jsx("div",{className:"min-h-screen flex items-start justify-center p-6",style:{backgroundColor:"#f8fafc"},children:r&&(r.role==="stockist"||r.role==="admin")?e.jsxs("div",{className:"w-full max-w-2xl bg-white p-8 rounded-2xl shadow-lg border border-gray-100",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"w-16 h-16 bg-blue-500 rounded-2xl flex items-center justify-center mx-auto mb-4",children:e.jsx("svg",{className:"w-8 h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"})})}),e.jsx("h2",{className:"text-2xl font-semibold text-gray-800",children:"Create Staff"}),e.jsx("p",{className:"text-gray-500 mt-1",children:"Add new team member information"})]}),e.jsxs("div",{className:"space-y-6",children:[r&&r.role==="admin"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Assign to Stockist"}),e.jsxs("select",{className:"w-full px-4 py-3 border border-gray-200 rounded-xl",value:c,onChange:p=>j(p.target.value),children:[e.jsx("option",{value:"",children:"-- Select stockist (optional) --"}),k.map(p=>e.jsx("option",{value:p._id,children:p.name||p.title||p.companyName||p.email},p._id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Full Name"}),e.jsx("input",{className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",placeholder:"Enter full name",value:s.fullName,onChange:p=>t(M=>({...M,fullName:p.target.value})),required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Contact Number"}),e.jsx("input",{className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",placeholder:"Enter contact number",value:s.contact,onChange:p=>t(M=>({...M,contact:p.target.value})),required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),e.jsx("input",{className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",placeholder:"Enter email address",type:"email",value:s.email,onChange:p=>t(M=>({...M,email:p.target.value}))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Address"}),e.jsx("input",{className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",placeholder:"Enter address",value:s.address,onChange:p=>t(M=>({...M,address:p.target.value}))})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Profile Photo"}),e.jsxs("div",{className:"border-2 border-dashed border-gray-200 rounded-xl p-6 text-center hover:border-blue-300 transition-colors",children:[e.jsx("svg",{className:"w-8 h-8 text-gray-400 mx-auto mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),e.jsx("input",{type:"file",accept:"image/*",onChange:p=>a(p.target.files[0]),className:"w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100",required:!0}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Upload profile photo"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Aadhar Card"}),e.jsxs("div",{className:"border-2 border-dashed border-gray-200 rounded-xl p-6 text-center hover:border-blue-300 transition-colors",children:[e.jsx("svg",{className:"w-8 h-8 text-gray-400 mx-auto mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),e.jsx("input",{type:"file",accept:"image/*",onChange:p=>g(p.target.files[0]),className:"w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100",required:!0}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Upload Aadhar card image"})]})]})]}),e.jsx("div",{className:"pt-4",children:e.jsx("button",{onClick:i,disabled:d,className:"w-full bg-blue-500 hover:bg-blue-600 disabled:bg-blue-300 text-white font-semibold py-4 px-6 rounded-xl transition-colors duration-200 flex items-center justify-center",children:d?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Creating Staff..."]}):"Create Staff Member"})})]})]}):e.jsxs("div",{className:"w-full max-w-2xl bg-white p-8 rounded-2xl shadow-lg border border-gray-100 text-center",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Unauthorized"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Only stockists or admins can add staff members."}),e.jsx("button",{onClick:()=>window.history.back(),className:"px-4 py-2 bg-blue-600 text-white rounded-lg",children:"Go Back"})]})})}function Gs(){var j;const{id:s}=He(),t=te(),[r,o]=l.useState(null),[a,h]=l.useState(!0),[g]=l.useState(()=>{try{const d=localStorage.getItem("user");return d?JSON.parse(d):null}catch{return null}});if(l.useEffect(()=>{(async()=>{try{const d=localStorage.getItem("token"),f=await fetch(G(`/api/staff/${s}`),{headers:d?{Authorization:`Bearer ${d}`}:{}});if(f.status===401){alert("Session expired or unauthorized â€” please sign in."),t("/login");return}const P=await f.json().catch(()=>({}));f.ok&&o(P.data)}catch(d){console.error(d)}finally{h(!1)}})()},[s,t]),a)return e.jsx("div",{className:"p-6",children:"Loading..."});if(!r)return e.jsx("div",{className:"p-6 text-red-600",children:"Staff not found"});const m=`${window.location.origin.replace(/\/+$/,"")}/staff/${r._id}`,c=(j=r.image)!=null&&j.startsWith("http")?r.image:`${window.location.origin.replace(/\/+$/,"")}${r.image}`;return e.jsx("div",{className:"min-h-screen flex items-start justify-center p-3 md:p-6 bg-slate-50",children:e.jsxs("div",{className:"w-full max-w-xl bg-white p-4 md:p-6 rounded shadow",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center gap-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-center sm:items-start gap-4 flex-1",children:[e.jsx("img",{src:c,alt:"photo",className:"w-24 h-24 sm:w-28 sm:h-28 object-cover rounded"}),e.jsxs("div",{className:"text-center sm:text-left",children:[e.jsx("h3",{className:"text-lg sm:text-xl font-semibold",children:r.fullName}),e.jsx("div",{className:"text-sm text-slate-600 mt-1",children:r.contact}),e.jsx("div",{className:"text-sm text-slate-600",children:r.email}),e.jsx("div",{className:"text-sm text-slate-600",children:r.address})]})]}),e.jsx("div",{className:"flex justify-center md:ml-auto",children:e.jsx(Ze,{value:m,size:120,className:"sm:w-[140px] sm:h-[140px]"})})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Identity Card"}),e.jsx("div",{className:"border p-3 md:p-4 rounded",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3 sm:gap-4",children:[e.jsx("img",{src:c,alt:"photo",className:"w-16 h-16 sm:w-20 sm:h-20 object-cover rounded mx-auto sm:mx-0"}),e.jsxs("div",{className:"text-center sm:text-left flex-1",children:[e.jsx("div",{className:"font-semibold text-sm sm:text-base",children:r.fullName}),e.jsx("div",{className:"text-xs sm:text-sm text-slate-600",children:r.contact}),e.jsx("div",{className:"text-xs sm:text-sm text-slate-600",children:r.email})]}),e.jsx("div",{className:"flex justify-center sm:ml-auto",children:e.jsx(Ze,{value:m,size:80,className:"sm:w-[90px] sm:h-[90px]"})})]})}),e.jsx("div",{className:"mt-4",children:g&&(g.role==="admin"||String(g._id)===String(r.stockist))?e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsx("button",{className:"px-4 py-2 bg-blue-600 text-white rounded text-sm sm:text-base",children:"Edit"}),e.jsx("button",{className:"px-4 py-2 bg-red-600 text-white rounded text-sm sm:text-base",children:"Delete"})]}):e.jsx("div",{className:"text-sm text-gray-500",children:"You do not have permissions to modify this staff."})})]})]})})}function Qs(){const[s,t]=l.useState([{id:Date.now(),name:"",qty:0}]),[r,o]=l.useState([]),[a,h]=l.useState([]),[g,k]=l.useState(null),[m,c]=l.useState([]),[j,d]=l.useState(!1),[f,P]=l.useState(null),i="savedDemand";l.useEffect(()=>{(async()=>{try{const[b,x]=await Promise.all([fetch(`${ie}/api/medicine`),fetch(`${ie}/api/stockist`)]);if(b&&b.ok){const C=await b.json();o(C.data||[])}if(x&&x.ok){const C=await x.json();h(C.data||[])}}catch(b){console.warn("Could not fetch medicines/stockists",b)}})();try{const b=localStorage.getItem(i);if(b){const x=JSON.parse(b);x&&x.groups&&k(x.groups)}}catch{}},[]);const p=(u,b)=>{t(x=>x.map(C=>C.id===u?{...C,...b}:C))},M=()=>t(u=>[...u,{id:Date.now()+Math.random(),name:"",qty:0}]),z=u=>t(b=>b.filter(x=>x.id!==u)),v=async()=>{d(!0),P(null);try{const u={},b=x=>(x||"").toString().trim();for(const x of s){const C={query:x.name,foundMeds:[],candidateStockists:[],assignedTo:null},D=b(x.name);if(!D){u.unmatched=u.unmatched||[],u.unmatched.push({line:x});continue}const S=D.toLowerCase();let O=[];if(Array.isArray(r)&&r.length>0){const H=r.filter(I=>(I.name||I.medicineName||I.title||"").toString().toLowerCase()===S),W=r.filter(I=>{const T=(I.name||I.medicineName||I.title||"").toString().toLowerCase();return T.includes(S)&&T!==S});O=H.length?H:W,C.foundMeds=O.map(I=>ne(I)||String(I._id))}let Y=!1;for(const H of O){let W=null;if(Array.isArray(a)&&a.length>0&&(W=a.find(I=>Pe(H,I._id)),!W)){const I=ne(H)||"";W=a.find(T=>we(I,T))}if(W){C.candidateStockists.push(W.title||W.name||W._id);const I=W.title||W.name||W._id;u[I]=u[I]||[],u[I].push({line:x,medicine:H}),Y=!0,C.assignedTo=I}}if(!Y){if(Array.isArray(a)&&a.length>0){let H=a.find(W=>we(D,W));if(!H){let W=0,I=null;for(const T of a){const Q=cs(D,T);Q>W&&(W=Q,I=T)}W>=1&&(H=I)}if(H){C.candidateStockists.push(H.title||H.name||H._id);const W=H.title||H.name||H._id;u[W]=u[W]||[],u[W].push({line:x,medicine:null}),Y=!0,C.assignedTo=W}}Y||(u.unmatched=u.unmatched||[],u.unmatched.push({line:x}),C.assignedTo="unmatched"),c(H=>[...H,C])}}k(u);try{localStorage.setItem(i,JSON.stringify({groups:u,createdAt:Date.now()}))}catch(x){console.warn("Could not save demand to localStorage",x)}}catch(u){console.error(u),P("Could not create demand. See console.")}finally{d(!1)}};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-100 via-white to-blue-50",children:e.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-4xl",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-blue-600 text-white rounded-full mb-4",children:e.jsx(be,{size:32})}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Create Today's Demand"}),e.jsx("p",{className:"text-gray-600",children:"Add medicine requirements and organize by stockists"})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Medicine Requirements"}),e.jsxs("div",{className:"text-sm text-gray-500",children:[s.length," item",s.length!==1?"s":""]})]}),e.jsx("div",{className:"space-y-4 mb-6",children:s.map((u,b)=>e.jsx("div",{className:"group",children:e.jsxs("div",{className:"flex items-center gap-4 p-4 border border-gray-200 rounded-lg hover:border-blue-300 transition-colors",children:[e.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-gray-100 rounded-full flex items-center justify-center text-sm font-medium text-gray-600",children:b+1}),e.jsx("div",{className:"flex-1",children:e.jsx("input",{value:u.name,onChange:x=>p(u.id,{name:x.target.value}),placeholder:"Enter medicine name...",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition-all"})}),e.jsx("div",{className:"flex-shrink-0",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Qty:"}),e.jsx("input",{type:"number",min:0,value:u.qty,onChange:x=>p(u.id,{qty:Number(x.target.value===""?0:x.target.value)}),className:"w-20 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition-all text-center"})]})}),s.length>1&&e.jsx("button",{onClick:()=>z(u.id),className:"flex-shrink-0 p-2 text-red-500 hover:bg-red-50 rounded-lg transition-colors opacity-0 group-hover:opacity-100",title:"Remove item",children:e.jsx(js,{size:18})})]})},u.id))}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:M,className:"flex items-center gap-2 px-6 py-3 bg-green-600 hover:bg-green-700 text-white rounded-lg font-medium transition-colors",children:[e.jsx(Ve,{size:18}),"Add Item"]}),e.jsx("button",{onClick:v,className:"flex items-center gap-2 px-8 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed",disabled:j,children:j?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent"}),"Processing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ye,{size:18}),"Create Demand"]})})]})]}),f&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-8",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ke,{className:"text-red-500",size:20}),e.jsx("div",{className:"text-red-700 font-medium",children:f})]})}),g&&e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[e.jsxs("h3",{className:"text-xl font-semibold text-gray-800 mb-6 flex items-center gap-2",children:[e.jsx(ye,{className:"text-green-500",size:24}),"Grouped Demand Results"]}),Object.keys(g).length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(be,{size:48,className:"mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No results to display"})]}):e.jsx("div",{className:"space-y-4",children:Object.entries(g).map(([u,b])=>e.jsxs("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:[e.jsxs("div",{className:`px-6 py-4 font-semibold text-white ${u==="unmatched"?"bg-amber-500":"bg-gradient-to-r from-blue-500 to-blue-600"}`,children:[u==="unmatched"?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ke,{size:20}),"Unmatched / Not Found"]}):u,e.jsxs("div",{className:"text-sm opacity-90 mt-1",children:[b.length," item",b.length!==1?"s":""]})]}),e.jsx("div",{className:"divide-y divide-gray-100",children:b.map((x,C)=>e.jsx("div",{className:"px-6 py-4 hover:bg-gray-50 transition-colors",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-gray-900 mb-1",children:x.line.name}),x.medicine&&e.jsxs("div",{className:"text-sm text-green-600",children:["âœ“ Matches:"," ",x.medicine.name||x.medicine.title||x.medicine.medicineName||x.medicine._id]}),!x.medicine&&u!=="unmatched"&&e.jsx("div",{className:"text-sm text-gray-500",children:"No direct medicine match"})]}),e.jsx("div",{className:"flex-shrink-0",children:e.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-blue-100 text-blue-800",children:["Qty: ",x.line.qty]})})]})},C))})]},u))})]}),m&&m.length>0&&e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 mt-6",children:[e.jsx("h4",{className:"font-semibold mb-3",children:"Debug: matching details"}),e.jsx("div",{className:"space-y-3 text-sm text-gray-700",children:m.map((u,b)=>e.jsxs("div",{className:"p-3 border rounded",children:[e.jsxs("div",{className:"font-medium",children:["Query: ",u.query]}),e.jsxs("div",{children:["Found medicines: ",u.foundMeds.join(", ")||"none"]}),e.jsxs("div",{children:["Candidate stockists:"," ",u.candidateStockists.join(", ")||"none"]}),e.jsxs("div",{children:["Assigned to: ",u.assignedTo||"none"]})]},b))})]})]})})}function Ys(){const s=te(),[t,r]=l.useState(""),[o,a]=l.useState(""),[h,g]=l.useState(!1),[k,m]=l.useState(""),[c,j]=l.useState(!1),[d,f]=l.useState(!1);async function P(i){i.preventDefault(),m(""),g(!0);try{const p=await fetch(G("/api/auth/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t,password:o})}),M=await p.json().catch(()=>({}));if(!p.ok){m(M&&M.message||"Login failed"),g(!1);return}try{localStorage.removeItem("token"),localStorage.removeItem("user")}catch{}M.token&&(console.debug("Login: storing token ->",M.token&&M.token.slice(0,16)+"..."),localStorage.setItem("token",M.token)),M.user&&(console.debug("Login: storing user ->",M.user&&M.user.email),localStorage.setItem("user",JSON.stringify(M.user)));try{console.log("Login: stored user ->",JSON.parse(localStorage.getItem("user"))),console.log("Login: current token ->",(localStorage.getItem("token")||"(none)").slice(0,16)+"...")}catch(z){console.warn("Login: could not parse stored user",z)}s("/stockist-outcode"),setTimeout(()=>window.location.reload(),120)}catch{m("Network error")}finally{g(!1)}}return Le.useEffect(()=>{try{const i=G("/api/auth/login");console.log("Resolved login URL:",i),fetch(G("/debug/runtime")).then(p=>p.json()).then(p=>console.log("/debug/runtime ->",p)).catch(p=>console.warn("/debug/runtime failed",p))}catch(i){console.warn("apiUrl diagnostic failed",i)}},[]),e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-blue-50 to-indigo-100 flex items-center justify-center p-4",children:e.jsxs("div",{className:"w-full max-w-md",children:[e.jsx("div",{className:"text-center mb-8",children:e.jsxs("div",{className:"relative inline-block",children:[e.jsxs("div",{className:"w-20 h-20 bg-gradient-to-r from-teal-400 via-blue-500 to-purple-600 rounded-2xl flex items-center justify-center mb-4 mx-auto shadow-lg transform rotate-12",children:[e.jsx("img",{src:"/final-logo.png",alt:""}),e.jsx("div",{className:"bg-white rounded-lg p-2 transform -rotate-12",children:e.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-teal-500 to-blue-600 rounded-md flex items-center justify-center",children:e.jsx("div",{className:"w-4 h-4 bg-white rounded-sm flex items-center justify-center",children:e.jsx("div",{className:"w-2 h-2 bg-teal-500 rounded-full"})})})})]}),e.jsx("div",{className:"absolute -top-2 -right-2 w-6 h-6 bg-gradient-to-r from-orange-400 to-red-500 rounded-full flex items-center justify-center",children:e.jsx("div",{className:"w-3 h-3 bg-white rounded-full flex items-center justify-center",children:e.jsx("div",{className:"w-1.5 h-1.5 bg-green-500 rounded-full"})})})]})}),e.jsxs("div",{className:"bg-white rounded-3xl shadow-xl p-8 backdrop-blur-sm",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Welcome Back"}),e.jsx("p",{className:"text-gray-600",children:"Sign in to your MedTrap account"})]}),k&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg mb-6",children:k}),e.jsxs("form",{onSubmit:P,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),e.jsxs("div",{className:"relative",children:[e.jsx(ze,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:"email",required:!0,value:t,onChange:i=>r(i.target.value),placeholder:"Enter your email address",className:"w-full pl-10 pr-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-teal-500 focus:border-transparent transition-all duration-200 bg-gray-50"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(qe,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:d?"text":"password",required:!0,value:o,onChange:i=>a(i.target.value),placeholder:"Enter your password",className:"w-full pl-10 pr-12 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-teal-500 focus:border-transparent transition-all duration-200 bg-gray-50"}),e.jsx("button",{type:"button",onClick:()=>f(!d),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors",children:d?e.jsx(We,{className:"w-5 h-5"}):e.jsx(Ue,{className:"w-5 h-5"})})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:c,onChange:i=>j(i.target.checked),className:"w-4 h-4 text-teal-600 bg-gray-100 border-gray-300 rounded focus:ring-teal-500 focus:ring-2"}),e.jsx("span",{className:"ml-2 text-sm text-gray-600",children:"Remember me"})]}),e.jsx("a",{href:"/forgot-password",className:"text-sm text-teal-600 hover:text-teal-500 font-medium transition-colors",children:"Forgot password?"})]}),e.jsx("button",{type:"submit",disabled:h,className:"w-full bg-gradient-to-r from-teal-500 to-blue-600 hover:from-teal-600 hover:to-blue-700 text-white font-semibold py-3 px-4 rounded-xl transition-all duration-200 transform hover:scale-[1.02] disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none shadow-lg",children:h?e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Signing in..."]}):"Sign In"})]}),e.jsxs("div",{className:"relative my-8",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:"w-full border-t border-gray-200"})}),e.jsx("div",{className:"relative flex justify-center text-sm",children:e.jsx("span",{className:"px-4 bg-white text-gray-500",children:"New to MedTrap?"})})]}),e.jsx("div",{className:"text-center",children:e.jsx("a",{href:"/adminCreateStockist",className:"text-teal-600 hover:text-teal-500 font-semibold transition-colors",children:"Create your account"})})]}),e.jsx("div",{className:"text-center mt-6",children:e.jsxs("div",{className:"flex items-center justify-center text-sm text-gray-500",children:[e.jsx(Me,{className:"w-4 h-4 text-amber-500 mr-1"}),"Protected by industry-standard security measures"]})})]})})}function Xs({name:s,size:t=64,online:r=!1}){const o=(s||"").split(" ").map(a=>a?a[0]:"").join("").slice(0,2).toUpperCase();return e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:`flex items-center justify-center rounded-full bg-gradient-to-br from-blue-600 via-purple-600 to-indigo-600 text-white font-bold shadow-2xl ring-4 ring-white/20 hover:ring-white/40 transition-all duration-300 hover:scale-110 ${r?"ring-green-400":""}`,style:{width:t,height:t,fontSize:t*.25},children:o||"S"}),r&&e.jsx("div",{className:"absolute -bottom-1 -right-1 w-4 h-4 bg-green-400 border-2 border-white rounded-full animate-pulse"})]})}function Ks({stockist:s={},qrDataUrl:t,onPrint:r}){const o=a=>a?new Date(a).toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric"}):"DD/MM/YYYY";return e.jsxs("div",{className:"w-96 h-60 bg-white rounded-xl shadow-2xl border border-gray-300 overflow-hidden mx-auto print:shadow-none print:border-0",children:[e.jsxs("div",{className:"flex items-center justify-between px-4 py-2 bg-blue-800 text-white h-12",children:[e.jsx(Ee,{className:"h-6 w-auto filter invert"})," ",e.jsx("div",{className:"text-right"})]}),e.jsxs("div",{className:"flex p-4 h-[calc(100%-3rem)]",children:[e.jsxs("div",{className:"flex flex-col items-center w-1/3 pr-3 border-r border-gray-100",children:[e.jsx("div",{className:"flex-shrink-0 mb-2",children:s!=null&&s.profileImageUrl?e.jsx("img",{src:s==null?void 0:s.profileImageUrl,alt:`${(s==null?void 0:s.name)||"profile"} profile`,className:"w-24 h-24 rounded-full object-cover border-4 border-gray-200 shadow-md"}):e.jsx("div",{className:"w-24 h-24 bg-gray-300 rounded-full flex items-center justify-center border-4 border-gray-200",children:e.jsx(Xs,{name:(s==null?void 0:s.name)||"",size:60})})}),e.jsx("div",{className:"text-center w-full",children:e.jsx("p",{className:"text-xs font-semibold text-blue-800 uppercase leading-tight mt-1",children:(s==null?void 0:s.roleType)||(s==null?void 0:s.designation)||"DESIGNATION"})})]}),e.jsxs("div",{className:"flex flex-col w-2/3 pl-4",children:[e.jsx("h2",{className:"text-xl font-extrabold text-gray-900 truncate leading-tight",children:(s==null?void 0:s.contactPerson)||(s==null?void 0:s.name)||"Employee Name"}),e.jsxs("p",{className:"text-xs text-gray-500 mb-3",children:["ID: **",s!=null&&s._id?String(s._id).slice(-8):"00000000","**"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-x-4 gap-y-1 text-xs flex-grow",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-500",children:"Joined"}),e.jsx("div",{className:"font-semibold text-gray-900",children:o((s==null?void 0:s.createdAt)||(s==null?void 0:s.joinedDate))})]}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-500",children:"D.O.B"}),e.jsx("div",{className:"font-semibold text-gray-900",children:o(s==null?void 0:s.dob)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-500",children:"Phone"}),e.jsx("div",{className:"font-semibold text-gray-900",children:(s==null?void 0:s.phone)||(s==null?void 0:s.contactNo)||"000-000-123456"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-500",children:"Blood Group"}),e.jsx("div",{className:"font-semibold text-gray-900",children:(s==null?void 0:s.bloodGroup)||"-"})]})]}),e.jsxs("div",{className:"flex justify-between items-end mt-2 pt-2 border-t border-gray-100",children:[e.jsx("div",{className:"w-14 h-14 border border-gray-300 rounded-sm p-0.5",children:t?e.jsx("img",{src:t,alt:"QR Code",className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full bg-gray-100 rounded-sm"})}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"h-6 w-24 border-b border-gray-400 mb-1"}),e.jsx("p",{className:"text-[10px] text-gray-600",children:"Authorized Signature"})]})]})]})]}),e.jsx("div",{className:"mt-4 print:hidden p-4",children:e.jsx("button",{onClick:r,className:"w-full px-4 py-2 bg-gradient-to-r from-blue-700 to-blue-800 text-white rounded-lg shadow hover:from-blue-800 hover:to-blue-900 transition-all duration-200 font-medium",children:"Print Card"})})]})}const ms=({name:s,size:t=48,className:r=""})=>{const o=(s==null?void 0:s.split(" ").map(g=>g[0]).join("").toUpperCase().slice(0,2))||"?",a=["from-orange-400 to-pink-400","from-cyan-400 to-blue-400","from-purple-400 to-pink-400","from-green-400 to-cyan-400"],h=(s==null?void 0:s.charCodeAt(0))%a.length||0;return e.jsx("div",{className:`rounded-full bg-gradient-to-br ${a[h]} flex items-center justify-center text-white font-bold ${r}`,style:{width:t,height:t,fontSize:t/2.5},children:o})},Zs=()=>e.jsxs("div",{className:"animate-pulse space-y-6 p-6",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-200 rounded-full"}),e.jsxs("div",{className:"space-y-2 flex-1",children:[e.jsx("div",{className:"h-6 bg-gray-200 rounded-full w-48"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded-full w-32"})]})]}),e.jsx("div",{className:"h-48 bg-gray-200 rounded-3xl"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[...Array(3)].map((s,t)=>e.jsx("div",{className:"h-32 bg-gray-200 rounded-3xl"},t))})]}),et=({error:s,onRetry:t})=>e.jsxs("div",{className:"flex flex-col items-center justify-center p-8 bg-white rounded-3xl shadow-sm",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-red-50 flex items-center justify-center mb-4",children:e.jsx($e,{className:"w-8 h-8 text-red-500"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Something went wrong"}),e.jsx("p",{className:"text-gray-500 text-center mb-4 text-sm",children:s}),t&&e.jsx("button",{onClick:t,className:"px-6 py-2.5 bg-gradient-to-r from-cyan-400 to-blue-500 text-white rounded-full hover:shadow-lg transition-all text-sm font-medium",children:"Try Again"})]}),st=({company:s})=>{const t=()=>{s!=null&&s._id&&(window.location.href=`/company/${s._id}/products`)};return e.jsxs("div",{className:"bg-white rounded-3xl p-5 shadow-sm hover:shadow-md transition-all",children:[e.jsx("div",{className:"flex items-start justify-between mb-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-2xl bg-gradient-to-br from-orange-400 to-pink-400 flex items-center justify-center",children:e.jsx(he,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 text-sm",children:s.name}),e.jsxs("p",{className:"text-xs text-gray-500",children:[s.products??0," products"]})]})]})}),e.jsx("button",{onClick:t,className:"w-full py-2.5 bg-gradient-to-r from-cyan-400 to-blue-500 text-white rounded-full text-sm font-medium hover:shadow-md transition-all",children:s!=null&&s._id?"View Details":"No Details"})]})},tt=({medicine:s})=>e.jsxs("div",{className:"bg-white rounded-3xl p-5 shadow-sm hover:shadow-md transition-all",children:[e.jsx("div",{className:"flex items-start justify-between mb-3",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-2xl bg-gradient-to-br from-cyan-400 to-blue-500 flex items-center justify-center",children:e.jsx(le,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-gray-900 text-sm",children:s.name}),e.jsx("p",{className:"text-xs text-gray-500",children:s.company||""})]})]})}),e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("div",{className:"px-3 py-1.5 bg-orange-50 rounded-full",children:e.jsx("span",{className:"text-orange-600 font-bold text-sm",children:s.price||""})}),e.jsxs("span",{className:"text-xs text-gray-500",children:["Stock: ",s.stock??0]})]})]}),at=({staff:s})=>{const t=()=>{s!=null&&s._id&&(window.location.href=`/staff/${s._id}`)};return e.jsxs("div",{className:"bg-white rounded-3xl p-5 shadow-sm hover:shadow-md transition-all",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(ms,{name:s.fullName||s.name||"S",size:48}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-gray-900 text-sm",children:s.fullName||s.name}),e.jsx("p",{className:"text-xs text-gray-500",children:s.role})]})]}),e.jsx("div",{className:"text-xs text-gray-600 mb-3",children:s.phone||""}),e.jsx("button",{onClick:t,className:"w-full py-2.5 bg-gradient-to-r from-orange-400 to-yellow-500 text-white rounded-full text-sm font-medium hover:shadow-md transition-all",children:"View Profile"})]})},Fe=({icon:s,label:t,value:r,gradient:o})=>e.jsxs("div",{className:"bg-white rounded-3xl p-6 shadow-sm",children:[e.jsx("div",{className:`w-12 h-12 rounded-2xl bg-gradient-to-br ${o} flex items-center justify-center mb-3`,children:e.jsx(s,{className:"w-6 h-6 text-white"})}),e.jsx("div",{className:"text-2xl font-bold text-gray-900 mb-1",children:r}),e.jsx("div",{className:"text-sm text-gray-500",children:t})]});function rt(){const[s,t]=l.useState(null),[r,o]=l.useState([]),[a,h]=l.useState([]),[g,k]=l.useState([]),[m,c]=l.useState(!1),[j,d]=l.useState(""),[f,P]=l.useState("medicines"),[i,p]=l.useState(""),[M,z]=l.useState(!1),[v,u]=l.useState(!1),[b,x]=l.useState({}),C=l.useMemo(()=>({companies:r.length,medicines:a.length,staff:g.length}),[r.length,a.length,g.length]),D=l.useCallback((I,T=["name"])=>{if(!i)return I||[];const Q=i.trim().toLowerCase();return(I||[]).filter(U=>T.some(Z=>String((U==null?void 0:U[Z])||"").toLowerCase().includes(Q)))},[i]),S=l.useMemo(()=>({companies:D(r,["name"]),medicines:D(a,["name"]),staff:D(g,["fullName","name"])}),[r,a,g,D]);l.useEffect(()=>{let I=!0;const T=async U=>{try{return U?U.ok?await U.json():{ok:!1,status:U.status,body:await U.text()}:null}catch{return null}},Q=U=>U?Array.isArray(U)?U:U.data&&Array.isArray(U.data)?U.data:U.items&&Array.isArray(U.items)?U.items:U.payload&&Array.isArray(U.payload)?U.payload:U.stockists&&Array.isArray(U.stockists)?U.stockists:U._id||U.id||U.name?[U]:null:null;return(async()=>{c(!0),d("");try{let U=null;try{U=localStorage.getItem("token")}catch{}const Z=U?{Authorization:`Bearer ${U}`}:{};let V=null;if(U){const E=await fetch(G("/api/auth/me"),{headers:Z,cache:"no-store"});V=await T(E)}const[X,N,R,_]=await Promise.all([fetch(G("/api/stockist"),{headers:Z,cache:"no-store"}),fetch(G("/api/company"),{headers:Z,cache:"no-store"}),fetch(G("/api/medicine"),{headers:Z,cache:"no-store"}),fetch(G("/api/staff"),{headers:Z,cache:"no-store"})]),[A,L,y,q]=await Promise.all([T(X),T(N),T(R),T(_)]);if(!I)return;if(x({me:V,jStockist:A,jCompanies:L,jMedicines:y,jStaff:q}),[X,N,R,_].some(E=>E&&E.status===401)&&d("Some data requires authentication. Please login to see protected content."),V&&V.success&&V.user)t(V.user);else{const E=Q(A)||[];t(E[0]||null)}o(Q(L)||[]),h(Q(y)||[]),k(Q(q)||[])}catch(U){console.error("Stockist fetch error:",U),I&&d("Failed to load data. Check your API or network.")}finally{I&&c(!1)}})(),()=>{I=!1}},[]);const O=async()=>{z(!0),setTimeout(()=>z(!1),1e3),window.location.reload()},Y=(()=>{try{if(!s||!s._id)return null;const I=`${window.location.origin}/stockist/${s._id}`;return`https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=${encodeURIComponent(I)}`}catch{return null}})(),H=[{key:"medicines",label:"Medicines",icon:le,gradient:"from-cyan-400 to-blue-500"},{key:"companies",label:"Companies",icon:he,gradient:"from-orange-400 to-pink-400"},{key:"staff",label:"Staff",icon:pe,gradient:"from-purple-400 to-pink-400"}],W=()=>{const I=S[f];return!I||I.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center p-12 bg-gray-50 rounded-3xl",children:[e.jsxs("div",{className:"w-16 h-16 bg-white rounded-full flex items-center justify-center mb-4 shadow-sm",children:[f==="companies"&&e.jsx(he,{className:"w-8 h-8 text-gray-300"}),f==="medicines"&&e.jsx(le,{className:"w-8 h-8 text-gray-300"}),f==="staff"&&e.jsx(pe,{className:"w-8 h-8 text-gray-300"})]}),e.jsxs("h3",{className:"text-base font-semibold text-gray-900 mb-2",children:["No ",f," found"]}),e.jsx("p",{className:"text-gray-500 text-center text-sm",children:i?`No ${f} match your search.`:`No ${f} available yet.`})]}):e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4",children:[f==="companies"&&I.map(T=>e.jsx(st,{company:T},T._id||T.id||T.name)),f==="medicines"&&I.map(T=>e.jsx(tt,{medicine:T},T._id||T.id||T.name)),f==="staff"&&I.map(T=>e.jsx(at,{staff:T},T._id||T.id||T.fullName))]})};return m?e.jsx("div",{className:"min-h-screen p-4 lg:p-6 bg-gradient-to-b from-gray-50 to-white",children:e.jsx("div",{className:"max-w-7xl mx-auto",children:e.jsx(Zs,{})})}):j?e.jsx("div",{className:"min-h-screen p-4 lg:p-6 bg-gradient-to-b from-gray-50 to-white flex items-center justify-center",children:e.jsx("div",{className:"max-w-md w-full",children:e.jsx(et,{error:j,onRetry:O})})}):e.jsx("div",{className:"min-h-screen p-4 lg:p-6 bg-gradient-to-b from-gray-50 to-white",children:e.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-3xl shadow-sm p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsx("button",{className:"w-10 h-10 rounded-full bg-gray-100 flex items-center justify-center hover:bg-gray-200 transition-colors",children:e.jsx(ke,{className:"w-5 h-5 text-gray-600"})})}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(ms,{name:(s==null?void 0:s.name)||"Stockist",size:64,className:"shadow-md"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-1",children:(s==null?void 0:s.name)||"Unnamed Stockist"}),e.jsx("p",{className:"text-sm text-gray-500",children:(s==null?void 0:s.email)||"â€”"}),(s==null?void 0:s.location)&&e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:s.location})]})]})]}),e.jsx(Ks,{stockist:s,qrDataUrl:Y,onPrint:()=>window.print()}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(Fe,{icon:he,label:"Companies",value:C.companies,gradient:"from-orange-400 to-pink-400"}),e.jsx(Fe,{icon:le,label:"Medicines",value:C.medicines,gradient:"from-cyan-400 to-blue-500"}),e.jsx(Fe,{icon:pe,label:"Staff Members",value:C.staff,gradient:"from-purple-400 to-pink-400"})]}),e.jsxs("div",{className:"bg-white rounded-3xl shadow-sm",children:[e.jsx("div",{className:"p-6 border-b border-gray-100",children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center justify-between gap-4",children:[e.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2",children:H.map(({key:I,label:T,icon:Q,gradient:U})=>e.jsxs("button",{onClick:()=>P(I),className:`flex items-center gap-2 px-4 py-2 rounded-full font-medium transition-all whitespace-nowrap text-sm ${f===I?`bg-gradient-to-r ${U} text-white shadow-md`:"text-gray-600 bg-gray-100 hover:bg-gray-200"}`,children:[e.jsx(Q,{size:16}),e.jsx("span",{children:T}),e.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full ${f===I?"bg-white/30":"bg-white"}`,children:S[I].length})]},I))}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"relative flex-1 lg:flex-none",children:[e.jsx(os,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:16}),e.jsx("input",{type:"text",placeholder:`Search ${f}...`,value:i,onChange:I=>p(I.target.value),className:"pl-10 pr-4 py-2.5 border border-gray-200 bg-gray-50 rounded-full focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 outline-none transition-all w-full lg:w-64 text-sm"})]}),e.jsx("button",{onClick:O,className:"w-10 h-10 rounded-full bg-gray-100 flex items-center justify-center hover:bg-gray-200 transition-colors",children:e.jsx(Ns,{size:18,className:`text-gray-600 ${M?"animate-spin":""}`})})]})]})}),e.jsx("div",{className:"p-6",children:W()})]}),e.jsxs("div",{className:"px-2",children:[e.jsxs("button",{onClick:()=>u(I=>!I),className:"text-sm text-gray-500 underline",children:[v?"Hide":"Show"," debug responses"]}),v&&e.jsx("pre",{className:"mt-4 p-4 bg-white rounded-2xl border overflow-auto text-xs max-h-64",children:JSON.stringify(b,null,2)})]})]})})}function lt(){const[s]=ds(),t=te(),r=s.get("id"),[o,a]=l.useState(""),[h,g]=l.useState(!1),[k,m]=l.useState(""),[c,j]=l.useState(null),d=async f=>{f&&f.preventDefault(),g(!0),m("");try{const P=await fetch(G("/api/stockist/verify-password"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:r,password:o})}),i=await P.json().catch(()=>({}));if(!P.ok)throw new Error(i.message||"Invalid");j(i.data)}catch(P){m(String(P.message||P))}finally{g(!1)}};if(c){const f=c.address||{};return e.jsx("div",{className:"min-h-screen p-6 bg-slate-50 flex items-center justify-center",children:e.jsxs("div",{className:"bg-white rounded-xl shadow p-6 w-full max-w-md",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("img",{src:c.profileImageUrl||"/vite.svg",alt:"profile",className:"w-20 h-20 rounded-full object-cover"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold",children:c.name}),e.jsx("div",{className:"text-sm text-gray-600",children:c.roleType}),e.jsx("div",{className:"text-sm text-gray-600",children:c.firmName})]})]}),e.jsxs("div",{className:"mt-4 grid grid-cols-1 gap-2",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Address:"})," ",f.street||""," ",f.city||""," ",f.state||""," ",f.pincode||""]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Blood Group:"})," ",c.bloodGroup||"N/A"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"CNTX Number:"})," ",c.cntxNumber||"N/A"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Phone:"})," ",c.phone||"N/A"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Email:"})," ",c.email||"N/A"]})]}),e.jsx("div",{className:"mt-6 flex gap-2",children:e.jsx("button",{className:"px-4 py-2 bg-blue-600 text-white rounded",onClick:()=>t(-1),children:"Close"})})]})})}return e.jsx("div",{className:"min-h-screen p-6 bg-slate-50 flex items-center justify-center",children:e.jsxs("form",{onSubmit:d,className:"bg-white rounded-xl shadow p-6 w-full max-w-md",children:[e.jsx("h2",{className:"text-lg font-bold mb-2",children:"Verify to view details"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Enter stockist password to view full details."}),e.jsx("input",{type:"password",value:o,onChange:f=>a(f.target.value),placeholder:"Stockist password",className:"w-full rounded-xl border px-4 py-3 mb-3"}),k&&e.jsx("div",{className:"text-red-500 mb-2",children:k}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{type:"submit",disabled:h,className:"px-4 py-2 bg-blue-600 text-white rounded",children:h?"Verifying...":"Verify"}),e.jsx("button",{type:"button",onClick:()=>t(-1),className:"px-4 py-2 border rounded",children:"Cancel"})]})]})})}function nt(){const[s,t]=l.useState(""),[r,o]=l.useState(null),[a,h]=l.useState(!1),g=te(),k=async m=>{if(m&&m.preventDefault(),!s)return o({ok:!1,msg:"Please enter a valid email."});h(!0),o(null);try{const c=await fetch(G("/api/auth/forgot-password"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:s})}),j=await c.json().catch(()=>({}));if(c.ok){const d=(j==null?void 0:j.message)||"If an account exists, a reset email has been sent.",f=(j==null?void 0:j.debug)||null;o({ok:!0,msg:d,debug:f})}else{const d=(j==null?void 0:j.message)||"Something went wrong. Please try again.";o({ok:!1,msg:d})}}catch{o({ok:!1,msg:"Network error. Please try again."})}finally{h(!1)}};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-teal-50 via-cyan-50 to-blue-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"w-full max-w-md",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-gradient-to-br from-teal-500 to-cyan-600 rounded-2xl mb-4 shadow-lg",children:e.jsx(Me,{className:"w-8 h-8 text-white"})}),e.jsx("h1",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Forgot Password?"}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Don't worry â€” we'll help you reset it."})]}),e.jsxs("div",{className:"bg-white rounded-3xl shadow-xl p-8 backdrop-blur-sm border border-white/50",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-2",children:"Reset Your Password"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Enter your email address and we'll send you a secure link to reset your password."})]}),e.jsxs("form",{onSubmit:k,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Email Address"}),e.jsxs("div",{className:"relative",children:[e.jsx(ze,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"email",value:s,onChange:m=>t(m.target.value),placeholder:"Enter your email address",className:"w-full pl-12 pr-4 py-4 border border-gray-200 rounded-2xl focus:ring-2 focus:ring-teal-500 focus:border-transparent transition-all duration-200 text-gray-800 placeholder-gray-400"})]})]}),e.jsx("button",{type:"submit",disabled:a||!s,className:"w-full bg-gradient-to-r from-teal-500 to-cyan-600 hover:from-teal-600 hover:to-cyan-700 disabled:from-gray-300 disabled:to-gray-400 text-white font-semibold py-4 rounded-2xl transition-all duration-200 transform hover:scale-[1.02] disabled:scale-100 shadow-lg disabled:shadow-none",children:a?e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),e.jsx("span",{children:"Sending Reset Link..."})]}):"Send Reset Link"}),r&&e.jsxs("div",{className:`flex items-start space-x-3 p-4 rounded-2xl ${r.ok?"bg-emerald-50 border border-emerald-200":"bg-red-50 border border-red-200"}`,children:[r.ok?e.jsx(Ie,{className:"w-5 h-5 text-emerald-600 mt-0.5 flex-shrink-0"}):e.jsx($e,{className:"w-5 h-5 text-red-600 mt-0.5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:`text-sm ${r.ok?"text-emerald-800":"text-red-800"}`,children:r.msg}),r.debug&&e.jsxs("div",{className:"mt-2 text-sm",children:[r.debug.resetUrl&&e.jsx("p",{children:e.jsx("a",{href:r.debug.resetUrl,className:"text-teal-600 hover:underline",target:"_blank",rel:"noreferrer",children:"Open reset link"})}),r.debug.previewUrl&&e.jsx("p",{children:e.jsx("a",{href:r.debug.previewUrl,className:"text-teal-600 hover:underline",target:"_blank",rel:"noreferrer",children:"Open mail preview"})})]})]})]}),e.jsx("div",{className:"text-center pt-4 border-t border-gray-100",children:e.jsxs("button",{type:"button",onClick:()=>g("/login"),className:"inline-flex items-center space-x-2 text-sm text-gray-600 hover:text-teal-600 transition-colors duration-200",children:[e.jsx(ke,{className:"w-4 h-4"}),e.jsx("span",{children:"Back to Login"})]})})]})]}),e.jsx("div",{className:"text-center mt-6",children:e.jsx("p",{className:"text-xs text-gray-500",children:"Need help? Contact our support team"})})]})})}function it(){const[s]=ds(),t=te(),r=s.get("token")||"",o=s.get("email")||"",[a,h]=l.useState(""),[g,k]=l.useState(""),[m,c]=l.useState(!1),[j,d]=l.useState(null),[f,P]=l.useState(!1),[i,p]=l.useState(0),[M,z]=l.useState([]);l.useEffect(()=>{const x=[];let C=0;a.length>=8?C+=25:a.length>0&&x.push("At least 8 characters"),/[A-Z]/.test(a)?C+=25:a.length>0&&x.push("One uppercase letter"),/[a-z]/.test(a)?C+=25:a.length>0&&x.push("One lowercase letter"),/[0-9]/.test(a)?C+=25:a.length>0&&x.push("One number"),p(C),z(x)},[a]);const v=async()=>{if(i<100)return d({ok:!1,msg:"Please meet all password requirements"});if(!r||!o)return d({ok:!1,msg:"Missing reset token or email. Use the link from your email."});if(a!==g)return d({ok:!1,msg:"Passwords do not match."});P(!0),d(null);try{const x=await fetch(G("/api/auth/reset-password"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:r,email:o,newPassword:a})}),C=await x.json().catch(()=>({}));x.ok?(d({ok:!0,msg:(C==null?void 0:C.message)||"Password updated successfully. Redirecting to login..."}),setTimeout(()=>t("/login"),1500)):d({ok:!1,msg:(C==null?void 0:C.message)||"Failed to reset password"})}catch{d({ok:!1,msg:"Network error. Please try again."})}finally{P(!1)}},u=()=>i>=75?"bg-emerald-500":i>=50?"bg-yellow-500":i>=25?"bg-orange-500":"bg-red-500",b=()=>i>=75?"Strong":i>=50?"Good":i>=25?"Fair":"Weak";return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-teal-50 via-cyan-50 to-blue-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"w-full max-w-md",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-gradient-to-br from-teal-500 to-cyan-600 rounded-2xl mb-4 shadow-lg",children:e.jsx(Me,{className:"w-8 h-8 text-white"})}),e.jsx("h1",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Reset Password"}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Create a new secure password"})]}),e.jsxs("div",{className:"bg-white rounded-3xl shadow-xl p-8 backdrop-blur-sm border border-white/50",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-2",children:"Set New Password"}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Creating a new password for ",e.jsx("span",{className:"font-medium text-teal-600",children:o})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"New Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(qe,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:m?"text":"password",value:a,onChange:x=>h(x.target.value),placeholder:"Enter your new password",className:"w-full pl-12 pr-12 py-4 border border-gray-200 rounded-2xl focus:ring-2 focus:ring-teal-500 focus:border-transparent transition-all duration-200 text-gray-800 placeholder-gray-400"}),e.jsx("button",{type:"button",onClick:()=>c(!m),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:m?e.jsx(We,{className:"w-5 h-5"}):e.jsx(Ue,{className:"w-5 h-5"})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Confirm Password"}),e.jsx("div",{className:"relative",children:e.jsx("input",{type:m?"text":"password",value:g,onChange:x=>k(x.target.value),placeholder:"Re-enter new password",className:"w-full pl-4 pr-12 py-4 border border-gray-200 rounded-2xl focus:ring-2 focus:ring-teal-500 focus:border-transparent transition-all duration-200 text-gray-800 placeholder-gray-400"})})]}),a&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Password Strength"}),e.jsx("span",{className:`text-sm font-medium ${i>=75?"text-emerald-600":i>=50?"text-yellow-600":i>=25?"text-orange-600":"text-red-600"}`,children:b()})]}),e.jsx("div",{className:"h-2 bg-gray-200 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full ${u()} transition-all duration-300`,style:{width:`${i}%`}})}),e.jsx("div",{className:"space-y-2",children:[{text:"At least 8 characters",met:a.length>=8},{text:"One uppercase letter",met:/[A-Z]/.test(a)},{text:"One lowercase letter",met:/[a-z]/.test(a)},{text:"One number",met:/[0-9]/.test(a)}].map((x,C)=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:`w-4 h-4 rounded-full flex items-center justify-center ${x.met?"bg-emerald-100":"bg-gray-100"}`,children:x.met&&e.jsx(vs,{className:"w-3 h-3 text-emerald-600"})}),e.jsx("span",{className:`text-xs ${x.met?"text-emerald-600":"text-gray-500"}`,children:x.text})]},C))})]}),e.jsx("button",{onClick:v,disabled:f||i<100,className:"w-full bg-gradient-to-r from-teal-500 to-cyan-600 hover:from-teal-600 hover:to-cyan-700 disabled:from-gray-300 disabled:to-gray-400 text-white font-semibold py-4 rounded-2xl transition-all duration-200 transform hover:scale-[1.02] disabled:scale-100 shadow-lg disabled:shadow-none",children:f?e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),e.jsx("span",{children:"Resetting Password..."})]}):"Reset Password"}),j&&e.jsxs("div",{className:`flex items-start space-x-3 p-4 rounded-2xl ${j.ok?"bg-emerald-50 border border-emerald-200":"bg-red-50 border border-red-200"}`,children:[j.ok?e.jsx(Ie,{className:"w-5 h-5 text-emerald-600 mt-0.5 flex-shrink-0"}):e.jsx($e,{className:"w-5 h-5 text-red-600 mt-0.5 flex-shrink-0"}),e.jsx("p",{className:`text-sm ${j.ok?"text-emerald-800":"text-red-800"}`,children:j.msg})]})]})]}),e.jsx("div",{className:"bg-white/50 backdrop-blur-sm rounded-2xl p-4 mt-6 border border-white/50",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(Me,{className:"w-5 h-5 text-teal-600 mt-0.5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-800 mb-1",children:"Security Tip"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Use a unique password that you haven't used elsewhere. Consider using a password manager to generate and store secure passwords."})]})]})})]})})}const ot=()=>e.jsx("div",{className:"",children:e.jsxs(ys,{children:[e.jsx(ee,{path:"/",element:e.jsx(As,{})}),e.jsx(ee,{path:"/dashboard",element:e.jsx(Ms,{})}),e.jsx(ee,{path:"/login",element:e.jsx(zs,{})}),e.jsx(ee,{path:"/forgot-password",element:e.jsx(nt,{})}),e.jsx(ee,{path:"/reset-password",element:e.jsx(it,{})}),e.jsx(ee,{path:"/signup",element:e.jsx(Is,{})}),e.jsx(ee,{path:"/CompanyResult",element:e.jsx($s,{})}),e.jsx(ee,{path:"/company/:id/products",element:e.jsx(Es,{})}),e.jsx(ee,{path:"/MedicineRes",element:e.jsx(Bs,{})}),e.jsx(ee,{path:"/profile",element:e.jsx(Ds,{})}),e.jsx(ee,{path:"/adminpanel",element:e.jsx(Rs,{})}),e.jsx(ee,{path:"/adminCreateStockist",element:e.jsx(Ts,{})}),e.jsx(ee,{path:"/stockist-login",element:e.jsx(Ys,{})}),e.jsx(ee,{path:"/stockist-outcode",element:e.jsx(rt,{})}),e.jsx(ee,{path:"/stockist-card",element:e.jsx(lt,{})}),e.jsx(ee,{path:"/adminCreateCompany",element:e.jsx(_s,{})}),e.jsx(ee,{path:"/adminCreateMedicine",element:e.jsx(Fs,{})}),e.jsx(ee,{path:"/adminCreateStaff",element:e.jsx(Js,{})}),e.jsx(ee,{path:"/staffs",element:e.jsx(Vs,{})}),e.jsx(ee,{path:"/staff/:id",element:e.jsx(Gs,{})}),e.jsx(ee,{path:"/purchaser",element:e.jsx(qs,{})}),e.jsx(ee,{path:"/purchaser/:id",element:e.jsx(Ws,{})}),e.jsx(ee,{path:"/demand",element:e.jsx(Qs,{})})]})});ws.createRoot(document.getElementById("root")).render(e.jsx(ks,{children:e.jsx(ot,{})}));
